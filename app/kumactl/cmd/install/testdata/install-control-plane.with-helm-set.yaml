
---
apiVersion: v1
kind: Namespace
metadata:
  name: kuma-system
  labels:
    kuma.io/system-namespace: "true"
---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: kuma-control-plane
  namespace: kuma-system
  labels: 
    app: kuma-control-plane
    app.kubernetes.io/name: kuma
    app.kubernetes.io/instance: kuma
---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: kuma-egress
  namespace: kuma-system
  labels: 
    app: kuma-egress
    app.kubernetes.io/name: kuma
    app.kubernetes.io/instance: kuma
---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: kuma-ingress
  namespace: kuma-system
  labels: 
    app: kuma-ingress
    app.kubernetes.io/name: kuma
    app.kubernetes.io/instance: kuma
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: kuma-control-plane-config
  namespace: kuma-system
  labels: 
    app: kuma-control-plane
    app.kubernetes.io/name: kuma
    app.kubernetes.io/instance: kuma
data:
  config.yaml: |
    # use this file to override default configuration of `kuma-cp`
    #
    # see conf/kuma-cp.conf.yml for available settings
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.10.0
  creationTimestamp: null
  name: circuitbreakers.kuma.io
spec:
  group: kuma.io
  names:
    categories:
    - kuma
    kind: CircuitBreaker
    listKind: CircuitBreakerList
    plural: circuitbreakers
    singular: circuitbreaker
  scope: Cluster
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          mesh:
            description: Mesh is the name of the Kuma mesh this resource belongs to.
              It may be omitted for cluster-scoped resources.
            type: string
          metadata:
            type: object
          spec:
            description: Spec is the specification of the Kuma CircuitBreaker resource.
            x-kubernetes-preserve-unknown-fields: true
        type: object
    served: true
    storage: true
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.10.0
  creationTimestamp: null
  name: containerpatches.kuma.io
spec:
  group: kuma.io
  names:
    categories:
    - kuma
    kind: ContainerPatch
    listKind: ContainerPatchList
    plural: containerpatches
    singular: containerpatch
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        description: ContainerPatch stores a list of patches to apply to init and
          sidecar containers.
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          mesh:
            type: string
          metadata:
            type: object
          spec:
            description: ContainerPatchSpec specifies the options available for a
              ContainerPatch
            properties:
              initPatch:
                description: InitPatch specifies jsonpatch to apply to an init container.
                items:
                  description: JsonPatchBlock is one json patch operation block.
                  properties:
                    from:
                      description: From is a jsonpatch from string, used by move and
                        copy operations.
                      type: string
                    op:
                      description: Op is a jsonpatch operation string.
                      enum:
                      - add
                      - remove
                      - replace
                      - move
                      - copy
                      type: string
                    path:
                      description: Path is a jsonpatch path string.
                      type: string
                    value:
                      description: Value must be a string representing a valid json
                        object used by replace and add operations. String has to be
                        escaped with " to be valid a json object.
                      type: string
                  required:
                  - op
                  - path
                  type: object
                type: array
              sidecarPatch:
                description: SidecarPatch specifies jsonpatch to apply to a sidecar
                  container.
                items:
                  description: JsonPatchBlock is one json patch operation block.
                  properties:
                    from:
                      description: From is a jsonpatch from string, used by move and
                        copy operations.
                      type: string
                    op:
                      description: Op is a jsonpatch operation string.
                      enum:
                      - add
                      - remove
                      - replace
                      - move
                      - copy
                      type: string
                    path:
                      description: Path is a jsonpatch path string.
                      type: string
                    value:
                      description: Value must be a string representing a valid json
                        object used by replace and add operations. String has to be
                        escaped with " to be valid a json object.
                      type: string
                  required:
                  - op
                  - path
                  type: object
                type: array
            type: object
        type: object
    served: true
    storage: true
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.10.0
  creationTimestamp: null
  name: meshgatewayinstances.kuma.io
spec:
  group: kuma.io
  names:
    categories:
    - kuma
    kind: MeshGatewayInstance
    listKind: MeshGatewayInstanceList
    plural: meshgatewayinstances
    singular: meshgatewayinstance
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        description: MeshGatewayInstance represents a managed instance of a dataplane
          proxy for a Kuma Gateway.
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: MeshGatewayInstanceSpec specifies the options available for
              a GatewayDataplane.
            properties:
              replicas:
                default: 1
                description: Replicas is the number of dataplane proxy replicas to
                  create. For now this is a fixed number, but in the future it could
                  be automatically scaled based on metrics.
                format: int32
                minimum: 1
                type: integer
              resources:
                description: Resources specifies the compute resources for the proxy
                  container. The default can be set in the control plane config.
                properties:
                  limits:
                    additionalProperties:
                      anyOf:
                      - type: integer
                      - type: string
                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                      x-kubernetes-int-or-string: true
                    description: 'Limits describes the maximum amount of compute resources
                      allowed. More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/'
                    type: object
                  requests:
                    additionalProperties:
                      anyOf:
                      - type: integer
                      - type: string
                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                      x-kubernetes-int-or-string: true
                    description: 'Requests describes the minimum amount of compute
                      resources required. If Requests is omitted for a container,
                      it defaults to Limits if that is explicitly specified, otherwise
                      to an implementation-defined value. More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/'
                    type: object
                type: object
              serviceTemplate:
                description: ServiceTemplate configures the Service owned by this
                  config.
                properties:
                  metadata:
                    description: Metadata holds metadata configuration for a Service.
                    properties:
                      annotations:
                        additionalProperties:
                          type: string
                        description: Annotations holds annotations to be set on a
                          Service.
                        type: object
                    type: object
                  spec:
                    description: Spec holds some customizable fields of a Service.
                    properties:
                      loadBalancerIP:
                        description: LoadBalancerIP corresponds to ServiceSpec.LoadBalancerIP.
                        type: string
                    type: object
                type: object
              serviceType:
                default: LoadBalancer
                description: ServiceType specifies the type of managed Service that
                  will be created to expose the dataplane proxies to traffic from
                  outside the cluster. The ports to expose will be taken from the
                  matching Gateway resource. If there is no matching Gateway, the
                  managed Service will be deleted.
                enum:
                - LoadBalancer
                - ClusterIP
                - NodePort
                type: string
              tags:
                additionalProperties:
                  type: string
                description: Tags specifies the Kuma tags that are propagated to the
                  managed dataplane proxies. These tags should include exactly one
                  `kuma.io/service` tag, and should match exactly one Gateway resource.
                type: object
            type: object
          status:
            description: MeshGatewayInstanceStatus holds information about the status
              of the gateway instance.
            properties:
              conditions:
                description: Conditions is an array of gateway instance conditions.
                items:
                  description: "Condition contains details for one aspect of the current
                    state of this API Resource. --- This struct is intended for direct
                    use as an array at the field path .status.conditions.  For example,
                    \n type FooStatus struct{ // Represents the observations of a
                    foo's current state. // Known .status.conditions.type are: \"Available\",
                    \"Progressing\", and \"Degraded\" // +patchMergeKey=type // +patchStrategy=merge
                    // +listType=map // +listMapKey=type Conditions []metav1.Condition
                    `json:\"conditions,omitempty\" patchStrategy:\"merge\" patchMergeKey:\"type\"
                    protobuf:\"bytes,1,rep,name=conditions\"` \n // other fields }"
                  properties:
                    lastTransitionTime:
                      description: lastTransitionTime is the last time the condition
                        transitioned from one status to another. This should be when
                        the underlying condition changed.  If that is not known, then
                        using the time when the API field changed is acceptable.
                      format: date-time
                      type: string
                    message:
                      description: message is a human readable message indicating
                        details about the transition. This may be an empty string.
                      maxLength: 32768
                      type: string
                    observedGeneration:
                      description: observedGeneration represents the .metadata.generation
                        that the condition was set based upon. For instance, if .metadata.generation
                        is currently 12, but the .status.conditions[x].observedGeneration
                        is 9, the condition is out of date with respect to the current
                        state of the instance.
                      format: int64
                      minimum: 0
                      type: integer
                    reason:
                      description: reason contains a programmatic identifier indicating
                        the reason for the condition's last transition. Producers
                        of specific condition types may define expected values and
                        meanings for this field, and whether the values are considered
                        a guaranteed API. The value should be a CamelCase string.
                        This field may not be empty.
                      maxLength: 1024
                      minLength: 1
                      pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                      type: string
                    status:
                      description: status of the condition, one of True, False, Unknown.
                      enum:
                      - "True"
                      - "False"
                      - Unknown
                      type: string
                    type:
                      description: type of condition in CamelCase or in foo.example.com/CamelCase.
                        --- Many .condition.type values are consistent across resources
                        like Available, but because arbitrary conditions can be useful
                        (see .node.status.conditions), the ability to deconflict is
                        important. The regex it matches is (dns1123SubdomainFmt/)?(qualifiedNameFmt)
                      maxLength: 316
                      pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                      type: string
                  required:
                  - lastTransitionTime
                  - message
                  - reason
                  - status
                  - type
                  type: object
                type: array
                x-kubernetes-list-map-keys:
                - type
                x-kubernetes-list-type: map
              loadBalancer:
                description: LoadBalancer contains the current status of the load-balancer,
                  if one is present.
                properties:
                  ingress:
                    description: Ingress is a list containing ingress points for the
                      load-balancer. Traffic intended for the service should be sent
                      to these ingress points.
                    items:
                      description: 'LoadBalancerIngress represents the status of a
                        load-balancer ingress point: traffic intended for the service
                        should be sent to an ingress point.'
                      properties:
                        hostname:
                          description: Hostname is set for load-balancer ingress points
                            that are DNS based (typically AWS load-balancers)
                          type: string
                        ip:
                          description: IP is set for load-balancer ingress points
                            that are IP based (typically GCE or OpenStack load-balancers)
                          type: string
                        ports:
                          description: Ports is a list of records of service ports
                            If used, every port defined in the service should have
                            an entry in it
                          items:
                            properties:
                              error:
                                description: 'Error is to record the problem with
                                  the service port The format of the error shall comply
                                  with the following rules: - built-in error values
                                  shall be specified in this file and those shall
                                  use CamelCase names - cloud provider specific error
                                  values must have names that comply with the format
                                  foo.example.com/CamelCase. --- The regex it matches
                                  is (dns1123SubdomainFmt/)?(qualifiedNameFmt)'
                                maxLength: 316
                                pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                                type: string
                              port:
                                description: Port is the port number of the service
                                  port of which status is recorded here
                                format: int32
                                type: integer
                              protocol:
                                default: TCP
                                description: 'Protocol is the protocol of the service
                                  port of which status is recorded here The supported
                                  values are: "TCP", "UDP", "SCTP"'
                                type: string
                            required:
                            - port
                            - protocol
                            type: object
                          type: array
                          x-kubernetes-list-type: atomic
                      type: object
                    type: array
                type: object
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.10.0
  creationTimestamp: null
  name: meshgatewayroutes.kuma.io
spec:
  group: kuma.io
  names:
    categories:
    - kuma
    kind: MeshGatewayRoute
    listKind: MeshGatewayRouteList
    plural: meshgatewayroutes
    singular: meshgatewayroute
  scope: Cluster
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          mesh:
            description: Mesh is the name of the Kuma mesh this resource belongs to.
              It may be omitted for cluster-scoped resources.
            type: string
          metadata:
            type: object
          spec:
            description: Spec is the specification of the Kuma MeshGatewayRoute resource.
            x-kubernetes-preserve-unknown-fields: true
        type: object
    served: true
    storage: true
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.10.0
  creationTimestamp: null
  name: meshgateways.kuma.io
spec:
  group: kuma.io
  names:
    categories:
    - kuma
    kind: MeshGateway
    listKind: MeshGatewayList
    plural: meshgateways
    singular: meshgateway
  scope: Cluster
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          mesh:
            description: Mesh is the name of the Kuma mesh this resource belongs to.
              It may be omitted for cluster-scoped resources.
            type: string
          metadata:
            type: object
          spec:
            description: Spec is the specification of the Kuma MeshGateway resource.
            x-kubernetes-preserve-unknown-fields: true
        type: object
    served: true
    storage: true
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.10.0
  creationTimestamp: null
  name: meshhealthchecks.kuma.io
spec:
  group: kuma.io
  names:
    categories:
    - kuma
    kind: MeshHealthCheck
    listKind: MeshHealthCheckList
    plural: meshhealthchecks
    singular: meshhealthcheck
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: Spec is the specification of the Kuma MeshHealthCheck resource.
            properties:
              targetRef:
                description: TargetRef is a reference to the resource the policy takes
                  an effect on. The resource could be either a real store object or
                  virtual resource defined inplace.
                properties:
                  kind:
                    description: Kind of the referenced resource
                    enum:
                    - Mesh
                    - MeshSubset
                    - MeshService
                    - MeshServiceSubset
                    - MeshGatewayRoute
                    type: string
                  mesh:
                    description: Mesh is reserved for future use to identify cross
                      mesh resources.
                    type: string
                  name:
                    description: 'Name of the referenced resource. Can only be used
                      with kinds: `MeshService`, `MeshServiceSubset` and `MeshGatewayRoute`'
                    type: string
                  tags:
                    additionalProperties:
                      type: string
                    description: Tags used to select a subset of proxies by tags.
                      Can only be used with kinds `MeshSubset` and `MeshServiceSubset`
                    type: object
                type: object
              to:
                description: To list makes a match between the consumed services and
                  corresponding configurations
                items:
                  properties:
                    default:
                      description: Default is a configuration specific to the group
                        of destinations referenced in 'targetRef'
                      properties:
                        alwaysLogHealthCheckFailures:
                          description: If set to true, health check failure events
                            will always be logged. If set to false, only the initial
                            health check failure event will be logged. The default
                            value is false.
                          type: boolean
                        eventLogPath:
                          description: Specifies the path to the file where Envoy
                            can log health check events. If empty, no event log will
                            be written.
                          type: string
                        failTrafficOnPanic:
                          description: If set to true, Envoy will not consider any
                            hosts when the cluster is in 'panic mode'. Instead, the
                            cluster will fail all requests as if all hosts are unhealthy.
                            This can help avoid potentially overwhelming a failing
                            service.
                          type: boolean
                        grpc:
                          description: GrpcHealthCheck defines gRPC configuration
                            which will instruct the service the health check will
                            be made for is a gRPC service.
                          properties:
                            authority:
                              description: The value of the :authority header in the
                                gRPC health check request, by default name of the
                                cluster this health check is associated with
                              type: string
                            disabled:
                              description: If true the GrpcHealthCheck is disabled
                              type: boolean
                            serviceName:
                              description: Service name parameter which will be sent
                                to gRPC service
                              type: string
                          type: object
                        healthyPanicThreshold:
                          description: Allows to configure panic threshold for Envoy
                            cluster. If not specified, the default is 50%. To disable
                            panic mode, set to 0%.
                          format: int32
                          type: integer
                        healthyThreshold:
                          default: 1
                          description: Number of consecutive healthy checks before
                            considering a host healthy.
                          format: int32
                          type: integer
                        http:
                          description: HttpHealthCheck defines HTTP configuration
                            which will instruct the service the health check will
                            be made for is an HTTP service.
                          properties:
                            disabled:
                              description: If true the HttpHealthCheck is disabled
                              type: boolean
                            expectedStatuses:
                              description: List of HTTP response statuses which are
                                considered healthy
                              items:
                                format: int32
                                type: integer
                              type: array
                            path:
                              default: /
                              description: The HTTP path which will be requested during
                                the health check (ie. /health)
                              type: string
                            requestHeadersToAdd:
                              description: The list of HTTP headers which should be
                                added to each health check request
                              items:
                                properties:
                                  append:
                                    default: true
                                    description: If true (default) the header values
                                      should be appended to already present ones
                                    type: boolean
                                  key:
                                    description: Header name
                                    type: string
                                  value:
                                    description: Header value
                                    type: string
                                required:
                                - key
                                - value
                                type: object
                              type: array
                          type: object
                        initialJitter:
                          description: If specified, Envoy will start health checking
                            after a random time in ms between 0 and initialJitter.
                            This only applies to the first health check.
                          type: string
                        interval:
                          default: 1m
                          description: Interval between consecutive health checks.
                          type: string
                        intervalJitter:
                          description: If specified, during every interval Envoy will
                            add IntervalJitter to the wait time.
                          type: string
                        intervalJitterPercent:
                          description: If specified, during every interval Envoy will
                            add IntervalJitter * IntervalJitterPercent / 100 to the
                            wait time. If IntervalJitter and IntervalJitterPercent
                            are both set, both of them will be used to increase the
                            wait time.
                          format: int32
                          type: integer
                        noTrafficInterval:
                          description: The "no traffic interval" is a special health
                            check interval that is used when a cluster has never had
                            traffic routed to it. This lower interval allows cluster
                            information to be kept up to date, without sending a potentially
                            large amount of active health checking traffic for no
                            reason. Once a cluster has been used for traffic routing,
                            Envoy will shift back to using the standard health check
                            interval that is defined. Note that this interval takes
                            precedence over any other. The default value for "no traffic
                            interval" is 60 seconds.
                          type: string
                        reuseConnection:
                          description: Reuse health check connection between health
                            checks. Default is true.
                          type: boolean
                        tcp:
                          description: TcpHealthCheck defines configuration for specifying
                            bytes to send and expected response during the health
                            check
                          properties:
                            disabled:
                              description: If true the TcpHealthCheck is disabled
                              type: boolean
                            receive:
                              description: List of Base64 encoded blocks of strings
                                expected as a response. When checking the response,
                                "fuzzy" matching is performed such that each block
                                must be found, and in the order specified, but not
                                necessarily contiguous. If not provided or empty,
                                checks will be performed as "connect only" and be
                                marked as successful when TCP connection is successfully
                                established.
                              items:
                                type: string
                              type: array
                            send:
                              description: Base64 encoded content of the message which
                                will be sent during the health check to the target
                              type: string
                          type: object
                        timeout:
                          default: 15s
                          description: Maximum time to wait for a health check response.
                          type: string
                        unhealthyThreshold:
                          default: 5
                          description: Number of consecutive unhealthy checks before
                            considering a host unhealthy.
                          format: int32
                          type: integer
                      type: object
                    targetRef:
                      description: TargetRef is a reference to the resource that represents
                        a group of destinations.
                      properties:
                        kind:
                          description: Kind of the referenced resource
                          enum:
                          - Mesh
                          - MeshSubset
                          - MeshService
                          - MeshServiceSubset
                          - MeshGatewayRoute
                          type: string
                        mesh:
                          description: Mesh is reserved for future use to identify
                            cross mesh resources.
                          type: string
                        name:
                          description: 'Name of the referenced resource. Can only
                            be used with kinds: `MeshService`, `MeshServiceSubset`
                            and `MeshGatewayRoute`'
                          type: string
                        tags:
                          additionalProperties:
                            type: string
                          description: Tags used to select a subset of proxies by
                            tags. Can only be used with kinds `MeshSubset` and `MeshServiceSubset`
                          type: object
                      type: object
                  required:
                  - targetRef
                  type: object
                type: array
            required:
            - targetRef
            type: object
        type: object
    served: true
    storage: true
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.10.0
  creationTimestamp: null
  name: meshhttproutes.kuma.io
spec:
  group: kuma.io
  names:
    categories:
    - kuma
    kind: MeshHTTPRoute
    listKind: MeshHTTPRouteList
    plural: meshhttproutes
    singular: meshhttproute
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: Spec is the specification of the Kuma MeshHTTPRoute resource.
            properties:
              targetRef:
                description: TargetRef is a reference to the resource the policy takes
                  an effect on. The resource could be either a real store object or
                  virtual resource defined inplace.
                properties:
                  kind:
                    description: Kind of the referenced resource
                    enum:
                    - Mesh
                    - MeshSubset
                    - MeshService
                    - MeshServiceSubset
                    - MeshGatewayRoute
                    type: string
                  mesh:
                    description: Mesh is reserved for future use to identify cross
                      mesh resources.
                    type: string
                  name:
                    description: 'Name of the referenced resource. Can only be used
                      with kinds: `MeshService`, `MeshServiceSubset` and `MeshGatewayRoute`'
                    type: string
                  tags:
                    additionalProperties:
                      type: string
                    description: Tags used to select a subset of proxies by tags.
                      Can only be used with kinds `MeshSubset` and `MeshServiceSubset`
                    type: object
                type: object
              to:
                description: To matches destination services of requests and holds
                  configuration.
                items:
                  properties:
                    rules:
                      description: Rules contains the routing rules applies to a combination
                        of top-level targetRef and the targetRef in this entry.
                      items:
                        properties:
                          default:
                            description: Default holds routing rules that can be merged
                              with rules from other policies.
                            properties:
                              backendRefs:
                                items:
                                  properties:
                                    kind:
                                      description: Kind of the referenced resource
                                      enum:
                                      - Mesh
                                      - MeshSubset
                                      - MeshService
                                      - MeshServiceSubset
                                      - MeshGatewayRoute
                                      type: string
                                    mesh:
                                      description: Mesh is reserved for future use
                                        to identify cross mesh resources.
                                      type: string
                                    name:
                                      description: 'Name of the referenced resource.
                                        Can only be used with kinds: `MeshService`,
                                        `MeshServiceSubset` and `MeshGatewayRoute`'
                                      type: string
                                    tags:
                                      additionalProperties:
                                        type: string
                                      description: Tags used to select a subset of
                                        proxies by tags. Can only be used with kinds
                                        `MeshSubset` and `MeshServiceSubset`
                                      type: object
                                    weight:
                                      minimum: 0
                                      type: integer
                                  type: object
                                type: array
                              filters:
                                items:
                                  properties:
                                    requestHeaderModifier:
                                      description: Only one action is supported per
                                        header name. Configuration to set or add multiple
                                        values for a header must use RFC 7230 header
                                        value formatting, separating each value with
                                        a comma.
                                      properties:
                                        add:
                                          items:
                                            properties:
                                              name:
                                                maxLength: 256
                                                minLength: 1
                                                pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                                type: string
                                              value:
                                                type: string
                                            required:
                                            - name
                                            - value
                                            type: object
                                          maxItems: 16
                                          type: array
                                          x-kubernetes-list-map-keys:
                                          - name
                                          x-kubernetes-list-type: map
                                        remove:
                                          items:
                                            type: string
                                          maxItems: 16
                                          type: array
                                        set:
                                          items:
                                            properties:
                                              name:
                                                maxLength: 256
                                                minLength: 1
                                                pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                                type: string
                                              value:
                                                type: string
                                            required:
                                            - name
                                            - value
                                            type: object
                                          maxItems: 16
                                          type: array
                                          x-kubernetes-list-map-keys:
                                          - name
                                          x-kubernetes-list-type: map
                                      type: object
                                    responseHeaderModifier:
                                      description: Only one action is supported per
                                        header name. Configuration to set or add multiple
                                        values for a header must use RFC 7230 header
                                        value formatting, separating each value with
                                        a comma.
                                      properties:
                                        add:
                                          items:
                                            properties:
                                              name:
                                                maxLength: 256
                                                minLength: 1
                                                pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                                type: string
                                              value:
                                                type: string
                                            required:
                                            - name
                                            - value
                                            type: object
                                          maxItems: 16
                                          type: array
                                          x-kubernetes-list-map-keys:
                                          - name
                                          x-kubernetes-list-type: map
                                        remove:
                                          items:
                                            type: string
                                          maxItems: 16
                                          type: array
                                        set:
                                          items:
                                            properties:
                                              name:
                                                maxLength: 256
                                                minLength: 1
                                                pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                                type: string
                                              value:
                                                type: string
                                            required:
                                            - name
                                            - value
                                            type: object
                                          maxItems: 16
                                          type: array
                                          x-kubernetes-list-map-keys:
                                          - name
                                          x-kubernetes-list-type: map
                                      type: object
                                    type:
                                      enum:
                                      - RequestHeaderModifier
                                      - ResponseHeaderModifier
                                      type: string
                                  required:
                                  - type
                                  type: object
                                type: array
                            type: object
                          matches:
                            items:
                              properties:
                                method:
                                  enum:
                                  - CONNECT
                                  - DELETE
                                  - GET
                                  - HEAD
                                  - OPTIONS
                                  - PATCH
                                  - POST
                                  - PUT
                                  - TRACE
                                  type: string
                                path:
                                  properties:
                                    type:
                                      enum:
                                      - Exact
                                      - Prefix
                                      - RegularExpression
                                      type: string
                                    value:
                                      description: Exact or prefix matches must be
                                        an absolute path. A prefix matches only if
                                        separated by a slash or the entire path.
                                      minLength: 1
                                      type: string
                                  required:
                                  - type
                                  - value
                                  type: object
                              type: object
                            type: array
                        required:
                        - default
                        - matches
                        type: object
                      type: array
                    targetRef:
                      description: TargetRef is a reference to the resource that represents
                        a group of request destinations.
                      properties:
                        kind:
                          description: Kind of the referenced resource
                          enum:
                          - Mesh
                          - MeshSubset
                          - MeshService
                          - MeshServiceSubset
                          - MeshGatewayRoute
                          type: string
                        mesh:
                          description: Mesh is reserved for future use to identify
                            cross mesh resources.
                          type: string
                        name:
                          description: 'Name of the referenced resource. Can only
                            be used with kinds: `MeshService`, `MeshServiceSubset`
                            and `MeshGatewayRoute`'
                          type: string
                        tags:
                          additionalProperties:
                            type: string
                          description: Tags used to select a subset of proxies by
                            tags. Can only be used with kinds `MeshSubset` and `MeshServiceSubset`
                          type: object
                      type: object
                  type: object
                type: array
            type: object
        type: object
    served: true
    storage: true
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.10.0
  creationTimestamp: null
  name: meshinsights.kuma.io
spec:
  group: kuma.io
  names:
    categories:
    - kuma
    kind: MeshInsight
    listKind: MeshInsightList
    plural: meshinsights
    singular: meshinsight
  scope: Cluster
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          mesh:
            description: Mesh is the name of the Kuma mesh this resource belongs to.
              It may be omitted for cluster-scoped resources.
            type: string
          metadata:
            type: object
          spec:
            description: Spec is the specification of the Kuma MeshInsight resource.
            x-kubernetes-preserve-unknown-fields: true
        type: object
    served: true
    storage: true
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.10.0
  creationTimestamp: null
  name: meshproxypatches.kuma.io
spec:
  group: kuma.io
  names:
    categories:
    - kuma
    kind: MeshProxyPatch
    listKind: MeshProxyPatchList
    plural: meshproxypatches
    singular: meshproxypatch
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: Spec is the specification of the Kuma MeshProxyPatch resource.
            properties:
              default:
                description: Default is a configuration specific to the group of destinations
                  referenced in 'targetRef'.
                properties:
                  appendModifications:
                    description: AppendModifications is a list of modifications applied
                      on the selected proxy.
                    items:
                      properties:
                        cluster:
                          description: Cluster is a modification of Envoy's Cluster
                            resource.
                          properties:
                            match:
                              description: Match is a set of conditions that have
                                to be matched for modification operation to happen.
                              properties:
                                name:
                                  description: Name of the cluster to match.
                                  type: string
                                origin:
                                  description: "Origin is the name of the component
                                    or plugin that generated the resource. \n Here
                                    is the list of well-known origins: inbound - resources
                                    generated for handling incoming traffic. outbound
                                    - resources generated for handling outgoing traffic.
                                    transparent - resources generated for transparent
                                    proxy functionality. prometheus - resources generated
                                    when Prometheus metrics are enabled. direct-access
                                    - resources generated for Direct Access functionality.
                                    ingress - resources generated for Zone Ingress.
                                    egress - resources generated for Zone Egress.
                                    gateway - resources generated for MeshGateway.
                                    \n The list is not complete, because policy plugins
                                    can introduce new resources. For example MeshTrace
                                    plugin can create Cluster with \"mesh-trace\"
                                    origin."
                                  type: string
                              type: object
                            operation:
                              description: Operation to execute on matched cluster.
                              enum:
                              - Add
                              - Remove
                              - Patch
                              type: string
                            value:
                              description: Value of xDS resource in YAML format to
                                add or patch.
                              type: string
                          required:
                          - operation
                          type: object
                        httpFilter:
                          description: HTTPFilter is a modification of Envoy HTTP
                            Filter available in HTTP Connection Manager in a Listener
                            resource.
                          properties:
                            match:
                              description: Match is a set of conditions that have
                                to be matched for modification operation to happen.
                              properties:
                                listenerName:
                                  description: Name of the listener to match.
                                  type: string
                                listenerTags:
                                  additionalProperties:
                                    type: string
                                  description: Listener tags available in Listener#Metadata#FilterMetadata[io.kuma.tags]
                                  type: object
                                name:
                                  description: Name of the HTTP filter. For example
                                    "envoy.filters.http.local_ratelimit"
                                  type: string
                                origin:
                                  description: "Origin is the name of the component
                                    or plugin that generated the resource. \n Here
                                    is the list of well-known origins: inbound - resources
                                    generated for handling incoming traffic. outbound
                                    - resources generated for handling outgoing traffic.
                                    transparent - resources generated for transparent
                                    proxy functionality. prometheus - resources generated
                                    when Prometheus metrics are enabled. direct-access
                                    - resources generated for Direct Access functionality.
                                    ingress - resources generated for Zone Ingress.
                                    egress - resources generated for Zone Egress.
                                    gateway - resources generated for MeshGateway.
                                    \n The list is not complete, because policy plugins
                                    can introduce new resources. For example MeshTrace
                                    plugin can create Cluster with \"mesh-trace\"
                                    origin."
                                  type: string
                              type: object
                            operation:
                              description: Operation to execute on matched listener.
                              enum:
                              - Remove
                              - Patch
                              - AddFirst
                              - AddBefore
                              - AddAfter
                              - AddLast
                              type: string
                            value:
                              description: Value of xDS resource in YAML format to
                                add or patch.
                              type: string
                          required:
                          - operation
                          type: object
                        listener:
                          description: Listener is a modification of Envoy's Listener
                            resource.
                          properties:
                            match:
                              description: Match is a set of conditions that have
                                to be matched for modification operation to happen.
                              properties:
                                name:
                                  description: Name of the listener to match.
                                  type: string
                                origin:
                                  description: "Origin is the name of the component
                                    or plugin that generated the resource. \n Here
                                    is the list of well-known origins: inbound - resources
                                    generated for handling incoming traffic. outbound
                                    - resources generated for handling outgoing traffic.
                                    transparent - resources generated for transparent
                                    proxy functionality. prometheus - resources generated
                                    when Prometheus metrics are enabled. direct-access
                                    - resources generated for Direct Access functionality.
                                    ingress - resources generated for Zone Ingress.
                                    egress - resources generated for Zone Egress.
                                    gateway - resources generated for MeshGateway.
                                    \n The list is not complete, because policy plugins
                                    can introduce new resources. For example MeshTrace
                                    plugin can create Cluster with \"mesh-trace\"
                                    origin."
                                  type: string
                                tags:
                                  additionalProperties:
                                    type: string
                                  description: Tags available in Listener#Metadata#FilterMetadata[io.kuma.tags]
                                  type: object
                              type: object
                            operation:
                              description: Operation to execute on matched listener.
                              enum:
                              - Add
                              - Remove
                              - Patch
                              type: string
                            value:
                              description: Value of xDS resource in YAML format to
                                add or patch.
                              type: string
                          required:
                          - operation
                          type: object
                        networkFilter:
                          description: NetworkFilter is a modification of Envoy Listener's
                            filter.
                          properties:
                            match:
                              description: Match is a set of conditions that have
                                to be matched for modification operation to happen.
                              properties:
                                listenerName:
                                  description: Name of the listener to match.
                                  type: string
                                listenerTags:
                                  additionalProperties:
                                    type: string
                                  description: Listener tags available in Listener#Metadata#FilterMetadata[io.kuma.tags]
                                  type: object
                                name:
                                  description: Name of the network filter. For example
                                    "envoy.filters.network.ratelimit"
                                  type: string
                                origin:
                                  description: "Origin is the name of the component
                                    or plugin that generated the resource. \n Here
                                    is the list of well-known origins: inbound - resources
                                    generated for handling incoming traffic. outbound
                                    - resources generated for handling outgoing traffic.
                                    transparent - resources generated for transparent
                                    proxy functionality. prometheus - resources generated
                                    when Prometheus metrics are enabled. direct-access
                                    - resources generated for Direct Access functionality.
                                    ingress - resources generated for Zone Ingress.
                                    egress - resources generated for Zone Egress.
                                    gateway - resources generated for MeshGateway.
                                    \n The list is not complete, because policy plugins
                                    can introduce new resources. For example MeshTrace
                                    plugin can create Cluster with \"mesh-trace\"
                                    origin."
                                  type: string
                              type: object
                            operation:
                              description: Operation to execute on matched listener.
                              enum:
                              - Remove
                              - Patch
                              - AddFirst
                              - AddBefore
                              - AddAfter
                              - AddLast
                              type: string
                            value:
                              description: Value of xDS resource in YAML format to
                                add or patch.
                              type: string
                          required:
                          - operation
                          type: object
                        virtualHost:
                          description: VirtualHost is a modification of Envoy's VirtualHost
                            referenced in HTTP Connection Manager in a Listener resource.
                          properties:
                            match:
                              description: Match is a set of conditions that have
                                to be matched for modification operation to happen.
                              properties:
                                name:
                                  description: Name of the VirtualHost to match.
                                  type: string
                                origin:
                                  description: "Origin is the name of the component
                                    or plugin that generated the resource. \n Here
                                    is the list of well-known origins: inbound - resources
                                    generated for handling incoming traffic. outbound
                                    - resources generated for handling outgoing traffic.
                                    transparent - resources generated for transparent
                                    proxy functionality. prometheus - resources generated
                                    when Prometheus metrics are enabled. direct-access
                                    - resources generated for Direct Access functionality.
                                    ingress - resources generated for Zone Ingress.
                                    egress - resources generated for Zone Egress.
                                    gateway - resources generated for MeshGateway.
                                    \n The list is not complete, because policy plugins
                                    can introduce new resources. For example MeshTrace
                                    plugin can create Cluster with \"mesh-trace\"
                                    origin."
                                  type: string
                                routeConfigurationName:
                                  description: Name of the RouteConfiguration resource
                                    to match.
                                  type: string
                              type: object
                            operation:
                              description: Operation to execute on matched listener.
                              enum:
                              - Add
                              - Remove
                              - Patch
                              type: string
                            value:
                              description: Value of xDS resource in YAML format to
                                add or patch.
                              type: string
                          required:
                          - match
                          - operation
                          type: object
                      type: object
                    type: array
                required:
                - appendModifications
                type: object
              targetRef:
                description: TargetRef is a reference to the resource the policy takes
                  an effect on. The resource could be either a real store object or
                  virtual resource defined inplace.
                properties:
                  kind:
                    description: Kind of the referenced resource
                    enum:
                    - Mesh
                    - MeshSubset
                    - MeshService
                    - MeshServiceSubset
                    - MeshGatewayRoute
                    type: string
                  mesh:
                    description: Mesh is reserved for future use to identify cross
                      mesh resources.
                    type: string
                  name:
                    description: 'Name of the referenced resource. Can only be used
                      with kinds: `MeshService`, `MeshServiceSubset` and `MeshGatewayRoute`'
                    type: string
                  tags:
                    additionalProperties:
                      type: string
                    description: Tags used to select a subset of proxies by tags.
                      Can only be used with kinds `MeshSubset` and `MeshServiceSubset`
                    type: object
                type: object
            required:
            - default
            - targetRef
            type: object
        type: object
    served: true
    storage: true
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.10.0
  creationTimestamp: null
  name: meshratelimits.kuma.io
spec:
  group: kuma.io
  names:
    categories:
    - kuma
    kind: MeshRateLimit
    listKind: MeshRateLimitList
    plural: meshratelimits
    singular: meshratelimit
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: Spec is the specification of the Kuma MeshRateLimit resource.
            properties:
              from:
                description: From list makes a match between clients and corresponding
                  configurations
                items:
                  properties:
                    default:
                      description: Default is a configuration specific to the group
                        of clients referenced in 'targetRef'
                      properties:
                        local:
                          description: LocalConf defines local http or/and tcp rate
                            limit configuration
                          properties:
                            http:
                              description: LocalHTTP defines confguration of local
                                HTTP rate limiting https://www.envoyproxy.io/docs/envoy/latest/configuration/http/http_filters/local_rate_limit_filter
                              properties:
                                disabled:
                                  description: Define if rate limiting should be disabled.
                                  type: boolean
                                onRateLimit:
                                  description: Describes the actions to take on a
                                    rate limit event
                                  properties:
                                    headers:
                                      description: The Headers to be added to the
                                        HTTP response on a rate limit event
                                      items:
                                        properties:
                                          append:
                                            description: Should the header be appended
                                            type: boolean
                                          key:
                                            description: Header name
                                            type: string
                                          value:
                                            description: Header value
                                            type: string
                                        required:
                                        - key
                                        - value
                                        type: object
                                      type: array
                                    status:
                                      description: The HTTP status code to be set
                                        on a rate limit event
                                      format: int32
                                      type: integer
                                  type: object
                                requestRate:
                                  description: Defines how many requests are allowed
                                    per interval.
                                  properties:
                                    interval:
                                      description: The interval the number of units
                                        is accounted for.
                                      type: string
                                    num:
                                      description: Number of units per interval (depending
                                        on usage it can be a number of requests, or
                                        a number of connections).
                                      format: int32
                                      type: integer
                                  required:
                                  - interval
                                  - num
                                  type: object
                              type: object
                            tcp:
                              description: LocalTCP defines confguration of local
                                TCP rate limiting https://www.envoyproxy.io/docs/envoy/latest/configuration/listeners/network_filters/local_rate_limit_filter
                              properties:
                                connectionRate:
                                  description: Defines how many connections are allowed
                                    per interval.
                                  properties:
                                    interval:
                                      description: The interval the number of units
                                        is accounted for.
                                      type: string
                                    num:
                                      description: Number of units per interval (depending
                                        on usage it can be a number of requests, or
                                        a number of connections).
                                      format: int32
                                      type: integer
                                  required:
                                  - interval
                                  - num
                                  type: object
                                disabled:
                                  description: 'Define if rate limiting should be
                                    disabled. Default: false'
                                  type: boolean
                              type: object
                          type: object
                      type: object
                    targetRef:
                      description: TargetRef is a reference to the resource that represents
                        a group of clients.
                      properties:
                        kind:
                          description: Kind of the referenced resource
                          enum:
                          - Mesh
                          - MeshSubset
                          - MeshService
                          - MeshServiceSubset
                          - MeshGatewayRoute
                          type: string
                        mesh:
                          description: Mesh is reserved for future use to identify
                            cross mesh resources.
                          type: string
                        name:
                          description: 'Name of the referenced resource. Can only
                            be used with kinds: `MeshService`, `MeshServiceSubset`
                            and `MeshGatewayRoute`'
                          type: string
                        tags:
                          additionalProperties:
                            type: string
                          description: Tags used to select a subset of proxies by
                            tags. Can only be used with kinds `MeshSubset` and `MeshServiceSubset`
                          type: object
                      type: object
                  required:
                  - targetRef
                  type: object
                type: array
              targetRef:
                description: TargetRef is a reference to the resource the policy takes
                  an effect on. The resource could be either a real store object or
                  virtual resource defined inplace.
                properties:
                  kind:
                    description: Kind of the referenced resource
                    enum:
                    - Mesh
                    - MeshSubset
                    - MeshService
                    - MeshServiceSubset
                    - MeshGatewayRoute
                    type: string
                  mesh:
                    description: Mesh is reserved for future use to identify cross
                      mesh resources.
                    type: string
                  name:
                    description: 'Name of the referenced resource. Can only be used
                      with kinds: `MeshService`, `MeshServiceSubset` and `MeshGatewayRoute`'
                    type: string
                  tags:
                    additionalProperties:
                      type: string
                    description: Tags used to select a subset of proxies by tags.
                      Can only be used with kinds `MeshSubset` and `MeshServiceSubset`
                    type: object
                type: object
            required:
            - targetRef
            type: object
        type: object
    served: true
    storage: true
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.10.0
  creationTimestamp: null
  name: meshretries.kuma.io
spec:
  group: kuma.io
  names:
    categories:
    - kuma
    kind: MeshRetry
    listKind: MeshRetryList
    plural: meshretries
    singular: meshretry
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: Spec is the specification of the Kuma MeshRetry resource.
            properties:
              targetRef:
                description: TargetRef is a reference to the resource the policy takes
                  an effect on. The resource could be either a real store object or
                  virtual resource defined inplace.
                properties:
                  kind:
                    description: Kind of the referenced resource
                    enum:
                    - Mesh
                    - MeshSubset
                    - MeshService
                    - MeshServiceSubset
                    - MeshGatewayRoute
                    type: string
                  mesh:
                    description: Mesh is reserved for future use to identify cross
                      mesh resources.
                    type: string
                  name:
                    description: 'Name of the referenced resource. Can only be used
                      with kinds: `MeshService`, `MeshServiceSubset` and `MeshGatewayRoute`'
                    type: string
                  tags:
                    additionalProperties:
                      type: string
                    description: Tags used to select a subset of proxies by tags.
                      Can only be used with kinds `MeshSubset` and `MeshServiceSubset`
                    type: object
                type: object
              to:
                description: To list makes a match between the consumed services and
                  corresponding configurations
                items:
                  properties:
                    default:
                      description: Default is a configuration specific to the group
                        of destinations referenced in 'targetRef'
                      properties:
                        grpc:
                          description: GRPC defines a configuration of retries for
                            GRPC traffic
                          properties:
                            backOff:
                              description: BackOff is a configuration of durations
                                which will be used in exponential backoff strategy
                                between retries.
                              properties:
                                baseInterval:
                                  description: BaseInterval is an amount of time which
                                    should be taken between retries. Must be greater
                                    than zero. Values less than 1 ms are rounded up
                                    to 1 ms. Default is 25ms.
                                  type: string
                                maxInterval:
                                  description: MaxInterval is a maximal amount of
                                    time which will be taken between retries. Default
                                    is 10 times the "BaseInterval".
                                  type: string
                              type: object
                            numRetries:
                              description: NumRetries is the number of attempts that
                                will be made on failed (and retriable) requests.
                              format: int32
                              type: integer
                            perTryTimeout:
                              description: PerTryTimeout is the amount of time after
                                which retry attempt should timeout. Setting this timeout
                                to 0 will disable it. Default is 15s.
                              type: string
                            rateLimitedBackOff:
                              description: RateLimitedBackOff is a configuration of
                                backoff which will be used when the upstream returns
                                one of the headers configured.
                              properties:
                                maxInterval:
                                  description: MaxInterval is a maximal amount of
                                    time which will be taken between retries. Default
                                    is 300 seconds.
                                  type: string
                                resetHeaders:
                                  description: ResetHeaders specifies the list of
                                    headers (like Retry-After or X-RateLimit-Reset)
                                    to match against the response. Headers are tried
                                    in order, and matched case-insensitive. The first
                                    header to be parsed successfully is used. If no
                                    headers match the default exponential BackOff
                                    is used instead.
                                  items:
                                    properties:
                                      format:
                                        description: The format of the reset header.
                                        enum:
                                        - Seconds
                                        - UnixTimestamp
                                        type: string
                                      name:
                                        description: The Name of the reset header.
                                        type: string
                                    type: object
                                  type: array
                              type: object
                            retryOn:
                              description: 'RetryOn is a list of conditions which
                                will cause a retry. Available values are: [CANCELED,
                                DEADLINE_EXCEEDED, INTERNAL, RESOURCE_EXHAUSTED, UNAVAILABLE].'
                              items:
                                type: string
                              type: array
                          type: object
                        http:
                          description: HTTP defines a configuration of retries for
                            HTTP traffic
                          properties:
                            backOff:
                              description: BackOff is a configuration of durations
                                which will be used in exponential backoff strategy
                                between retries
                              properties:
                                baseInterval:
                                  description: BaseInterval is an amount of time which
                                    should be taken between retries. Must be greater
                                    than zero. Values less than 1 ms are rounded up
                                    to 1 ms. Default is 25ms.
                                  type: string
                                maxInterval:
                                  description: MaxInterval is a maximal amount of
                                    time which will be taken between retries. Default
                                    is 10 times the "BaseInterval".
                                  type: string
                              type: object
                            numRetries:
                              description: NumRetries is the number of attempts that
                                will be made on failed (and retriable) requests
                              format: int32
                              type: integer
                            perTryTimeout:
                              description: PerTryTimeout is the amount of time after
                                which retry attempt should timeout. Setting this timeout
                                to 0 will disable it. Default is 15s.
                              type: string
                            rateLimitedBackOff:
                              description: RateLimitedBackOff is a configuration of
                                backoff which will be used when the upstream returns
                                one of the headers configured.
                              properties:
                                maxInterval:
                                  description: MaxInterval is a maximal amount of
                                    time which will be taken between retries. Default
                                    is 300 seconds.
                                  type: string
                                resetHeaders:
                                  description: ResetHeaders specifies the list of
                                    headers (like Retry-After or X-RateLimit-Reset)
                                    to match against the response. Headers are tried
                                    in order, and matched case-insensitive. The first
                                    header to be parsed successfully is used. If no
                                    headers match the default exponential BackOff
                                    is used instead.
                                  items:
                                    properties:
                                      format:
                                        description: The format of the reset header.
                                        enum:
                                        - Seconds
                                        - UnixTimestamp
                                        type: string
                                      name:
                                        description: The Name of the reset header.
                                        type: string
                                    type: object
                                  type: array
                              type: object
                            retriableRequestHeaders:
                              description: RetriableRequestHeaders is an HTTP headers
                                which must be present in the request for retries to
                                be attempted.
                              items:
                                properties:
                                  name:
                                    type: string
                                  type:
                                    enum:
                                    - REGULAR_EXPRESSION
                                    - EXACT
                                    - PREFIX
                                    type: string
                                  value:
                                    type: string
                                type: object
                              type: array
                            retriableResponseHeaders:
                              description: RetriableResponseHeaders is an HTTP response
                                headers that trigger a retry if present in the response.
                                A retry will be triggered if any of the header matches
                                match the upstream response headers.
                              items:
                                properties:
                                  name:
                                    type: string
                                  type:
                                    enum:
                                    - REGULAR_EXPRESSION
                                    - EXACT
                                    - PREFIX
                                    type: string
                                  value:
                                    type: string
                                type: object
                              type: array
                            retryOn:
                              description: 'RetryOn is a list of conditions which
                                will cause a retry. Available values are: [5XX, GATEWAY_ERROR,
                                RESET, RETRIABLE_4XX, CONNECT_FAILURE, ENVOY_RATELIMITED,
                                REFUSED_STREAM, HTTP3_POST_CONNECT_FAILURE, HTTP_METHOD_CONNECT,
                                HTTP_METHOD_DELETE, HTTP_METHOD_GET, HTTP_METHOD_HEAD,
                                HTTP_METHOD_OPTIONS, HTTP_METHOD_PATCH, HTTP_METHOD_POST,
                                HTTP_METHOD_PUT, HTTP_METHOD_TRACE]. Also, any HTTP
                                status code (500, 503, etc).'
                              items:
                                type: string
                              type: array
                          type: object
                        tcp:
                          description: TCP defines a configuration of retries for
                            TCP traffic
                          properties:
                            maxConnectAttempt:
                              description: MaxConnectAttempt is a maximal amount of
                                TCP connection attempts which will be made before
                                giving up
                              format: int32
                              type: integer
                          type: object
                      type: object
                    targetRef:
                      description: TargetRef is a reference to the resource that represents
                        a group of destinations.
                      properties:
                        kind:
                          description: Kind of the referenced resource
                          enum:
                          - Mesh
                          - MeshSubset
                          - MeshService
                          - MeshServiceSubset
                          - MeshGatewayRoute
                          type: string
                        mesh:
                          description: Mesh is reserved for future use to identify
                            cross mesh resources.
                          type: string
                        name:
                          description: 'Name of the referenced resource. Can only
                            be used with kinds: `MeshService`, `MeshServiceSubset`
                            and `MeshGatewayRoute`'
                          type: string
                        tags:
                          additionalProperties:
                            type: string
                          description: Tags used to select a subset of proxies by
                            tags. Can only be used with kinds `MeshSubset` and `MeshServiceSubset`
                          type: object
                      type: object
                  required:
                  - targetRef
                  type: object
                type: array
            required:
            - targetRef
            type: object
        type: object
    served: true
    storage: true
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.10.0
  creationTimestamp: null
  name: meshtimeouts.kuma.io
spec:
  group: kuma.io
  names:
    categories:
    - kuma
    kind: MeshTimeout
    listKind: MeshTimeoutList
    plural: meshtimeouts
    singular: meshtimeout
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: Spec is the specification of the Kuma MeshTimeout resource.
            properties:
              from:
                description: From list makes a match between clients and corresponding
                  configurations
                items:
                  properties:
                    default:
                      description: Default is a configuration specific to the group
                        of clients referenced in 'targetRef'
                      properties:
                        connectionTimeout:
                          description: ConnectionTimeout specifies the amount of time
                            proxy will wait for an TCP connection to be established.
                            Default value is 5 seconds. Cannot be set to 0.
                          type: string
                        http:
                          description: Http provides configuration for HTTP specific
                            timeouts
                          properties:
                            maxConnectionDuration:
                              description: MaxConnectionDuration is the time after
                                which a connection will be drained and/or closed,
                                starting from when it was first established. Setting
                                this timeout to 0 will disable it. Disabled by default.
                              type: string
                            maxStreamDuration:
                              description: MaxStreamDuration is the maximum time that
                                a streams lifetime will span. Setting this timeout
                                to 0 will disable it. Disabled by default.
                              type: string
                            requestTimeout:
                              description: RequestTimeout The amount of time that
                                proxy will wait for the entire request to be received.
                                The timer is activated when the request is initiated,
                                and is disarmed when the last byte of the request
                                is sent, OR when the response is initiated. Setting
                                this timeout to 0 will disable it. Default is 15s.
                              type: string
                            streamIdleTimeout:
                              description: StreamIdleTimeout is the amount of time
                                that proxy will allow a stream to exist with no activity.
                                Setting this timeout to 0 will disable it. Default
                                is 30m
                              type: string
                          type: object
                        idleTimeout:
                          description: IdleTimeout is defined as the period in which
                            there are no bytes sent or received on connection Setting
                            this timeout to 0 will disable it. Be cautious when disabling
                            it because it can lead to connection leaking. Default
                            value is 1h.
                          type: string
                      type: object
                    targetRef:
                      description: TargetRef is a reference to the resource that represents
                        a group of clients.
                      properties:
                        kind:
                          description: Kind of the referenced resource
                          enum:
                          - Mesh
                          - MeshSubset
                          - MeshService
                          - MeshServiceSubset
                          - MeshGatewayRoute
                          type: string
                        mesh:
                          description: Mesh is reserved for future use to identify
                            cross mesh resources.
                          type: string
                        name:
                          description: 'Name of the referenced resource. Can only
                            be used with kinds: `MeshService`, `MeshServiceSubset`
                            and `MeshGatewayRoute`'
                          type: string
                        tags:
                          additionalProperties:
                            type: string
                          description: Tags used to select a subset of proxies by
                            tags. Can only be used with kinds `MeshSubset` and `MeshServiceSubset`
                          type: object
                      type: object
                  required:
                  - targetRef
                  type: object
                type: array
              targetRef:
                description: TargetRef is a reference to the resource the policy takes
                  an effect on. The resource could be either a real store object or
                  virtual resource defined inplace.
                properties:
                  kind:
                    description: Kind of the referenced resource
                    enum:
                    - Mesh
                    - MeshSubset
                    - MeshService
                    - MeshServiceSubset
                    - MeshGatewayRoute
                    type: string
                  mesh:
                    description: Mesh is reserved for future use to identify cross
                      mesh resources.
                    type: string
                  name:
                    description: 'Name of the referenced resource. Can only be used
                      with kinds: `MeshService`, `MeshServiceSubset` and `MeshGatewayRoute`'
                    type: string
                  tags:
                    additionalProperties:
                      type: string
                    description: Tags used to select a subset of proxies by tags.
                      Can only be used with kinds `MeshSubset` and `MeshServiceSubset`
                    type: object
                type: object
              to:
                description: To list makes a match between the consumed services and
                  corresponding configurations
                items:
                  properties:
                    default:
                      description: Default is a configuration specific to the group
                        of destinations referenced in 'targetRef'
                      properties:
                        connectionTimeout:
                          description: ConnectionTimeout specifies the amount of time
                            proxy will wait for an TCP connection to be established.
                            Default value is 5 seconds. Cannot be set to 0.
                          type: string
                        http:
                          description: Http provides configuration for HTTP specific
                            timeouts
                          properties:
                            maxConnectionDuration:
                              description: MaxConnectionDuration is the time after
                                which a connection will be drained and/or closed,
                                starting from when it was first established. Setting
                                this timeout to 0 will disable it. Disabled by default.
                              type: string
                            maxStreamDuration:
                              description: MaxStreamDuration is the maximum time that
                                a streams lifetime will span. Setting this timeout
                                to 0 will disable it. Disabled by default.
                              type: string
                            requestTimeout:
                              description: RequestTimeout The amount of time that
                                proxy will wait for the entire request to be received.
                                The timer is activated when the request is initiated,
                                and is disarmed when the last byte of the request
                                is sent, OR when the response is initiated. Setting
                                this timeout to 0 will disable it. Default is 15s.
                              type: string
                            streamIdleTimeout:
                              description: StreamIdleTimeout is the amount of time
                                that proxy will allow a stream to exist with no activity.
                                Setting this timeout to 0 will disable it. Default
                                is 30m
                              type: string
                          type: object
                        idleTimeout:
                          description: IdleTimeout is defined as the period in which
                            there are no bytes sent or received on connection Setting
                            this timeout to 0 will disable it. Be cautious when disabling
                            it because it can lead to connection leaking. Default
                            value is 1h.
                          type: string
                      type: object
                    targetRef:
                      description: TargetRef is a reference to the resource that represents
                        a group of destinations.
                      properties:
                        kind:
                          description: Kind of the referenced resource
                          enum:
                          - Mesh
                          - MeshSubset
                          - MeshService
                          - MeshServiceSubset
                          - MeshGatewayRoute
                          type: string
                        mesh:
                          description: Mesh is reserved for future use to identify
                            cross mesh resources.
                          type: string
                        name:
                          description: 'Name of the referenced resource. Can only
                            be used with kinds: `MeshService`, `MeshServiceSubset`
                            and `MeshGatewayRoute`'
                          type: string
                        tags:
                          additionalProperties:
                            type: string
                          description: Tags used to select a subset of proxies by
                            tags. Can only be used with kinds `MeshSubset` and `MeshServiceSubset`
                          type: object
                      type: object
                  required:
                  - targetRef
                  type: object
                type: array
            required:
            - targetRef
            type: object
        type: object
    served: true
    storage: true
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.10.0
  creationTimestamp: null
  name: dataplaneinsights.kuma.io
spec:
  group: kuma.io
  names:
    categories:
    - kuma
    kind: DataplaneInsight
    listKind: DataplaneInsightList
    plural: dataplaneinsights
    singular: dataplaneinsight
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          mesh:
            description: Mesh is the name of the Kuma mesh this resource belongs to.
              It may be omitted for cluster-scoped resources.
            type: string
          metadata:
            type: object
          status:
            description: Status is the status the Kuma resource.
            x-kubernetes-preserve-unknown-fields: true
        type: object
    served: true
    storage: true
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.10.0
  creationTimestamp: null
  name: meshtraces.kuma.io
spec:
  group: kuma.io
  names:
    categories:
    - kuma
    kind: MeshTrace
    listKind: MeshTraceList
    plural: meshtraces
    singular: meshtrace
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: Spec is the specification of the Kuma MeshTrace resource.
            properties:
              default:
                description: MeshTrace configuration.
                properties:
                  backends:
                    description: A one element array of backend definition. Envoy
                      allows configuring only 1 backend, so the natural way of representing
                      that would be just one object. Unfortunately due to the reasons
                      explained in MADR 009-tracing-policy this has to be a one element
                      array for now.
                    items:
                      description: Only one of zipkin or datadog can be used.
                      properties:
                        datadog:
                          description: Datadog backend configuration.
                          properties:
                            splitService:
                              description: 'Determines if datadog service name should
                                be split based on traffic direction and destination.
                                For example, with `splitService: true` and a `backend`
                                service that communicates with a couple of databases,
                                you would get service names like `backend_INBOUND`,
                                `backend_OUTBOUND_db1`, and `backend_OUTBOUND_db2`
                                in Datadog. Default: false'
                              type: boolean
                            url:
                              description: Address of Datadog collector, only host
                                and port are allowed (no paths, fragments etc.)
                              type: string
                          type: object
                        zipkin:
                          description: Zipkin backend configuration.
                          properties:
                            apiVersion:
                              description: 'Version of the API. values: httpJson,
                                httpProto. Default: httpJson see https://github.com/envoyproxy/envoy/blob/v1.22.0/api/envoy/config/trace/v3/zipkin.proto#L66'
                              type: string
                            sharedSpanContext:
                              description: 'Determines whether client and server spans
                                will share the same span context. Default: true. https://github.com/envoyproxy/envoy/blob/v1.22.0/api/envoy/config/trace/v3/zipkin.proto#L63'
                              type: boolean
                            traceId128bit:
                              description: 'Generate 128bit traces. Default: false'
                              type: boolean
                            url:
                              description: Address of Zipkin collector.
                              type: string
                          type: object
                      type: object
                    nullable: true
                    type: array
                  sampling:
                    description: Sampling configuration. Sampling is the process by
                      which a decision is made on whether to process/export a span
                      or not.
                    properties:
                      client:
                        description: 'Target percentage of requests that will be force
                          traced if the ''x-client-trace-id'' header is set. Default:
                          100% Mirror of client_sampling in Envoy https://github.com/envoyproxy/envoy/blob/v1.22.0/api/envoy/config/filter/network/http_connection_manager/v2/http_connection_manager.proto#L127-L133'
                        format: int32
                        type: integer
                      overall:
                        description: 'Target percentage of requests will be traced
                          after all other sampling checks have been applied (client,
                          force tracing, random sampling). This field functions as
                          an upper limit on the total configured sampling rate. For
                          instance, setting client_sampling to 100% but overall_sampling
                          to 1% will result in only 1% of client requests with the
                          appropriate headers to be force traced. Default: 100% Mirror
                          of overall_sampling in Envoy https://github.com/envoyproxy/envoy/blob/v1.22.0/api/envoy/config/filter/network/http_connection_manager/v2/http_connection_manager.proto#L142-L150'
                        format: int32
                        type: integer
                      random:
                        description: 'Target percentage of requests that will be randomly
                          selected for trace generation, if not requested by the client
                          or not forced. Default: 100% Mirror of random_sampling in
                          Envoy https://github.com/envoyproxy/envoy/blob/v1.22.0/api/envoy/config/filter/network/http_connection_manager/v2/http_connection_manager.proto#L135-L140'
                        format: int32
                        type: integer
                    type: object
                  tags:
                    description: Custom tags configuration. You can add custom tags
                      to traces based on headers or literal values.
                    items:
                      description: Custom tags configuration. Only one of literal
                        or header can be used.
                      properties:
                        header:
                          description: Tag taken from a header.
                          properties:
                            default:
                              description: Default value to use if header is missing.
                                If the default is missing and there is no value the
                                tag will not be included.
                              type: string
                            name:
                              description: Name of the header.
                              type: string
                          type: object
                        literal:
                          description: Tag taken from literal value.
                          type: string
                        name:
                          description: Name of the tag.
                          type: string
                      type: object
                    nullable: true
                    type: array
                type: object
              targetRef:
                description: TargetRef is a reference to the resource the policy takes
                  an effect on. The resource could be either a real store object or
                  virtual resource defined inplace.
                properties:
                  kind:
                    description: Kind of the referenced resource
                    enum:
                    - Mesh
                    - MeshSubset
                    - MeshService
                    - MeshServiceSubset
                    - MeshGatewayRoute
                    type: string
                  mesh:
                    description: Mesh is reserved for future use to identify cross
                      mesh resources.
                    type: string
                  name:
                    description: 'Name of the referenced resource. Can only be used
                      with kinds: `MeshService`, `MeshServiceSubset` and `MeshGatewayRoute`'
                    type: string
                  tags:
                    additionalProperties:
                      type: string
                    description: Tags used to select a subset of proxies by tags.
                      Can only be used with kinds `MeshSubset` and `MeshServiceSubset`
                    type: object
                type: object
            required:
            - targetRef
            type: object
        type: object
    served: true
    storage: true
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.10.0
  creationTimestamp: null
  name: meshtrafficpermissions.kuma.io
spec:
  group: kuma.io
  names:
    categories:
    - kuma
    kind: MeshTrafficPermission
    listKind: MeshTrafficPermissionList
    plural: meshtrafficpermissions
    singular: meshtrafficpermission
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: Spec is the specification of the Kuma MeshTrafficPermission
              resource.
            properties:
              from:
                description: From list makes a match between clients and corresponding
                  configurations
                items:
                  properties:
                    default:
                      description: Default is a configuration specific to the group
                        of clients referenced in 'targetRef'
                      properties:
                        action:
                          description: 'Action defines a behavior for the specified
                            group of clients:'
                          enum:
                          - ALLOW
                          - DENY
                          - ALLOW_WITH_SHADOW_DENY
                          type: string
                      type: object
                    targetRef:
                      description: TargetRef is a reference to the resource that represents
                        a group of clients.
                      properties:
                        kind:
                          description: Kind of the referenced resource
                          enum:
                          - Mesh
                          - MeshSubset
                          - MeshService
                          - MeshServiceSubset
                          - MeshGatewayRoute
                          type: string
                        mesh:
                          description: Mesh is reserved for future use to identify
                            cross mesh resources.
                          type: string
                        name:
                          description: 'Name of the referenced resource. Can only
                            be used with kinds: `MeshService`, `MeshServiceSubset`
                            and `MeshGatewayRoute`'
                          type: string
                        tags:
                          additionalProperties:
                            type: string
                          description: Tags used to select a subset of proxies by
                            tags. Can only be used with kinds `MeshSubset` and `MeshServiceSubset`
                          type: object
                      type: object
                  required:
                  - targetRef
                  type: object
                type: array
              targetRef:
                description: TargetRef is a reference to the resource the policy takes
                  an effect on. The resource could be either a real store object or
                  virtual resource defined inplace.
                properties:
                  kind:
                    description: Kind of the referenced resource
                    enum:
                    - Mesh
                    - MeshSubset
                    - MeshService
                    - MeshServiceSubset
                    - MeshGatewayRoute
                    type: string
                  mesh:
                    description: Mesh is reserved for future use to identify cross
                      mesh resources.
                    type: string
                  name:
                    description: 'Name of the referenced resource. Can only be used
                      with kinds: `MeshService`, `MeshServiceSubset` and `MeshGatewayRoute`'
                    type: string
                  tags:
                    additionalProperties:
                      type: string
                    description: Tags used to select a subset of proxies by tags.
                      Can only be used with kinds `MeshSubset` and `MeshServiceSubset`
                    type: object
                type: object
            required:
            - targetRef
            type: object
        type: object
    served: true
    storage: true
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.10.0
  creationTimestamp: null
  name: proxytemplates.kuma.io
spec:
  group: kuma.io
  names:
    categories:
    - kuma
    kind: ProxyTemplate
    listKind: ProxyTemplateList
    plural: proxytemplates
    singular: proxytemplate
  scope: Cluster
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          mesh:
            description: Mesh is the name of the Kuma mesh this resource belongs to.
              It may be omitted for cluster-scoped resources.
            type: string
          metadata:
            type: object
          spec:
            description: Spec is the specification of the Kuma ProxyTemplate resource.
            x-kubernetes-preserve-unknown-fields: true
        type: object
    served: true
    storage: true
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.10.0
  creationTimestamp: null
  name: ratelimits.kuma.io
spec:
  group: kuma.io
  names:
    categories:
    - kuma
    kind: RateLimit
    listKind: RateLimitList
    plural: ratelimits
    singular: ratelimit
  scope: Cluster
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          mesh:
            description: Mesh is the name of the Kuma mesh this resource belongs to.
              It may be omitted for cluster-scoped resources.
            type: string
          metadata:
            type: object
          spec:
            description: Spec is the specification of the Kuma RateLimit resource.
            x-kubernetes-preserve-unknown-fields: true
        type: object
    served: true
    storage: true
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.10.0
  creationTimestamp: null
  name: retries.kuma.io
spec:
  group: kuma.io
  names:
    categories:
    - kuma
    kind: Retry
    listKind: RetryList
    plural: retries
    singular: retry
  scope: Cluster
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          mesh:
            description: Mesh is the name of the Kuma mesh this resource belongs to.
              It may be omitted for cluster-scoped resources.
            type: string
          metadata:
            type: object
          spec:
            description: Spec is the specification of the Kuma Retry resource.
            x-kubernetes-preserve-unknown-fields: true
        type: object
    served: true
    storage: true
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.10.0
  creationTimestamp: null
  name: serviceinsights.kuma.io
spec:
  group: kuma.io
  names:
    categories:
    - kuma
    kind: ServiceInsight
    listKind: ServiceInsightList
    plural: serviceinsights
    singular: serviceinsight
  scope: Cluster
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          mesh:
            description: Mesh is the name of the Kuma mesh this resource belongs to.
              It may be omitted for cluster-scoped resources.
            type: string
          metadata:
            type: object
          spec:
            description: Spec is the specification of the Kuma ServiceInsight resource.
            x-kubernetes-preserve-unknown-fields: true
        type: object
    served: true
    storage: true
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.10.0
  creationTimestamp: null
  name: timeouts.kuma.io
spec:
  group: kuma.io
  names:
    categories:
    - kuma
    kind: Timeout
    listKind: TimeoutList
    plural: timeouts
    singular: timeout
  scope: Cluster
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          mesh:
            description: Mesh is the name of the Kuma mesh this resource belongs to.
              It may be omitted for cluster-scoped resources.
            type: string
          metadata:
            type: object
          spec:
            description: Spec is the specification of the Kuma Timeout resource.
            x-kubernetes-preserve-unknown-fields: true
        type: object
    served: true
    storage: true
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.10.0
  creationTimestamp: null
  name: trafficlogs.kuma.io
spec:
  group: kuma.io
  names:
    categories:
    - kuma
    kind: TrafficLog
    listKind: TrafficLogList
    plural: trafficlogs
    singular: trafficlog
  scope: Cluster
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          mesh:
            description: Mesh is the name of the Kuma mesh this resource belongs to.
              It may be omitted for cluster-scoped resources.
            type: string
          metadata:
            type: object
          spec:
            description: Spec is the specification of the Kuma TrafficLog resource.
            x-kubernetes-preserve-unknown-fields: true
        type: object
    served: true
    storage: true
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.10.0
  creationTimestamp: null
  name: trafficpermissions.kuma.io
spec:
  group: kuma.io
  names:
    categories:
    - kuma
    kind: TrafficPermission
    listKind: TrafficPermissionList
    plural: trafficpermissions
    singular: trafficpermission
  scope: Cluster
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          mesh:
            description: Mesh is the name of the Kuma mesh this resource belongs to.
              It may be omitted for cluster-scoped resources.
            type: string
          metadata:
            type: object
          spec:
            description: Spec is the specification of the Kuma TrafficPermission resource.
            x-kubernetes-preserve-unknown-fields: true
        type: object
    served: true
    storage: true
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.10.0
  creationTimestamp: null
  name: trafficroutes.kuma.io
spec:
  group: kuma.io
  names:
    categories:
    - kuma
    kind: TrafficRoute
    listKind: TrafficRouteList
    plural: trafficroutes
    singular: trafficroute
  scope: Cluster
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          mesh:
            description: Mesh is the name of the Kuma mesh this resource belongs to.
              It may be omitted for cluster-scoped resources.
            type: string
          metadata:
            type: object
          spec:
            description: Spec is the specification of the Kuma TrafficRoute resource.
            x-kubernetes-preserve-unknown-fields: true
        type: object
    served: true
    storage: true
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.10.0
  creationTimestamp: null
  name: dataplanes.kuma.io
spec:
  group: kuma.io
  names:
    categories:
    - kuma
    kind: Dataplane
    listKind: DataplaneList
    plural: dataplanes
    singular: dataplane
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          mesh:
            description: Mesh is the name of the Kuma mesh this resource belongs to.
              It may be omitted for cluster-scoped resources.
            type: string
          metadata:
            type: object
          spec:
            description: Spec is the specification of the Kuma Dataplane resource.
            x-kubernetes-preserve-unknown-fields: true
        type: object
    served: true
    storage: true
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.10.0
  creationTimestamp: null
  name: traffictraces.kuma.io
spec:
  group: kuma.io
  names:
    categories:
    - kuma
    kind: TrafficTrace
    listKind: TrafficTraceList
    plural: traffictraces
    singular: traffictrace
  scope: Cluster
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          mesh:
            description: Mesh is the name of the Kuma mesh this resource belongs to.
              It may be omitted for cluster-scoped resources.
            type: string
          metadata:
            type: object
          spec:
            description: Spec is the specification of the Kuma TrafficTrace resource.
            x-kubernetes-preserve-unknown-fields: true
        type: object
    served: true
    storage: true
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.10.0
  creationTimestamp: null
  name: virtualoutbounds.kuma.io
spec:
  group: kuma.io
  names:
    categories:
    - kuma
    kind: VirtualOutbound
    listKind: VirtualOutboundList
    plural: virtualoutbounds
    singular: virtualoutbound
  scope: Cluster
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          mesh:
            description: Mesh is the name of the Kuma mesh this resource belongs to.
              It may be omitted for cluster-scoped resources.
            type: string
          metadata:
            type: object
          spec:
            description: Spec is the specification of the Kuma VirtualOutbound resource.
            x-kubernetes-preserve-unknown-fields: true
        type: object
    served: true
    storage: true
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.10.0
  creationTimestamp: null
  name: zoneegresses.kuma.io
spec:
  group: kuma.io
  names:
    categories:
    - kuma
    kind: ZoneEgress
    listKind: ZoneEgressList
    plural: zoneegresses
    singular: zoneegress
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          mesh:
            description: Mesh is the name of the Kuma mesh this resource belongs to.
              It may be omitted for cluster-scoped resources.
            type: string
          metadata:
            type: object
          spec:
            description: Spec is the specification of the Kuma ZoneEgress resource.
            x-kubernetes-preserve-unknown-fields: true
        type: object
    served: true
    storage: true
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.10.0
  creationTimestamp: null
  name: zoneegressinsights.kuma.io
spec:
  group: kuma.io
  names:
    categories:
    - kuma
    kind: ZoneEgressInsight
    listKind: ZoneEgressInsightList
    plural: zoneegressinsights
    singular: zoneegressinsight
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          mesh:
            description: Mesh is the name of the Kuma mesh this resource belongs to.
              It may be omitted for cluster-scoped resources.
            type: string
          metadata:
            type: object
          spec:
            description: Spec is the specification of the Kuma ZoneEgressInsight resource.
            x-kubernetes-preserve-unknown-fields: true
        type: object
    served: true
    storage: true
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.10.0
  creationTimestamp: null
  name: zoneingresses.kuma.io
spec:
  group: kuma.io
  names:
    categories:
    - kuma
    kind: ZoneIngress
    listKind: ZoneIngressList
    plural: zoneingresses
    singular: zoneingress
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          mesh:
            description: Mesh is the name of the Kuma mesh this resource belongs to.
              It may be omitted for cluster-scoped resources.
            type: string
          metadata:
            type: object
          spec:
            description: Spec is the specification of the Kuma ZoneIngress resource.
            x-kubernetes-preserve-unknown-fields: true
        type: object
    served: true
    storage: true
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.10.0
  creationTimestamp: null
  name: zoneingressinsights.kuma.io
spec:
  group: kuma.io
  names:
    categories:
    - kuma
    kind: ZoneIngressInsight
    listKind: ZoneIngressInsightList
    plural: zoneingressinsights
    singular: zoneingressinsight
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          mesh:
            description: Mesh is the name of the Kuma mesh this resource belongs to.
              It may be omitted for cluster-scoped resources.
            type: string
          metadata:
            type: object
          spec:
            description: Spec is the specification of the Kuma ZoneIngressInsight
              resource.
            x-kubernetes-preserve-unknown-fields: true
        type: object
    served: true
    storage: true
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.10.0
  creationTimestamp: null
  name: zoneinsights.kuma.io
spec:
  group: kuma.io
  names:
    categories:
    - kuma
    kind: ZoneInsight
    listKind: ZoneInsightList
    plural: zoneinsights
    singular: zoneinsight
  scope: Cluster
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          mesh:
            description: Mesh is the name of the Kuma mesh this resource belongs to.
              It may be omitted for cluster-scoped resources.
            type: string
          metadata:
            type: object
          spec:
            description: Spec is the specification of the Kuma ZoneInsight resource.
            x-kubernetes-preserve-unknown-fields: true
        type: object
    served: true
    storage: true
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.10.0
  creationTimestamp: null
  name: zones.kuma.io
spec:
  group: kuma.io
  names:
    categories:
    - kuma
    kind: Zone
    listKind: ZoneList
    plural: zones
    singular: zone
  scope: Cluster
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          mesh:
            description: Mesh is the name of the Kuma mesh this resource belongs to.
              It may be omitted for cluster-scoped resources.
            type: string
          metadata:
            type: object
          spec:
            description: Spec is the specification of the Kuma Zone resource.
            x-kubernetes-preserve-unknown-fields: true
        type: object
    served: true
    storage: true
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.10.0
  creationTimestamp: null
  name: externalservices.kuma.io
spec:
  group: kuma.io
  names:
    categories:
    - kuma
    kind: ExternalService
    listKind: ExternalServiceList
    plural: externalservices
    singular: externalservice
  scope: Cluster
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          mesh:
            description: Mesh is the name of the Kuma mesh this resource belongs to.
              It may be omitted for cluster-scoped resources.
            type: string
          metadata:
            type: object
          spec:
            description: Spec is the specification of the Kuma ExternalService resource.
            x-kubernetes-preserve-unknown-fields: true
        type: object
    served: true
    storage: true
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.10.0
  creationTimestamp: null
  name: faultinjections.kuma.io
spec:
  group: kuma.io
  names:
    categories:
    - kuma
    kind: FaultInjection
    listKind: FaultInjectionList
    plural: faultinjections
    singular: faultinjection
  scope: Cluster
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          mesh:
            description: Mesh is the name of the Kuma mesh this resource belongs to.
              It may be omitted for cluster-scoped resources.
            type: string
          metadata:
            type: object
          spec:
            description: Spec is the specification of the Kuma FaultInjection resource.
            x-kubernetes-preserve-unknown-fields: true
        type: object
    served: true
    storage: true
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.10.0
  creationTimestamp: null
  name: healthchecks.kuma.io
spec:
  group: kuma.io
  names:
    categories:
    - kuma
    kind: HealthCheck
    listKind: HealthCheckList
    plural: healthchecks
    singular: healthcheck
  scope: Cluster
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          mesh:
            description: Mesh is the name of the Kuma mesh this resource belongs to.
              It may be omitted for cluster-scoped resources.
            type: string
          metadata:
            type: object
          spec:
            description: Spec is the specification of the Kuma HealthCheck resource.
            x-kubernetes-preserve-unknown-fields: true
        type: object
    served: true
    storage: true
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.10.0
  creationTimestamp: null
  name: meshaccesslogs.kuma.io
spec:
  group: kuma.io
  names:
    categories:
    - kuma
    kind: MeshAccessLog
    listKind: MeshAccessLogList
    plural: meshaccesslogs
    singular: meshaccesslog
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: Spec is the specification of the Kuma MeshAccessLog resource.
            properties:
              from:
                description: From list makes a match between clients and corresponding
                  configurations
                items:
                  properties:
                    default:
                      description: Default is a configuration specific to the group
                        of clients referenced in 'targetRef'
                      properties:
                        backends:
                          items:
                            properties:
                              file:
                                description: FileBackend defines configuration for
                                  file based access logs
                                properties:
                                  format:
                                    description: Format of access logs. Placeholders
                                      available on https://www.envoyproxy.io/docs/envoy/latest/configuration/observability/access_log
                                    properties:
                                      json:
                                        items:
                                          properties:
                                            key:
                                              type: string
                                            value:
                                              type: string
                                          type: object
                                        type: array
                                      omitEmptyValues:
                                        type: boolean
                                      plain:
                                        type: string
                                    type: object
                                  path:
                                    description: Path to a file that logs will be
                                      written to
                                    type: string
                                required:
                                - path
                                type: object
                              tcp:
                                description: TCPBackend defines a TCP logging backend.
                                properties:
                                  address:
                                    description: Address of the TCP logging backend
                                    type: string
                                  format:
                                    description: Format of access logs. Placeholders
                                      available on https://www.envoyproxy.io/docs/envoy/latest/configuration/observability/access_log
                                    properties:
                                      json:
                                        items:
                                          properties:
                                            key:
                                              type: string
                                            value:
                                              type: string
                                          type: object
                                        type: array
                                      omitEmptyValues:
                                        type: boolean
                                      plain:
                                        type: string
                                    type: object
                                required:
                                - address
                                type: object
                            type: object
                          type: array
                      type: object
                    targetRef:
                      description: TargetRef is a reference to the resource that represents
                        a group of clients.
                      properties:
                        kind:
                          description: Kind of the referenced resource
                          enum:
                          - Mesh
                          - MeshSubset
                          - MeshService
                          - MeshServiceSubset
                          - MeshGatewayRoute
                          type: string
                        mesh:
                          description: Mesh is reserved for future use to identify
                            cross mesh resources.
                          type: string
                        name:
                          description: 'Name of the referenced resource. Can only
                            be used with kinds: `MeshService`, `MeshServiceSubset`
                            and `MeshGatewayRoute`'
                          type: string
                        tags:
                          additionalProperties:
                            type: string
                          description: Tags used to select a subset of proxies by
                            tags. Can only be used with kinds `MeshSubset` and `MeshServiceSubset`
                          type: object
                      type: object
                  required:
                  - targetRef
                  type: object
                type: array
              targetRef:
                description: TargetRef is a reference to the resource the policy takes
                  an effect on. The resource could be either a real store object or
                  virtual resource defined inplace.
                properties:
                  kind:
                    description: Kind of the referenced resource
                    enum:
                    - Mesh
                    - MeshSubset
                    - MeshService
                    - MeshServiceSubset
                    - MeshGatewayRoute
                    type: string
                  mesh:
                    description: Mesh is reserved for future use to identify cross
                      mesh resources.
                    type: string
                  name:
                    description: 'Name of the referenced resource. Can only be used
                      with kinds: `MeshService`, `MeshServiceSubset` and `MeshGatewayRoute`'
                    type: string
                  tags:
                    additionalProperties:
                      type: string
                    description: Tags used to select a subset of proxies by tags.
                      Can only be used with kinds `MeshSubset` and `MeshServiceSubset`
                    type: object
                type: object
              to:
                description: To list makes a match between the consumed services and
                  corresponding configurations
                items:
                  properties:
                    default:
                      description: Default is a configuration specific to the group
                        of destinations referenced in 'targetRef'
                      properties:
                        backends:
                          items:
                            properties:
                              file:
                                description: FileBackend defines configuration for
                                  file based access logs
                                properties:
                                  format:
                                    description: Format of access logs. Placeholders
                                      available on https://www.envoyproxy.io/docs/envoy/latest/configuration/observability/access_log
                                    properties:
                                      json:
                                        items:
                                          properties:
                                            key:
                                              type: string
                                            value:
                                              type: string
                                          type: object
                                        type: array
                                      omitEmptyValues:
                                        type: boolean
                                      plain:
                                        type: string
                                    type: object
                                  path:
                                    description: Path to a file that logs will be
                                      written to
                                    type: string
                                required:
                                - path
                                type: object
                              tcp:
                                description: TCPBackend defines a TCP logging backend.
                                properties:
                                  address:
                                    description: Address of the TCP logging backend
                                    type: string
                                  format:
                                    description: Format of access logs. Placeholders
                                      available on https://www.envoyproxy.io/docs/envoy/latest/configuration/observability/access_log
                                    properties:
                                      json:
                                        items:
                                          properties:
                                            key:
                                              type: string
                                            value:
                                              type: string
                                          type: object
                                        type: array
                                      omitEmptyValues:
                                        type: boolean
                                      plain:
                                        type: string
                                    type: object
                                required:
                                - address
                                type: object
                            type: object
                          type: array
                      type: object
                    targetRef:
                      description: TargetRef is a reference to the resource that represents
                        a group of destinations.
                      properties:
                        kind:
                          description: Kind of the referenced resource
                          enum:
                          - Mesh
                          - MeshSubset
                          - MeshService
                          - MeshServiceSubset
                          - MeshGatewayRoute
                          type: string
                        mesh:
                          description: Mesh is reserved for future use to identify
                            cross mesh resources.
                          type: string
                        name:
                          description: 'Name of the referenced resource. Can only
                            be used with kinds: `MeshService`, `MeshServiceSubset`
                            and `MeshGatewayRoute`'
                          type: string
                        tags:
                          additionalProperties:
                            type: string
                          description: Tags used to select a subset of proxies by
                            tags. Can only be used with kinds `MeshSubset` and `MeshServiceSubset`
                          type: object
                      type: object
                  required:
                  - targetRef
                  type: object
                type: array
            required:
            - targetRef
            type: object
        type: object
    served: true
    storage: true
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.10.0
  creationTimestamp: null
  name: meshcircuitbreakers.kuma.io
spec:
  group: kuma.io
  names:
    categories:
    - kuma
    kind: MeshCircuitBreaker
    listKind: MeshCircuitBreakerList
    plural: meshcircuitbreakers
    singular: meshcircuitbreaker
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: Spec is the specification of the Kuma MeshCircuitBreaker
              resource.
            properties:
              from:
                description: From list makes a match between clients and corresponding
                  configurations
                items:
                  properties:
                    default:
                      description: Default is a configuration specific to the group
                        of destinations referenced in 'targetRef'
                      properties:
                        connectionLimits:
                          description: ConnectionLimits contains configuration of
                            each circuit breaking limit, which when exceeded makes
                            the circuit breaker to become open (no traffic is allowed
                            like no current is allowed in the circuits when physical
                            circuit breaker ir open)
                          properties:
                            maxConnectionPools:
                              description: The maximum number of connection pools
                                per cluster that are concurrently supported at once.
                                Set this for clusters which create a large number
                                of connection pools.
                              format: int32
                              type: integer
                            maxConnections:
                              description: The maximum number of connections allowed
                                to be made to the upstream cluster.
                              format: int32
                              type: integer
                            maxPendingRequests:
                              description: The maximum number of pending requests
                                that are allowed to the upstream cluster. This limit
                                is applied as a connection limit for non-HTTP traffic.
                              format: int32
                              type: integer
                            maxRequests:
                              description: The maximum number of parallel requests
                                that are allowed to be made to the upstream cluster.
                                This limit does not apply to non-HTTP traffic.
                              format: int32
                              type: integer
                            maxRetries:
                              description: The maximum number of parallel retries
                                that will be allowed to the upstream cluster.
                              format: int32
                              type: integer
                          type: object
                        outlierDetection:
                          description: OutlierDetection contains the configuration
                            of the process of dynamically determining whether some
                            number of hosts in an upstream cluster are performing
                            unlike the others and removing them from the healthy load
                            balancing set. Performance might be along different axes
                            such as consecutive failures, temporal success rate, temporal
                            latency, etc. Outlier detection is a form of passive health
                            checking.
                          properties:
                            baseEjectionTime:
                              description: The base time that a host is ejected for.
                                The real time is equal to the base time multiplied
                                by the number of times the host has been ejected.
                              type: string
                            detectors:
                              description: Contains configuration for supported outlier
                                detectors
                              properties:
                                failurePercentage:
                                  description: Failure Percentage based outlier detection
                                    functions similarly to success rate detection,
                                    in that it relies on success rate data from each
                                    host in a cluster. However, rather than compare
                                    those values to the mean success rate of the cluster
                                    as a whole, they are compared to a flat user-configured
                                    threshold. This threshold is configured via the
                                    outlierDetection.failurePercentageThreshold field.
                                    The other configuration fields for failure percentage
                                    based detection are similar to the fields for
                                    success rate detection. As with success rate detection,
                                    detection will not be performed for a host if
                                    its request volume over the aggregation interval
                                    is less than the outlierDetection.detectors.failurePercentage.requestVolume
                                    value. Detection also will not be performed for
                                    a cluster if the number of hosts with the minimum
                                    required request volume in an interval is less
                                    than the outlierDetection.detectors.failurePercentage.minimumHosts
                                    value.
                                  properties:
                                    minimumHosts:
                                      description: The minimum number of hosts in
                                        a cluster in order to perform failure percentage-based
                                        ejection. If the total number of hosts in
                                        the cluster is less than this value, failure
                                        percentage-based ejection will not be performed.
                                      format: int32
                                      type: integer
                                    requestVolume:
                                      description: The minimum number of total requests
                                        that must be collected in one interval (as
                                        defined by the interval duration above) to
                                        perform failure percentage-based ejection
                                        for this host. If the volume is lower than
                                        this setting, failure percentage-based ejection
                                        will not be performed for this host.
                                      format: int32
                                      type: integer
                                    threshold:
                                      description: The failure percentage to use when
                                        determining failure percentage-based outlier
                                        detection. If the failure percentage of a
                                        given host is greater than or equal to this
                                        value, it will be ejected.
                                      format: int32
                                      type: integer
                                  type: object
                                gatewayFailures:
                                  description: In the default mode (outlierDetection.splitExternalLocalOriginErrors
                                    is false) this detection type takes into account
                                    a subset of 5xx errors, called "gateway errors"
                                    (502, 503 or 504 status code) and local origin
                                    failures, such as timeout, TCP reset etc. In split
                                    mode (outlierDetection.splitExternalLocalOriginErrors
                                    is true) this detection type takes into account
                                    a subset of 5xx errors, called "gateway errors"
                                    (502, 503 or 504 status code) and is supported
                                    only by the http router.
                                  properties:
                                    consecutive:
                                      description: The number of consecutive gateway
                                        failures (502, 503, 504 status codes) before
                                        a consecutive gateway failure ejection occurs.
                                      format: int32
                                      type: integer
                                  type: object
                                localOriginFailures:
                                  description: 'This detection type is enabled only
                                    when outlierDetection.splitExternalLocalOriginErrors
                                    is true and takes into account only locally originated
                                    errors (timeout, reset, etc). If Envoy repeatedly
                                    cannot connect to an upstream host or communication
                                    with the upstream host is repeatedly interrupted,
                                    it will be ejected. Various locally originated
                                    problems are detected: timeout, TCP reset, ICMP
                                    errors, etc. This detection type is supported
                                    by http router and tcp proxy.'
                                  properties:
                                    consecutive:
                                      description: The number of consecutive locally
                                        originated failures before ejection occurs.
                                        Parameter takes effect only when splitExternalAndLocalErrors
                                        is set to true.
                                      format: int32
                                      type: integer
                                  type: object
                                successRate:
                                  description: 'Success Rate based outlier detection
                                    aggregates success rate data from every host in
                                    a cluster. Then at given intervals ejects hosts
                                    based on statistical outlier detection. Success
                                    Rate outlier detection will not be calculated
                                    for a host if its request volume over the aggregation
                                    interval is less than the outlierDetection.detectors.successRate.requestVolume
                                    value. Moreover, detection will not be performed
                                    for a cluster if the number of hosts with the
                                    minimum required request volume in an interval
                                    is less than the outlierDetection.detectors.successRate.minimumHosts
                                    value. In the default configuration mode (outlierDetection.splitExternalLocalOriginErrors
                                    is false) this detection type takes into account
                                    all types of errors: locally and externally originated.
                                    In split mode (outlierDetection.splitExternalLocalOriginErrors
                                    is true), locally originated errors and externally
                                    originated (transaction) errors are counted and
                                    treated separately.'
                                  properties:
                                    minimumHosts:
                                      description: The number of hosts in a cluster
                                        that must have enough request volume to detect
                                        success rate outliers. If the number of hosts
                                        is less than this setting, outlier detection
                                        via success rate statistics is not performed
                                        for any host in the cluster.
                                      format: int32
                                      type: integer
                                    requestVolume:
                                      description: The minimum number of total requests
                                        that must be collected in one interval (as
                                        defined by the interval duration configured
                                        in outlierDetection section) to include this
                                        host in success rate based outlier detection.
                                        If the volume is lower than this setting,
                                        outlier detection via success rate statistics
                                        is not performed for that host.
                                      format: int32
                                      type: integer
                                    standardDeviationFactor:
                                      description: 'This factor is used to determine
                                        the ejection threshold for success rate outlier
                                        ejection. The ejection threshold is the difference
                                        between the mean success rate, and the product
                                        of this factor and the standard deviation
                                        of the mean success rate: mean - (standard_deviation
                                        * success_rate_standard_deviation_factor).
                                        This factor is divided by a thousand to get
                                        a double. That is, if the desired factor is
                                        1.9, the runtime value should be 1900.'
                                      format: int32
                                      type: integer
                                  type: object
                                totalFailures:
                                  description: 'In the default mode (outlierDetection.splitExternalAndLocalErrors
                                    is false) this detection type takes into account
                                    all generated errors: locally originated and externally
                                    originated (transaction) errors. In split mode
                                    (outlierDetection.splitExternalLocalOriginErrors
                                    is true) this detection type takes into account
                                    only externally originated (transaction) errors,
                                    ignoring locally originated errors. If an upstream
                                    host is an HTTP-server, only 5xx types of error
                                    are taken into account (see Consecutive Gateway
                                    Failure for exceptions). Properly formatted responses,
                                    even when they carry an operational error (like
                                    index not found, access denied) are not taken
                                    into account.'
                                  properties:
                                    consecutive:
                                      description: The number of consecutive server-side
                                        error responses (for HTTP traffic, 5xx responses;
                                        for TCP traffic, connection failures; for
                                        Redis, failure to respond PONG; etc.) before
                                        a consecutive total failure ejection occurs.
                                      format: int32
                                      type: integer
                                  type: object
                              type: object
                            disabled:
                              description: When set to true, outlierDetection configuration
                                won't take any effect
                              type: boolean
                            interval:
                              description: The time interval between ejection analysis
                                sweeps. This can result in both new ejections and
                                hosts being returned to service.
                              type: string
                            maxEjectionPercent:
                              description: The maximum % of an upstream cluster that
                                can be ejected due to outlier detection. Defaults
                                to 10% but will eject at least one host regardless
                                of the value.
                              format: int32
                              type: integer
                            splitExternalAndLocalErrors:
                              description: 'Determines whether to distinguish local
                                origin failures from external errors. If set to true
                                the following configuration parameters are taken into
                                account: detectors.localOriginFailures.consecutive'
                              type: boolean
                          type: object
                      type: object
                    targetRef:
                      description: TargetRef is a reference to the resource that represents
                        a group of destinations.
                      properties:
                        kind:
                          description: Kind of the referenced resource
                          enum:
                          - Mesh
                          - MeshSubset
                          - MeshService
                          - MeshServiceSubset
                          - MeshGatewayRoute
                          type: string
                        mesh:
                          description: Mesh is reserved for future use to identify
                            cross mesh resources.
                          type: string
                        name:
                          description: 'Name of the referenced resource. Can only
                            be used with kinds: `MeshService`, `MeshServiceSubset`
                            and `MeshGatewayRoute`'
                          type: string
                        tags:
                          additionalProperties:
                            type: string
                          description: Tags used to select a subset of proxies by
                            tags. Can only be used with kinds `MeshSubset` and `MeshServiceSubset`
                          type: object
                      type: object
                  required:
                  - targetRef
                  type: object
                type: array
              targetRef:
                description: TargetRef is a reference to the resource the policy takes
                  an effect on. The resource could be either a real store object or
                  virtual resource defined in place.
                properties:
                  kind:
                    description: Kind of the referenced resource
                    enum:
                    - Mesh
                    - MeshSubset
                    - MeshService
                    - MeshServiceSubset
                    - MeshGatewayRoute
                    type: string
                  mesh:
                    description: Mesh is reserved for future use to identify cross
                      mesh resources.
                    type: string
                  name:
                    description: 'Name of the referenced resource. Can only be used
                      with kinds: `MeshService`, `MeshServiceSubset` and `MeshGatewayRoute`'
                    type: string
                  tags:
                    additionalProperties:
                      type: string
                    description: Tags used to select a subset of proxies by tags.
                      Can only be used with kinds `MeshSubset` and `MeshServiceSubset`
                    type: object
                type: object
              to:
                description: To list makes a match between the consumed services and
                  corresponding configurations
                items:
                  properties:
                    default:
                      description: Default is a configuration specific to the group
                        of destinations referenced in 'targetRef'
                      properties:
                        connectionLimits:
                          description: ConnectionLimits contains configuration of
                            each circuit breaking limit, which when exceeded makes
                            the circuit breaker to become open (no traffic is allowed
                            like no current is allowed in the circuits when physical
                            circuit breaker ir open)
                          properties:
                            maxConnectionPools:
                              description: The maximum number of connection pools
                                per cluster that are concurrently supported at once.
                                Set this for clusters which create a large number
                                of connection pools.
                              format: int32
                              type: integer
                            maxConnections:
                              description: The maximum number of connections allowed
                                to be made to the upstream cluster.
                              format: int32
                              type: integer
                            maxPendingRequests:
                              description: The maximum number of pending requests
                                that are allowed to the upstream cluster. This limit
                                is applied as a connection limit for non-HTTP traffic.
                              format: int32
                              type: integer
                            maxRequests:
                              description: The maximum number of parallel requests
                                that are allowed to be made to the upstream cluster.
                                This limit does not apply to non-HTTP traffic.
                              format: int32
                              type: integer
                            maxRetries:
                              description: The maximum number of parallel retries
                                that will be allowed to the upstream cluster.
                              format: int32
                              type: integer
                          type: object
                        outlierDetection:
                          description: OutlierDetection contains the configuration
                            of the process of dynamically determining whether some
                            number of hosts in an upstream cluster are performing
                            unlike the others and removing them from the healthy load
                            balancing set. Performance might be along different axes
                            such as consecutive failures, temporal success rate, temporal
                            latency, etc. Outlier detection is a form of passive health
                            checking.
                          properties:
                            baseEjectionTime:
                              description: The base time that a host is ejected for.
                                The real time is equal to the base time multiplied
                                by the number of times the host has been ejected.
                              type: string
                            detectors:
                              description: Contains configuration for supported outlier
                                detectors
                              properties:
                                failurePercentage:
                                  description: Failure Percentage based outlier detection
                                    functions similarly to success rate detection,
                                    in that it relies on success rate data from each
                                    host in a cluster. However, rather than compare
                                    those values to the mean success rate of the cluster
                                    as a whole, they are compared to a flat user-configured
                                    threshold. This threshold is configured via the
                                    outlierDetection.failurePercentageThreshold field.
                                    The other configuration fields for failure percentage
                                    based detection are similar to the fields for
                                    success rate detection. As with success rate detection,
                                    detection will not be performed for a host if
                                    its request volume over the aggregation interval
                                    is less than the outlierDetection.detectors.failurePercentage.requestVolume
                                    value. Detection also will not be performed for
                                    a cluster if the number of hosts with the minimum
                                    required request volume in an interval is less
                                    than the outlierDetection.detectors.failurePercentage.minimumHosts
                                    value.
                                  properties:
                                    minimumHosts:
                                      description: The minimum number of hosts in
                                        a cluster in order to perform failure percentage-based
                                        ejection. If the total number of hosts in
                                        the cluster is less than this value, failure
                                        percentage-based ejection will not be performed.
                                      format: int32
                                      type: integer
                                    requestVolume:
                                      description: The minimum number of total requests
                                        that must be collected in one interval (as
                                        defined by the interval duration above) to
                                        perform failure percentage-based ejection
                                        for this host. If the volume is lower than
                                        this setting, failure percentage-based ejection
                                        will not be performed for this host.
                                      format: int32
                                      type: integer
                                    threshold:
                                      description: The failure percentage to use when
                                        determining failure percentage-based outlier
                                        detection. If the failure percentage of a
                                        given host is greater than or equal to this
                                        value, it will be ejected.
                                      format: int32
                                      type: integer
                                  type: object
                                gatewayFailures:
                                  description: In the default mode (outlierDetection.splitExternalLocalOriginErrors
                                    is false) this detection type takes into account
                                    a subset of 5xx errors, called "gateway errors"
                                    (502, 503 or 504 status code) and local origin
                                    failures, such as timeout, TCP reset etc. In split
                                    mode (outlierDetection.splitExternalLocalOriginErrors
                                    is true) this detection type takes into account
                                    a subset of 5xx errors, called "gateway errors"
                                    (502, 503 or 504 status code) and is supported
                                    only by the http router.
                                  properties:
                                    consecutive:
                                      description: The number of consecutive gateway
                                        failures (502, 503, 504 status codes) before
                                        a consecutive gateway failure ejection occurs.
                                      format: int32
                                      type: integer
                                  type: object
                                localOriginFailures:
                                  description: 'This detection type is enabled only
                                    when outlierDetection.splitExternalLocalOriginErrors
                                    is true and takes into account only locally originated
                                    errors (timeout, reset, etc). If Envoy repeatedly
                                    cannot connect to an upstream host or communication
                                    with the upstream host is repeatedly interrupted,
                                    it will be ejected. Various locally originated
                                    problems are detected: timeout, TCP reset, ICMP
                                    errors, etc. This detection type is supported
                                    by http router and tcp proxy.'
                                  properties:
                                    consecutive:
                                      description: The number of consecutive locally
                                        originated failures before ejection occurs.
                                        Parameter takes effect only when splitExternalAndLocalErrors
                                        is set to true.
                                      format: int32
                                      type: integer
                                  type: object
                                successRate:
                                  description: 'Success Rate based outlier detection
                                    aggregates success rate data from every host in
                                    a cluster. Then at given intervals ejects hosts
                                    based on statistical outlier detection. Success
                                    Rate outlier detection will not be calculated
                                    for a host if its request volume over the aggregation
                                    interval is less than the outlierDetection.detectors.successRate.requestVolume
                                    value. Moreover, detection will not be performed
                                    for a cluster if the number of hosts with the
                                    minimum required request volume in an interval
                                    is less than the outlierDetection.detectors.successRate.minimumHosts
                                    value. In the default configuration mode (outlierDetection.splitExternalLocalOriginErrors
                                    is false) this detection type takes into account
                                    all types of errors: locally and externally originated.
                                    In split mode (outlierDetection.splitExternalLocalOriginErrors
                                    is true), locally originated errors and externally
                                    originated (transaction) errors are counted and
                                    treated separately.'
                                  properties:
                                    minimumHosts:
                                      description: The number of hosts in a cluster
                                        that must have enough request volume to detect
                                        success rate outliers. If the number of hosts
                                        is less than this setting, outlier detection
                                        via success rate statistics is not performed
                                        for any host in the cluster.
                                      format: int32
                                      type: integer
                                    requestVolume:
                                      description: The minimum number of total requests
                                        that must be collected in one interval (as
                                        defined by the interval duration configured
                                        in outlierDetection section) to include this
                                        host in success rate based outlier detection.
                                        If the volume is lower than this setting,
                                        outlier detection via success rate statistics
                                        is not performed for that host.
                                      format: int32
                                      type: integer
                                    standardDeviationFactor:
                                      description: 'This factor is used to determine
                                        the ejection threshold for success rate outlier
                                        ejection. The ejection threshold is the difference
                                        between the mean success rate, and the product
                                        of this factor and the standard deviation
                                        of the mean success rate: mean - (standard_deviation
                                        * success_rate_standard_deviation_factor).
                                        This factor is divided by a thousand to get
                                        a double. That is, if the desired factor is
                                        1.9, the runtime value should be 1900.'
                                      format: int32
                                      type: integer
                                  type: object
                                totalFailures:
                                  description: 'In the default mode (outlierDetection.splitExternalAndLocalErrors
                                    is false) this detection type takes into account
                                    all generated errors: locally originated and externally
                                    originated (transaction) errors. In split mode
                                    (outlierDetection.splitExternalLocalOriginErrors
                                    is true) this detection type takes into account
                                    only externally originated (transaction) errors,
                                    ignoring locally originated errors. If an upstream
                                    host is an HTTP-server, only 5xx types of error
                                    are taken into account (see Consecutive Gateway
                                    Failure for exceptions). Properly formatted responses,
                                    even when they carry an operational error (like
                                    index not found, access denied) are not taken
                                    into account.'
                                  properties:
                                    consecutive:
                                      description: The number of consecutive server-side
                                        error responses (for HTTP traffic, 5xx responses;
                                        for TCP traffic, connection failures; for
                                        Redis, failure to respond PONG; etc.) before
                                        a consecutive total failure ejection occurs.
                                      format: int32
                                      type: integer
                                  type: object
                              type: object
                            disabled:
                              description: When set to true, outlierDetection configuration
                                won't take any effect
                              type: boolean
                            interval:
                              description: The time interval between ejection analysis
                                sweeps. This can result in both new ejections and
                                hosts being returned to service.
                              type: string
                            maxEjectionPercent:
                              description: The maximum % of an upstream cluster that
                                can be ejected due to outlier detection. Defaults
                                to 10% but will eject at least one host regardless
                                of the value.
                              format: int32
                              type: integer
                            splitExternalAndLocalErrors:
                              description: 'Determines whether to distinguish local
                                origin failures from external errors. If set to true
                                the following configuration parameters are taken into
                                account: detectors.localOriginFailures.consecutive'
                              type: boolean
                          type: object
                      type: object
                    targetRef:
                      description: TargetRef is a reference to the resource that represents
                        a group of destinations.
                      properties:
                        kind:
                          description: Kind of the referenced resource
                          enum:
                          - Mesh
                          - MeshSubset
                          - MeshService
                          - MeshServiceSubset
                          - MeshGatewayRoute
                          type: string
                        mesh:
                          description: Mesh is reserved for future use to identify
                            cross mesh resources.
                          type: string
                        name:
                          description: 'Name of the referenced resource. Can only
                            be used with kinds: `MeshService`, `MeshServiceSubset`
                            and `MeshGatewayRoute`'
                          type: string
                        tags:
                          additionalProperties:
                            type: string
                          description: Tags used to select a subset of proxies by
                            tags. Can only be used with kinds `MeshSubset` and `MeshServiceSubset`
                          type: object
                      type: object
                  required:
                  - targetRef
                  type: object
                type: array
            required:
            - targetRef
            type: object
        type: object
    served: true
    storage: true
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.10.0
  creationTimestamp: null
  name: meshes.kuma.io
spec:
  group: kuma.io
  names:
    categories:
    - kuma
    kind: Mesh
    listKind: MeshList
    plural: meshes
    singular: mesh
  scope: Cluster
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          mesh:
            description: Mesh is the name of the Kuma mesh this resource belongs to.
              It may be omitted for cluster-scoped resources.
            type: string
          metadata:
            type: object
          spec:
            description: Spec is the specification of the Kuma Mesh resource.
            x-kubernetes-preserve-unknown-fields: true
        type: object
    served: true
    storage: true
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: kuma-control-plane
  labels: 
    app: kuma-control-plane
    app.kubernetes.io/name: kuma
    app.kubernetes.io/instance: kuma
rules:
  - apiGroups:
      - ""
    resources:
      - namespaces
      - pods
      - configmaps
      - nodes
    verbs:
      - get
      - list
      - watch
  - apiGroups:
      - "apps"
    resources:
      - deployments
      - replicasets
    verbs:
      - create
      - delete
      - get
      - list
      - patch
      - update
      - watch
  - apiGroups:
      - "batch"
    resources:
      - jobs
    verbs:
      - get
      - list
      - watch
  - apiGroups:
      - gateway.networking.k8s.io
    resources:
      - gatewayclasses
      - gateways
      - referencegrants
      - httproutes
    verbs:
      - create
      - delete
      - get
      - list
      - patch
      - update
      - watch
  - apiGroups:
      - gateway.networking.k8s.io
    resources:
      - gatewayclasses/status
      - gateways/status
      - httproutes/status
    verbs:
      - get
      - patch
      - update
  - apiGroups:
      - coordination.k8s.io
    resources:
      - leases
    verbs:
      - get
      - list
      - watch
      - create
      - update
      - patch
      - delete
  - apiGroups:
      - ""
    resources:
      - events
    verbs:
      - create
      - patch
  - apiGroups:
      - ""
    resources:
      - services
    verbs:
      - get
      - delete
      - list
      - watch
      - create
      - update
      - patch
  - apiGroups:
      - kuma.io
    resources:
      - dataplanes
      - dataplaneinsights
      - meshes
      - zones
      - zoneinsights
      - zoneingresses
      - zoneingressinsights
      - zoneegresses
      - zoneegressinsights
      - meshinsights
      - serviceinsights
      - proxytemplates
      - ratelimits
      - trafficpermissions
      - trafficroutes
      - timeouts
      - retries
      - circuitbreakers
      - virtualoutbounds
      - containerpatches
      - externalservices
      - faultinjections
      - healthchecks
      - trafficlogs
      - traffictraces
      - meshgateways
      - meshgatewayroutes
      - meshgatewayinstances
      - meshaccesslogs
      - meshcircuitbreakers
      - meshhealthchecks
      - meshhttproutes
      - meshproxypatches
      - meshratelimits
      - meshretries
      - meshtimeouts
      - meshtraces
      - meshtrafficpermissions
    verbs:
      - get
      - list
      - watch
      - create
      - update
      - patch
      - delete
  - apiGroups:
      - kuma.io
    resources:
      - meshgatewayinstances/status
      - meshgatewayinstances/finalizers
      - meshes/finalizers
      - dataplanes/finalizers
    verbs:
      - get
      - patch
      - update
  - apiGroups:
      - ""
    resources:
      - pods/finalizers
    verbs:
      - get
      - patch
      - update
  # validate k8s token before issuing mTLS cert
  - apiGroups:
      - authentication.k8s.io
    resources:
      - tokenreviews
    verbs:
      - create
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: kuma-control-plane
  labels: 
    app: kuma-control-plane
    app.kubernetes.io/name: kuma
    app.kubernetes.io/instance: kuma
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: kuma-control-plane
subjects:
  - kind: ServiceAccount
    name: kuma-control-plane
    namespace: kuma-system
---
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: kuma-control-plane
  namespace: kuma-system
  labels: 
    app: kuma-control-plane
    app.kubernetes.io/name: kuma
    app.kubernetes.io/instance: kuma
rules:
  - apiGroups:
      - ""
    resources:
      - secrets
    verbs:
      - get
      - list
      - watch
      - create
      - update
      - patch
      - delete
  - apiGroups:
      - ""
    resources:
      - configmaps
    verbs:
      - get
      - list
      - watch
      - create
      - update
      - patch
      - delete
  # leader-for-life election deletes Pods in some circumstances
  - apiGroups:
      - ""
    resources:
      - pods
    verbs:
      - delete
---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: kuma-control-plane
  namespace: kuma-system
  labels: 
    app: kuma-control-plane
    app.kubernetes.io/name: kuma
    app.kubernetes.io/instance: kuma
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: kuma-control-plane
subjects:
  - kind: ServiceAccount
    name: kuma-control-plane
    namespace: kuma-system
---
apiVersion: v1
kind: Service
metadata:
  name: kuma-control-plane
  namespace: kuma-system
  labels: 
    app: kuma-control-plane
    app.kubernetes.io/name: kuma
    app.kubernetes.io/instance: kuma
  annotations:
    prometheus.io/scrape: "true"
    prometheus.io/port: "5680"
spec:
  type: ClusterIP
  ports:
    - port: 5680
      name: diagnostics
    - port: 5681
      name: http-api-server
    - port: 5682
      name: https-api-server
    - port: 443
      name: https-admission-server
      targetPort: 5443
    - port: 5676
      name: mads-server
    - port: 5678
      name: dp-server
  selector:
    app: kuma-control-plane
    app.kubernetes.io/name: kuma
    app.kubernetes.io/instance: kuma
---
apiVersion: v1
kind: Service
metadata:
  name: kuma-egress
  namespace: kuma-system
  labels: 
    app: kuma-egress
    app.kubernetes.io/name: kuma
    app.kubernetes.io/instance: kuma
  annotations:
spec:
  type: ClusterIP
  ports:
    - port: 10002
      protocol: TCP
      targetPort: 10002
  selector:
    app: kuma-egress
    app.kubernetes.io/name: kuma
    app.kubernetes.io/instance: kuma
---
apiVersion: v1
kind: Service
metadata:
  name: kuma-ingress
  namespace: kuma-system
  labels: 
    app: kuma-ingress
    app.kubernetes.io/name: kuma
    app.kubernetes.io/instance: kuma
  annotations:
spec:
  type: LoadBalancer
  ports:
    - port: 10001
      protocol: TCP
      targetPort: 10001
  selector:
    app: kuma-ingress
    app.kubernetes.io/name: kuma
    app.kubernetes.io/instance: kuma
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: kuma-control-plane
  namespace: kuma-system
  labels: 
    app: kuma-control-plane
    app.kubernetes.io/name: kuma
    app.kubernetes.io/instance: kuma
spec:
  replicas: 1
  strategy:
    rollingUpdate:
      maxSurge: 1
      maxUnavailable: 0
  selector:
    matchLabels:
      app.kubernetes.io/name: kuma
      app.kubernetes.io/instance: kuma
      app: kuma-control-plane
  template:
    metadata:
      annotations:
        checksum/config: fd9d1d8386f97f2bd49e50f476520816168a1c9f60bbc43dec1347a64d239155
        checksum/tls-secrets: d4dafb3f347d3989753df803a7f2b48f535902402a22c949814f4ce4e603fa9e
      labels: 
        app: kuma-control-plane
        app.kubernetes.io/name: kuma
        app.kubernetes.io/instance: kuma
    spec:
      affinity: 
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
          - podAffinityTerm:
              labelSelector:
                matchExpressions:
                - key: app.kubernetes.io/name
                  operator: In
                  values:
                  - 'kuma'
                - key: app.kubernetes.io/instance
                  operator: In
                  values:
                  - 'kuma'
                - key: app
                  operator: In
                  values:
                  - 'kuma-control-plane'
              topologyKey: kubernetes.io/hostname
            weight: 100
      serviceAccountName: kuma-control-plane
      automountServiceAccountToken: true
      nodeSelector:
        
        kubernetes.io/os: linux
      hostNetwork: false
      terminationGracePeriodSeconds: 30
      containers:
        - name: control-plane
          image: "docker.io/kumahq/kuma-cp:0.0.1"
          imagePullPolicy: IfNotPresent
          env:
            - name: KUMA_API_SERVER_AUTHN_LOCALHOST_IS_ADMIN
              value: "false"
            - name: KUMA_API_SERVER_READ_ONLY
              value: "true"
            - name: KUMA_DEFAULTS_SKIP_MESH_CREATION
              value: "false"
            - name: KUMA_DP_SERVER_HDS_ENABLED
              value: "false"
            - name: KUMA_ENVIRONMENT
              value: "kubernetes"
            - name: KUMA_GENERAL_TLS_CERT_FILE
              value: "/var/run/secrets/kuma.io/tls-cert/tls.crt"
            - name: KUMA_GENERAL_TLS_KEY_FILE
              value: "/var/run/secrets/kuma.io/tls-cert/tls.key"
            - name: KUMA_INJECTOR_INIT_CONTAINER_IMAGE
              value: "docker.io/kumahq/kuma-init:0.0.1"
            - name: KUMA_MODE
              value: "zone"
            - name: KUMA_MULTIZONE_ZONE_GLOBAL_ADDRESS
              value: "grpcs://foo.com"
            - name: KUMA_MULTIZONE_ZONE_NAME
              value: "zone-1"
            - name: KUMA_RUNTIME_KUBERNETES_ADMISSION_SERVER_CERT_DIR
              value: "/var/run/secrets/kuma.io/tls-cert"
            - name: KUMA_RUNTIME_KUBERNETES_ADMISSION_SERVER_PORT
              value: "5443"
            - name: KUMA_RUNTIME_KUBERNETES_CONTROL_PLANE_SERVICE_NAME
              value: "kuma-control-plane"
            - name: KUMA_RUNTIME_KUBERNETES_INJECTOR_CA_CERT_FILE
              value: "/var/run/secrets/kuma.io/tls-cert/ca.crt"
            - name: KUMA_RUNTIME_KUBERNETES_INJECTOR_CNI_ENABLED
              value: "false"
            - name: KUMA_RUNTIME_KUBERNETES_INJECTOR_SIDECAR_CONTAINER_IMAGE
              value: "docker.io/kumahq/kuma-dp:0.0.1"
            - name: KUMA_RUNTIME_KUBERNETES_SERVICE_ACCOUNT_NAME
              value: "system:serviceaccount:kuma-system:kuma-control-plane"
            - name: KUMA_STORE_KUBERNETES_SYSTEM_NAMESPACE
              value: "kuma-system"
            - name: KUMA_STORE_TYPE
              value: "kubernetes"
            - name: POD_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.name
            - name: KUMA_INTER_CP_CATALOG_INSTANCE_ADDRESS
              valueFrom:
                fieldRef:
                  fieldPath: status.podIP
          args:
            - run
            - --log-level=info
            - --config-file=/etc/kuma.io/kuma-control-plane/config.yaml
          ports:
            - containerPort: 5680
              name: diagnostics
              protocol: TCP
            - containerPort: 5681
            - containerPort: 5682
            - containerPort: 5443
            - containerPort: 5678
          livenessProbe:
            timeoutSeconds: 10
            httpGet:
              path: /healthy
              port: 5680
          readinessProbe:
            timeoutSeconds: 10
            httpGet:
              path: /ready
              port: 5680
          resources:
            requests:
              cpu: 100m
              memory: 256Mi
          
          volumeMounts:
            - name: general-tls-cert
              mountPath: /var/run/secrets/kuma.io/tls-cert/tls.crt
              subPath: tls.crt
              readOnly: true
            - name: general-tls-cert
              mountPath: /var/run/secrets/kuma.io/tls-cert/tls.key
              subPath: tls.key
              readOnly: true
            - name: general-tls-cert
              mountPath: /var/run/secrets/kuma.io/tls-cert/ca.crt
              subPath: ca.crt
              readOnly: true
            - name: kuma-control-plane-config
              mountPath: /etc/kuma.io/kuma-control-plane
              readOnly: true
      volumes:
        - name: general-tls-cert
          secret:
            secretName: general-tls-secret
        - name: kuma-control-plane-config
          configMap:
            name: kuma-control-plane-config
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: kuma-egress
  namespace: kuma-system
  labels: 
    app: kuma-egress
    app.kubernetes.io/name: kuma
    app.kubernetes.io/instance: kuma
spec:
  strategy:
    rollingUpdate:
      maxSurge: 1
      maxUnavailable: 0
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: kuma
      app.kubernetes.io/instance: kuma
      app: kuma-egress
  template:
    metadata:
      annotations:
        kuma.io/egress: enabled
      labels:
        app: kuma-egress
        app.kubernetes.io/name: kuma
        app.kubernetes.io/instance: kuma
    spec:
      affinity: 
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
          - podAffinityTerm:
              labelSelector:
                matchExpressions:
                - key: app.kubernetes.io/name
                  operator: In
                  values:
                  - 'kuma'
                - key: app.kubernetes.io/instance
                  operator: In
                  values:
                  - 'kuma'
                - key: app
                  operator: In
                  values:
                  - kuma-egress
              topologyKey: kubernetes.io/hostname
            weight: 100
      serviceAccountName: kuma-egress
      nodeSelector:
      
        kubernetes.io/os: linux
      containers:
        - name: egress
          image: "docker.io/kumahq/kuma-dp:0.0.1"
          imagePullPolicy: IfNotPresent
          env:
            - name: POD_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.name
            - name: POD_NAMESPACE
              valueFrom:
                fieldRef:
                  fieldPath: metadata.namespace
            - name: KUMA_CONTROL_PLANE_URL
              value: "https://kuma-control-plane.kuma-system:5678"
            - name: KUMA_CONTROL_PLANE_CA_CERT_FILE
              value: /var/run/secrets/kuma.io/tls-cert/ca.crt
            - name: KUMA_DATAPLANE_NAME
              value: $(POD_NAME).$(POD_NAMESPACE)
            - name: KUMA_DATAPLANE_DRAIN_TIME
              value: 30s
            - name: KUMA_DATAPLANE_RUNTIME_TOKEN_PATH
              value: /var/run/secrets/kubernetes.io/serviceaccount/token
            - name: KUMA_DATAPLANE_PROXY_TYPE
              value: "egress"
          args:
            - run
            - --log-level=info
          ports:
            - containerPort: 10002
          livenessProbe:
            httpGet:
              path: "/ready"
              port: 9901
            failureThreshold: 12
            initialDelaySeconds: 60
            periodSeconds: 5
            successThreshold: 1
            timeoutSeconds: 3
          readinessProbe:
            httpGet:
              path: "/ready"
              port: 9901
            failureThreshold: 12
            initialDelaySeconds: 1
            periodSeconds: 5
            successThreshold: 1
            timeoutSeconds: 3
          resources:
            requests:
              cpu: 50m
              memory: 64Mi
            limits:
              cpu: 1000m
              memory: 512Mi
          volumeMounts:
            - name: kuma-tls-cert
              mountPath: /var/run/secrets/kuma.io/tls-cert
              readOnly: true
      volumes:
        - name: kuma-tls-cert
          secret:
            secretName: kuma-tls-cert
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: kuma-ingress
  namespace: kuma-system
  labels: 
    app: kuma-ingress
    app.kubernetes.io/name: kuma
    app.kubernetes.io/instance: kuma
spec:
  strategy:
    rollingUpdate:
      maxSurge: 1
      maxUnavailable: 0
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: kuma
      app.kubernetes.io/instance: kuma
      app: kuma-ingress
  template:
    metadata:
      annotations:
        kuma.io/ingress: enabled
      labels:
        app: kuma-ingress
        app.kubernetes.io/name: kuma
        app.kubernetes.io/instance: kuma
    spec:
      affinity: 
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
          - podAffinityTerm:
              labelSelector:
                matchExpressions:
                - key: app.kubernetes.io/name
                  operator: In
                  values:
                  - 'kuma'
                - key: app.kubernetes.io/instance
                  operator: In
                  values:
                  - 'kuma'
                - key: app
                  operator: In
                  values:
                  - kuma-ingress
              topologyKey: kubernetes.io/hostname
            weight: 100
      serviceAccountName: kuma-ingress
      nodeSelector:
      
        kubernetes.io/os: linux
      terminationGracePeriodSeconds: 30
      containers:
        - name: ingress
          image: "docker.io/kumahq/kuma-dp:0.0.1"
          imagePullPolicy: IfNotPresent
          env:
            - name: POD_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.name
            - name: POD_NAMESPACE
              valueFrom:
                fieldRef:
                  fieldPath: metadata.namespace
            - name: KUMA_CONTROL_PLANE_URL
              value: "https://kuma-control-plane.kuma-system:5678"
            - name: KUMA_CONTROL_PLANE_CA_CERT_FILE
              value: /var/run/secrets/kuma.io/tls-cert/ca.crt
            - name: KUMA_DATAPLANE_NAME
              value: $(POD_NAME).$(POD_NAMESPACE)
            - name: KUMA_DATAPLANE_DRAIN_TIME
              value: 30s
            - name: KUMA_DATAPLANE_RUNTIME_TOKEN_PATH
              value: /var/run/secrets/kubernetes.io/serviceaccount/token
            - name: KUMA_DATAPLANE_PROXY_TYPE
              value: "ingress"
          args:
            - run
            - --log-level=info
          ports:
            - containerPort: 10001
          livenessProbe:
            httpGet:
              path: "/ready"
              port: 9901
            failureThreshold: 12
            initialDelaySeconds: 60
            periodSeconds: 5
            successThreshold: 1
            timeoutSeconds: 3
          readinessProbe:
            httpGet:
              path: "/ready"
              port: 9901
            failureThreshold: 12
            initialDelaySeconds: 1
            periodSeconds: 5
            successThreshold: 1
            timeoutSeconds: 3
          resources: 
            limits:
              cpu: 1000m
              memory: 512Mi
            requests:
              cpu: 50m
              memory: 64Mi
          
          volumeMounts:
            - name: kuma-tls-cert
              mountPath: /var/run/secrets/kuma.io/tls-cert
              readOnly: true
      volumes:
        - name: kuma-tls-cert
          secret:
            secretName: kuma-tls-cert
---
apiVersion: admissionregistration.k8s.io/v1
kind: MutatingWebhookConfiguration
metadata:
  name: kuma-admission-mutating-webhook-configuration
  namespace: kuma-system
  labels: 
    app: kuma-control-plane
    app.kubernetes.io/name: kuma
    app.kubernetes.io/instance: kuma
webhooks:
  - name: mesh.defaulter.kuma-admission.kuma.io
    admissionReviewVersions: ["v1"]
    failurePolicy: Fail
    clientConfig:
      caBundle: XYZ
      service:
        namespace: kuma-system
        name: kuma-control-plane
        path: /default-kuma-io-v1alpha1-mesh
    rules:
      - apiGroups:
          - kuma.io
        apiVersions:
          - v1alpha1
        operations:
          - CREATE
          - UPDATE
        resources:
          - meshes
          - meshaccesslogs
          - meshcircuitbreakers
          - meshhealthchecks
          - meshhttproutes
          - meshproxypatches
          - meshratelimits
          - meshretries
          - meshtimeouts
          - meshtraces
          - meshtrafficpermissions
    sideEffects: None
  - name: owner-reference.kuma-admission.kuma.io
    admissionReviewVersions: ["v1"]
    failurePolicy: Fail
    clientConfig:
      caBundle: XYZ
      service:
        namespace: kuma-system
        name: kuma-control-plane
        path: /owner-reference-kuma-io-v1alpha1
    rules:
      - apiGroups:
          - kuma.io
        apiVersions:
          - v1alpha1
        operations:
          - CREATE
        resources:
          - circuitbreakers
          - externalservices
          - faultinjections
          - healthchecks
          - meshgateways
          - meshgatewayroutes
          - proxytemplates
          - ratelimits
          - retries
          - timeouts
          - trafficlogs
          - trafficpermissions
          - trafficroutes
          - traffictraces
          - virtualoutbounds
          - meshaccesslogs
          - meshcircuitbreakers
          - meshhealthchecks
          - meshhttproutes
          - meshproxypatches
          - meshratelimits
          - meshretries
          - meshtimeouts
          - meshtraces
          - meshtrafficpermissions
  
      
    sideEffects: None
  - name: namespace-kuma-injector.kuma.io
    admissionReviewVersions: ["v1"]
    failurePolicy: Fail
    namespaceSelector:
      matchLabels:
        kuma.io/sidecar-injection: enabled
    clientConfig:
      caBundle: XYZ
      service:
        namespace: kuma-system
        name: kuma-control-plane
        path: /inject-sidecar
    rules:
      - apiGroups:
          - ""
        apiVersions:
          - v1
        operations:
          - CREATE
        resources:
          - pods
    sideEffects: None
  - name: pods-kuma-injector.kuma.io
    admissionReviewVersions: ["v1"]
    failurePolicy: Fail
    objectSelector:
      matchLabels:
        kuma.io/sidecar-injection: enabled
    clientConfig:
      caBundle: XYZ
      service:
        namespace: kuma-system
        name: kuma-control-plane
        path: /inject-sidecar
    rules:
      - apiGroups:
          - ""
        apiVersions:
          - v1
        operations:
          - CREATE
        resources:
          - pods
    sideEffects: None
  - name: kuma-injector.kuma.io
    admissionReviewVersions: ["v1"]
    failurePolicy: Ignore 
    clientConfig:
      caBundle: XYZ
      service:
        namespace: kuma-system
        name: kuma-control-plane
        path: /inject-sidecar
    rules:
      - apiGroups:
          - ""
        apiVersions:
          - v1
        operations:
          - CREATE
        resources:
          - pods
    sideEffects: None
---
apiVersion: admissionregistration.k8s.io/v1
kind: ValidatingWebhookConfiguration
metadata:
  name: kuma-validating-webhook-configuration
  namespace: kuma-system
  labels: 
    app: kuma-control-plane
    app.kubernetes.io/name: kuma
    app.kubernetes.io/instance: kuma
webhooks:
  - name: validator.kuma-admission.kuma.io
    admissionReviewVersions: ["v1"]
    failurePolicy: Fail
    clientConfig:
      caBundle: XYZ
      service:
        namespace: kuma-system
        name: kuma-control-plane
        path: /validate-kuma-io-v1alpha1
    rules:
      - apiGroups:
          - kuma.io
        apiVersions:
          - v1alpha1
        operations:
          - CREATE
          - UPDATE
          - DELETE
        resources:
          - circuitbreakers
          - dataplanes
          - externalservices
          - faultinjections
          - gatewayinstances
          - healthchecks
          - meshes
          - meshgateways
          - meshgatewayroutes
          - proxytemplates
          - ratelimits
          - retries
          - trafficlogs
          - trafficpermissions
          - trafficroutes
          - traffictraces
          - virtualoutbounds
          - zones
          - containerpatches
          - meshaccesslogs
          - meshcircuitbreakers
          - meshhealthchecks
          - meshhttproutes
          - meshproxypatches
          - meshratelimits
          - meshretries
          - meshtimeouts
          - meshtraces
          - meshtrafficpermissions
    
      
    sideEffects: None
  - name: service.validator.kuma-admission.kuma.io
    admissionReviewVersions: ["v1"]
    failurePolicy: Ignore
    clientConfig:
      caBundle: XYZ
      service:
        namespace: kuma-system
        name: kuma-control-plane
        path: /validate-v1-service
    rules:
      - apiGroups:
          - ""
        apiVersions:
          - v1
        operations:
          - CREATE
          - UPDATE
        resources:
          - services
    sideEffects: None
  - name: secret.validator.kuma-admission.kuma.io
    admissionReviewVersions: ["v1"]
    namespaceSelector:
      matchLabels:
        kuma.io/system-namespace: "true"
    failurePolicy: Ignore
    clientConfig:
      caBundle: XYZ
      service:
        namespace: kuma-system
        name: kuma-control-plane
        path: /validate-v1-secret
    rules:
      - apiGroups:
          - ""
        apiVersions:
          - v1
        operations:
          - CREATE
          - UPDATE
          - DELETE
        resources:
          - secrets
    sideEffects: None
  - name: gateway.validator.kuma-admission.kuma.io
    admissionReviewVersions: ["v1"]
    failurePolicy: Ignore
    clientConfig:
      caBundle: XYZ
      service:
        namespace: kuma-system
        name: kuma-control-plane
        path: /validate-gatewayclass
    rules:
      - apiGroups:
          - "gateway.networking.k8s.io"
        apiVersions:
          - v1alpha2
          - v1beta1
        operations:
          - CREATE
        resources:
          - gatewayclasses
    sideEffects: None
