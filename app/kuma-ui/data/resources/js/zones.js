(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["zones"],{2055:function(t,e,a){},2378:function(t,e,a){"use strict";var n=a("f130"),r=a.n(n);r.a},"43c3":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",{staticClass:"page-header",class:{"flex justify-between items-center my-6":!t.noflex}},[t._t("default")],2)},r=[],i={props:{noflex:{type:Boolean,default:!1}}},s=i,o=(a("e234"),a("2877")),u=Object(o["a"])(s,n,r,!1,null,null,null);e["a"]=u.exports},af21:function(t,e,a){},b6c6:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.hideBreadcrumbs?t._e():a("Krumbs",{attrs:{items:t.routes}})],1)},r=[],i=(a("8e6e"),a("456d"),a("ac6a"),a("8615"),a("bd86")),s=(a("28a5"),a("7f7f"),a("d7c2"));function o(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function u(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?o(Object(a),!0).forEach((function(e){Object(i["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var c={computed:{pageMesh:function(){return this.$route.params.mesh},routes:function(){var t=this,e=[];this.$route.matched.map((function(a){t.calculateRouteText(a),t.calculateRouteTitle(a);var n=void 0!==a.redirect&&void 0!==a.redirect.name?a.redirect.name:a.name;t.isCurrentRoute(a)&&t.pageMesh&&e.push({key:t.pageMesh,to:{path:"/meshes/".concat(t.pageMesh)},title:"Mesh Overview for ".concat(t.pageMesh),text:t.pageMesh}),t.isCurrentRoute(a)&&a.meta.parent&&"undefined"!==a.meta.parent?e.push({key:a.meta.parent,to:{name:a.meta.parent},title:a.meta.title,text:a.meta.breadcrumb||a.meta.title}):t.isCurrentRoute(a)&&!a.meta.excludeAsBreadcrumb?e.push({key:n,to:{name:n},title:a.meta.title,text:a.meta.breadcrumb||a.meta.title}):a.meta.parent&&"undefined"!==a.meta.parent&&e.push({key:a.meta.parent,to:{name:a.meta.parent},title:a.meta.title,text:a.meta.breadcrumb||a.meta.title})}));var a=this.calculateRouteTextAdvanced(this.$route);return a&&e.push({title:a,text:a}),e},hideBreadcrumbs:function(){return this.$route.query.hide_breadcrumb}},methods:{getBreadcrumbItem:function(t,e,a,n){return{key:t,to:e,title:a,text:n}},isCurrentRoute:function(t){return t.name&&t.name===this.$router.currentRoute.name||t.redirect===this.$router.currentRoute.name},calculateRouteFromQuery:function(t){var e=t.entity_id,a=t.entity_type;if(e&&a){var n=this.$router.resolve({name:"show-".concat(a.split("_")[0]),params:{id:e.split(",")[0]}}).normalizedTo,r=u({},n,{meta:u({},n.meta)}),i=r.params.id.split("-")[0];return e.split(",").length>1&&e.split(",")[1]&&(i=e.split(",")[1]),r.meta.breadcrumb=i,[u({},this.getBreadcrumbItem(r.name,r,this.calculateRouteTitle(r),this.calculateRouteText(r)))]}},calculateRouteText:function(t){if(t.path&&t.path.indexOf(":mesh")>-1){var e=this.$router.currentRoute.params;return(e&&e.mesh&&Object(s["d"])(e.mesh)?e.mesh.split("-")[0].trim():e.mesh)||t.meta.breadcrumb||t.meta.title}return t.meta&&(t.meta.breadcrumb||t.meta.title)||t.name||t.meta.breadcrumb||t.meta.title},calculateRouteTitle:function(t){return t.params&&t.params.mesh||t.path.indexOf(":mesh")>-1&&this.$router.currentRoute.params&&this.$router.currentRoute.params.mesh},calculateRouteTextAdvanced:function(t){var e=t.params,a="mesh-overview"===t.name,n=Object.assign({},e,{mesh:null});return a?e.mesh:Object.values(n).filter((function(t){return t}))[0]}}},l=c,m=(a("e7ab"),a("2877")),p=Object(m["a"])(l,n,r,!1,null,null,null);e["a"]=p.exports},c153:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"zones"},[a("page-header",{attrs:{noflex:""}},[a("breadcrumbs")],1),!1===t.multicluster?a("KEmptyState",{staticClass:"global-api-status"},[a("template",{slot:"title"},[a("KIcon",{staticClass:"kong-icon--centered",attrs:{icon:"dangerCircle",size:"64"}}),t._v("\n      Kuma is running in Standalone mode.\n    ")],1),a("template",{slot:"message"},[a("p",[t._v("\n        To access this page, you must be running in "),a("strong",[t._v("Multi-Zone")]),t._v(" mode.\n      ")])]),a("template",{slot:"cta"},[a("KButton",{attrs:{to:"https://kuma.io/docs/0.6.0/documentation/deployments/",target:"_blank",appearance:"primary"}},[t._v("\n        Learn More\n      ")])],1)],2):a("FrameSkeleton",[a("DataOverview",{attrs:{"page-size":t.pageSize,"has-error":t.hasError,"is-loading":t.isLoading,"empty-state":t.empty_state,"display-data-table":!0,"table-data":t.tableData,"table-data-is-empty":t.tableDataIsEmpty,"table-data-function-text":"View","table-data-row":"name"},on:{tableAction:t.tableAction,reloadData:t.loadData}},[a("template",{slot:"pagination"},[a("Pagination",{attrs:{"has-previous":t.previous.length>0,"has-next":t.hasNext},on:{next:t.goToNextPage,previous:t.goToPreviousPage}})],1)],2),!1===t.isEmpty?a("Tabs",{attrs:{"has-error":t.hasError,"is-loading":t.isLoading,tabs:t.tabs,"initial-tab-override":"overview"}},[a("template",{slot:"tabHeader"},[a("div",[a("h3",[t._v(t._s(t.tabGroupTitle))])])]),a("template",{slot:"overview"},[a("LabelList",{attrs:{"has-error":t.entityHasError,"is-loading":t.entityIsLoading,"is-empty":t.entityIsEmpty}},[a("div",[a("ul",t._l(t.entity,(function(e,n){return a("li",{key:n},[a("h4",[t._v("\n                  "+t._s(n)+"\n                ")]),"status"===n?a("p",[a("KBadge",{attrs:{appearance:"Offline"===e?"danger":"success"}},[t._v("\n                    "+t._s(e)+"\n                  ")])],1):a("p",[t._v("\n                  "+t._s(e)+"\n                ")])])})),0)])])],1),a("template",{slot:"yaml"},[a("YamlView",{attrs:{title:t.entityOverviewTitle,"has-error":t.entityHasError,"is-loading":t.entityIsLoading,"is-empty":t.entityIsEmpty,content:t.rawEntity}})],1)],2):t._e()],1)],1)},r=[],i=(a("8e6e"),a("456d"),a("75fc")),s=(a("ac6a"),a("7f7f"),a("bd86")),o=(a("6b54"),a("2f62")),u=a("d7c2"),c=a("8218"),l=a("1d10"),m=a("43c3"),p=a("b6c6"),h=a("1799"),f=a("2778"),d=a("251b"),b=a("ff9d"),y=a("0ada");function v(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function g(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?v(Object(a),!0).forEach((function(e){Object(s["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var O={name:"Zones",metaInfo:{title:"Zones"},components:{FrameSkeleton:l["a"],PageHeader:m["a"],Breadcrumbs:p["a"],Pagination:h["a"],DataOverview:f["a"],Tabs:d["a"],YamlView:b["a"],LabelList:y["a"]},filters:{formatValue:function(t){return t?t.toLocaleString("en").toString():0},readableDate:function(t){return Object(u["c"])(t)}},mixins:[c["a"]],data:function(){return{isLoading:!0,isEmpty:!1,hasError:!1,entityIsLoading:!0,entityIsEmpty:!1,entityHasError:!1,tableDataIsEmpty:!1,empty_state:{title:"No Data",message:"There are no Meshes present."},tableData:{headers:[{key:"actions",hideLabel:!0},{label:"Status",key:"status"},{label:"Name",key:"name"},{label:"URL",key:"url"}],data:[]},tabs:[{hash:"#overview",title:"Overview"},{hash:"#yaml",title:"YAML"}],entity:[],rawEntity:null,firstEntity:null,pageSize:this.$pageSize,pageOffset:null,next:null,hasNext:!1,previous:[],tabGroupTitle:null,entityOverviewTitle:null,itemsPerCol:3}},computed:g({},Object(o["d"])({mesh:"selectedMesh"}),{},Object(o["b"])({multicluster:"getMulticlusterStatus"}),{pageTitle:function(){var t=this.$route.meta.title;return t},shareUrl:function(){var t=this,e="".concat(window.location.origin,"#"),a=this.entity,n=function(){return t.$route.query.ns?t.$route.fullPath:"".concat(e).concat(t.$route.fullPath,"?ns=").concat(a.name)};return n()}}),watch:{$route:function(t,e){this.init()}},beforeMount:function(){this.init()},methods:{init:function(){this.multicluster&&this.loadData()},goToPreviousPage:function(){this.pageOffset=this.previous.pop(),this.next=null,this.loadData()},goToNextPage:function(){this.previous.push(this.pageOffset),this.pageOffset=this.next,this.next=null,this.loadData()},tableAction:function(t){var e=t;this.$store.dispatch("updateSelectedTab",this.tabs[0].hash),this.$store.dispatch("updateSelectedTableRow",e.name),this.getEntity(e)},loadData:function(){var t=this;this.isLoading=!0,this.isEmpty=!1;var e=this.$api.getZoneStatus(),a=function(){return e.then((function(e){e.next?(t.next=Object(u["a"])(e.next),t.hasNext=!0):t.hasNext=!1;var a=e;a.length>0?(a.forEach((function(t){var e=!1===t.active?"Offline":"Online";delete t.active,t.status=e})),t.sortEntities(a),t.firstEntity=a[0].name,t.getEntity(a[0]),t.$store.dispatch("updateSelectedTableRow",t.firstEntity),t.tableData.data=Object(i["a"])(a),t.tableDataIsEmpty=!1,t.isEmpty=!1):(t.tableData.data=[],t.tableDataIsEmpty=!0,t.isEmpty=!0,t.getEntity(null))})).catch((function(e){t.hasError=!0,t.isEmpty=!0,console.error(e)})).finally((function(){setTimeout((function(){t.isLoading=!1}),"500")}))};a()},getEntity:function(t){var e=this;this.entityIsLoading=!0,this.entityIsEmpty=!1;var a=["type","name","mesh"],n=new Promise((function(e,a){if(t&&null!==t)e(t);else{var n=new Error("Entity is either undefined or not present.");a(n)}}));t&&null!==t?n.then((function(t){t?e.$api.getZoneOverview(t.name).then((function(t){e.tabGroupTitle="Zone: ".concat(t.name),e.entityOverviewTitle="Zone Overview for ".concat(t.name),e.entity=Object(u["b"])(t,a),e.rawEntity=Object(u["f"])(t)})):(e.entity=null,e.entityIsEmpty=!0)})).catch((function(t){e.entityHasError=!0,console.error(t)})).finally((function(){setTimeout((function(){e.entityIsLoading=!1}),"500")})):setTimeout((function(){e.entityIsEmpty=!0,e.entityIsLoading=!1}),"500")}}},w=O,E=(a("2378"),a("2877")),j=Object(E["a"])(w,n,r,!1,null,"297e3667",null);e["default"]=j.exports},e234:function(t,e,a){"use strict";var n=a("2055"),r=a.n(n);r.a},e7ab:function(t,e,a){"use strict";var n=a("af21"),r=a.n(n);r.a},f130:function(t,e,a){}}]);