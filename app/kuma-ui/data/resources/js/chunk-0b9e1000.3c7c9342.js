(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0b9e1000"],{1915:function(t,e,a){},"251b":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tab-container"},[t.tabGroupTitle?a("header",{staticClass:"tab__header"},[a("h3",{staticClass:"tab__header__title"},[t._v("\n      "+t._s(t.tabGroupTitle)+"\n    ")])]):t._e(),a("div",{staticClass:"tab__content-container",class:{"has-border":t.hasBorder}},[t.isReady?a("KTabs",{key:t.activeTab,attrs:{tabs:t.tabs},on:{changed:function(e){return t.switchTab(e)}},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[t._l(t.tabs,(function(e,n){return a("template",{slot:e.hash.replace("#","")},[t._t(e.hash.replace("#",""))],2)}))],2):t._e(),!0===t.loaders?a("div",[t.isLoading?a("KEmptyState",{attrs:{"cta-is-hidden":""}},[a("template",{slot:"title"},[a("div",{staticClass:"card-icon mb-3"},[a("KIcon",{attrs:{icon:"spinner",color:"rgba(0, 0, 0, 0.1)",size:"42"}})],1),t._v("\n          Data Loading...\n        ")])],2):t._e(),t.hasError?a("KEmptyState",{attrs:{"cta-is-hidden":""}},[a("template",{slot:"title"},[a("div",{staticClass:"card-icon mb-3"},[a("KIcon",{staticClass:"kong-icon--centered",attrs:{color:"var(--yellow-base)",icon:"warning",size:"42"}})],1),t._v("\n          An error has occurred while trying to load this data.\n        ")])],2):t._e()],1):t._e()],1)])},s=[],r=a("88d9"),i={name:"Tabs",components:{KEmptyState:r["a"]},props:{loaders:{type:Boolean,default:!0},vuexState:{type:String,default:"updateSelectedTab"},isLoading:{type:Boolean,default:!1},isEmpty:{type:Boolean,default:!1},hasError:{type:Boolean,default:!1},tabs:{type:Array,required:!0},tabGroupTitle:{type:String,default:null},hasBorder:{type:Boolean,default:!1},tabState:{type:String,default:null},initialTabOverride:{type:String,required:!1,default:null}},computed:{activeTab:{get:function(){return this.tabState?"#".concat(this.$store.state[this.tabState]):this.$store.state.selectedTab},set:function(t){return t}},isReady:function(){return!1===this.loaders||!this.isEmpty&&!this.hasError&&!this.isLoading}},beforeMount:function(){this.$store.dispatch(this.vuexState,"#".concat(this.initialTabOverride)||!1)},methods:{switchTab:function(t){this.activeTab=t,this.$store.dispatch(this.vuexState,t)}}},o=i,l=(a("3a05"),a("2877")),c=Object(l["a"])(o,n,s,!1,null,"399b9d6c",null);e["a"]=c.exports},"27d0":function(t,e,a){"use strict";var n=a("f770"),s=a.n(n);s.a},"2a31":function(t,e,a){},"2fdb":function(t,e,a){"use strict";var n=a("5ca1"),s=a("d2c8"),r="includes";n(n.P+n.F*a("5147")(r),"String",{includes:function(t){return!!~s(this,t,r).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},"3a05":function(t,e,a){"use strict";var n=a("aa98"),s=a.n(n);s.a},4190:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wizard"},[a("div",{staticClass:"wizard__content"},[a("StepSkeleton",{attrs:{steps:t.steps,"advance-check":!0,"sidebar-content":t.sidebarContent,"footer-enabled":!1===t.scanFound,"next-disabled":t.nextDisabled}},[a("template",{slot:"general"},[a("p",[t._v("\n          Welcome to the wizard for creating a new Mesh entity in Kuma.\n          We will be providing you with a few steps that will get you started.\n        ")]),a("p",[t._v("\n          As you know, the Kuma GUI is read-only, so at the end of this wizard\n          we will be generating the configuration that you can apply with either\n          "),a("code",[t._v("kubectl")]),t._v(" (if you are running in Kubernetes mode) or\n          kumactl / API (if you are running in Universal mode).\n        ")]),a("h3",[t._v("\n          To get started, please fill-in the following information:\n        ")]),a("KCard",{staticClass:"my-6 k-card--small",attrs:{title:"Mesh Information","has-shadow":""}},[a("template",{slot:"body"},[a("FormFragment",{attrs:{title:"Mesh name","for-attr":"mesh-name"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.validate.meshName,expression:"validate.meshName"}],staticClass:"k-input w-100",attrs:{id:"mesh-name",type:"text",placeholder:"your-mesh-name",required:""},domProps:{value:t.validate.meshName},on:{change:function(e){return t.updateStorage("meshName",e.target.value)},input:function(e){e.target.composing||t.$set(t.validate,"meshName",e.target.value)}}}),t.vmsg.meshName?a("KAlert",{attrs:{appearance:"danger",size:"small","alert-message":t.vmsg.meshName}}):t._e()],1),a("FormFragment",{attrs:{title:"Mutual TLS"}},[a("label",{staticClass:"k-input-label mx-2"},[a("input",{ref:"mtlsDisabled",staticClass:"k-input mr-2",attrs:{value:"disabled",name:"mtls",type:"radio"},domProps:{checked:!1===t.formConditions.mtlsEnabled},on:{change:function(e){t.updateStorage("meshMtls",!1),t.formConditions.mtlsEnabled=!1}}}),a("span",[t._v("Disabled")])]),a("label",{staticClass:"k-input-label mx-2"},[a("input",{staticClass:"k-input mr-2",attrs:{id:"mtls-enabled",value:"enabled",name:"mtls",type:"radio"},domProps:{checked:!0===t.formConditions.mtlsEnabled},on:{change:function(e){t.updateStorage("meshMtls",!0),t.updateStorage("meshCA","builtin"),t.formConditions.mtlsEnabled=!0}}}),a("span",[t._v("Enabled")])])]),!0===t.formConditions.mtlsEnabled?a("FormFragment",{attrs:{title:"Certificate Authority","for-attr":"certificate-authority"}},[a("select",{staticClass:"k-input w-100",attrs:{id:"certificate-authority",name:"certificate-authority"},on:{change:function(e){return t.updateStorage("meshCA",e.target.value)}}},[a("option",{attrs:{value:"builtin"},domProps:{selected:"builtin"===t.getStorageItem("meshCA")}},[t._v("\n                  builtin\n                ")]),a("option",{attrs:{value:"provided"},domProps:{selected:"provided"===t.getStorageItem("meshCA")}},[t._v("\n                  provided\n                ")]),a("option",{attrs:{value:"vault"},domProps:{selected:"vault"===t.getStorageItem("meshCA")}},[t._v("\n                  vault\n                ")])]),a("p",{staticClass:"help"},[t._v("\n                If you've enabled mTLS, you must select a CA.\n              ")])]):t._e()],1)],2)],1),a("template",{slot:"logging"},[a("h3",[t._v("\n          Setup Logging\n        ")]),a("p",[t._v('\n          You can setup as many logging backends as you need that you can later\n          use to log traffic via the "TrafficLog" policy. In this wizard,\n          we allow you to configure one backend, but you can add more manually\n          if you wish.\n        ')]),a("KCard",{staticClass:"my-6 k-card--small",attrs:{title:"Logging Configuration","has-shadow":""}},[a("template",{slot:"body"},[a("FormFragment",{attrs:{title:"Logging"}},[a("label",{staticClass:"k-input-label mx-2"},[a("input",{staticClass:"k-input mr-2",attrs:{id:"logging-disabled",value:"disabled",name:"logging",type:"radio"},domProps:{checked:!1===t.formConditions.loggingEnabled},on:{change:function(e){t.updateStorage("meshLoggingStatus",!1),t.formConditions.loggingEnabled=!1}}}),a("span",[t._v("Disabled")])]),a("label",{staticClass:"k-input-label mx-2"},[a("input",{staticClass:"k-input mr-2",attrs:{id:"logging-enabled",value:"enabled",name:"logging",type:"radio"},domProps:{checked:!0===t.formConditions.loggingEnabled},on:{change:function(e){t.updateStorage("meshLoggingStatus",!0),t.updateStorage("meshLoggingType","tcp"),t.formConditions.loggingEnabled=!0,t.formConditions.loggingType="tcp"}}}),a("span",[t._v("Enabled")])])]),!0===t.formConditions.loggingEnabled?a("FormFragment",{attrs:{title:"Backend name"}},[a("input",{staticClass:"k-input w-100",attrs:{id:"backend-name",type:"text",placeholder:"your-backend-name"},domProps:{value:t.getStorageItem("meshLoggingBackend")},on:{change:function(e){return t.updateStorage("meshLoggingBackend",e.target.value)}}})]):t._e(),!0===t.formConditions.loggingEnabled?a("div",[a("FormFragment",{attrs:{title:"Type"}},[a("select",{ref:"loggingTypeSelect",staticClass:"k-input w-100",attrs:{id:"logging-type",name:"logging-type"},on:{change:function(e){t.updateStorage("meshLoggingType",e.target.value),t.formConditions.loggingType=e.target.value}}},[a("option",{attrs:{value:"tcp"},domProps:{selected:"tcp"===t.getStorageItem("meshLoggingType")}},[t._v("\n                    TCP\n                  ")]),a("option",{attrs:{value:"file"},domProps:{selected:"file"===t.getStorageItem("meshLoggingType")}},[t._v("\n                    File\n                  ")])])]),"file"===t.formConditions.loggingType?a("FormFragment",{attrs:{title:"Path","for-attr":"backend-address"}},[a("input",{staticClass:"k-input w-100",attrs:{id:"backend-address",type:"text"},domProps:{value:t.getStorageItem("meshLoggingPath")},on:{change:function(e){return t.updateStorage("meshLoggingPath",e.target.value)}}})]):t._e(),"tcp"===t.formConditions.loggingType?a("FormFragment",{attrs:{title:"Address","for-attr":"backend-address"}},[a("input",{staticClass:"k-input w-100",attrs:{id:"backend-address",type:"text"},domProps:{value:t.getStorageItem("meshLoggingAddress")||"127.0.0.1:5000"},on:{change:function(e){return t.updateStorage("meshLoggingAddress",e.target.value)}}})]):t._e(),a("FormFragment",{attrs:{title:"Format","for-attr":"backend-format"}},[a("textarea",{staticClass:"k-input w-100 code-sample",attrs:{id:"backend-format",rows:"12"},on:{change:function(e){t.updateStorage("meshLoggingBackendFormat",e.target.value.trim())}}},[t._v('                  { "start_time": "%START_TIME%", "source": "%KUMA_SOURCE_SERVICE%", "destination": "%KUMA_DESTINATION_SERVICE%", "source_address": "%KUMA_SOURCE_ADDRESS_WITHOUT_PORT%", "destination_address": "%UPSTREAM_HOST%", "duration_millis": "%DURATION%", "bytes_received": "%BYTES_RECEIVED%", "bytes_sent": "%BYTES_SENT%" }\n                  ')])])],1):t._e()],1)],2)],1),a("template",{slot:"tracing"},[a("h3",[t._v("\n          Setup Tracing\n        ")]),a("p",[t._v('\n          You can setup as many tracing backends as you need that you can later\n          use to log traffic via the "TrafficTrace" policy. In this\n          wizard we allow you to configure one backend, but you can add more\n          manually as you wish.\n        ')]),a("KCard",{staticClass:"my-6 k-card--small",attrs:{title:"Tracing Configuration","has-shadow":""}},[a("template",{slot:"body"},[a("FormFragment",{attrs:{title:"Tracing"}},[a("label",{staticClass:"k-input-label mx-2"},[a("input",{staticClass:"k-input mr-2",attrs:{id:"tracing-disabled",value:"disabled",name:"tracing",type:"radio"},domProps:{checked:!1===t.formConditions.tracingEnabled},on:{change:function(e){t.updateStorage("meshTracingStatus",!1),t.formConditions.tracingEnabled=!1}}}),a("span",[t._v("Disabled")])]),a("label",{staticClass:"k-input-label mx-2"},[a("input",{staticClass:"k-input mr-2",attrs:{id:"tracing-enabled",value:"enabled",name:"tracing",type:"radio"},domProps:{checked:!0===t.formConditions.tracingEnabled},on:{change:function(e){t.updateStorage("meshTracingStatus",!0),t.updateStorage("meshTracingType","zipkin"),t.formConditions.tracingEnabled=!0}}}),a("span",[t._v("Enabled")])])]),!0===t.formConditions.tracingEnabled?a("FormFragment",{attrs:{title:"Backend name","for-attr":"tracing-backend-name"}},[a("input",{staticClass:"k-input w-100",attrs:{id:"tracing-backend-name",type:"text",placeholder:"your-tracing-backend-name"},domProps:{value:t.getStorageItem("meshTracingBackend")},on:{change:function(e){return t.updateStorage("meshTracingBackend",e.target.value)}}})]):t._e(),!0===t.formConditions.tracingEnabled?a("FormFragment",{attrs:{title:"Type","for-attr":"tracing-type"}},[a("select",{staticClass:"k-input w-100",attrs:{id:"tracing-type",name:"tracing-type"},on:{change:function(e){return t.updateStorage("meshTracingType",e.target.value)}}},[a("option",{attrs:{value:"zipkin"},domProps:{selected:"zipkin"===t.getStorageItem("meshTracingType")}},[t._v("\n                  Zipkin\n                ")])])]):t._e(),!0===t.formConditions.tracingEnabled?a("FormFragment",{attrs:{title:"Sampling","for-attr":"tracing-sampling"}},[a("input",{staticClass:"k-input w-100",attrs:{id:"tracing-sampling",type:"number",step:"0.1",min:"0",max:"100"},domProps:{value:t.getStorageItem("meshTracingSampling")||99.9},on:{change:function(e){return t.updateStorage("meshTracingSampling",e.target.value)}}})]):t._e(),!0===t.formConditions.tracingEnabled?a("FormFragment",{attrs:{title:"URL","for-attr":"tracing-zipkin-url"}},[a("input",{staticClass:"k-input w-100",attrs:{id:"tracing-zipkin-url",type:"text",placeholder:"your Zipkin URL"},domProps:{value:t.getStorageItem("meshTracingZipkinURL")},on:{change:function(e){return t.updateStorage("meshTracingZipkinURL",e.target.value)}}})]):t._e()],1)],2)],1),a("template",{slot:"metrics"},[a("h3",[t._v("\n          Setup Metrics\n        ")]),a("p",[t._v("\n          You can expose metrics from every data-plane on a configurable path\n          and port that a metrics service, like Prometheus, can use to fetch them.\n        ")]),a("KCard",{staticClass:"my-6 k-card--small",attrs:{title:"Metrics Configuration","has-shadow":""}},[a("template",{slot:"body"},[a("FormFragment",{attrs:{title:"Metrics"}},[a("label",{staticClass:"k-input-label mx-2"},[a("input",{staticClass:"k-input mr-2",attrs:{id:"metrics-disabled",value:"disabled",name:"metrics",type:"radio"},domProps:{checked:!1===t.formConditions.metricsEnabled},on:{change:function(e){t.updateStorage("meshMetricsStatus",!1),t.formConditions.metricsEnabled=!1}}}),a("span",[t._v("Disabled")])]),a("label",{staticClass:"k-input-label mx-2"},[a("input",{staticClass:"k-input mr-2",attrs:{id:"metrics-enabled",value:"enabled",name:"metrics",type:"radio"},domProps:{checked:!0===t.formConditions.metricsEnabled},on:{change:function(e){t.updateStorage("meshMetricsStatus",!0),t.updateStorage("meshMetricsType","prometheus"),t.formConditions.metricsEnabled=!0}}}),a("span",[t._v("Enabled")])])]),!0===t.formConditions.metricsEnabled?a("FormFragment",{attrs:{title:"Type","for-attr":"metrics-type"}},[a("select",{staticClass:"k-input w-100",attrs:{id:"metrics-type",name:"metrics-type"},on:{change:function(e){return t.updateStorage("meshMetricsType",e.target.value)}}},[a("option",{attrs:{value:"prometheus"},domProps:{selected:"prometheus"===t.getStorageItem("meshMetricsType")}},[t._v("\n                  Prometheus\n                ")])])]):t._e(),!0===t.formConditions.metricsEnabled?a("FormFragment",{attrs:{title:"Dataplane port","for-attr":"metrics-dataplane-port"}},[a("input",{staticClass:"k-input w-100",attrs:{id:"metrics-dataplane-port",type:"number",step:"1",min:"0",max:"65535",placeholder:"1234"},domProps:{value:t.getStorageItem("meshMetricsDataplanePort")||"5670"},on:{change:function(e){return t.updateStorage("meshMetricsDataplanePort",e.target.value)}}})]):t._e(),!0===t.formConditions.metricsEnabled?a("FormFragment",{attrs:{title:"Dataplane path","for-attr":"metrics-dataplane-path"}},[a("input",{staticClass:"k-input w-100",attrs:{id:"metrics-dataplane-path",type:"text"},domProps:{value:t.getStorageItem("meshMetricsDataplanePath")||"/metrics"},on:{change:function(e){return t.updateStorage("meshMetricsDataplanePath",e.target.value)}}})]):t._e()],1)],2)],1),a("template",{slot:"complete"},[t.codeOutput?a("div",[!1===t.scanFound?a("div",[a("h3",[t._v("\n              Install a new Mesh\n            ")]),a("p",[t._v("\n              Since the Kuma GUI is read-only mode to follow Ops best practices,\n              please execute the following command in your shell to create the entity.\n              Kuma will automatically detect when the new entity has been created.\n            ")]),a("Tabs",{attrs:{loaders:!1,tabs:t.tabs,"has-border":!0,"initial-tab-override":t.environment}},[a("template",{slot:"kubernetes"},[a("CodeView",{attrs:{title:"Kubernetes","copy-button-text":"Copy Command to Clipboard",lang:"bash",content:t.codeOutput}})],1),a("template",{slot:"universal"},[a("CodeView",{attrs:{title:"Universal","copy-button-text":"Copy Command to Clipboard",lang:"bash",content:t.codeOutput}})],1)],2)],1):t._e(),a("Scanner",{attrs:{"loader-function":t.scanForEntity,"should-start":!0,"has-error":t.scanError,"can-complete":t.scanFound}},[a("template",{slot:"loading-title"},[a("h3",[t._v("Searching…")])]),a("template",{slot:"loading-content"},[a("p",[t._v("We are looking for your mesh.")])]),a("template",{slot:"complete-title"},[a("h3",[t._v("Done!")])]),a("template",{slot:"complete-content"},[a("p",[t._v("\n                Your Mesh "),t.formData.meshName?a("strong",[t._v(t._s(t.formData.meshName))]):t._e(),t._v(" was found!\n              ")]),a("p",[a("KButton",{attrs:{appearance:"primary",to:{name:"all-meshes"}}},[t._v("\n                  See Meshes\n                ")])],1)]),a("template",{slot:"error-title"},[a("h3",[t._v("Mesh not found")])]),a("template",{slot:"error-content"},[a("p",[t._v("We were unable to find your mesh.")])])],2)],1):a("KAlert",{attrs:{appearance:"danger"}},[a("template",{slot:"alertMessage"},[a("p",[t._v("\n              You haven't filled any data out yet! Please return to the first\n              step and fill out your information.\n            ")])])],2)],1),a("template",{slot:"mesh"},[a("h3",[t._v("Mesh")]),a("p",[t._v("\n          In "+t._s(t.title)+", a Mesh entity allows you to define an isolated environment\n          for your data-planes and policies. It's isolated because the mTLS CA\n          you choose can be different from the one configured for our Meshes.\n          Ideally, you will have either a large Mesh with all the workloads, or\n          one Mesh per application for better isolation.\n        ")]),a("p",[a("a",{attrs:{href:"https://kuma.io/docs/"+t.version+"/policies/mesh/",target:"_blank"}},[t._v("\n            Learn More\n          ")])])]),a("template",{slot:"did-you-know"},[a("h3",[t._v("Did You Know?")]),a("p",[t._v("\n          As you know, the GUI is read-only, but it will be providing instructions\n          to create a new Mesh and verify everything worked well.\n        ")])])],2)],1)])},s=[],r=(a("8e6e"),a("456d"),a("7f7f"),a("ffc1"),a("ac6a"),a("bd86")),i=a("2f62");a("6762"),a("2fdb");function o(t,e){return Object.keys(t).filter((function(t){return!e.includes(t)})).map((function(e){return Object.assign({},Object(r["a"])({},e,t[e]))})).reduce((function(t,e){return Object.assign(t,e)}),{})}function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function c(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(Object(a),!0).forEach((function(e){Object(r["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var d={data:function(){return{storedData:[],storedVal:null,storedKey:null}},mounted:function(){this.clearStorage()},methods:{updateStorage:function(t,e){this.storedVal=e||null,this.storedKey=t||null,this.storedData=c({},this.storedData,{},Object(r["a"])({},t,e)),this.$store.dispatch("updateWizardData",this.storedData),this.$emit("storageItemModified",e)},getStorageItem:function(t){var e=localStorage.storedFormData;return this.$emit("storageItemRetrieved",t),e&&e.length>0?JSON.parse(localStorage.storedFormData)[t]:null},clearStorage:function(){localStorage.removeItem("storedFormData"),this.$store.dispatch("updateWizardData",null)}},watch:{storedVal:function(){var t=JSON.stringify(this.storedData);localStorage.storedFormData=t}}},u=a("ad2f"),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-line-wrapper"},[a("div",{staticClass:"form-line"},[a("div",{staticClass:"form-line__col"},[a("label",{staticClass:"k-input-label",attrs:{for:t.forAttr}},[t._v("\n        "+t._s(t.title)+":\n      ")])]),a("div",{staticClass:"form-line__col"},[t._t("default")],2)])])},m=[],g={name:"FormFragment",props:{title:{type:String,required:!0},forAttr:{type:String,required:!1,default:null}}},h=g,f=(a("27d0"),a("2877")),b=Object(f["a"])(h,p,m,!1,null,"1c8387db",null),v=b.exports,y=a("251b"),_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wizard-steps"},[a("div",{staticClass:"wizard-steps__content-wrapper"},[a("header",{staticClass:"wizard-steps__indicator"},[a("ul",{staticClass:"wizard-steps__indicator__controls",attrs:{role:"tablist","aria-label":"steptabs"}},t._l(t.steps,(function(e,n){return a("li",{key:e.slug,staticClass:"wizard-steps__indicator__item",class:{"is-complete":n<=t.start},attrs:{"aria-selected":t.step===e.slug?"true":"false","aria-controls":"wizard-steps__content__item--"+n}},[a("span",[t._v("\n            "+t._s(e.label)+"\n          ")])])})),0)]),a("div",{staticClass:"wizard-steps__content"},[a("form",{ref:"wizardForm",attrs:{autocomplete:"off"}},t._l(t.steps,(function(e,n){return a("div",{key:e.slug,staticClass:"wizard-steps__content__item",attrs:{id:"wizard-steps__content__item--"+n,"aria-labelledby":"wizard-steps__content__item--"+n,role:"tabpanel",tabindex:"0"}},[t.step===e.slug?t._t(e.slug):t._e()],2)})),0)]),t.footerEnabled?a("footer",{staticClass:"wizard-steps__footer"},[a("KButton",{attrs:{disabled:t.indexCanReverse,appearance:"primary"},on:{click:t.goToPrevStep}},[t._v("\n        ‹ Previous\n      ")]),a("KButton",{attrs:{disabled:t.indexCanAdvance||t.nextDisabled,appearance:"primary"},on:{click:t.goToNextStep}},[t._v("\n        Next ›\n      ")])],1):t._e()]),a("aside",{staticClass:"wizard-steps__sidebar"},[a("div",{staticClass:"wizard-steps__sidebar__content"},t._l(t.sidebarContent,(function(e,n){return a("div",{key:e.name,staticClass:"wizard-steps__sidebar__item",class:"wizard-steps__sidebar__item--"+n},[t._t(e.name)],2)})),0)])])},C=[],S={methods:{updateQuery:function(t,e,a){var n=this.$router,s=this.$route;a&&delete s.query[a],s.query?n.push({query:Object.assign({},s.query,Object(r["a"])({},t,e))}):n.push({query:Object(r["a"])({},t,e)})}}},k={mixins:[S],props:{steps:{type:Array,default:function(){}},advanceCheck:{type:Boolean,default:!1},sidebarContent:{type:Array,required:!0,default:function(){}},footerEnabled:{type:Boolean,default:!0},nextDisabled:{type:Boolean,default:!0}},data:function(){return{start:0}},computed:{step:{get:function(){return this.steps[this.start].slug||0},set:function(t){return this.steps[t].slug}},indexCanAdvance:function(){return this.start>=this.steps.length-1},indexCanReverse:function(){return this.start<=0}},mounted:function(){this.resetProcess(),this.setStartingStep()},methods:{goToStep:function(t){this.start=t,this.updateQuery("step",t),this.$emit("goToStep",this.step)},goToNextStep:function(){this.start++,this.updateQuery("step",this.start),this.$emit("goToNextStep",this.step)},goToPrevStep:function(){this.start--,this.$emit("goToPrevStep",this.step)},setStartingStep:function(){var t=this.$route.query.step;this.start=t||0,this.updateQuery("step",this.start)},resetProcess:function(){this.start=0,this.goToStep(0),localStorage.removeItem("storedFormData");var t=this.$refs.wizardForm.querySelectorAll('input[type="text"]');t.forEach((function(t){t.setAttribute("value","")}))}}},w=k,E=(a("a1a1"),a("f01f"),Object(f["a"])(w,_,C,!1,null,"65b1a148",null)),T=E.exports,O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"code-view"},[t.isReady?a("div",{staticClass:"code-view-content"},[t.isLoading||t.isEmpty?t._e():a("KCard",{attrs:{title:t.title,"border-variant":"noBorder"}},[a("template",{slot:"body"},[a("prism",{staticClass:"code-block",attrs:{language:t.lang,code:t.codeContent}})],1),a("template",{slot:"actions"},[t.content?a("KClipboardProvider",{scopedSlots:t._u([{key:"default",fn:function(e){var n=e.copyToClipboard;return[a("KPop",{attrs:{placement:"bottom"}},[a("KButton",{attrs:{appearance:"primary"},on:{click:function(){n(t.codeContent)}}},[t._v("\n              "+t._s(t.copyButtonText)+"\n            ")]),a("div",{attrs:{slot:"content"},slot:"content"},[a("p",[t._v("Entity copied to clipboard!")])])],1)]}}],null,!1,168139815)}):t._e()],1)],2)],1):t._e(),!0===t.loaders?a("div",[t.isLoading?a("KEmptyState",{attrs:{"cta-is-hidden":""}},[a("template",{slot:"title"},[a("div",{staticClass:"card-icon mb-3"},[a("KIcon",{attrs:{icon:"spinner",color:"rgba(0, 0, 0, 0.1)",size:"42"}})],1),t._v("\n        Data Loading...\n      ")])],2):t._e(),t.isEmpty&&!t.isLoading?a("KEmptyState",{attrs:{"cta-is-hidden":""}},[a("template",{slot:"title"},[a("div",{staticClass:"card-icon mb-3"},[a("KIcon",{staticClass:"kong-icon--centered",attrs:{color:"var(--yellow-base)",icon:"warning",size:"42"}})],1),t._v("\n        There is no data to display.\n      ")])],2):t._e(),t.hasError?a("KEmptyState",{attrs:{"cta-is-hidden":""}},[a("template",{slot:"title"},[a("div",{staticClass:"card-icon mb-3"},[a("KIcon",{staticClass:"kong-icon--centered",attrs:{color:"var(--yellow-base)",icon:"warning",size:"42"}})],1),t._v("\n        An error has occurred while trying to load this data.\n      ")])],2):t._e()],1):t._e()])},P=[],F=a("2ccf"),I=a.n(F),x=(a("a878"),{name:"CodeView",components:{prism:I.a},props:{lang:{type:String,required:!0},copyButtonText:{type:String,default:"Copy to Clipboard"},title:{type:String,default:null},content:{type:String,default:null},loaders:{type:Boolean,default:!0},isLoading:{type:Boolean,default:!1},hasError:{type:Boolean,default:!1},isEmpty:{type:Boolean,default:!1}},computed:{isReady:function(){return!this.isEmpty&&!this.hasError&&!this.isLoading},codeContent:function(){var t=this.content;return t}}}),D=x,M=(a("4659"),Object(f["a"])(D,O,P,!1,null,"b04b5c2a",null)),A=M.exports,L=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.shouldStart?a("div",{staticClass:"scanner"},[a("div",{staticClass:"scanner-content"},[a("KEmptyState",{attrs:{"cta-is-hidden":""}},[a("template",{slot:"title"},[t.isRunning?a("div",{staticClass:"card-icon mb-3"},[a("KIcon",{attrs:{icon:"spinner",color:"rgba(0, 0, 0, 0.1)",size:"42"}})],1):t._e(),t.isComplete&&!1===t.hasError&&!1===t.isRunning?a("div",{staticClass:"card-icon mb-3"},[a("IconSuccess")],1):t._e(),t.isRunning?t._t("loading-title"):t._e(),!1===t.isRunning?a("div",[t.hasError?t._t("error-title"):t._e(),t.isComplete&&!1===t.hasError?t._t("complete-title"):t._e()],2):t._e()],2),a("template",{slot:"message"},[t.isRunning?t._t("loading-content"):t._e(),!1===t.isRunning?a("div",[t.hasError?t._t("error-content"):t._e(),t.isComplete&&!1===t.hasError?t._t("complete-content"):t._e()],2):t._e()],2)],2)],1)]):t._e()},j=[],K=(a("c5f6"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("i",{staticClass:"card-icon icon-success mb-3",attrs:{role:"img"}},[t._v("\n  ✓\n")])}),z=[],B={},R=B,N=(a("8a1f"),Object(f["a"])(R,K,z,!1,null,"c70a6732",null)),U=N.exports,$={name:"Scanner",components:{IconSuccess:U},props:{interval:{type:Number,required:!1,default:1e3},retries:{type:Number,required:!1,default:3600},shouldStart:{type:Boolean,default:!1},hasError:{type:Boolean,default:!1},loaderFunction:{type:Function,required:!0},canComplete:{type:Boolean,default:!1}},data:function(){return{i:0,isRunning:!1,isComplete:!1}},watch:{shouldStart:function(t,e){t!==e&&!0===t&&this.runScanner()}},mounted:function(){!0===this.shouldStart&&this.runScanner()},methods:{runScanner:function(){var t=this;this.isRunning=!0,this.isComplete=!1;var e=setInterval((function(){t.i++,t.loaderFunction(),t.i!==t.retries&&!0!==t.canComplete||(clearInterval(e),t.isRunning=!1,t.isComplete=!0)}),this.interval)}}},q=$,V=(a("d929"),a("b330"),Object(f["a"])(q,L,j,!1,null,"5b7bb589",null)),W=V.exports,Y=a("d465"),G=a.n(Y);function Z(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function H(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Z(Object(a),!0).forEach((function(e){Object(r["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Z(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var J={metaInfo:{title:"Create a new Mesh"},components:{FormFragment:v,Tabs:y["a"],StepSkeleton:T,CodeView:A,Scanner:W},mixins:[u["a"],d],data:function(){return{schema:G.a,steps:[{label:"General & Security",slug:"general"},{label:"Logging",slug:"logging"},{label:"Tracing",slug:"tracing"},{label:"Metrics",slug:"metrics"},{label:"Install",slug:"complete"}],tabs:[{hash:"#kubernetes",title:"Kubernetes"},{hash:"#universal",title:"Universal"}],sidebarContent:[{name:"mesh"},{name:"did-you-know"}],formConditions:{mtlsEnabled:!1,loggingEnabled:!1,tracingEnabled:!1,metricsEnabled:!1,loggingType:null},startScanner:!1,scanFound:!1,scanError:!1,isComplete:!1,nextDisabled:!0,validate:{meshName:"",meshLoggingBackend:""},vmsg:[]}},computed:H({},Object(i["b"])({title:"getTagline",version:"getVersion",environment:"getEnvironment",formData:"getStoredWizardData",selectedTab:"getSelectedTab"}),{getCleanMeshName:function(){var t=this.$store.getters.getStoredWizardData;return t?t.meshName:null},codeOutput:function(){var t=this.schema,e=Object.assign({},t),a=this.formData;if(a){var n=a.meshMtls||!1,s=a.meshLoggingStatus||!1,i=a.meshTracingStatus||!1,l=a.meshMetricsStatus||!1,c={mtls:n,logging:s,tracing:i,metrics:l},d=[];if(Object.entries(c).forEach((function(t){var e=t[1],a=t[0];e?d.filter((function(t){return t!==a})):d.push(a)})),n&&(e.spec.mtls.enabled=!0,e.spec.mtls.ca=Object(r["a"])({},a.meshCA||"builtin",{})),s){var u=e.spec.logging.backends[0],p=u.format;u.name=a.meshLoggingBackend,u.format=a.meshLoggingBackendFormat||p,"tcp"===a.meshLoggingType?(u.file&&delete u.file,u.tcp={address:a.meshLoggingAddress||"127.0.0.1:5000"}):"file"===a.meshLoggingType&&(u.tcp&&delete u.tcp,u.file={path:a.meshLoggingPath})}if(i){var m=e.spec.tracing;m.defaultBackend=a.meshTracingBackend,m.backends[0].name=a.meshTracingBackend,m.backends[0].sampling=a.meshTracingSampling||100,m.backends[0].zipkin.url=a.meshTracingZipkinURL}if(l){var g=e.spec.metrics;g.prometheus.port=a.meshMetricsDataplanePort||5670,g.prometheus.path=a.meshMetricsDataplanePath||"/metrics"}var h,f,b=o(e.spec,d);h="#kubernetes"===this.selectedTab?{apiVersion:"kuma.io/v1alpha1",kind:"Mesh",metadata:{name:a.meshName}}:{type:"Mesh",name:a.meshName},f="#kubernetes"===this.selectedTab?H({},h,{spec:H({},b)}):H({},h,{},b);var v=this.formatForCLI(f);return v}}}),watch:{"validate.meshName":function(t){this.validate.meshName=t,this.validateMeshName(t)}},mounted:function(){this.$store.dispatch("updateSelectedTab","#".concat(this.environment))},methods:{validateMeshName:function(t){t&&""!==t?(this.vmsg.meshName="",this.nextDisabled=!1):(this.vmsg.meshName="A Mesh name is required to proceed",this.nextDisabled=!0)},scanForEntity:function(){var t=this,e=this.$store.getters.getStoredWizardData.meshName;this.scanComplete=!1,this.scanError=!1,e&&this.$api.getMesh(e).then((function(e){e&&e.name.length>0?(t.isRunning=!0,t.scanFound=!0):t.scanError=!0})).catch((function(e){t.scanError=!0,console.error(e)})).finally((function(){t.scanComplete=!0}))}}},Q=J,X=Object(f["a"])(Q,n,s,!1,null,null,null);e["default"]=X.exports},4659:function(t,e,a){"use strict";var n=a("5bc2"),s=a.n(n);s.a},"4c46":function(t,e,a){},5147:function(t,e,a){var n=a("2b4c")("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(a){try{return e[n]=!1,!"/./"[t](e)}catch(s){}}return!0}},"5bc2":function(t,e,a){},6762:function(t,e,a){"use strict";var n=a("5ca1"),s=a("c366")(!0);n(n.P,"Array",{includes:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")("includes")},"8a1f":function(t,e,a){"use strict";var n=a("f576"),s=a.n(n);s.a},a1a1:function(t,e,a){"use strict";var n=a("1915"),s=a.n(n);s.a},a3e8:function(t,e,a){},aa98:function(t,e,a){},ad2f:function(t,e,a){"use strict";var n=a("e80b"),s=a.n(n);e["a"]={methods:{formatForCLI:function(t){var e='echo "',a='" | kumactl apply -f -',n=s()(t);return"".concat(e).concat(n).concat(a)}}}},b330:function(t,e,a){"use strict";var n=a("2a31"),s=a.n(n);s.a},d2c8:function(t,e,a){var n=a("aae3"),s=a("be13");t.exports=function(t,e,a){if(n(e))throw TypeError("String#"+a+" doesn't accept regex!");return String(s(t))}},d465:function(t,e){t.exports={type:"Mesh",metadata:{name:null},spec:{mtls:{enabled:!0,ca:{builtin:{}}},tracing:{defaultBackend:null,backends:[{name:null,sampling:null,zipkin:{url:null}}]},metrics:{prometheus:{port:null,path:null}},logging:{backends:[{name:null,format:'{"start_time": "%START_TIME%", "source": "%KUMA_SOURCE_SERVICE%", "destination": "%KUMA_DESTINATION_SERVICE%", "source_address": "%KUMA_SOURCE_ADDRESS_WITHOUT_PORT%", "destination_address": "%UPSTREAM_HOST%", "duration_millis": "%DURATION%", "bytes_received": "%BYTES_RECEIVED%", "bytes_sent": "%BYTES_SENT%"}',tcp:{address:null}}]}}}},d929:function(t,e,a){"use strict";var n=a("a3e8"),s=a.n(n);s.a},f01f:function(t,e,a){"use strict";var n=a("4c46"),s=a.n(n);s.a},f576:function(t,e,a){},f770:function(t,e,a){},ffc1:function(t,e,a){var n=a("5ca1"),s=a("504c")(!0);n(n.S,"Object",{entries:function(t){return s(t)}})}}]);