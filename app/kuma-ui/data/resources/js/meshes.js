(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["meshes"],{"0649":function(t,e,a){"use strict";var n=a("d3ee"),i=a.n(n);i.a},"0ad7":function(t,e,a){},"23d6":function(t,e,a){"use strict";var n=a("0ad7"),i=a.n(n);i.a},"254c":function(t,e,a){"use strict";var n=a("d435"),i=a.n(n);i.a},"362e":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"all-meshes"},[a("FrameSkeleton",[a("DataOverview",{attrs:{"page-size":t.pageSize,"has-error":t.hasError,"is-loading":t.isLoading,"empty-state":t.empty_state,"display-data-table":!0,"table-data":t.tableData,"table-data-is-empty":t.tableDataIsEmpty,"table-data-function-text":"View","table-data-row":"name"},on:{tableAction:t.tableAction,reloadData:t.loadData}},[a("template",{slot:"additionalControls"},[a("KButton",{staticClass:"add-mesh-button",attrs:{appearance:"primary",size:"small",to:{path:"/wizard/mesh"}}},[a("span",{staticClass:"custom-control-icon"},[t._v("\n            +\n          ")]),t._v("\n          Create Mesh\n        ")])],1),a("template",{slot:"pagination"},[a("Pagination",{attrs:{"has-previous":t.previous.length>0,"has-next":t.hasNext},on:{next:t.goToNextPage,previous:t.goToPreviousPage}})],1)],2),!1===t.isEmpty?a("Tabs",{attrs:{"has-error":t.hasError,"is-loading":t.isLoading,tabs:t.tabs,"tab-group-title":t.tabGroupTitle,"initial-tab-override":"overview"}},[a("template",{slot:"tabHeader"},[a("div",[a("h3",[t._v(t._s(t.tabGroupTitle))])])]),a("template",{slot:"overview"},[a("LabelList",{attrs:{"has-error":t.entityHasError,"is-loading":t.entityIsLoading,"is-empty":t.entityIsEmpty}},[a("div",[a("ul",t._l(t.entity.basicData,(function(e,n){return a("li",{key:n},[a("h4","creationTime"===n?[t._v("\n                  Created\n                ")]:"modificationTime"===n?[t._v("\n                  Last Modified\n                ")]:[t._v("\n                  "+t._s(n)+"\n                ")]),a("p","creationTime"===n||"modificationTime"===n?[t._v("\n                  "+t._s(t._f("readableDate")(e))+"\n                ")]:[t._v("\n                  "+t._s(e)+"\n                ")])])})),0)]),t.entity.extendedData&&t.entity.extendedData.length?a("div",[a("ul",t._l(t.entity.extendedData,(function(e,n){return a("li",{key:n},[a("h4",[t._v(t._s(e.label))]),e.value?a("p",{staticClass:"label-cols"},[a("span",[t._v("\n                    "+t._s(e.value.type)+"\n                  ")]),a("span",[t._v("\n                    "+t._s(e.value.name)+"\n                  ")])]):a("KBadge",{attrs:{size:"small",appearance:"danger"}},[t._v("\n                  Disabled\n                ")])],1)})),0)]):t._e()])],1),a("template",{slot:"yaml"},[a("YamlView",{attrs:{title:t.entityOverviewTitle,"has-error":t.entityHasError,"is-loading":t.entityIsLoading,"is-empty":t.entityIsEmpty,content:t.rawEntity}})],1),a("template",{slot:"resources"},[a("LabelList",{attrs:{"has-error":t.entityHasError,"is-loading":t.entityIsLoading,"is-empty":t.entityIsEmpty}},t._l(t.countCols,(function(e){return a("div",{key:e},[a("ul",t._l(t.counts.slice((e-1)*t.itemsPerCol,e*t.itemsPerCol),(function(e,n){return a("li",{key:n},[a("h4",[t._v(t._s(e.title))]),a("p",[t._v(t._s(t._f("formatValue")(e.value)))])])})),0)])})),0)],1)],2):t._e()],1)],1)},i=[],o=(a("8e6e"),a("456d"),a("7514"),a("ac6a"),a("ffc1"),a("75fc")),s=(a("7f7f"),a("bd86")),r=(a("6b54"),a("2f62")),l=a("d7c2"),c=a("6663"),u=a("8218"),p=a("1d10"),d=a("1799"),f=a("2778"),h=a("251b"),m=a("ff9d"),y=a("0ada");function b(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function v(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?b(Object(a),!0).forEach((function(e){Object(s["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var g={name:"Meshes",metaInfo:{title:"Meshes"},components:{EntityURLControl:c["a"],FrameSkeleton:p["a"],Pagination:d["a"],DataOverview:f["a"],Tabs:h["a"],YamlView:m["a"],LabelList:y["a"]},filters:{formatValue:function(t){return t?t.toLocaleString("en").toString():0},readableDate:function(t){return Object(l["c"])(t)}},mixins:[u["a"]],data:function(){return{isLoading:!0,isEmpty:!1,hasError:!1,entityIsLoading:!0,entityIsEmpty:!1,entityHasError:!1,tableDataIsEmpty:!1,empty_state:{title:"No Data",message:"There are no Meshes present."},tableData:{headers:[{key:"actions",hideLabel:!0},{label:"Name",key:"name"},{label:"Type",key:"type"}],data:[]},tabs:[{hash:"#overview",title:"Overview"},{hash:"#yaml",title:"YAML"},{hash:"#resources",title:"Resources"}],entity:[],rawEntity:null,firstEntity:null,pageSize:this.$pageSize,pageOffset:null,next:null,hasNext:!1,previous:[],tabGroupTitle:null,entityOverviewTitle:null,itemsPerCol:3}},computed:v({},Object(r["d"])({mesh:"selectedMesh"}),{counts:function(){var t=this.$store.state;return[{title:"Dataplanes",value:t.totalDataplaneCountFromMesh},{title:"Circuit Breakers",value:t.totalCircuitBreakerCountFromMesh},{title:"Fault Injections",value:t.totalFaultInjectionCountFromMesh},{title:"Health Checks",value:t.totalHealthCheckCountFromMesh},{title:"Proxy Templates",value:t.totalProxyTemplateCountFromMesh},{title:"Traffic Logs",value:t.totalTrafficLogCountFromMesh},{title:"Traffic Permissions",value:t.totalTrafficPermissionCountFromMesh},{title:"Traffic Routes",value:t.totalTrafficRouteCountFromMesh},{title:"Traffic Traces",value:t.totalTrafficTraceCountFromMesh}]},countCols:function(){return Math.ceil(this.counts.length/this.itemsPerCol)},shareUrl:function(){var t=this,e="".concat(window.location.origin,"/#"),a=function(){return t.$route.query.ns?t.$route.fullPath:"".concat(e).concat(t.$route.fullPath)};return a()}}),watch:{$route:function(t,e){this.init()}},beforeMount:function(){this.init()},methods:{init:function(){this.loadData()},goToPreviousPage:function(){this.pageOffset=this.previous.pop(),this.next=null,this.loadData()},goToNextPage:function(){this.previous.push(this.pageOffset),this.pageOffset=this.next,this.next=null,this.loadData()},tableAction:function(t){var e=t;this.$store.dispatch("updateSelectedTab",this.tabs[0].hash),this.$store.dispatch("updateSelectedTableRow",e.name),this.getEntity(e)},loadData:function(){var t=this;this.isLoading=!0,this.isEmpty=!1;var e=this.$route.params.mesh,a={size:this.pageSize,offset:this.pageOffset},n="all"!==e&&e?this.$api.getMesh(e):this.$api.getAllMeshes(a),i=function(){return n.then((function(a){var n=function(){if("all"===e)return a.items;var t={items:[]};return t.items.push(a),t.items};a.next?(t.next=Object(l["a"])(a.next),t.hasNext=!0):t.hasNext=!1;var i=n();i.length>0?("all"===e&&t.sortEntities(i),t.firstEntity=i[0].name,t.getEntity(i[0]),t.$store.dispatch("updateSelectedTableRow",t.firstEntity),t.tableData.data=Object(o["a"])(i),t.tableDataIsEmpty=!1,t.isEmpty=!1):(t.tableData.data=[],t.tableDataIsEmpty=!0,t.isEmpty=!0,t.getEntity(null))})).catch((function(e){t.hasError=!0,t.isEmpty=!0,console.error(e)})).finally((function(){setTimeout((function(){t.isLoading=!1}),"500")}))};i()},getEntity:function(t){var e=this;if(this.entityIsLoading=!0,this.entityIsEmpty=!1,t&&null!==t)return this.$api.getMesh(t.name).then((function(a){if(a){var n=["fetchDataplaneTotalCountFromMesh","fetchHealthCheckTotalCountFromMesh","fetchProxyTemplateTotalCountFromMesh","fetchTrafficLogTotalCountFromMesh","fetchTrafficPermissionTotalCountFromMesh","fetchTrafficRouteTotalCountFromMesh","fetchTrafficTraceTotalCountFromMesh","fetchFaultInjectionTotalCountFromMesh","fetchCircuitBreakerTotalCountFromMesh"];n.forEach((function(a){e.$store.dispatch(a,t.name)}));var i=Object(l["b"])(a,["type","name","creationTime","modificationTime"]),o=function(){var t=Object.entries(Object(l["b"])(a,["mtls","logging","metrics","tracing"])),e=[];return t.forEach((function(t){var a=t[0],n=t[1]||null;if(n&&n.enabledBackend){var i=n.enabledBackend,o=n.backends.find((function(t){return t.name===i}));e.push({label:a,value:{type:o.type,name:o.name}})}else if(n&&n.defaultBackend){var s=n.defaultBackend,r=n.backends.find((function(t){return t.name===s}));e.push({label:a,value:{type:r.type,name:r.name}})}else if(n&&n.backends){var l=n.backends[0];e.push({label:a,value:{type:l.type,name:l.name}})}else e.push({label:a,value:null})})),e};e.tabGroupTitle="Mesh: ".concat(i.name),e.entityOverviewTitle="Entity Overview for ".concat(i.name),e.entity={basicData:i,extendedData:o()},e.rawEntity=a}else e.entity=null,e.entityIsEmpty=!0})).catch((function(t){e.entityHasError=!0,console.error(t)})).finally((function(){setTimeout((function(){e.entityIsLoading=!1}),"500")}));setTimeout((function(){e.entityIsEmpty=!0,e.entityIsLoading=!1}),"500")}}},T=g,C=(a("0649"),a("2877")),E=Object(C["a"])(T,n,i,!1,null,"353c09b3",null);e["default"]=E.exports},6663:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"entity-url-control"},[t.shouldDisplay?a("KClipboardProvider",{scopedSlots:t._u([{key:"default",fn:function(e){var n=e.copyToClipboard;return[a("KPop",{attrs:{placement:"bottom"}},[a("KButton",{attrs:{appearance:"secondary",size:"small"},on:{click:function(){n(t.url)}}},[a("KIcon",{attrs:{slot:"icon",icon:"externalLink"},slot:"icon"}),t._v("\n        "+t._s(t.copyButtonText)+"\n      ")],1),a("div",{attrs:{slot:"content"},slot:"content"},[a("p",[t._v(t._s(t.confirmationText))])])],1)]}}],null,!1,831954050)}):t._e()],1)},i=[],o={name:"EntityURLControl",props:{url:{type:String,required:!0},copyButtonText:{type:String,default:"Copy URL"},confirmationText:{type:String,default:"URL copied to clipboard!"}},computed:{shouldDisplay:function(){var t=this.$route.params.mesh||null;return!(!t||"all"===t)}}},s=o,r=a("2877"),l=Object(r["a"])(s,n,i,!1,null,null,null);e["a"]=l.exports},d3ee:function(t,e,a){},d435:function(t,e,a){},ff9d:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"yaml-view"},[t.isReady?a("div",{staticClass:"yaml-view-content"},[t.isLoading||t.isEmpty?t._e():a("KCard",{attrs:{title:t.title,"border-variant":"noBorder"}},[a("template",{slot:"body"},[a("KTabs",{key:t.environment,attrs:{tabs:t.tabs},model:{value:t.activeTab.hash,callback:function(e){t.$set(t.activeTab,"hash",e)},expression:"activeTab.hash"}},[a("template",{slot:"universal"},[a("KClipboardProvider",{scopedSlots:t._u([{key:"default",fn:function(e){var n=e.copyToClipboard;return[a("KPop",{attrs:{placement:"bottom"}},[a("KButton",{staticClass:"copy-button",attrs:{appearance:"primary",size:"small"},on:{click:function(){n(t.yamlContent.universal)}}},[t._v("\n                  Copy Universal YAML\n                ")]),a("div",{attrs:{slot:"content"},slot:"content"},[a("p",[t._v("Entity copied to clipboard!")])])],1)]}}],null,!1,337484112)}),a("prism",{staticClass:"code-block",attrs:{language:"yaml",code:t.yamlContent.universal}})],1),a("template",{slot:"kubernetes"},[a("KClipboardProvider",{scopedSlots:t._u([{key:"default",fn:function(e){var n=e.copyToClipboard;return[a("KPop",{attrs:{placement:"bottom"}},[a("KButton",{staticClass:"copy-button",attrs:{appearance:"primary",size:"small"},on:{click:function(){n(t.yamlContent.kubernetes)}}},[t._v("\n                  Copy Kubernetes YAML\n                ")]),a("div",{attrs:{slot:"content"},slot:"content"},[a("p",[t._v("Entity copied to clipboard!")])])],1)]}}],null,!1,1046684688)}),a("prism",{staticClass:"code-block",attrs:{language:"yaml",code:t.yamlContent.kubernetes}})],1)],2)],1)],2)],1):t._e(),!0===t.loaders?a("div",[t.isLoading?a("KEmptyState",{attrs:{"cta-is-hidden":""}},[a("template",{slot:"title"},[a("div",{staticClass:"card-icon mb-3"},[a("KIcon",{attrs:{icon:"spinner",color:"rgba(0, 0, 0, 0.1)",size:"42"}})],1),t._v("\n        Data Loading...\n      ")])],2):t._e(),t.isEmpty&&!t.isLoading?a("KEmptyState",{attrs:{"cta-is-hidden":""}},[a("template",{slot:"title"},[a("div",{staticClass:"card-icon mb-3"},[a("KIcon",{staticClass:"kong-icon--centered",attrs:{color:"var(--yellow-base)",icon:"warning",size:"42"}})],1),t._v("\n        There is no data to display.\n      ")])],2):t._e(),t.hasError?a("KEmptyState",{attrs:{"cta-is-hidden":""}},[a("template",{slot:"title"},[a("div",{staticClass:"card-icon mb-3"},[a("KIcon",{staticClass:"kong-icon--centered",attrs:{color:"var(--yellow-base)",icon:"warning",size:"42"}})],1),t._v("\n        An error has occurred while trying to load this data.\n      ")])],2):t._e()],1):t._e()])},i=[],o=(a("8e6e"),a("ac6a"),a("456d"),a("7f7f"),a("bd86")),s=a("2f62"),r=a("2ccf"),l=a.n(r),c=(a("a878"),a("e80b")),u=a.n(c);function p(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function d(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?p(Object(a),!0).forEach((function(e){Object(o["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var f={name:"YamlView",components:{prism:l.a},props:{title:{type:String,default:null},content:{type:Object,default:null},loaders:{type:Boolean,default:!0},isLoading:{type:Boolean,default:!1},hasError:{type:Boolean,default:!1},isEmpty:{type:Boolean,default:!1}},data:function(){return{tabs:[{hash:"#universal",title:"Universal"},{hash:"#kubernetes",title:"Kubernetes"}]}},computed:d({},Object(s["b"])({environment:"getEnvironment"}),{isReady:function(){return!this.isEmpty&&!this.hasError&&!this.isLoading},activeTab:{get:function(){var t=this.environment;return{hash:"#".concat(t),nohash:t}},set:function(t){return{hash:"#".concat(t),nohash:t}}},yamlContent:function(){var t=this,e=this.content,a=function(){var e={},a=Object.assign({},t.content),n=a.name,i=a.type;return delete a.type,delete a.name,e.apiVersion="kuma.io/v1alpha1",e.kind=i,e.metadata={name:n},d({},e,{},a)},n={universal:u()(e),kubernetes:u()(a())};return n}})},h=f,m=(a("23d6"),a("254c"),a("2877")),y=Object(m["a"])(h,n,i,!1,null,"6babfd18",null);e["a"]=y.exports}}]);