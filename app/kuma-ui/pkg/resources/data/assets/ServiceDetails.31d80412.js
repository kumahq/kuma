import{d as k,f as v,x as E,o as n,j as _,l as e,a as m,w as T,b as y,t as l,u as a,z as I,i as B,B as C,C as q,D as $,cB as V,A as j,F as w,r as f,g as b,k as D,c as p}from"./index.c8163df9.js";import{T as L}from"./TagList.86529845.js";import{Y as A}from"./YamlView.67836ee1.js";import{_ as N}from"./EmptyBlock.vue_vue_type_script_setup_true_lang.045a908b.js";import{E as P}from"./ErrorBlock.5027dcb1.js";import{_ as O}from"./LoadingBlock.vue_vue_type_script_setup_true_lang.c066d224.js";const g=s=>(C("data-v-f86974e1"),s=s(),q(),s),z={class:"entity-summary entity-section-list"},F={class:"entity-title"},M=g(()=>e("span",{class:"kutil-sr-only"},"Service:",-1)),R={class:"definition"},Y=g(()=>e("span",null,"Mesh:",-1)),U={class:"definition"},G=g(()=>e("span",null,"Address:",-1)),H={class:"definition"},J=g(()=>e("span",null,"TLS:",-1)),K={key:0},Q=g(()=>e("h4",null,"Tags",-1)),W=k({__name:"ExternalServiceDetails",props:{externalService:{type:Object,required:!0}},setup(s){const t=s,o=v(()=>({name:"external-service-detail-view",params:{service:t.externalService.name,mesh:t.externalService.mesh}})),i=v(()=>Object.entries(t.externalService.tags).map(([r,c])=>({label:r,value:c}))),u=v(()=>E(t.externalService));return(r,c)=>{var d;const h=B("router-link");return n(),_("div",z,[e("h3",F,[M,m(h,{to:a(o)},{default:T(()=>[y(l(s.externalService.name),1)]),_:1},8,["to"])]),e("section",null,[e("div",R,[Y,e("span",null,l(s.externalService.mesh),1)]),e("div",U,[G,e("span",null,l(t.externalService.networking.address),1)]),e("div",H,[J,e("span",null,l((d=t.externalService.networking.tls)!=null&&d.enabled?"Enabled":"Disabled"),1)])]),a(i).length>0?(n(),_("section",K,[Q,m(L,{tags:a(i)},null,8,["tags"])])):I("",!0),m(A,{id:"code-block-external-service",content:a(u),"is-searchable":""},null,8,["content"])])}}});const X=$(W,[["__scopeId","data-v-f86974e1"]]),S=s=>(C("data-v-a76bcfee"),s=s(),q(),s),Z={class:"entity-summary entity-section-list"},ee={class:"entity-title"},te=S(()=>e("span",{class:"kutil-sr-only"},"Service:",-1)),se={class:"definition"},ne=S(()=>e("span",null,"Mesh:",-1)),ie={class:"definition"},ae=S(()=>e("span",null,"Address:",-1)),ce={key:0,class:"definition"},re=S(()=>e("span",null,"DP proxies (online / total):",-1)),le=k({__name:"ServiceInsightDetails",props:{serviceInsight:{type:Object,required:!0}},setup(s){const t=s,o=v(()=>({name:t.serviceInsight.serviceType==="external"?"external-service-detail-view":"service-insight-detail-view",params:{service:t.serviceInsight.name,mesh:t.serviceInsight.mesh}})),i=v(()=>t.serviceInsight.status?V[t.serviceInsight.status]:null),u=v(()=>{var c;return t.serviceInsight.dataplanes?`${(c=t.serviceInsight.dataplanes.online)!=null?c:0} / ${t.serviceInsight.dataplanes.total}`:null}),r=v(()=>E(t.serviceInsight));return(c,h)=>{const d=B("router-link");return n(),_("div",Z,[e("h3",ee,[te,m(d,{to:a(o)},{default:T(()=>[y(l(s.serviceInsight.name),1)]),_:1},8,["to"]),a(i)!==null?(n(),_("div",{key:0,class:j(`status status--${a(i).appearance}`),"data-testid":"data-plane-status-badge"},l(a(i).title.toLowerCase()),3)):I("",!0)]),e("section",null,[e("div",se,[ne,e("span",null,l(s.serviceInsight.mesh),1)]),e("div",ie,[ae,e("span",null,[s.serviceInsight.addressPort?(n(),_(w,{key:0},[y(l(s.serviceInsight.addressPort),1)],64)):(n(),_(w,{key:1},[y("\u2014")],64))])]),a(u)!==null?(n(),_("div",ce,[re,e("span",null,l(a(u)),1)])):I("",!0)]),m(A,{id:"code-block-service-insight",content:a(r),"is-searchable":""},null,8,["content"])])}}});const oe=$(le,[["__scopeId","data-v-a76bcfee"]]),ue={class:"service-details"},de=k({__name:"ServiceDetails",props:{serviceType:{type:String,required:!1,default:"internal"},name:{type:String,required:!0},mesh:{type:String,required:!0}},setup(s){const t=s,o=f(null),i=f(null),u=f(!0),r=f(null);b(()=>t.mesh,function(){c()}),b(()=>t.name,function(){c()}),c();async function c(){u.value=!0,r.value=null,o.value=null,i.value=null;const h=t.mesh,d=t.name;try{t.serviceType==="external"?i.value=await D.getExternalService({mesh:h,name:d}):o.value=await D.getServiceInsight({mesh:h,name:d})}catch(x){x instanceof Error?r.value=x:console.error(x)}finally{u.value=!1}}return(h,d)=>(n(),_("div",ue,[u.value?(n(),p(O,{key:0})):r.value!==null?(n(),p(P,{key:1,error:r.value},null,8,["error"])):o.value!==null?(n(),p(oe,{key:2,"service-insight":o.value},null,8,["service-insight"])):i.value!==null?(n(),p(X,{key:3,"external-service":i.value},null,8,["external-service"])):(n(),p(N,{key:4}))]))}});const fe=$(de,[["__scopeId","data-v-c0c06f69"]]);export{fe as S};
