import{d as z,r as t,p as f,o as l,w as o,b as p,e as y,m as L,H as E,F as H,l as m,c as _,N as u,L as w,n as j,t as P,y as q,_ as G}from"./index-CGBliDuE.js";const J={class:"policy-list-content"},K={class:"policy-count"},O={class:"policy-list"},Q=z({__name:"PolicyTypeListView",setup(U){return(W,c)=>{const T=t("RouteTitle"),x=t("XAction"),A=t("DataCollection"),B=t("DataLoader"),X=t("XCard"),N=t("RouterView"),V=t("DataSource"),S=t("AppView"),b=t("RouteView");return l(),f(b,{name:"policy-list-view",params:{mesh:"",policyPath:"",policy:""}},{default:o(({uri:k,route:d,t:F})=>[p(T,{render:!1,title:F("policies.routes.types.title")},null,8,["title"]),c[2]||(c[2]=y()),p(S,null,{default:o(()=>[p(V,{src:k(L(E),"/mesh-insights/:name",{name:d.params.mesh},{})},{default:o(({data:e})=>[p(V,{src:k(L(H),"/policy-types",{})},{default:o(({data:s,error:M})=>[m("div",J,[p(X,{class:"policy-type-list","data-testid":"policy-type-list"},{default:o(()=>[p(B,{data:[s],errors:[M]},{default:o(()=>[(l(!0),_(u,null,w([typeof(e==null?void 0:e.policies)>"u"?s.policyTypes:s.policyTypes.filter(i=>{var n,a;return!i.policy.isTargetRef&&(((a=(n=e.policies)==null?void 0:n[i.name])==null?void 0:a.total)??0)>0})],i=>(l(),f(A,{key:i,predicate:typeof(e==null?void 0:e.policies)>"u"?void 0:n=>i.length>0||n.policy.isTargetRef,items:s.policyTypes},{default:o(({items:n})=>[(l(!0),_(u,null,w([n.find(a=>a.path===d.params.policyPath)],a=>(l(),_(u,{key:a},[(l(!0),_(u,null,w(n,(r,$)=>{var v,C;return l(),_("div",{key:r.path,class:j(["policy-type-link-wrapper",{"policy-type-link-wrapper--is-active":a&&a.path===r.path}])},[p(x,{class:"policy-type-link",to:{name:"policy-list-view",params:{mesh:d.params.mesh,policyPath:r.path}},"data-testid":`policy-type-link-${r.name}`,onVnodeMounted:D=>{var R;d.params.policyPath.length===0&&$===0&&((R=D.props)!=null&&R.to)&&d.replace(D.props.to)}},{default:o(()=>[y(P(r.name),1)]),_:2},1032,["to","data-testid","onVnodeMounted"]),c[0]||(c[0]=y()),m("div",K,P(((C=(v=e==null?void 0:e.policies)==null?void 0:v[r.name])==null?void 0:C.total)??0),1)],2)}),128))],64))),128))]),_:2},1032,["predicate","items"]))),128))]),_:2},1032,["data","errors"])]),_:2},1024),c[1]||(c[1]=y()),m("div",O,[p(N,null,{default:o(({Component:i})=>[(l(),f(q(i),{"policy-types":s==null?void 0:s.policyTypes},null,8,["policy-types"]))]),_:2},1024)])])]),_:2},1032,["src"])]),_:2},1032,["src"])]),_:2},1024)]),_:1,__:[2]})}}}),Z=G(Q,[["__scopeId","data-v-f10c68ba"]]);export{Z as default};
