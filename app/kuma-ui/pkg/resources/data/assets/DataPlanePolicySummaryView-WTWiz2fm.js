import{d as B,r as t,p as i,o as n,w as s,b as l,e as m,q as h,m as y,Y as u,F as X,l as d,c as D,t as _,N as L,L as C,M as T,_ as q}from"./index-8QMKyk4n.js";import{_ as A}from"./PolicySummary.vue_vue_type_script_setup_true_lang-DMUTq8oU.js";const N=B({__name:"DataPlanePolicySummaryView",props:{policyTypes:{}},setup(x){const k=x;return(v,p)=>{const R=t("RouteTitle"),S=t("XAction"),w=t("XSelect"),M=t("XLayout"),f=t("XCodeBlock"),g=t("DataLoader"),V=t("AppView"),F=t("DataSource"),b=t("RouteView");return n(),i(b,{name:"data-plane-policy-summary-view",params:{mesh:"",policyPath:"",policy:"",codeSearch:"",codeFilter:!1,codeRegExp:!1,format:String}},{default:s(({route:e,t:r,uri:E})=>[l(F,{src:`/meshes/${e.params.mesh}/policy-path/${e.params.policyPath}/policy/${e.params.policy}`},{default:s(({data:c,error:P})=>[l(V,null,{title:s(()=>[d("h2",null,[l(S,{to:{name:"policy-detail-view",params:{mesh:e.params.mesh,policyPath:e.params.policyPath,policy:e.params.policy}}},{default:s(()=>[l(R,{title:r("policies.routes.item.title",{name:e.params.policy})},null,8,["title"])]),_:2},1032,["to"])])]),default:s(()=>[p[2]||(p[2]=m()),l(g,{data:[c],errors:[P]},{default:s(()=>[c?(n(),i(A,{key:0,policy:c,format:e.params.format,legacy:!k.policyTypes.find(({name:a})=>a===c?.type)?.policy.isTargetRef},{header:s(()=>[d("header",null,[l(M,{type:"separated",size:"max"},{default:s(()=>[d("h3",null,_(r("policies.routes.item.config")),1),p[0]||(p[0]=m()),(n(),D(L,null,C([["structured","universal","k8s"]],a=>d("div",{key:typeof a},[l(w,{label:r("policies.routes.item.format"),selected:a.includes(e.params.format)?e.params.format:a[0],onChange:o=>{e.update({format:o})},onVnodeBeforeMount:o=>o?.props?.selected&&a.includes(o.props.selected)&&o.props.selected!==e.params.format&&e.update({format:o.props.selected})},T({_:2},[C(a,o=>({name:`${o}-option`,fn:s(()=>[m(_(r(`policies.routes.item.formats.${o}`)),1)])}))]),1032,["label","selected","onChange","onVnodeBeforeMount"])])),64))]),_:2},1024)])]),default:s(()=>[p[1]||(p[1]=m()),e.params.format==="universal"?(n(),i(f,{key:0,"data-testid":"codeblock-yaml-universal",language:"yaml",code:y(u).stringify(c.config),"is-searchable":"","show-k8s-copy-button":!1,query:e.params.codeSearch,"is-filter-mode":e.params.codeFilter,"is-reg-exp-mode":e.params.codeRegExp,onQueryChange:a=>e.update({codeSearch:a}),onFilterModeChange:a=>e.update({codeFilter:a}),onRegExpModeChange:a=>e.update({codeRegExp:a})},null,8,["code","query","is-filter-mode","is-reg-exp-mode","onQueryChange","onFilterModeChange","onRegExpModeChange"])):e.params.format==="k8s"?(n(),i(g,{key:1,src:E(y(X),"/meshes/:mesh/policy-path/:path/policy/:name/as/kubernetes",{mesh:e.params.mesh,path:e.params.policyPath,name:e.params.policy})},{default:s(({data:a})=>[l(f,{"data-testid":"codeblock-yaml-k8s",language:"yaml",code:y(u).stringify(a),"show-k8s-copy-button":!1,"is-searchable":"",query:e.params.codeSearch,"is-filter-mode":e.params.codeFilter,"is-reg-exp-mode":e.params.codeRegExp,onQueryChange:o=>e.update({codeSearch:o}),onFilterModeChange:o=>e.update({codeFilter:o}),onRegExpModeChange:o=>e.update({codeRegExp:o})},null,8,["code","query","is-filter-mode","is-reg-exp-mode","onQueryChange","onFilterModeChange","onRegExpModeChange"])]),_:2},1032,["src"])):h("",!0)]),_:2},1032,["policy","format","legacy"])):h("",!0)]),_:2},1032,["data","errors"])]),_:2},1024)]),_:2},1032,["src"])]),_:1})}}}),Y=q(N,[["__scopeId","data-v-5d6f63e5"]]);export{Y as default};
