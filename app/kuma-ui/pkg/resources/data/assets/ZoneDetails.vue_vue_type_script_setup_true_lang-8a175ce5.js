import{L as N,j as T}from"./kongponents.es-21ce59a5.js";import{A as x,_ as L,S as V,a as B}from"./SubscriptionHeader.vue_vue_type_script_setup_true_lang-32c93dbe.js";import{_ as D}from"./CodeBlock.vue_vue_type_style_index_0_lang-5891fe23.js";import{a as E,D as Z}from"./DefinitionListItem-310ce025.js";import{T as j}from"./TabsWidget-b5ed50b6.js";import{T as k}from"./TextWithCopyButton-8088f9cb.js";import{_ as R}from"./WarningsWidget.vue_vue_type_script_setup_true_lang-df625e99.js";import{i as $,w as F,v as M,y as P,z as W}from"./RouteView.vue_vue_type_script_setup_true_lang-9e62d24f.js";import{d as q,c as u,r as G,o,a as c,w as e,k as J,g as p,h as l,t as m,e as f,j as z,b as g,F as v}from"./index-bdbf5b57.js";const H={class:"entity-heading"},oe=q({__name:"ZoneDetails",props:{zoneOverview:{type:Object,required:!0}},setup(O){const r=O,{t:h}=$(),y=F(),_=[{hash:"#overview",title:"Overview"},{hash:"#insights",title:"Zone Insights"},{hash:"#config",title:"Config"},{hash:"#warnings",title:"Warnings"}],C=u(()=>({name:"zone-cp-detail-view",params:{zone:r.zoneOverview.name}})),d=u(()=>{const{type:n,name:t}=r.zoneOverview,i=M(r.zoneOverview.zoneInsight);return{type:n,name:t,status:i,"Authentication Type":P(r.zoneOverview)}}),I=u(()=>{var t;const n=((t=r.zoneOverview.zoneInsight)==null?void 0:t.subscriptions)??[];return Array.from(n).reverse()}),w=u(()=>{var i;const n=[],t=((i=r.zoneOverview.zoneInsight)==null?void 0:i.subscriptions)??[];if(t.length>0){const s=t[t.length-1],a=s.version.kumaCp.version||"-",{kumaCpGlobalCompatible:A=!0}=s.version.kumaCp;A||n.push({kind:W,payload:{zoneCpVersion:a,globalCpVersion:y("KUMA_VERSION")}})}return n}),b=u(()=>{var t;const n=((t=r.zoneOverview.zoneInsight)==null?void 0:t.subscriptions)??[];if(n.length>0){const i=n[n.length-1];if(i.config)return JSON.stringify(JSON.parse(i.config),null,2)}return null}),S=u(()=>w.value.length===0?_.filter(n=>n.hash!=="#warnings"):_);return(n,t)=>{const i=G("router-link");return o(),c(j,{tabs:S.value},{tabHeader:e(()=>[J("h1",H,[p(`
        Zone CP:

        `),l(k,{text:d.value.name},{default:e(()=>[l(i,{to:C.value},{default:e(()=>[p(m(d.value.name),1)]),_:1},8,["to"])]),_:1},8,["text"])])]),overview:e(()=>[l(Z,null,{default:e(()=>[(o(!0),f(v,null,z(d.value,(s,a)=>(o(),c(E,{key:a,term:g(h)(`http.api.property.${a}`)},{default:e(()=>[a==="status"?(o(),c(g(N),{key:0,appearance:s==="offline"?"danger":"success"},{default:e(()=>[p(m(s),1)]),_:2},1032,["appearance"])):a==="name"?(o(),c(k,{key:1,text:s},null,8,["text"])):(o(),f(v,{key:2},[p(m(s),1)],64))]),_:2},1032,["term"]))),128))]),_:1})]),insights:e(()=>[l(B,{"initially-open":0},{default:e(()=>[(o(!0),f(v,null,z(I.value,(s,a)=>(o(),c(x,{key:a},{"accordion-header":e(()=>[l(L,{details:s},null,8,["details"])]),"accordion-content":e(()=>[l(V,{details:s},null,8,["details"])]),_:2},1024))),128))]),_:1})]),config:e(()=>[b.value!==null?(o(),c(D,{key:0,id:"code-block-zone-config",language:"json",code:b.value,"is-searchable":"","query-key":"zone-config"},null,8,["code"])):(o(),c(g(T),{key:1,"data-testid":"warning-no-subscriptions",appearance:"warning"},{alertMessage:e(()=>[p(m(g(h)("zone-cps.routes.item.config.no-subscriptions")),1)]),_:1}))]),warnings:e(()=>[l(R,{warnings:w.value},null,8,["warnings"])]),_:1},8,["tabs"])}}});export{oe as _};
