import{d as g,j as C,r as S,o as e,e as h,g as _,O as V,P as A,q as P,h as o,w as r,a as s,F as k,s as q,t as B,b as y,G as x}from"./index-be7916f4.js";import{r as v,E as w,s as $,o as b,m as L,g as N,A as E,_ as F}from"./RouteView.vue_vue_type_script_setup_true_lang-d3d8e82f.js";import{_ as O}from"./ResourceCodeBlock.vue_vue_type_script_setup_true_lang-7b148f4c.js";import{_ as j}from"./TabsWidget.vue_vue_type_style_index_0_lang-98199e00.js";import{_ as I}from"./RouteTitle.vue_vue_type_script_setup_true_lang-d0d3b813.js";import"./WarningIcon.vue_vue_type_script_setup_true_lang-33662e2f.js";import"./CodeBlock.vue_vue_type_style_index_0_lang-a766fd97.js";const R=P("h2",null,"Dataplanes",-1),D=g({__name:"PolicyConnections",props:{mesh:{type:String,required:!0},policyPath:{type:String,required:!0},policyName:{type:String,required:!0}},setup(d){const a=d,m=C("");return(f,t)=>{const l=S("RouterLink");return e(),h(k,null,[R,_(),V(P("input",{id:"dataplane-search","onUpdate:modelValue":t[0]||(t[0]=i=>m.value=i),type:"text",class:"k-input mt-4",placeholder:"Filter by name",required:"","data-testid":"dataplane-search-input"},null,512),[[A,m.value]]),_(),o(b,{src:`/meshes/${a.mesh}/policy-path/${a.policyPath}/policy/${a.policyName}/dataplanes`},{default:r(({data:i,isLoading:n,error:p})=>[n?(e(),s(v,{key:0})):p?(e(),s(w,{key:1,error:p},null,8,["error"])):i===void 0||i.items.length===0?(e(),s($,{key:2})):(e(!0),h(k,{key:3},q(i.items.filter(c=>c.dataplane.name.toLowerCase().includes(m.value.toLowerCase())),(c,u)=>(e(),h("p",{key:u,class:"mt-2","data-testid":"dataplane-name"},[o(l,{to:{name:"data-plane-detail-view",params:{mesh:c.dataplane.mesh,dataPlane:c.dataplane.name}}},{default:r(()=>[_(B(c.dataplane.name),1)]),_:2},1032,["to"])]))),128))]),_:1},8,["src"])],64)}}}),G=g({__name:"PolicyDetails",props:{policy:{type:Object,required:!0},path:{type:String,required:!0}},setup(d){const a=d,m=L(),f=[{hash:"#overview",title:"Overview"},{hash:"#affected-dpps",title:"Affected DPPs"}];async function t(l){const{name:i,mesh:n}=a.policy,p=a.path;return await m.getSinglePolicyEntity({name:i,mesh:n,path:p},l)}return(l,i)=>(e(),s(j,{tabs:f},{overview:r(()=>[o(y(x),null,{body:r(()=>[o(O,{id:"code-block-policy",resource:a.policy,"resource-fetcher":t,"is-searchable":""},null,8,["resource"])]),_:1})]),"affected-dpps":r(()=>[o(y(x),null,{body:r(()=>[o(D,{mesh:a.policy.mesh,"policy-name":a.policy.name,"policy-path":a.path},null,8,["mesh","policy-name","policy-path"])]),_:1})]),_:1}))}}),W=g({__name:"PolicyDetailView",setup(d){const{t:a}=N();return(m,f)=>(e(),s(F,{name:"policy-detail-view","data-testid":"policy-detail-view"},{default:r(({route:t})=>[o(b,{src:"/*/policy-types"},{default:r(({data:l,error:i})=>[i?(e(),s(w,{key:0,error:i},null,8,["error"])):l===void 0?(e(),s(v,{key:1})):l.policies.length===0?(e(),s($,{key:2})):(e(!0),h(k,{key:3},q([l.policies.find(n=>n.path===t.params.policyPath)??l.policies[0]],n=>(e(),s(E,{key:n.name,breadcrumbs:[{to:{name:"mesh-detail-view",params:{mesh:t.params.mesh}},text:t.params.mesh},{to:{name:"policies-list-view",params:{mesh:t.params.mesh,policyPath:t.params.policyPath}},text:y(a)("policies.routes.item.breadcrumbs")}]},{title:r(()=>[P("h1",null,[o(I,{title:y(a)("policies.routes.item.title",{name:t.params.policy}),render:!0},null,8,["title"])])]),default:r(()=>[_(),o(b,{src:`/meshes/${t.params.mesh}/policy-path/${n.path}/policy/${t.params.policy}`},{default:r(({data:p,isLoading:c,error:u})=>[c?(e(),s(v,{key:0})):u?(e(),s(w,{key:1,error:u},null,8,["error"])):p===void 0?(e(),s($,{key:2})):(e(),s(G,{key:3,policy:p,path:n.path,"data-testid":"detail-view-details"},null,8,["policy","path"]))]),_:2},1032,["src"])]),_:2},1032,["breadcrumbs"]))),128))]),_:2},1024)]),_:1}))}});export{W as default};
