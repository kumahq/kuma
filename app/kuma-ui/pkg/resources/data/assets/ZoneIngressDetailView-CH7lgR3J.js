import{d as J,a2 as K,r as d,p as m,o as a,w as t,b as s,e as n,q as C,l as o,c as f,t as i,T as M,N as g,L as w,m as X,a3 as Q,y as U,_ as W}from"./index-DCInHvfM.js";import{C as B,b as S,a as Y}from"./ConnectionTraffic-BJkeSZiC.js";import"./TagList-DEUATBg8.js";const h={key:0},ee=J({__name:"ZoneIngressDetailView",props:{data:{}},setup(q){const r=q,A=K();return(te,e)=>{const _=d("XBadge"),D=d("XCopyButton"),T=d("XDl"),z=d("XAction"),v=d("XLayout"),L=d("XI18n"),R=d("XAboutCard"),x=d("DataCollection"),N=d("XInputSwitch"),$=d("XCard"),O=d("XDrawer"),j=d("RouterView"),Z=d("DataLoader"),E=d("AppView"),F=d("RouteView");return a(),m(F,{name:"zone-ingress-detail-view",params:{subscription:"",proxy:"",inactive:Boolean}},{default:t(({t:l,route:u,uri:G})=>[s(E,null,{default:t(()=>[s(R,{title:l("zone-ingresses.routes.item.about.title"),created:r.data.creationTime,modified:r.data.modificationTime,class:"about-section"},{default:t(()=>[s(v,null,{default:t(()=>[s(T,{variant:"x-stack"},{default:t(()=>[o("div",null,[o("dt",null,i(l("http.api.property.status")),1),e[0]||(e[0]=n()),o("dd",null,[s(M,{status:r.data.state},null,8,["status"])])]),e[4]||(e[4]=n()),r.data.namespace.length>0?(a(),f("div",h,[o("dt",null,i(l("http.api.property.namespace")),1),e[1]||(e[1]=n()),o("dd",null,[s(_,{appearance:"decorative"},{default:t(()=>[n(i(r.data.namespace),1)]),_:1})])])):C("",!0),e[5]||(e[5]=n()),o("div",null,[o("dt",null,i(l("http.api.property.address")),1),e[2]||(e[2]=n()),o("dd",null,[r.data.zoneIngress.socketAddress.length>0?(a(),m(D,{key:0,variant:"badge",format:"default",text:r.data.zoneIngress.socketAddress},null,8,["text"])):(a(),f(g,{key:1},[n(i(l("common.detail.none")),1)],64))])]),e[6]||(e[6]=n()),o("div",null,[o("dt",null,i(l("http.api.property.advertisedAddress")),1),e[3]||(e[3]=n()),o("dd",null,[r.data.zoneIngress.advertisedSocketAddress.length>0?(a(),m(_,{key:0,appearance:"decorative"},{default:t(()=>[s(D,{text:r.data.zoneIngress.advertisedSocketAddress},null,8,["text"])]),_:1})):(a(),f(g,{key:1},[n(i(l("common.detail.none")),1)],64))])])]),_:2},1024),e[14]||(e[14]=n()),r.data.zoneIngressInsight.subscriptions.length>0?(a(),m(v,{key:0,"data-testid":"about-zone-ingress-subscriptions",class:"about-subsection"},{default:t(()=>[s(v,{type:"separated"},{default:t(()=>[o("h3",null,i(l("zone-ingresses.routes.item.subscriptions.title")),1),e[7]||(e[7]=n()),s(z,{"data-action":"",appearance:"anchor",to:{name:"zone-ingress-subscriptions-list-view",params:{proxy:u.params.proxy},query:{inactive:u.params.inactive}}},{default:t(()=>[n(`
                (`+i(l("zone-ingresses.routes.item.subscriptions.show-details"))+`)
              `,1)]),_:2},1032,["to"])]),_:2},1024),e[13]||(e[13]=n()),(a(!0),f(g,null,w([r.data.zoneIngressInsight.connectedSubscription],c=>(a(),f(g,{key:typeof c},[!c?.disconnectTime&&c?.connectTime?(a(),m(T,{key:0,variant:"x-stack"},{default:t(()=>[o("div",null,[o("dt",null,i(l("zone-ingresses.routes.item.subscriptions.connected")),1),e[8]||(e[8]=n()),o("dd",null,[s(_,{appearance:"neutral"},{default:t(()=>[n(i(l("common.formats.datetime",{value:Date.parse(c.connectTime)})),1)]),_:2},1024)])]),e[11]||(e[11]=n()),o("div",null,[o("dt",null,i(l("zone-ingresses.routes.item.subscriptions.instance")),1),e[9]||(e[9]=n()),o("dd",null,[s(_,{appearance:"info"},{default:t(()=>[n(i(c.controlPlaneInstanceId),1)]),_:2},1024)])]),e[12]||(e[12]=n()),o("div",null,[o("dt",null,i(l("zone-ingresses.routes.item.subscriptions.version")),1),e[10]||(e[10]=n()),o("dd",null,[s(_,{appearance:"info"},{default:t(()=>[n(i(c.version?.kumaDp?.version??l("common.unknown")),1)]),_:2},1024)])])]),_:2},1024)):(a(),m(L,{key:1,path:"zone-ingresses.routes.item.subscriptions.disconnected"}))],64))),128))]),_:2},1024)):C("",!0)]),_:2},1024)]),_:2},1032,["title","created","modified"]),e[21]||(e[21]=n()),s(Z,{src:G(X(Q),"/connections/stats/for/:proxyType/:name/:mesh/:socketAddress",{name:u.params.proxy,mesh:"*",socketAddress:r.data.zoneIngress.socketAddress,proxyType:"zone-ingress"})},{default:t(({data:c,refresh:P})=>[s($,null,{default:t(()=>[s(v,{type:"columns"},{default:t(()=>[s(B,null,{default:t(()=>[s(v,{type:"stack",size:"small"},{default:t(()=>[s(x,{type:"inbounds",items:Object.entries(c.inbounds)},{default:t(({items:p})=>[(a(!0),f(g,null,w(p,([b,k])=>(a(),m(S,{key:`${b}`,protocol:"",traffic:k},{default:t(()=>[s(z,{"data-action":"",to:{name:(y=>y.includes("bound")?y.replace("-outbound-","-inbound-"):"zone-ingress-connection-inbound-summary-stats-view")(String(X(A).name)),params:{connection:b,proxyType:"ingresses"},query:{inactive:u.params.inactive}}},{default:t(()=>[n(`
                        :`+i(b.split("_").at(-1)),1)]),_:2},1032,["to"])]),_:2},1032,["traffic"]))),128))]),_:2},1032,["items"])]),_:2},1024)]),_:2},1024),e[19]||(e[19]=n()),s(B,null,{actions:t(()=>[s(N,{checked:u.params.inactive,"data-testid":"dataplane-outbounds-inactive-toggle",onChange:p=>u.update({inactive:p})},{label:t(()=>[...e[15]||(e[15]=[n(`
                    Show inactive
                  `,-1)])]),_:1},8,["checked","onChange"]),e[17]||(e[17]=n()),s(z,{action:"refresh",appearance:"primary",onClick:P},{default:t(()=>[...e[16]||(e[16]=[n(`
                  Refresh
                `,-1)])]),_:1},8,["onClick"])]),default:t(()=>[e[18]||(e[18]=n()),(a(),f(g,null,w(["upstream"],p=>s(x,{key:p,type:"outbounds",items:Object.entries(c.outbounds)},{default:t(({items:b})=>[s(x,{type:"activeOutbounds",predicate:u.params.inactive?void 0:([k,y])=>((typeof y.tcp<"u"?y.tcp?.[`${p}_cx_rx_bytes_total`]:y.http?.[`${p}_rq_total`])??0)>0,items:b},{default:t(({items:k})=>[k.length>0?(a(),m(Y,{key:0,type:"outbound"},{default:t(()=>[(a(),f(g,null,w([/-([a-f0-9]){16}$/],y=>s(v,{key:y,type:"stack",size:"small"},{default:t(()=>[(a(!0),f(g,null,w(k,([I,H])=>(a(),m(S,{key:`${I}`,"data-testid":"dataplane-outbound",protocol:"",traffic:H,direction:p},{default:t(()=>[s(z,{"data-action":"",to:{name:(V=>V.includes("bound")?V.replace("-inbound-","-outbound-"):"zone-ingress-connection-outbound-summary-stats-view")(String(X(A).name)),params:{connection:I},query:{inactive:u.params.inactive}}},{default:t(()=>[n(i(I),1)]),_:2},1032,["to"])]),_:2},1032,["traffic","direction"]))),128))]),_:2},1024)),64))]),_:2},1024)):C("",!0)]),_:2},1032,["predicate","items"])]),_:2},1032,["items"])),64))]),_:2},1024)]),_:2},1024)]),_:2},1024),e[20]||(e[20]=n()),s(j,null,{default:t(p=>[p.route.name!==u.name?(a(),m(O,{key:0,width:"670px",onClose:function(){u.replace({name:"zone-ingress-detail-view",params:{proxy:u.params.proxy,proxyType:"ingresses"},query:{inactive:u.params.inactive?null:void 0}})}},{default:t(()=>[(a(),m(U(p.Component),{data:u.params.subscription.length>0?r.data.zoneIngressInsight.subscriptions:p.route.name.includes("-inbound-")?[r.data.zoneIngress]:c?.outbounds||{},networking:r.data.zoneIngress.networking},null,8,["data","networking"]))]),_:2},1032,["onClose"])):C("",!0)]),_:2},1024)]),_:2},1032,["src"])]),_:2},1024)]),_:1})}}}),ae=W(ee,[["__scopeId","data-v-620b9744"]]);export{ae as default};
