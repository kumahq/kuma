import{d as S,r as o,p as c,o as i,w as s,b as t,e as r,m as N,ak as B,l as k,I,q as _,K as q,t as m,c as P,y as T,_ as G}from"./index-BkRXKYLT.js";const W={key:1},E=S({__name:"WorkloadListView",setup(K){return(M,n)=>{const f=o("RouteTitle"),h=o("XI18n"),y=o("XSearch"),u=o("XAction"),g=o("XActionGroup"),z=o("DataCollection"),C=o("XDrawer"),v=o("RouterView"),X=o("DataLoader"),V=o("XLayout"),b=o("XCard"),D=o("DataSource"),x=o("AppView"),A=o("RouteView");return i(),c(A,{name:"workload-list-view",params:{page:1,size:Number,mesh:"",s:""}},{default:s(({route:a,me:d,uri:L,can:w,t:l})=>[t(f,{render:!1,title:l("workloads.routes.items.title")},null,8,["title"]),n[8]||(n[8]=r()),t(x,{docs:l("workloads.href.docs.workload")},{default:s(()=>[t(h,{path:"workloads.routes.items.intro","default-path":"common.i18n.ignore-error"}),n[7]||(n[7]=r()),t(D,{src:L(N(B),"/meshes/:mesh/workloads",{mesh:a.params.mesh},{page:a.params.page,size:a.params.size,search:a.params.s})},{default:s(({data:p,error:R})=>[t(b,null,{default:s(()=>[t(V,{variant:"y-stack"},{default:s(()=>[k("search",null,[k("form",{class:"search-form",onSubmit:n[0]||(n[0]=I(()=>{},["prevent"]))},[t(y,{class:"search-field",keys:["name","namespace",...w("use zones")?["zone"]:[],"label"],value:a.params.s,onChange:e=>a.update({page:1,s:e})},null,8,["keys","value","onChange"])],32)]),n[6]||(n[6]=r()),t(X,{data:[p],errors:[R],variant:"list"},{default:s(()=>[typeof p<"u"?(i(),c(z,{key:0,items:p.items,total:p.total,page:a.params.page,"page-size":a.params.size,onChange:a.update},{default:s(()=>[t(q,{items:p.items,type:"workload",headers:[{...d.get("headers.name"),label:l("workloads.routes.items.headers.name"),key:"name"},{...d.get("headers.namespace"),label:l("workloads.routes.items.headers.namespace"),key:"namespace"},...w("use zones")?[{...d.get("headers.zone"),label:l("workloads.routes.items.headers.zone"),key:"zone"}]:[],{...d.get("headers.status"),label:l("workloads.routes.items.headers.dpps"),key:"dpps"},{...d.get("headers.actions"),label:l("workloads.routes.items.headers.actions"),key:"actions",hideLabel:!0}]},{name:s(({row:e})=>[t(u,{"data-action":"",class:"name-link",title:e.name,to:{name:"workload-summary-view",params:{wl:e.kri},query:{page:a.params.page,size:a.params.size,s:a.params.s}}},{default:s(()=>[r(m(e.name),1)]),_:2},1032,["title","to"])]),namespace:s(({row:e})=>[r(m(e.namespace),1)]),zone:s(({row:e})=>[e.zone?(i(),c(u,{key:0,to:{name:"zone-cp-detail-view",params:{zone:e.zone}}},{default:s(()=>[r(m(e.zone),1)]),_:2},1032,["to"])):(i(),P("span",W,"â€”"))]),dpps:s(({row:e})=>[r(m(e.status.dataplaneProxies.connected)+` /
                    `+m(e.status.dataplaneProxies.healthy)+` /
                    `+m(e.status.dataplaneProxies.total),1)]),actions:s(({row:e})=>[t(g,null,{default:s(()=>[t(u,{to:{name:"workload-detail-view",params:{wl:e.kri}}},{default:s(()=>[r(m(l("common.collection.actions.view")),1)]),_:2},1032,["to"])]),_:2},1024)]),_:2},1032,["items","headers"])]),_:2},1032,["items","total","page","page-size","onChange"])):_("",!0),n[5]||(n[5]=r()),t(v,null,{default:s(e=>[a.name!==e.route.name?(i(),c(C,{key:0,onClose:$=>a.replace({name:a.name,params:{mesh:a.params.mesh},query:{page:a.params.page,size:a.params.size,s:a.params.s}})},{default:s(()=>[typeof p<"u"?(i(),c(T(e.Component),{key:0,items:p.items},null,8,["items"])):_("",!0)]),_:2},1032,["onClose"])):_("",!0)]),_:2},1024)]),_:2},1032,["data","errors"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["src"])]),_:2},1032,["docs"])]),_:1})}}}),F=G(E,[["__scopeId","data-v-2fe5a2ba"]]);export{F as default};
