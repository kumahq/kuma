import{d as B,h as n,o as l,a as c,w as s,j as o,k as i,z as h,aB as K,C as N,X as T,t as m,b as p,F as _,e as u,B as w,M as E,r as I,A as M}from"./index-ChTNn-OB.js";import{e as X}from"./kong-icons.es249-CTaCOXIv.js";import{S as q}from"./SummaryView-B-JEVZY-.js";const F=B({__name:"MeshExternalServiceListView",setup(Z){return($,j)=>{const z=n("RouteTitle"),k=n("XAction"),b=n("RouterLink"),v=n("KBadge"),y=n("KTruncate"),g=n("RouterView"),C=n("DataCollection"),x=n("DataLoader"),V=n("KCard"),D=n("AppView"),S=n("RouteView"),L=n("DataSource");return l(),c(L,{src:"/me"},{default:s(({data:f})=>[f?(l(),c(S,{key:0,name:"mesh-external-service-list-view",params:{page:1,size:f.pageSize,mesh:"",service:""}},{default:s(({route:t,t:d,can:R,uri:A})=>[o(z,{render:!1,title:d("services.routes.mesh-external-service-list-view.title")},null,8,["title"]),i(),o(D,null,{default:s(()=>[o(V,null,{default:s(()=>[o(x,{src:A(h(K),"/meshes/:mesh/mesh-external-services",{mesh:t.params.mesh},{page:t.params.page,size:t.params.size})},{loadable:s(({data:a})=>[o(C,{type:"services",items:(a==null?void 0:a.items)??[void 0]},{default:s(()=>[o(N,{"data-testid":"service-collection",headers:[{label:"Name",key:"name"},{label:"Namespace",key:"namespace"},...R("use zones")?[{label:"Zone",key:"zone"}]:[],{label:"TLS",key:"tls"},{label:"Addresses",key:"addresses"},{label:"Port",key:"port"},{label:"Details",key:"details",hideLabel:!0}],"page-number":t.params.page,"page-size":t.params.size,total:a==null?void 0:a.total,items:a==null?void 0:a.items,"is-selected-row":e=>e.name===t.params.service,onChange:t.update},{name:s(({row:e})=>[o(T,{text:e.name},{default:s(()=>[o(k,{"data-action":"",to:{name:"mesh-external-service-summary-view",params:{mesh:e.mesh,service:e.id},query:{page:t.params.page,size:t.params.size}}},{default:s(()=>[i(m(e.name),1)]),_:2},1032,["to"])]),_:2},1032,["text"])]),namespace:s(({row:e})=>[i(m(e.namespace),1)]),zone:s(({row:e})=>[e.labels&&e.labels["kuma.io/origin"]==="zone"&&e.labels["kuma.io/zone"]?(l(),p(_,{key:0},[e.labels["kuma.io/zone"]?(l(),c(b,{key:0,to:{name:"zone-cp-detail-view",params:{zone:e.labels["kuma.io/zone"]}}},{default:s(()=>[i(m(e.labels["kuma.io/zone"]),1)]),_:2},1032,["to"])):u("",!0)],64)):(l(),p(_,{key:1},[i(m(d("common.detail.none")),1)],64))]),tls:s(({row:e})=>[o(v,{appearance:"neutral"},{default:s(()=>{var r;return[i(m((r=e.spec.tls)!=null&&r.enabled?"Enabled":"Disabled"),1)]}),_:2},1024)]),addresses:s(({row:e})=>[o(y,null,{default:s(()=>[(l(!0),p(_,null,w(e.status.addresses,r=>(l(),p("span",{key:r.hostname},m(r.hostname),1))),128))]),_:2},1024)]),port:s(({row:e})=>[e.spec.match?(l(!0),p(_,{key:0},w([e.spec.match],r=>(l(),c(v,{key:r.port,appearance:"info"},{default:s(()=>[i(m(r.port)+"/"+m(r.protocol),1)]),_:2},1024))),128)):u("",!0)]),details:s(({row:e})=>[o(k,{class:"details-link","data-testid":"details-link",to:{name:"mesh-external-service-detail-view",params:{mesh:e.mesh,service:e.id}}},{default:s(()=>[i(m(d("common.collection.details_link"))+" ",1),o(h(X),{decorative:"",size:h(E)},null,8,["size"])]),_:2},1032,["to"])]),_:2},1032,["headers","page-number","page-size","total","items","is-selected-row","onChange"]),i(),a!=null&&a.items&&t.params.service?(l(),c(g,{key:0},{default:s(e=>[o(q,{onClose:r=>t.replace({name:"mesh-external-service-list-view",params:{mesh:t.params.mesh},query:{page:t.params.page,size:t.params.size}})},{default:s(()=>[(l(),c(I(e.Component),{items:a==null?void 0:a.items},null,8,["items"]))]),_:2},1032,["onClose"])]),_:2},1024)):u("",!0)]),_:2},1032,["items"])]),_:2},1032,["src"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["params"])):u("",!0)]),_:1})}}}),G=M(F,[["__scopeId","data-v-163bb24f"]]);export{G as default};
