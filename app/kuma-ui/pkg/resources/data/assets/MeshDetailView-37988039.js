import{d as A,c as u,o as r,e as f,g as e,t as a,b as s,h as o,v as V,u as q,r as L,w as t,q as D,a as c,Y as $,F as w,G as j}from"./index-bb115be3.js";import{g as C,f as M,m as O,D as k,R,A as B,o as I,p as F,E as Y,q as E,_ as G}from"./RouteView.vue_vue_type_script_setup_true_lang-e50bfc04.js";import{_ as K}from"./ResourceCodeBlock.vue_vue_type_script_setup_true_lang-73008343.js";import{T as P}from"./TextWithCopyButton-8bd76c4b.js";import{_ as W}from"./RouteTitle.vue_vue_type_script_setup_true_lang-c0548d11.js";import"./CodeBlock.vue_vue_type_style_index_0_lang-bc7de660.js";import"./CopyButton-9e08aa37.js";const z={class:"date-status"},H=A({__name:"ResourceDateStatus",props:{creationTime:{},modificationTime:{}},setup(x){const i=x,{t:n,formatIsoDate:y}=C(),_=u(()=>y(i.creationTime)),d=u(()=>y(i.modificationTime));return(v,p)=>(r(),f("span",z,[e(a(s(n)("common.detail.created"))+": "+a(_.value)+" ",1),o(s(V),{icon:"arrowRight"}),e(" "+a(s(n)("common.detail.modified"))+": "+a(d.value),1)]))}});const J=M(H,[["__scopeId","data-v-76eb341b"]]),Q={class:"stack"},U={class:"stack"},X={class:"columns",style:{"--columns":"4"}},Z={class:"columns",style:{"--columns":"4"}},ee={class:"date-status-wrapper"},te=A({__name:"MeshDetails",props:{mesh:{type:Object,required:!0},meshInsight:{type:Object,required:!0}},setup(x){const i=x,{t:n}=C(),y=O(),_=q(),d=u(()=>m(i.mesh.mtls)),v=u(()=>m(i.mesh.logging)),p=u(()=>m(i.mesh.metrics)),g=u(()=>m(i.mesh.tracing)),T=u(()=>Object.values(i.meshInsight.policies??{}).reduce((l,h)=>l+h.total,0));function m(l){if(!l||!Array.isArray(l==null?void 0:l.backends)||l.backends.length===0)return"";const h=l.enabledBackend??l.defaultBackend??l.backends[0].name,b=l.backends.find(S=>S.name===h);return b===void 0?"":`${b.type} / ${b.name}`}async function N(l){const h=_.params.mesh;return await y.getMesh({name:h},l)}return(l,h)=>{const b=L("RouterLink");return r(),f("div",Q,[o(s(j),null,{body:t(()=>[D("div",U,[D("div",X,[o(k,null,{title:t(()=>[e(a(s(n)("http.api.property.name")),1)]),body:t(()=>[o(P,{text:i.mesh.name},{default:t(()=>[o(b,{to:{name:"mesh-detail-view",params:{mesh:i.mesh.name}}},{default:t(()=>[e(a(i.mesh.name),1)]),_:1},8,["to"])]),_:1},8,["text"])]),_:1}),e(),o(R,{total:i.meshInsight.services.total??0,"data-testid":"services-status"},{title:t(()=>[e(a(s(n)("meshes.detail.services")),1)]),_:1},8,["total"]),e(),o(R,{total:i.meshInsight.dataplanesByType.standard.total??0,"data-testid":"data-plane-proxies-status"},{title:t(()=>[e(a(s(n)("meshes.detail.data_plane_proxies")),1)]),_:1},8,["total"]),e(),o(R,{total:T.value,"data-testid":"policies-status"},{title:t(()=>[e(a(s(n)("meshes.detail.policies")),1)]),_:1},8,["total"])]),e(),D("div",Z,[o(k,null,{title:t(()=>[e(a(s(n)("http.api.property.mtls")),1)]),body:t(()=>[d.value===""?(r(),c(s($),{key:0,appearance:"neutral"},{default:t(()=>[e(a(s(n)("meshes.detail.disabled")),1)]),_:1})):(r(),f(w,{key:1},[e(a(d.value),1)],64))]),_:1}),e(),o(k,null,{title:t(()=>[e(a(s(n)("http.api.property.logging")),1)]),body:t(()=>[v.value===""?(r(),c(s($),{key:0,appearance:"neutral"},{default:t(()=>[e(a(s(n)("meshes.detail.disabled")),1)]),_:1})):(r(),f(w,{key:1},[e(a(v.value),1)],64))]),_:1}),e(),o(k,null,{title:t(()=>[e(a(s(n)("http.api.property.metrics")),1)]),body:t(()=>[p.value===""?(r(),c(s($),{key:0,appearance:"neutral"},{default:t(()=>[e(a(s(n)("meshes.detail.disabled")),1)]),_:1})):(r(),f(w,{key:1},[e(a(p.value),1)],64))]),_:1}),e(),o(k,null,{title:t(()=>[e(a(s(n)("http.api.property.tracing")),1)]),body:t(()=>[g.value===""?(r(),c(s($),{key:0,appearance:"neutral"},{default:t(()=>[e(a(s(n)("meshes.detail.disabled")),1)]),_:1})):(r(),f(w,{key:1},[e(a(g.value),1)],64))]),_:1})])])]),_:1}),e(),o(K,{id:"code-block-mesh",resource:i.mesh,"resource-fetcher":N},null,8,["resource"]),e(),D("div",ee,[o(J,{"creation-time":i.mesh.creationTime,"modification-time":i.mesh.modificationTime},null,8,["creation-time","modification-time"])])])}}});const ae=M(te,[["__scopeId","data-v-a6a08878"]]),de=A({__name:"MeshDetailView",setup(x){const{t:i}=C();return(n,y)=>(r(),c(G,{name:"mesh-overview-view"},{default:t(({route:_})=>[o(W,{title:s(i)("meshes.routes.overview.title")},null,8,["title"]),e(),o(B,null,{default:t(()=>[o(I,{src:`/meshes/${_.params.mesh}`},{default:t(({data:d,isLoading:v,error:p})=>[o(I,{src:`/mesh-insights/${_.params.mesh}`},{default:t(({data:g,isLoading:T,error:m})=>[v||T?(r(),c(F,{key:0})):p??m?(r(),c(Y,{key:1,error:p??m},null,8,["error"])):d===void 0||g===void 0?(r(),c(E,{key:2})):(r(),c(ae,{key:3,mesh:d,"mesh-insight":g,"data-testid":"detail-view-details"},null,8,["mesh","mesh-insight"]))]),_:2},1032,["src"])]),_:2},1032,["src"])]),_:2},1024)]),_:1}))}});export{de as default};
