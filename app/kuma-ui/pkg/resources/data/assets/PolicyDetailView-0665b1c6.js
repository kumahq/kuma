import{d as f,j as P,r as b,o as a,e as h,g as m,X as V,Z as B,q as v,h as i,w as o,a as c,F as k,s as S,t as _,c as T,b as w}from"./index-3af0ef1d.js";import{r as $,E as g,s as x,p as q,m as A,g as L,A as N,_ as D}from"./RouteView.vue_vue_type_script_setup_true_lang-88be438e.js";import{_ as E}from"./ResourceCodeBlock.vue_vue_type_script_setup_true_lang-f661df74.js";import{T as R}from"./TabsWidget-f2d89a45.js";import{T as F}from"./TextWithCopyButton-7d032c57.js";import{_ as j}from"./RouteTitle.vue_vue_type_script_setup_true_lang-9e71dd50.js";import"./CodeBlock.vue_vue_type_style_index_0_lang-6d9f6f24.js";const I=v("h2",null,"Dataplanes",-1),O=f({__name:"PolicyConnections",props:{mesh:{type:String,required:!0},policyPath:{type:String,required:!0},policyName:{type:String,required:!0}},setup(u){const e=u,l=P("");return(d,p)=>{const y=b("RouterLink");return a(),h(k,null,[I,m(),V(v("input",{id:"dataplane-search","onUpdate:modelValue":p[0]||(p[0]=t=>l.value=t),type:"text",class:"k-input mt-4",placeholder:"Filter by name",required:"","data-testid":"dataplane-search-input"},null,512),[[B,l.value]]),m(),i(q,{src:`/meshes/${e.mesh}/policy-path/${e.policyPath}/policy/${e.policyName}/dataplanes`},{default:o(({data:t,isLoading:n,error:r})=>[n?(a(),c($,{key:0})):r?(a(),c(g,{key:1,error:r},null,8,["error"])):t===void 0||t.items.length===0?(a(),c(x,{key:2})):(a(!0),h(k,{key:3},S(t.items.filter(s=>s.dataplane.name.toLowerCase().includes(l.value.toLowerCase())),(s,C)=>(a(),h("p",{key:C,class:"mt-2","data-testid":"dataplane-name"},[i(y,{to:{name:"data-plane-detail-view",params:{mesh:s.dataplane.mesh,dataPlane:s.dataplane.name}}},{default:o(()=>[m(_(s.dataplane.name),1)]),_:2},1032,["to"])]))),128))]),_:1},8,["src"])],64)}}}),W={class:"policy-details kcard-border"},H={class:"entity-heading","data-testid":"policy-single-entity"},K=f({__name:"PolicyDetails",props:{policy:{type:Object,required:!0},path:{type:String,required:!0}},setup(u){const e=u,l=A(),d=[{hash:"#overview",title:"Overview"},{hash:"#affected-dpps",title:"Affected DPPs"}],p=T(()=>({name:"policy-detail-view",params:{mesh:e.policy.mesh,policy:e.policy.name,policyPath:e.path}}));async function y(t){const{name:n,mesh:r}=e.policy,s=e.path;return await l.getSinglePolicyEntity({name:n,mesh:r,path:s},t)}return(t,n)=>{const r=b("router-link");return a(),h("div",W,[i(R,{tabs:d},{tabHeader:o(()=>[v("h1",H,[m(_(e.policy.type)+`:

          `,1),i(F,{text:e.policy.name},{default:o(()=>[i(r,{to:p.value},{default:o(()=>[m(_(e.policy.name),1)]),_:1},8,["to"])]),_:1},8,["text"])])]),overview:o(()=>[i(E,{id:"code-block-policy",resource:e.policy,"resource-fetcher":y,"is-searchable":""},null,8,["resource"])]),"affected-dpps":o(()=>[i(O,{mesh:e.policy.mesh,"policy-name":e.policy.name,"policy-path":e.path},null,8,["mesh","policy-name","policy-path"])]),_:1})])}}}),Q=f({__name:"PolicyDetailView",setup(u){const{t:e}=L(),l=P({format:"universal"});function d(p){l.value=p}return(p,y)=>(a(),c(D,{name:"policy-detail-view"},{default:o(({route:t})=>[i(j,{title:w(e)("policies.routes.item.title",{name:t.params.policy})},null,8,["title"]),m(),i(N,{breadcrumbs:[{to:{name:"policies-list-view",params:{mesh:t.params.mesh,policyPath:t.params.policyPath}},text:w(e)("policies.routes.item.breadcrumbs")}]},{default:o(()=>[i(q,{src:`/meshes/${t.params.mesh}/policy-path/${t.params.policyPath}/policy/${t.params.policy}`},{default:o(({data:n,isLoading:r,error:s})=>[r?(a(),c($,{key:0})):s?(a(),c(g,{key:1,error:s},null,8,["error"])):n===void 0?(a(),c(x,{key:2})):(a(),c(K,{key:3,policy:n,path:t.params.policyPath,"update-resource-params":d},null,8,["policy","path"]))]),_:2},1032,["src"])]),_:2},1032,["breadcrumbs"])]),_:1}))}});export{Q as default};
