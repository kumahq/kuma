import{d as b,u as D,j as p,s as T,e as o,f as e,a as x,w as C,m as n,c as h,n as g,t as u,F as I,h as A,r as B,x as q,y as L,o as a,b as f,_ as $,cB as O,p as P,i as S,k as w,K as E}from"./index.ff83acd2.js";import{E as F}from"./EntityTag.94d06403.js";import{E as V}from"./EntityURLControl.c728919a.js";import{Y as j}from"./YamlView.c808cec1.js";import{_ as K}from"./EmptyBlock.vue_vue_type_script_setup_true_lang.a3bd4170.js";import{E as M}from"./ErrorBlock.f11c1f94.js";import{_ as U}from"./LoadingBlock.vue_vue_type_script_setup_true_lang.3473bd21.js";const y=s=>(q("data-v-cbd4b15a"),s=s(),L(),s),Y={class:"entity-summary entity-section-list"},z={class:"entity-title"},G=y(()=>e("span",{class:"kutil-sr-only"},"Service:",-1)),H={class:"definition"},J=y(()=>e("span",null,"Mesh:",-1)),Q={class:"definition"},W=y(()=>e("span",null,"Address:",-1)),X={class:"definition"},Z=y(()=>e("span",null,"TLS:",-1)),ee={key:0},te=y(()=>e("h4",null,"Tags",-1)),se={class:"tag-list"},ne=b({__name:"ExternalServiceDetails",props:{externalService:{type:Object,required:!0}},setup(s){const t=s,d=D(),i=p(()=>({name:"external-service-detail-view",params:{service:t.externalService.name,mesh:t.externalService.mesh}})),r=p(()=>Object.entries(t.externalService.tags).map(([_,l])=>({label:_,value:l}))),c=p(()=>T(t.externalService));return(_,l)=>{var v;const m=B("router-link");return a(),o("div",Y,[e("h3",z,[G,x(m,{to:n(i)},{default:C(()=>[f(u(s.externalService.name),1)]),_:1},8,["to"]),n(d).name!==n(i).name?(a(),h(V,{key:0,route:n(i)},null,8,["route"])):g("",!0)]),e("section",null,[e("div",H,[J,e("span",null,u(s.externalService.mesh),1)]),e("div",Q,[W,e("span",null,u(t.externalService.networking.address),1)]),e("div",X,[Z,e("span",null,u((v=t.externalService.networking.tls)!=null&&v.enabled?"Enabled":"Disabled"),1)])]),n(r).length>0?(a(),o("section",ee,[te,e("div",se,[(a(!0),o(I,null,A(n(r),(N,R)=>(a(),h(F,{key:R,tag:N},null,8,["tag"]))),128))])])):g("",!0),x(j,{id:"code-block-external-service",content:n(c),"is-searchable":""},null,8,["content"])])}}});const ae=$(ne,[["__scopeId","data-v-cbd4b15a"]]),k=s=>(q("data-v-a3e95a16"),s=s(),L(),s),ie={class:"entity-summary entity-section-list"},re={class:"entity-title"},le=k(()=>e("span",{class:"kutil-sr-only"},"Service:",-1)),ce={class:"definition"},oe=k(()=>e("span",null,"Mesh:",-1)),ue={class:"definition"},de=k(()=>e("span",null,"Address:",-1)),_e={key:0,class:"definition"},ve=k(()=>e("span",null,"Data planes (online / total):",-1)),he=b({__name:"ServiceInsightDetails",props:{serviceInsight:{type:Object,required:!0}},setup(s){const t=s,d=D(),i=p(()=>({name:t.serviceInsight.serviceType==="external"?"external-service-detail-view":"service-insight-detail-view",params:{service:t.serviceInsight.name,mesh:t.serviceInsight.mesh}})),r=p(()=>t.serviceInsight.status?O[t.serviceInsight.status]:null),c=p(()=>{var l;return t.serviceInsight.dataplanes?`${(l=t.serviceInsight.dataplanes.online)!=null?l:0} / ${t.serviceInsight.dataplanes.total}`:null}),_=p(()=>T(t.serviceInsight));return(l,m)=>{const v=B("router-link");return a(),o("div",ie,[e("h3",re,[le,x(v,{to:n(i)},{default:C(()=>[f(u(s.serviceInsight.name),1)]),_:1},8,["to"]),n(r)!==null?(a(),o("div",{key:0,class:P(`status status--${n(r).appearance}`),"data-testid":"data-plane-status-badge"},u(n(r).title.toLowerCase()),3)):g("",!0),n(d).name!==n(i).name?(a(),h(V,{key:1,route:n(i)},null,8,["route"])):g("",!0)]),e("section",null,[e("div",ce,[oe,e("span",null,u(s.serviceInsight.mesh),1)]),e("div",ue,[de,e("span",null,[s.serviceInsight.addressPort?(a(),o(I,{key:0},[f(u(s.serviceInsight.addressPort),1)],64)):(a(),o(I,{key:1},[f("\u2014")],64))])]),n(c)!==null?(a(),o("div",_e,[ve,e("span",null,u(n(c)),1)])):g("",!0)]),x(j,{id:"code-block-service-insight",content:n(_),"is-searchable":""},null,8,["content"])])}}});const pe=$(he,[["__scopeId","data-v-a3e95a16"]]),me={class:"service-details"},ge=b({__name:"ServiceDetails",props:{serviceType:{type:String,required:!1,default:"internal"},name:{type:String,required:!0},mesh:{type:String,required:!0}},setup(s){const t=s,d=S(null),i=S(null),r=S(!0),c=S(null);w(()=>t.mesh,function(){_()}),w(()=>t.name,function(){_()}),_();async function _(){r.value=!0,c.value=null,d.value=null,i.value=null;const l=t.mesh,m=t.name;try{t.serviceType==="external"?i.value=await E.getExternalService({mesh:l,name:m}):d.value=await E.getServiceInsight({mesh:l,name:m})}catch(v){v instanceof Error?c.value=v:console.error(v)}finally{r.value=!1}}return(l,m)=>(a(),o("div",me,[r.value?(a(),h(U,{key:0})):c.value!==null?(a(),h(M,{key:1,error:c.value},null,8,["error"])):d.value!==null?(a(),h(pe,{key:2,"service-insight":d.value},null,8,["service-insight"])):i.value!==null?(a(),h(ae,{key:3,"external-service":i.value},null,8,["external-service"])):(a(),h(K,{key:4}))]))}});const $e=$(ge,[["__scopeId","data-v-e8f57804"]]);export{$e as S};
