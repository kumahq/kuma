import{d as K,ah as $,ai as G,r as l,x as M,p as u,o as m,w as e,b as n,l as y,e as s,z as Z,q as h,t as c,c as _,I as j,m as g,F as H,K as J,L as C,y as O,_ as Q}from"./index-DOcj6Efz.js";const U={class:"stack"},W={class:"visually-hidden"},Y=K({__name:"PolicyListView",props:{policyTypes:{}},setup(X){const b=X,D=$(),V=G();return(ee,t)=>{const P=l("XEmptyState"),z=l("XBadge"),f=l("XAction"),w=l("XI18n"),k=l("XCard"),T=l("XSearch"),x=l("XIcon"),A=l("KumaTargetRef"),v=l("DataCollection"),S=l("XDrawer"),L=l("RouterView"),N=l("DataLoader"),B=l("AppView"),I=l("RouteView"),E=M("icon-start");return m(),u(I,{name:"policy-list-view",params:{page:1,size:Number,mesh:"",policyPath:"",policy:"",s:""}},{default:e(({route:o,t:p,can:R,uri:q,me:r})=>[n(v,{predicate:i=>typeof i<"u"&&i.path===o.params.policyPath,items:b.policyTypes??[]},{empty:e(()=>[n(P,null,{default:e(()=>[s(c(p("policies.routes.items.empty")),1)]),_:2},1024)]),item:e(({item:i})=>[n(B,null,{default:e(()=>[y("div",U,[n(k,null,{default:e(()=>[y("header",null,[y("div",null,[i.policy.hasFromTargetRef?(m(),u(z,{key:0,appearance:"neutral"},{default:e(()=>[s(c(p("policies.collection.inbound")),1)]),_:2},1024)):h("",!0),t[1]||(t[1]=s()),i.policy.hasToTargetRef?(m(),u(z,{key:1,appearance:"neutral"},{default:e(()=>[s(c(p("policies.collection.outbound")),1)]),_:2},1024)):h("",!0),t[2]||(t[2]=s()),n(f,{action:"docs",href:p("policies.href.docs",{name:i.name}),"data-testid":"policy-documentation-link"},{default:e(()=>[y("span",W,c(p("common.documentation")),1)]),_:2},1032,["href"])]),t[3]||(t[3]=s()),Z((m(),_("h3",null,[s(c(p("policies.collection.title",{name:i.name})),1)])),[[E,{name:i.name,size:"60",default:"policy"}]])]),t[4]||(t[4]=s()),n(w,{path:`policies.type.${i.name}.description`,"default-path":"policies.collection.description"},null,8,["path"])]),_:2},1024),t[15]||(t[15]=s()),n(k,null,{default:e(()=>[y("search",null,[y("form",{onSubmit:t[0]||(t[0]=j(()=>{},["prevent"]))},[n(T,{class:"search-field",keys:["name","namespace",...R("use zones")&&i.policy.isTargetRef?["zone"]:[],"label"],value:o.params.s,onChange:d=>o.update({s:d})},null,8,["keys","value","onChange"])],32)]),t[14]||(t[14]=s()),n(N,{src:q(g(H),"/meshes/:mesh/policy-path/:path",{mesh:o.params.mesh,path:o.params.policyPath},{page:o.params.page,size:o.params.size,search:o.params.s}),variant:"list"},{default:e(({data:d,refresh:F})=>[n(v,{items:d.items,page:o.params.page,"page-size":o.params.size,total:d.total,onChange:o.update},{empty:e(()=>[n(g(V),{type:"policies"},{title:e(()=>[y("h3",null,c(p("policies.x-empty-state.title")),1)]),action:e(()=>[n(f,{action:"docs",href:p("policies.href.docs",{name:i.name})},{default:e(()=>[s(c(p("common.documentation")),1)]),_:2},1032,["href"])]),default:e(()=>[t[5]||(t[5]=s()),n(w,{path:"policies.x-empty-state.body",params:{type:i.name,suffix:o.params.s.length>0?p("common.matchingsearch"):""}},null,8,["params"]),t[6]||(t[6]=s())]),_:2},1024)]),default:e(()=>[n(J,{headers:[{...r.get("headers.role"),label:"Role",key:"role",hideLabel:!0},{...r.get("headers.name"),label:"Name",key:"name"},{...r.get("headers.namespace"),label:"Namespace",key:"namespace"},...R("use zones")&&i.policy.isTargetRef?[{...r.get("headers.zone"),label:"Zone",key:"zone"}]:[],...i.policy.isTargetRef?[{...r.get("headers.targetRef"),label:"Target ref",key:"targetRef"}]:[],{...r.get("headers.actions"),label:"Actions",key:"actions",hideLabel:!0}],items:d.items,"is-selected-row":a=>a.id===o.params.policy,onResize:r.set},{role:e(({row:a})=>[["producer","consumer","system","workload-owner"].includes(a.role)?(m(),u(x,{key:0,name:`policy-role-${a.role}`},{default:e(()=>[s(`
                            Role: `+c(a.role),1)]),_:2},1032,["name"])):(m(),_(C,{key:1},[s(`
                            Â 
                        `)],64))]),name:e(({row:a})=>[n(f,{"data-action":"",to:{name:"policy-summary-view",params:{mesh:a.mesh,policyPath:i.path,policy:a.id},query:{page:o.params.page,size:o.params.size,s:o.params.s}}},{default:e(()=>[s(c(a.name),1)]),_:2},1032,["to"])]),namespace:e(({row:a})=>[s(c(a.namespace.length>0?a.namespace:p("common.detail.none")),1)]),targetRef:e(({row:a})=>[n(A,{"target-ref":a.spec?.targetRef},null,8,["target-ref"])]),zone:e(({row:a})=>[a.zone?(m(),u(f,{key:0,to:{name:"zone-cp-detail-view",params:{zone:a.zone}}},{default:e(()=>[s(c(a.zone),1)]),_:2},1032,["to"])):(m(),_(C,{key:1},[s(c(p("common.detail.none")),1)],64))]),actions:e(({row:a})=>[n(g(D),{item:a,type:i,onChange:F},{default:e(()=>[n(f,{to:{name:"policy-detail-view",params:{mesh:a.mesh,policyPath:i.path,policy:a.id}}},{default:e(()=>[s(c(p("common.collection.actions.view")),1)]),_:2},1032,["to"])]),_:2},1032,["item","type","onChange"])]),_:2},1032,["headers","items","is-selected-row","onResize"])]),_:2},1032,["items","page","page-size","total","onChange"]),t[13]||(t[13]=s()),o.params.policy?(m(),u(L,{key:0},{default:e(({Component:a})=>[n(S,{onClose:ae=>o.replace({name:"policy-list-view",params:{mesh:o.params.mesh,policyPath:o.params.policyPath},query:{page:o.params.page,size:o.params.size,s:o.params.s}})},{default:e(()=>[typeof d<"u"?(m(),u(O(a),{key:0,items:d.items,"policy-type":i},null,8,["items","policy-type"])):h("",!0)]),_:2},1032,["onClose"])]),_:2},1024)):h("",!0)]),_:2},1032,["src"])]),_:2},1024)])]),_:2},1024)]),_:2},1032,["predicate","items"])]),_:1})}}}),se=Q(Y,[["__scopeId","data-v-a2431aca"]]);export{se as default};
