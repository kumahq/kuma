import{d as T,a as o,o as n,b as i,w as t,e as a,m as D,f as p,p as x,aK as S,T as b,t as d,E as A,q as c}from"./index-BjgqS7bJ.js";import{A as R}from"./AppCollection-Dysh8xoz.js";import{S as k}from"./SummaryView-C6uE2SU1.js";const M=T({__name:"MeshServiceListView",setup(N){return(B,X)=>{const l=o("RouteTitle"),_=o("XTeleportTemplate"),u=o("XAction"),v=o("RouterView"),h=o("DataCollection"),f=o("DataLoader"),w=o("KCard"),g=o("AppView"),C=o("RouteView"),V=o("DataSource");return n(),i(V,{src:"/me"},{default:t(({data:r})=>[r?(n(),i(C,{key:0,name:"mesh-service-list-view",params:{page:1,size:r.pageSize,mesh:"",service:""}},{default:t(({route:s,t:y,uri:z})=>[a(g,null,{title:t(()=>[a(_,{to:{name:"service-list-tabs-view-title"}},{default:t(()=>[D("h2",null,[a(l,{title:y("services.routes.mesh-service-list-view.title")},null,8,["title"])])]),_:2},1024)]),default:t(()=>[p(),a(w,null,{default:t(()=>[a(f,{src:z(x(S),"/meshes/:mesh/mesh-services",{mesh:s.params.mesh},{page:s.params.page,size:s.params.size})},{loadable:t(({data:e})=>[a(h,{type:"services",items:(e==null?void 0:e.items)??[void 0]},{default:t(()=>[a(R,{"data-testid":"service-collection",headers:[{label:"Name",key:"name"}],"page-number":s.params.page,"page-size":s.params.size,total:e==null?void 0:e.total,items:e==null?void 0:e.items,"is-selected-row":m=>m.name===s.params.service,onChange:s.update},{name:t(({row:m})=>[a(b,{text:m.name},{default:t(()=>[a(u,{to:{name:"mesh-service-summary-view",params:{mesh:m.mesh,service:m.name},query:{page:s.params.page,size:s.params.size}}},{default:t(()=>[p(d(m.name),1)]),_:2},1032,["to"])]),_:2},1032,["text"])]),_:2},1032,["page-number","page-size","total","items","is-selected-row","onChange"]),p(),e!=null&&e.items&&s.params.service?(n(),i(v,{key:0},{default:t(m=>[a(k,{onClose:q=>s.replace({name:"mesh-service-list-view",params:{mesh:s.params.mesh},query:{page:s.params.page,size:s.params.size}})},{default:t(()=>[(n(),i(A(m.Component),{items:e==null?void 0:e.items},null,8,["items"]))]),_:2},1032,["onClose"])]),_:2},1024)):c("",!0)]),_:2},1032,["items"])]),_:2},1032,["src"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["params"])):c("",!0)]),_:1})}}});export{M as default};
