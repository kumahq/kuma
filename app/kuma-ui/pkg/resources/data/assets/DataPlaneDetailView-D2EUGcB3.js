import{d as R,I as Q,G as F,o,p as b,w as i,c,H as lt,F as it,_ as G,r as x,l as r,a as X,e as n,k as ft,q as L,b as u,t as s,m as p,J as _,K as T,n as mt,E as yt,Z as gt,R as tt,Q as D,S as vt,W as _t,Y as bt,L as et,$ as kt,A as xt}from"./index-gI7YoWPY.js";import{S as wt}from"./SummaryView-nxWwoAqU.js";import{T as ut}from"./TagList-Dpg2sq9S.js";const $t=["aria-hidden"],ot='<path d="M15 18L21 12L15 6L13.6 7.4L17.2 11H3V13H17.2L13.6 16.6L15 18Z" fill="currentColor"/>',St=R({__name:"ForwardIcon",props:{title:{type:String,required:!1,default:""},color:{type:String,required:!1,default:"currentColor"},display:{type:String,required:!1,default:"block"},decorative:{type:Boolean,required:!1,default:!1},size:{type:[Number,String],required:!1,default:Q,validator:d=>{if(typeof d=="number"&&d>0)return!0;if(typeof d=="string"){const a=String(d).replace(/px/gi,""),e=Number(a);if(e&&!isNaN(e)&&Number.isInteger(e)&&e>0)return!0}return!1}},as:{type:String,required:!1,default:"span"},staticIds:{type:Boolean,default:!1}},setup(d){const a=d,e=F(()=>{if(typeof a.size=="number"&&a.size>0)return`${a.size}px`;if(typeof a.size=="string"){const v=String(a.size).replace(/px/gi,""),f=Number(v);if(f&&!isNaN(f)&&Number.isInteger(f)&&f>0)return`${f}px`}return Q}),$=F(()=>({boxSizing:"border-box",color:a.color,display:a.display,flexShrink:"0",height:e.value,lineHeight:"0",width:e.value,pointerEvents:a.decorative?"none":void 0})),z=v=>{const f={},V=Math.random().toString(36).substring(2,12);return v.replace(/id="([^"]+)"/g,(E,C)=>{const h=`${V}-${C}`;return f[C]=h,`id="${h}"`}).replace(/#([^\s^")]+)/g,(E,C)=>f[C]?`#${f[C]}`:E)},t={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","&":"&amp;"},k=v=>v.replace(/[<>"'&]/g,f=>t[f]),S=`${a.title?`<title data-testid="kui-icon-svg-title">${k(a.title)}</title>`:""}${a.staticIds?ot:z(ot)}`;return(v,f)=>(o(),b(it(d.as),{"aria-hidden":d.decorative?"true":void 0,class:"kui-icon forward-icon","data-testid":"kui-icon-wrapper-forward-icon",style:lt($.value),tabindex:d.decorative?"-1":void 0},{default:i(()=>[(o(),c("svg",{"aria-hidden":d.decorative?"true":void 0,"data-testid":"kui-icon-svg-forward-icon",fill:"none",height:"100%",role:"img",viewBox:"0 0 24 24",width:"100%",xmlns:"http://www.w3.org/2000/svg",innerHTML:S},null,8,$t))]),_:1},8,["aria-hidden","style","tabindex"]))}}),Ct=["aria-hidden"],st='<path d="M12 21V19H19V5H12V3H19C19.55 3 20.0208 3.19583 20.4125 3.5875C20.8042 3.97917 21 4.45 21 5V19C21 19.55 20.8042 20.0208 20.4125 20.4125C20.0208 20.8042 19.55 21 19 21H12ZM10 17L8.625 15.55L11.175 13H3V11H11.175L8.625 8.45L10 7L15 12L10 17Z" fill="currentColor"/>',Bt=R({__name:"GatewayIcon",props:{title:{type:String,required:!1,default:""},color:{type:String,required:!1,default:"currentColor"},display:{type:String,required:!1,default:"block"},decorative:{type:Boolean,required:!1,default:!1},size:{type:[Number,String],required:!1,default:Q,validator:d=>{if(typeof d=="number"&&d>0)return!0;if(typeof d=="string"){const a=String(d).replace(/px/gi,""),e=Number(a);if(e&&!isNaN(e)&&Number.isInteger(e)&&e>0)return!0}return!1}},as:{type:String,required:!1,default:"span"},staticIds:{type:Boolean,default:!1}},setup(d){const a=d,e=F(()=>{if(typeof a.size=="number"&&a.size>0)return`${a.size}px`;if(typeof a.size=="string"){const v=String(a.size).replace(/px/gi,""),f=Number(v);if(f&&!isNaN(f)&&Number.isInteger(f)&&f>0)return`${f}px`}return Q}),$=F(()=>({boxSizing:"border-box",color:a.color,display:a.display,flexShrink:"0",height:e.value,lineHeight:"0",width:e.value,pointerEvents:a.decorative?"none":void 0})),z=v=>{const f={},V=Math.random().toString(36).substring(2,12);return v.replace(/id="([^"]+)"/g,(E,C)=>{const h=`${V}-${C}`;return f[C]=h,`id="${h}"`}).replace(/#([^\s^")]+)/g,(E,C)=>f[C]?`#${f[C]}`:E)},t={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","&":"&amp;"},k=v=>v.replace(/[<>"'&]/g,f=>t[f]),S=`${a.title?`<title data-testid="kui-icon-svg-title">${k(a.title)}</title>`:""}${a.staticIds?st:z(st)}`;return(v,f)=>(o(),b(it(d.as),{"aria-hidden":d.decorative?"true":void 0,class:"kui-icon gateway-icon","data-testid":"kui-icon-wrapper-gateway-icon",style:lt($.value),tabindex:d.decorative?"-1":void 0},{default:i(()=>[(o(),c("svg",{"aria-hidden":d.decorative?"true":void 0,"data-testid":"kui-icon-svg-gateway-icon",fill:"none",height:"100%",role:"img",viewBox:"0 0 24 24",width:"100%",xmlns:"http://www.w3.org/2000/svg",innerHTML:S},null,8,Ct))]),_:1},8,["aria-hidden","style","tabindex"]))}}),It=["B","kB","MB","GB","TB","PB","EB","ZB","YB"],zt=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],Nt=["b","kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],Tt=["b","kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],rt=(d,a,e)=>{let $=d;return typeof a=="string"||Array.isArray(a)?$=d.toLocaleString(a,e):(a===!0||e!==void 0)&&($=d.toLocaleString(void 0,e)),$};function J(d,a){if(!Number.isFinite(d))throw new TypeError(`Expected a finite number, got ${typeof d}: ${d}`);a={bits:!1,binary:!1,space:!0,...a};const e=a.bits?a.binary?Tt:Nt:a.binary?zt:It,$=a.space?" ":"";if(a.signed&&d===0)return` 0${$}${e[0]}`;const z=d<0,t=z?"-":a.signed?"+":"";z&&(d=-d);let k;if(a.minimumFractionDigits!==void 0&&(k={minimumFractionDigits:a.minimumFractionDigits}),a.maximumFractionDigits!==void 0&&(k={maximumFractionDigits:a.maximumFractionDigits,...k}),d<1){const V=rt(d,a.locale,k);return t+V+$+e[0]}const S=Math.min(Math.floor(a.binary?Math.log(d)/Math.log(1024):Math.log10(d)/3),e.length-1);d/=(a.binary?1024:1e3)**S,k||(d=d.toPrecision(3));const v=rt(Number(d),a.locale,k),f=e[S];return t+v+$+f}const ht={},qt={class:"card"},Lt={class:"title"},Dt={class:"body"};function Vt(d,a){const e=x("KCard");return o(),b(e,{class:"data-card"},{default:i(()=>[r("dl",null,[r("div",qt,[r("dt",Lt,[X(d.$slots,"title",{},void 0,!0)]),a[0]||(a[0]=n()),r("dd",Dt,[X(d.$slots,"default",{},void 0,!0)])])])]),_:3})}const pt=G(ht,[["render",Vt],["__scopeId","data-v-3f9a3cf3"]]),Et={class:"title"},Mt={key:0},Xt={"data-testid":"grpc-success"},Ht={"data-testid":"grpc-failure"},Rt={"data-testid":"rq-2xx"},At={"data-testid":"rq-4xx"},Kt={"data-testid":"rq-5xx"},Pt={"data-testid":"connections-total"},Ut={key:0,"data-testid":"bytes-received"},Ft={key:1,"data-testid":"bytes-sent"},Gt=R({__name:"ConnectionCard",props:{protocol:{},service:{default:""},traffic:{default:void 0},direction:{default:"downstream"}},setup(d){const{t:a}=ft(),e=d,$=z=>{const t=z.target;if(z.isTrusted&&t.nodeName.toLowerCase()!=="a"){const k=t.closest(".service-traffic-card, a");if(k){const S=k.nodeName.toLowerCase()==="a"?k:k.querySelector("[data-action]");S!==null&&"click"in S&&typeof S.click=="function"&&S.click()}}};return(z,t)=>{const k=x("XBadge"),S=x("KSkeletonBox");return o(),b(pt,{class:"service-traffic-card",onClick:$},{title:i(()=>[e.service.length>0?(o(),b(ut,{key:0,tags:[{label:"kuma.io/service",value:e.service}]},null,8,["tags"])):L("",!0),t[1]||(t[1]=n()),r("div",Et,[u(k,{class:"protocol",appearance:e.protocol==="passthrough"?"success":"info"},{default:i(()=>[n(s(p(a)(`data-planes.components.service_traffic_card.protocol.${e.protocol}`,{},{defaultMessage:p(a)(`http.api.value.${e.protocol}`)})),1)]),_:1},8,["appearance"]),t[0]||(t[0]=n()),X(z.$slots,"default",{},void 0,!0)])]),default:i(()=>{var v,f,V,E,C,h,O,A,Z,Y,j,W;return[t[22]||(t[22]=n()),e.traffic?(o(),c("dl",Mt,[e.protocol==="passthrough"?(o(!0),c(_,{key:0},T([["http","tcp"].reduce((B,w)=>{var K;const m=e.direction;return Object.entries(((K=e.traffic)==null?void 0:K[w])||{}).reduce((M,[P,I])=>[`${m}_cx_tx_bytes_total`,`${m}_cx_rx_bytes_total`].includes(P)?{...M,[P]:I+(M[P]??0)}:M,B)},{})],(B,w)=>(o(),c(_,{key:w},[r("div",null,[r("dt",null,s(p(a)("data-planes.components.service_traffic_card.tx")),1),t[2]||(t[2]=n()),r("dd",null,s(p(J)(B.downstream_cx_rx_bytes_total??0)),1)]),t[4]||(t[4]=n()),r("div",null,[r("dt",null,s(p(a)("data-planes.components.service_traffic_card.rx")),1),t[3]||(t[3]=n()),r("dd",null,s(p(J)(B.downstream_cx_tx_bytes_total??0)),1)])],64))),128)):e.protocol==="grpc"?(o(),c(_,{key:1},[r("div",Xt,[r("dt",null,s(p(a)("data-planes.components.service_traffic_card.grpc_success")),1),t[5]||(t[5]=n()),r("dd",null,s(p(a)("common.formats.integer",{value:(v=e.traffic.grpc)==null?void 0:v.success})),1)]),t[7]||(t[7]=n()),r("div",Ht,[r("dt",null,s(p(a)("data-planes.components.service_traffic_card.grpc_failure")),1),t[6]||(t[6]=n()),r("dd",null,s(p(a)("common.formats.integer",{value:(f=e.traffic.grpc)==null?void 0:f.failure})),1)])],64)):e.protocol.startsWith("http")?(o(),c(_,{key:2},[(o(!0),c(_,null,T([((V=e.traffic.http)==null?void 0:V[`${e.direction}_rq_1xx`])??0].filter(B=>B!==0),B=>(o(),c("div",{key:B,"data-testid":"rq-1xx"},[r("dt",null,s(p(a)("data-planes.components.service_traffic_card.1xx")),1),t[8]||(t[8]=n()),r("dd",null,s(p(a)("common.formats.integer",{value:B})),1)]))),128)),t[13]||(t[13]=n()),r("div",Rt,[r("dt",null,s(p(a)("data-planes.components.service_traffic_card.2xx")),1),t[9]||(t[9]=n()),r("dd",null,s(p(a)("common.formats.integer",{value:(E=e.traffic.http)==null?void 0:E[`${e.direction}_rq_2xx`]})),1)]),t[14]||(t[14]=n()),(o(!0),c(_,null,T([((C=e.traffic.http)==null?void 0:C[`${e.direction}_rq_3xx`])??0].filter(B=>B!==0),B=>(o(),c("div",{key:B,"data-testid":"rq-3xx"},[r("dt",null,s(p(a)("data-planes.components.service_traffic_card.3xx")),1),t[10]||(t[10]=n()),r("dd",null,s(p(a)("common.formats.integer",{value:B})),1)]))),128)),t[15]||(t[15]=n()),r("div",At,[r("dt",null,s(p(a)("data-planes.components.service_traffic_card.4xx")),1),t[11]||(t[11]=n()),r("dd",null,s(p(a)("common.formats.integer",{value:(h=e.traffic.http)==null?void 0:h[`${e.direction}_rq_4xx`]})),1)]),t[16]||(t[16]=n()),r("div",Kt,[r("dt",null,s(p(a)("data-planes.components.service_traffic_card.5xx")),1),t[12]||(t[12]=n()),r("dd",null,s(p(a)("common.formats.integer",{value:(O=e.traffic.http)==null?void 0:O[`${e.direction}_rq_5xx`]})),1)])],64)):(o(),c(_,{key:3},[r("div",Pt,[r("dt",null,s(p(a)("data-planes.components.service_traffic_card.cx")),1),t[17]||(t[17]=n()),r("dd",null,s(p(a)("common.formats.integer",{value:(A=e.traffic.tcp)==null?void 0:A[`${e.direction}_cx_total`]})),1)]),t[20]||(t[20]=n()),typeof((Z=e.traffic.tcp)==null?void 0:Z[`${e.direction}_cx_tx_bytes_total`])<"u"?(o(),c("div",Ut,[r("dt",null,s(p(a)("data-planes.components.service_traffic_card.rx")),1),t[18]||(t[18]=n()),r("dd",null,s(p(J)((Y=e.traffic.tcp)==null?void 0:Y[`${e.direction}_cx_tx_bytes_total`])),1)])):L("",!0),t[21]||(t[21]=n()),typeof((j=e.traffic.tcp)==null?void 0:j[`${e.direction}_cx_rx_bytes_total`])<"u"?(o(),c("div",Ft,[r("dt",null,s(p(a)("data-planes.components.service_traffic_card.tx")),1),t[19]||(t[19]=n()),r("dd",null,s(p(J)((W=e.traffic.tcp)==null?void 0:W[`${e.direction}_cx_rx_bytes_total`])),1)])):L("",!0)],64))])):(o(),b(S,{key:1,width:"10"}))]}),_:3})}}}),at=G(Gt,[["__scopeId","data-v-82875ef3"]]),Ot={class:"body"},Zt=R({__name:"ConnectionGroup",props:{type:{}},setup(d){const a=d;return(e,$)=>{const z=x("KCard");return o(),b(z,{class:mt(["service-traffic-group",`type-${a.type}`])},{default:i(()=>[r("div",Ot,[X(e.$slots,"default",{},void 0,!0)])]),_:3},8,["class"])}}}),nt=G(Zt,[["__scopeId","data-v-a119a970"]]),Yt={class:"service-traffic"},jt={class:"actions"},Wt=R({__name:"ConnectionTraffic",setup(d){return(a,e)=>(o(),c("div",Yt,[r("div",jt,[X(a.$slots,"actions",{},void 0,!0)]),e[0]||(e[0]=n()),u(pt,{class:"header"},{title:i(()=>[X(a.$slots,"title",{},void 0,!0)]),_:3}),e[1]||(e[1]=n()),X(a.$slots,"default",{},void 0,!0)]))}}),dt=G(Wt,[["__scopeId","data-v-e6bd176c"]]),Jt={"data-testid":"dataplane-warnings"},Qt=["data-testid","innerHTML"],te={key:0,"data-testid":"warning-stats-loading"},ee={class:"status-with-reason"},ae={class:"columns"},ne={"data-testid":"dataplane-mtls"},ie={class:"columns"},oe=["innerHTML"],se={key:0,"data-testid":"dataplane-subscriptions"},re=R({__name:"DataPlaneDetailView",props:{data:{},mesh:{}},setup(d){const a=yt(),e=d,$=F(()=>e.data.warnings.concat(...e.data.isCertExpired?[{kind:"CERT_EXPIRED"}]:[]));return(z,t)=>{const k=x("KTooltip"),S=x("DataCollection"),v=x("XAction"),f=x("XBadge"),V=x("XCopyButton"),E=x("XAboutCard"),C=x("XEmptyState"),h=x("XLayout"),O=x("XInputSwitch"),A=x("KCard"),Z=x("RouterView"),Y=x("XAlert"),j=x("AppView"),W=x("DataSource"),B=x("RouteView");return o(),b(B,{params:{mesh:"",dataPlane:"",subscription:"",inactive:!1},name:"data-plane-detail-view"},{default:i(({route:w,t:m,can:K,me:M,uri:P})=>[u(W,{src:P(p(gt),"/meshes/:mesh/dataplanes/:name/stats/:address",{mesh:w.params.mesh,name:w.params.dataPlane,address:e.data.dataplane.networking.inboundAddress})},{default:i(({data:I,error:U,refresh:ct})=>[u(j,null,tt({default:i(()=>[t[48]||(t[48]=n()),u(h,{type:"stack","data-testid":"dataplane-details"},{default:i(()=>[u(E,{title:m("data-planes.routes.item.about.title"),created:e.data.creationTime,modified:e.data.modificationTime},{default:i(()=>[u(D,{layout:"horizontal"},{title:i(()=>[n(s(m("http.api.property.status")),1)]),body:i(()=>[r("div",ee,[u(vt,{status:e.data.status},null,8,["status"]),t[4]||(t[4]=n()),e.data.dataplaneType==="standard"?(o(),b(S,{key:0,items:e.data.dataplane.networking.inbounds,predicate:l=>l.state!=="Ready",empty:!1},{default:i(({items:l})=>[u(k,{class:"reason-tooltip"},{content:i(()=>[r("ul",null,[(o(!0),c(_,null,T(l,y=>(o(),c("li",{key:`${y.service}:${y.port}`},s(m("data-planes.routes.item.unhealthy_inbound",{service:y.service,port:y.port})),1))),128))])]),default:i(()=>[u(p(_t),{color:p(bt),size:p(et)},null,8,["color","size"]),t[3]||(t[3]=n())]),_:2},1024)]),_:2},1032,["items","predicate"])):L("",!0)])]),_:2},1024),t[11]||(t[11]=n()),K("use zones")&&e.data.zone?(o(),b(D,{key:0,layout:"horizontal"},{title:i(()=>[n(s(m("http.api.property.zone")),1)]),body:i(()=>[u(f,{appearance:"decorative"},{default:i(()=>[u(v,{to:{name:"zone-cp-detail-view",params:{zone:e.data.zone}}},{default:i(()=>[n(s(e.data.zone),1)]),_:1},8,["to"])]),_:1})]),_:2},1024)):L("",!0),t[12]||(t[12]=n()),u(D,{layout:"horizontal"},{title:i(()=>[n(s(m("http.api.proptery.type")),1)]),body:i(()=>[u(f,{appearance:"decorative"},{default:i(()=>[n(s(m(`data-planes.type.${e.data.dataplaneType}`)),1)]),_:2},1024)]),_:2},1024),t[13]||(t[13]=n()),e.data.namespace.length>0?(o(),b(D,{key:1,layout:"horizontal"},{title:i(()=>[n(s(m("http.api.property.namespace")),1)]),body:i(()=>[u(f,{appearance:"decorative"},{default:i(()=>[n(s(e.data.namespace),1)]),_:1})]),_:2},1024)):L("",!0),t[14]||(t[14]=n()),u(D,{layout:"horizontal"},{title:i(()=>[n(s(m("http.api.property.address")),1)]),body:i(()=>[u(V,{variant:"badge",format:"default",text:`${e.data.dataplane.networking.address}`},null,8,["text"])]),_:2},1024),t[15]||(t[15]=n()),e.data.dataplane.networking.gateway?(o(),b(D,{key:2,layout:"horizontal"},{title:i(()=>[n(s(m("http.api.property.tags")),1)]),body:i(()=>[u(ut,{tags:e.data.dataplane.networking.gateway.tags},null,8,["tags"])]),_:2},1024)):L("",!0)]),_:2},1032,["title","created","modified"]),t[44]||(t[44]=n()),u(A,{class:"traffic","data-testid":"dataplane-traffic"},{default:i(()=>[r("div",ae,[u(dt,null,{title:i(()=>[u(p(St),{display:"inline-block",decorative:"",size:p(et)},null,8,["size"]),t[16]||(t[16]=n(`
                  Inbounds
                `))]),default:i(()=>[t[18]||(t[18]=n()),u(nt,{type:"inbound","data-testid":"dataplane-inbounds"},{default:i(()=>[(o(!0),c(_,null,T([e.data.dataplane.networking.type==="gateway"?Object.entries((I==null?void 0:I.inbounds)??{}).reduce((l,[y,g])=>{var q;const N=y.split("_").at(-1);return N===(((q=e.data.dataplane.networking.admin)==null?void 0:q.port)??"9901")?l:l.concat([{...e.data.dataplane.networking.inbounds[0],name:y,port:Number(N),protocol:["http","tcp"].find(H=>typeof g[H]<"u")??"tcp",addressPort:`${e.data.dataplane.networking.inbounds[0].address}:${N}`}])},[]):e.data.dataplane.networking.inbounds],l=>(o(),b(S,{key:l,items:l,predicate:y=>y.port!==49151},tt({default:i(({items:y})=>[u(h,{type:"stack",size:"small"},{default:i(()=>[(o(!0),c(_,null,T(y,g=>(o(),c(_,{key:`${g.name}`},[(o(!0),c(_,null,T([I==null?void 0:I.inbounds[g.name]],N=>(o(),b(at,{key:N,"data-testid":"dataplane-inbound",protocol:g.protocol,service:K("use service-insights",e.mesh)?g.tags["kuma.io/service"]:"",traffic:typeof U>"u"?N:{name:"",protocol:g.protocol,port:`${g.port}`}},{default:i(()=>[u(v,{"data-action":"",to:{name:(q=>q.includes("bound")?q.replace("-outbound-","-inbound-"):"connection-inbound-summary-overview-view")(String(p(a).name)),params:{connection:g.name},query:{inactive:w.params.inactive}}},{default:i(()=>[n(s(g.name.replace("localhost","").replace("_",":")),1)]),_:2},1032,["to"])]),_:2},1032,["protocol","service","traffic"]))),128))],64))),128))]),_:2},1024)]),_:2},[e.data.dataplaneType==="delegated"?{name:"empty",fn:i(()=>[u(C,null,{default:i(()=>[r("p",null,`
                            This proxy is a delegated gateway therefore `+s(m("common.product.name"))+` does not have any visibility into inbounds for this gateway.
                          `,1)]),_:2},1024)]),key:"0"}:void 0]),1032,["items","predicate"]))),128))]),_:2},1024)]),_:2},1024),t[28]||(t[28]=n()),u(dt,null,tt({title:i(()=>[u(p(Bt),{display:"inline-block",decorative:"",size:p(et)},null,8,["size"]),t[22]||(t[22]=n()),t[23]||(t[23]=r("span",null,"Outbounds",-1))]),default:i(()=>[t[26]||(t[26]=n()),t[27]||(t[27]=n()),typeof U>"u"?(o(),c(_,{key:0},[typeof I>"u"?(o(),b(kt,{key:0})):(o(),c(_,{key:1},T(["upstream"],l=>(o(),c(_,{key:l},[u(nt,{type:"passthrough"},{default:i(()=>[u(at,{protocol:"passthrough",traffic:I.passthrough},{default:i(()=>t[24]||(t[24]=[n(`
                          Non mesh traffic
                        `)])),_:2},1032,["traffic"])]),_:2},1024),t[25]||(t[25]=n()),u(S,{predicate:w.params.inactive?void 0:([y,g])=>{var N,q;return((typeof g.tcp<"u"?(N=g.tcp)==null?void 0:N[`${l}_cx_rx_bytes_total`]:(q=g.http)==null?void 0:q[`${l}_rq_total`])??0)>0},items:Object.entries(I.outbounds)},{default:i(({items:y})=>[y.length>0?(o(),b(nt,{key:0,type:"outbound","data-testid":"dataplane-outbounds"},{default:i(()=>[(o(),c(_,null,T([/-([a-f0-9]){16}$/],g=>u(h,{key:g,type:"stack",size:"small"},{default:i(()=>[(o(!0),c(_,null,T(y,([N,q])=>(o(),b(at,{key:`${N}`,"data-testid":"dataplane-outbound",protocol:["grpc","http","tcp"].find(H=>typeof q[H]<"u")??"tcp",traffic:q,service:q.$resourceMeta.type===""?N.replace(g,""):void 0,direction:l},{default:i(()=>[u(v,{"data-action":"",to:{name:(H=>H.includes("bound")?H.replace("-inbound-","-outbound-"):"connection-outbound-summary-overview-view")(String(p(a).name)),params:{connection:N},query:{inactive:w.params.inactive}}},{default:i(()=>[n(s(N),1)]),_:2},1032,["to"])]),_:2},1032,["protocol","traffic","service","direction"]))),128))]),_:2},1024)),64))]),_:2},1024)):L("",!0)]),_:2},1032,["predicate","items"])],64))),64))],64)):(o(),b(C,{key:1}))]),_:2},[I?{name:"actions",fn:i(()=>[u(O,{modelValue:w.params.inactive,"onUpdate:modelValue":l=>w.params.inactive=l,"data-testid":"dataplane-outbounds-inactive-toggle"},{label:i(()=>t[19]||(t[19]=[n(`
                      Show inactive
                    `)])),_:2},1032,["modelValue","onUpdate:modelValue"]),t[21]||(t[21]=n()),u(v,{action:"refresh",appearance:"primary",onClick:ct},{default:i(()=>t[20]||(t[20]=[n(`
                    Refresh
                  `)])),_:2},1032,["onClick"])]),key:"0"}:void 0]),1024)])]),_:2},1024),t[45]||(t[45]=n()),u(Z,null,{default:i(l=>[l.route.name!==w.name?(o(),b(wt,{key:0,width:"670px",onClose:function(){w.replace({name:"data-plane-detail-view",params:{mesh:w.params.mesh,dataPlane:w.params.dataPlane},query:{inactive:w.params.inactive?null:void 0}})}},{default:i(()=>[(o(),b(it(l.Component),{data:w.params.subscription.length>0?e.data.dataplaneInsight.subscriptions:l.route.name.includes("-inbound-")?e.data.dataplane.networking.inbounds:(I==null?void 0:I.outbounds)||{},"dataplane-overview":e.data},null,8,["data","dataplane-overview"]))]),_:2},1032,["onClose"])):L("",!0)]),_:2},1024),t[46]||(t[46]=n()),r("div",ne,[r("h2",null,s(m("data-planes.routes.item.mtls.title")),1),t[38]||(t[38]=n()),e.data.dataplaneInsight.mTLS?(o(!0),c(_,{key:0},T([e.data.dataplaneInsight.mTLS],l=>(o(),b(A,{key:l,class:"mt-4"},{default:i(()=>[r("div",ie,[u(D,null,{title:i(()=>[n(s(m("data-planes.routes.item.mtls.expiration_time.title")),1)]),body:i(()=>[n(s(m("common.formats.datetime",{value:Date.parse(l.certificateExpirationTime)})),1)]),_:2},1024),t[34]||(t[34]=n()),u(D,null,{title:i(()=>[n(s(m("data-planes.routes.item.mtls.generation_time.title")),1)]),body:i(()=>[n(s(m("common.formats.datetime",{value:Date.parse(l.lastCertificateRegeneration)})),1)]),_:2},1024),t[35]||(t[35]=n()),u(D,null,{title:i(()=>[n(s(m("data-planes.routes.item.mtls.regenerations.title")),1)]),body:i(()=>[n(s(m("common.formats.integer",{value:l.certificateRegenerations})),1)]),_:2},1024),t[36]||(t[36]=n()),u(D,null,{title:i(()=>[n(s(m("data-planes.routes.item.mtls.issued_backend.title")),1)]),body:i(()=>[n(s(l.issuedBackend),1)]),_:2},1024),t[37]||(t[37]=n()),u(D,null,{title:i(()=>[n(s(m("data-planes.routes.item.mtls.supported_backends.title")),1)]),body:i(()=>[r("ul",null,[(o(!0),c(_,null,T(l.supportedBackends,y=>(o(),c("li",{key:y},s(y),1))),128))])]),_:2},1024)])]),_:2},1024))),128)):(o(),b(Y,{key:1,class:"mt-4",appearance:"warning"},{default:i(()=>[r("div",{innerHTML:m("data-planes.routes.item.mtls.disabled")},null,8,oe)]),_:2},1024))]),t[47]||(t[47]=n()),e.data.dataplaneInsight.subscriptions.length>0?(o(),c("div",se,[r("h2",null,s(m("data-planes.routes.item.subscriptions.title")),1),t[43]||(t[43]=n()),u(xt,{headers:[{...M.get("headers.instanceId"),label:m("http.api.property.instanceId"),key:"instanceId"},{...M.get("headers.version"),label:m("http.api.property.version"),key:"version"},{...M.get("headers.connected"),label:m("http.api.property.connected"),key:"connected"},{...M.get("headers.disconnected"),label:m("http.api.property.disconnected"),key:"disconnected"},{...M.get("headers.responses"),label:m("http.api.property.responses"),key:"responses"}],"is-selected-row":l=>l.id===w.params.subscription,items:e.data.dataplaneInsight.subscriptions.map((l,y,g)=>g[g.length-(y+1)]),onResize:M.set},{instanceId:i(({row:l})=>[u(v,{"data-action":"",to:{name:"data-plane-subscription-summary-view",params:{subscription:l.id}}},{default:i(()=>[n(s(l.controlPlaneInstanceId),1)]),_:2},1032,["to"])]),version:i(({row:l})=>{var y,g;return[n(s(((g=(y=l.version)==null?void 0:y.kumaDp)==null?void 0:g.version)??"-"),1)]}),connected:i(({row:l})=>[n(s(m("common.formats.datetime",{value:Date.parse(l.connectTime??"")})),1)]),disconnected:i(({row:l})=>[l.disconnectTime?(o(),c(_,{key:0},[n(s(m("common.formats.datetime",{value:Date.parse(l.disconnectTime)})),1)],64)):L("",!0)]),responses:i(({row:l})=>{var y;return[(o(!0),c(_,null,T([((y=l.status)==null?void 0:y.total)??{}],g=>(o(),c(_,null,[n(s(g.responsesSent)+"/"+s(g.responsesAcknowledged),1)],64))),256))]}),_:2},1032,["headers","is-selected-row","items","onResize"])])):L("",!0)]),_:2},1024)]),_:2},[$.value.length>0||U?{name:"notifications",fn:i(()=>[r("ul",Jt,[(o(!0),c(_,null,T($.value,l=>(o(),c("li",{key:l.kind,"data-testid":`warning-${l.kind}`,innerHTML:m(`common.warnings.${l.kind}`,l.payload)},null,8,Qt))),128)),t[2]||(t[2]=n()),U?(o(),c("li",te,[t[0]||(t[0]=n(`
              The below view is not enhanced with runtime stats (Error loading stats: `)),r("strong",null,s(U.toString()),1),t[1]||(t[1]=n(`)
            `))])):L("",!0)])]),key:"0"}:void 0]),1024)]),_:2},1032,["src"])]),_:1})}}}),pe=G(re,[["__scopeId","data-v-d6d8884d"]]);export{pe as default};
