import{d as f,j as x,r as g,o as a,e as y,g as l,N as $,O as q,q as v,h as s,w as i,a as d,F as k,s as S,t as _,c as P,b as w,f as N}from"./index-125a4644.js";import{_ as C}from"./DataSource.vue_vue_type_script_setup_true_lang-dc3089c8.js";import{_ as T}from"./EmptyBlock.vue_vue_type_script_setup_true_lang-2fd8f58c.js";import{E as V}from"./ErrorBlock-4d3be51a.js";import{q as B,m as A,e as L,g as D,A as E,_ as F}from"./RouteView.vue_vue_type_script_setup_true_lang-fb8eb0d5.js";import{_ as R}from"./ResourceCodeBlock.vue_vue_type_script_setup_true_lang-e0fb0021.js";import{T as I}from"./TabsWidget-724828d8.js";import{T as O}from"./TextWithCopyButton-1d2d10ce.js";import{_ as W}from"./RouteTitle.vue_vue_type_script_setup_true_lang-b42523ab.js";import"./CodeBlock.vue_vue_type_style_index_0_lang-ecf54904.js";import"./StatusInfo.vue_vue_type_script_setup_true_lang-a90684ea.js";const j=v("h2",null,"Dataplanes",-1),H=f({__name:"PolicyConnections",props:{mesh:{type:String,required:!0},policyPath:{type:String,required:!0},policyName:{type:String,required:!0}},setup(m){const e=m,o=x("");return(u,n)=>{const h=g("RouterLink");return a(),y(k,null,[j,l(),$(v("input",{id:"dataplane-search","onUpdate:modelValue":n[0]||(n[0]=t=>o.value=t),type:"text",class:"k-input mt-4",placeholder:"Filter by name",required:"","data-testid":"dataplane-search-input"},null,512),[[q,o.value]]),l(),s(C,{src:`/meshes/${e.mesh}/policy-path/${e.policyPath}/policy/${e.policyName}/dataplanes`},{default:i(({data:t,isLoading:r,error:c})=>[r?(a(),d(B,{key:0})):c?(a(),d(V,{key:1,error:c},null,8,["error"])):t===void 0||t.items.length===0?(a(),d(T,{key:2})):(a(!0),y(k,{key:3},S(t.items.filter(p=>p.dataplane.name.toLowerCase().includes(o.value.toLowerCase())),(p,b)=>(a(),y("p",{key:b,class:"mt-2","data-testid":"dataplane-name"},[s(h,{to:{name:"data-plane-detail-view",params:{mesh:p.dataplane.mesh,dataPlane:p.dataplane.name}}},{default:i(()=>[l(_(p.dataplane.name),1)]),_:2},1032,["to"])]))),128))]),_:1},8,["src"])],64)}}}),K={class:"policy-details kcard-border"},M={class:"entity-heading","data-testid":"policy-single-entity"},U=f({__name:"PolicyDetails",props:{mesh:{type:String,required:!0},path:{type:String,required:!0},name:{type:String,required:!0},type:{type:String,required:!0}},setup(m){const e=m,o=A(),u=[{hash:"#overview",title:"Overview"},{hash:"#affected-dpps",title:"Affected DPPs"}],n=P(()=>({name:"policy-detail-view",params:{mesh:e.mesh,policy:e.name,policyPath:e.path}}));async function h(t){const{name:r,mesh:c,path:p}=e;return await o.getSinglePolicyEntity({name:r,mesh:c,path:p},t)}return(t,r)=>{const c=g("router-link");return a(),y("div",K,[s(I,{tabs:u},{tabHeader:i(()=>[v("h1",M,[l(_(e.type)+`:

          `,1),s(O,{text:e.name},{default:i(()=>[s(c,{to:n.value},{default:i(()=>[l(_(e.name),1)]),_:1},8,["to"])]),_:1},8,["text"])])]),overview:i(()=>[s(R,{id:"code-block-policy","resource-fetcher":h,"resource-fetcher-watch-key":e.name,"is-searchable":""},null,8,["resource-fetcher-watch-key"])]),"affected-dpps":i(()=>[s(H,{mesh:e.mesh,"policy-name":e.name,"policy-path":e.path},null,8,["mesh","policy-name","policy-path"])]),_:1})])}}}),ie=f({__name:"PolicyDetailView",props:{mesh:{},policyPath:{},policyName:{}},setup(m){const e=m,o=L(),{t:u}=D(),n=P(()=>o.state.policyTypesByPath[e.policyPath]);return(h,t)=>(a(),d(F,{name:"policy-detail-view"},{default:i(({route:r})=>[s(W,{title:w(u)("policies.routes.item.title",{name:r.params.policy})},null,8,["title"]),l(),s(E,{breadcrumbs:[{to:{name:"policies-list-view",params:{mesh:r.params.mesh,policyPath:r.params.policyPath}},text:w(u)("policies.routes.item.breadcrumbs")}]},{default:i(()=>[n.value?(a(),d(U,{key:0,name:e.policyName,mesh:e.mesh,path:e.policyPath,type:n.value.name},null,8,["name","mesh","path","type"])):N("",!0)]),_:2},1032,["breadcrumbs"])]),_:1}))}});export{ie as default};
