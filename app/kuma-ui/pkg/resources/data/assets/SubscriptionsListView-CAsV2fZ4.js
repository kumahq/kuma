import{d as T,r as n,p as u,o as a,w as t,b as s,e as r,K as D,c as m,N as _,L as w,t as p,q as b,y as N}from"./index-BQZm001V.js";const L=T({__name:"SubscriptionsListView",props:{routeName:{},routePrefix:{},i18nPrefix:{},subscriptions:{}},setup(k){const i=k;return(A,l)=>{const h=n("RouteTitle"),y=n("XI18n"),x=n("XIcon"),v=n("XAction"),X=n("XLayout"),C=n("XCard"),g=n("AppView"),I=n("XDrawer"),V=n("RouterView"),R=n("RouteView");return a(),u(R,{name:i.routeName,params:{subscription:""}},{default:t(({route:f,me:c})=>[s(y,{prefix:i.i18nPrefix},{default:t(({t:o})=>[s(g,null,{default:t(()=>[s(h,{render:!1,title:o(".routes.item.subscriptions.title")},null,8,["title"]),l[6]||(l[6]=r()),s(C,{"data-testid":"subscriptions-listing"},{default:t(()=>[s(X,{type:"stack"},{default:t(()=>[s(y,{prefix:i.i18nPrefix,path:".routes.item.subscriptions.description"},null,8,["prefix"]),l[5]||(l[5]=r()),s(D,{headers:[{...c.get("headers.connection"),label:"Â ",key:"connection"},{...c.get("headers.instanceId"),label:o("http.api.property.instanceId"),key:"instanceId"},{...c.get("headers.version"),label:o("http.api.property.version"),key:"version"},{...c.get("headers.connected"),label:o("http.api.property.connected"),key:"connected"},{...c.get("headers.disconnected"),label:o("http.api.property.disconnected"),key:"disconnected"},{...c.get("headers.responses"),label:o("http.api.property.responses"),key:"responses"}],"is-selected-row":e=>e.id===f.params.subscription,items:[...i.subscriptions].reverse(),onResize:c.set},{connection:t(({row:e})=>[(a(!0),m(_,null,w([e.connectTime&&!e.disconnectTime?"healthy":"unhealthy"],d=>(a(),u(x,{key:`${d}`,name:d},{default:t(()=>[r(p(o(`common.connection.${d}`)),1)]),_:2},1032,["name"]))),128))]),instanceId:t(({row:e})=>[s(v,{"data-action":"",to:{name:`${i.routePrefix}-subscription-summary-view`,params:{subscription:e.id}}},{default:t(()=>[r(p(e.controlPlaneInstanceId),1)]),_:2},1032,["to"])]),version:t(({row:e})=>[r(p(e.version?.kumaDp?.version??"-"),1)]),connected:t(({row:e})=>[r(p(o("common.formats.datetime",{value:Date.parse(e.connectTime??"")})),1)]),disconnected:t(({row:e})=>[e.disconnectTime?(a(),m(_,{key:0},[r(p(o("common.formats.datetime",{value:Date.parse(e.disconnectTime)})),1)],64)):b("",!0)]),responses:t(({row:e})=>[(a(!0),m(_,null,w([e.status?.total??{}],d=>(a(),m(_,null,[r(p(d.responsesSent)+"/"+p(d.responsesAcknowledged),1)],64))),256))]),_:2},1032,["headers","is-selected-row","items","onResize"])]),_:2},1024)]),_:2},1024)]),_:2},1024),l[7]||(l[7]=r()),s(V,null,{default:t(e=>[e.route.name!==f.name?(a(),u(I,{key:0,width:"670px",onClose:function(){f.replace({name:i.routeName})}},{default:t(()=>[(a(),u(N(e.Component),{data:i.subscriptions},null,8,["data"]))]),_:2},1032,["onClose"])):b("",!0)]),_:2},1024)]),_:2},1032,["prefix"])]),_:1},8,["name"])}}});export{L as default};
