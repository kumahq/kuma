import{d as f,j as x,r as g,o as a,e as y,g as l,N as $,O as q,q as v,h as s,w as r,a as d,F as k,s as S,t as _,c as P,b as w,f as N}from"./index-3a142bd5.js";import{_ as C}from"./DataSource.vue_vue_type_script_setup_true_lang-69141f89.js";import{_ as T}from"./EmptyBlock.vue_vue_type_script_setup_true_lang-363ede6e.js";import{E as V}from"./ErrorBlock-bfc4eea4.js";import{q as B,m as A,e as L,g as D,A as E,_ as F}from"./RouteView.vue_vue_type_script_setup_true_lang-6e394197.js";import{_ as R}from"./ResourceCodeBlock.vue_vue_type_script_setup_true_lang-e2c3b52a.js";import{T as I}from"./TabsWidget-47bb7647.js";import{T as O}from"./TextWithCopyButton-5cda1463.js";import{_ as W}from"./RouteTitle.vue_vue_type_script_setup_true_lang-727c485b.js";import"./CodeBlock.vue_vue_type_style_index_0_lang-6a962fb5.js";import"./StatusInfo.vue_vue_type_script_setup_true_lang-23750b8a.js";const j=v("h2",null,"Dataplanes",-1),H=f({__name:"PolicyConnections",props:{mesh:{type:String,required:!0},policyPath:{type:String,required:!0},policyName:{type:String,required:!0}},setup(m){const e=m,o=x("");return(u,n)=>{const h=g("RouterLink");return a(),y(k,null,[j,l(),$(v("input",{id:"dataplane-search","onUpdate:modelValue":n[0]||(n[0]=t=>o.value=t),type:"text",class:"k-input mt-4",placeholder:"Filter by name",required:"","data-testid":"dataplane-search-input"},null,512),[[q,o.value]]),l(),s(C,{src:`/${e.mesh}/${e.policyPath}/${e.policyName}/dataplanes`},{default:r(({data:t,isLoading:i,error:p})=>[i?(a(),d(B,{key:0})):p?(a(),d(V,{key:1,error:p},null,8,["error"])):t===void 0||t.items.length===0?(a(),d(T,{key:2})):(a(!0),y(k,{key:3},S(t.items.filter(c=>c.dataplane.name.toLowerCase().includes(o.value.toLowerCase())),(c,b)=>(a(),y("p",{key:b,class:"mt-2","data-testid":"dataplane-name"},[s(h,{to:{name:"data-plane-detail-view",params:{mesh:c.dataplane.mesh,dataPlane:c.dataplane.name}}},{default:r(()=>[l(_(c.dataplane.name),1)]),_:2},1032,["to"])]))),128))]),_:1},8,["src"])],64)}}}),K={class:"policy-details kcard-border"},M={class:"entity-heading","data-testid":"policy-single-entity"},U=f({__name:"PolicyDetails",props:{mesh:{type:String,required:!0},path:{type:String,required:!0},name:{type:String,required:!0},type:{type:String,required:!0}},setup(m){const e=m,o=A(),u=[{hash:"#overview",title:"Overview"},{hash:"#affected-dpps",title:"Affected DPPs"}],n=P(()=>({name:"policy-detail-view",params:{mesh:e.mesh,policy:e.name,policyPath:e.path}}));async function h(t){const{name:i,mesh:p,path:c}=e;return await o.getSinglePolicyEntity({name:i,mesh:p,path:c},t)}return(t,i)=>{const p=g("router-link");return a(),y("div",K,[s(I,{tabs:u},{tabHeader:r(()=>[v("h1",M,[l(_(e.type)+`:

          `,1),s(O,{text:e.name},{default:r(()=>[s(p,{to:n.value},{default:r(()=>[l(_(e.name),1)]),_:1},8,["to"])]),_:1},8,["text"])])]),overview:r(()=>[s(R,{id:"code-block-policy","resource-fetcher":h,"resource-fetcher-watch-key":e.name,"is-searchable":""},null,8,["resource-fetcher-watch-key"])]),"affected-dpps":r(()=>[s(H,{mesh:e.mesh,"policy-name":e.name,"policy-path":e.path},null,8,["mesh","policy-name","policy-path"])]),_:1})])}}}),re=f({__name:"PolicyDetailView",props:{mesh:{},policyPath:{},policyName:{}},setup(m){const e=m,o=L(),{t:u}=D(),n=P(()=>o.state.policyTypesByPath[e.policyPath]);return(h,t)=>(a(),d(F,{name:"policy-detail-view"},{default:r(({route:i})=>[s(W,{title:w(u)("policies.routes.item.title",{name:i.params.policy})},null,8,["title"]),l(),s(E,{breadcrumbs:[{to:{name:"policies-list-view",params:{mesh:i.params.mesh,policyPath:i.params.policyPath}},text:w(u)("policies.routes.item.breadcrumbs")}]},{default:r(()=>[n.value?(a(),d(U,{key:0,name:e.policyName,mesh:e.mesh,path:e.policyPath,type:n.value.name},null,8,["name","mesh","path","type"])):N("",!0)]),_:2},1032,["breadcrumbs"])]),_:1}))}});export{re as default};
