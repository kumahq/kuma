import{d as C,Z as $,r,p as A,o as k,w as n,b as c,e as d,m as w,a8 as S}from"./index-BKQXbpxr.js";import{C as i}from"./kri-CjUta6FR.js";const F=C({__name:"ConnectionInboundSummaryStatsView",props:{data:{},networking:{},routeName:{}},setup(m){const a=m,e=$(()=>({...a.data,proxyResourceName:"proxyResourceName"in a.data?i.toString({...i.fromString(a.data.proxyResourceName),sectionName:a.data.port.toString()}):"",listenerAddress:"listenerAddress"in a.data?a.data.listenerAddress:"",clusterName:"clusterName"in a.data?a.data.clusterName:"",port:"port"in a.data?a.data.port.toString():"",servicePort:"servicePort"in a.data?a.data.servicePort:"",name:"name"in a.data?a.data.name:""}));return(T,l)=>{const u=r("RouteTitle"),g=r("XAction"),x=r("XCodeBlock"),v=r("DataCollection"),y=r("DataLoader"),h=r("AppView"),N=r("RouteView");return k(),A(N,{params:{codeSearch:"",codeFilter:!1,codeRegExp:!1,mesh:"",proxy:"",proxyType:"",connection:""},name:a.routeName},{default:n(({route:t,uri:_})=>[c(u,{render:!1,title:"Stats"}),l[1]||(l[1]=d()),c(h,null,{default:n(()=>[c(y,{src:_(w(S),"/connections/stats/for/:proxyType/:name/:mesh/:socketAddress",{proxyType:{ingresses:"zone-ingress",egresses:"zone-egress"}[t.params.proxyType]??"dataplane",name:t.params.proxy,mesh:t.params.mesh||"*",socketAddress:a.networking.inboundAddress})},{default:n(({data:R,refresh:f})=>[c(v,{items:R.raw.split(`
`),predicate:s=>{var o;return[`listener.${((o=e.value.listenerAddress)==null?void 0:o.length)>0?e.value.listenerAddress:t.params.connection}`,`cluster.${e.value.name}.`,`cluster.${e.value.clusterName}.`,`http.${e.value.name}.`,`http.${e.value.clusterName}.`,`tcp.${e.value.name}.`,`cluster.${e.value.proxyResourceName}.`,`listener.${e.value.proxyResourceName}`,`cluster.${e.value.proxyResourceName}.`,`http.${e.value.proxyResourceName}.`,`http.${e.value.proxyResourceName}.`,`tcp.${e.value.proxyResourceName}.`].some(p=>s.startsWith(p))&&(!s.includes(".rds.")||s.includes(`_${e.value.port}`)||s.includes(`${e.value.servicePort}`))}},{default:n(({items:s})=>[c(x,{language:"json",code:s.map(o=>{var p;return o.replace(`${((p=e.value.listenerAddress)==null?void 0:p.length)>0?e.value.listenerAddress:e.value.proxyResourceName.length?e.value.proxyResourceName:t.params.connection}.`,"").replace(e.value.name.length?`${e.value.name}.`:"","").replace(e.value.clusterName.length?`${e.value.clusterName}.`:"","")}).join(`
`),"is-searchable":"",query:t.params.codeSearch,"is-filter-mode":t.params.codeFilter,"is-reg-exp-mode":t.params.codeRegExp,onQueryChange:o=>t.update({codeSearch:o}),onFilterModeChange:o=>t.update({codeFilter:o}),onRegExpModeChange:o=>t.update({codeRegExp:o})},{"primary-actions":n(()=>[c(g,{action:"refresh",appearance:"primary",onClick:f},{default:n(()=>[...l[0]||(l[0]=[d(`
                Refresh
              `,-1)])]),_:2},1032,["onClick"])]),_:2},1032,["code","query","is-filter-mode","is-reg-exp-mode","onQueryChange","onFilterModeChange","onRegExpModeChange"])]),_:2},1032,["items","predicate"])]),_:2},1032,["src"])]),_:2},1024)]),_:1},8,["name"])}}});export{F as default};
