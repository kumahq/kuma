import{_ as b,a0 as w,y as B,a1 as z,A as P,r as n,o as t,f as i,b as u,w as a,h as s,d as r,F as g,x as D,j as A,t as _,e as c,n as S,u as L,z as k,B as C,a2 as x,a3 as q,a4 as V,a5 as j,K as v}from"./index.6180ff6f.js";import{C as F}from"./CodeBlock.c76d2442.js";const O={name:"StatusInfo",components:{KBadge:w,KEmptyState:B,KIcon:z},props:{isLoading:{type:Boolean,default:!1},hasError:{type:Boolean,default:!1},isEmpty:{type:Boolean,default:!1},error:{type:Object,required:!1,default:null}},computed:{shouldShowApiError(){return this.error instanceof P}}},T=e=>(k("data-v-b986cb4a"),e=e(),C(),e),Z={class:"status-info"},J={class:"card-icon mb-3"},G=c(" Data Loading... "),H={class:"card-icon mb-3"},M=c(" An error has occurred while trying to load this data. "),Q=T(()=>s("summary",null,"Details",-1)),R={key:0,class:"badge-list"},U={class:"card-icon mb-3"},W=c(" There is no data to display. "),X={key:3};function Y(e,E,o,K,h,p){const d=n("KIcon"),l=n("KEmptyState"),m=n("KBadge");return t(),i("div",Z,[o.isLoading?(t(),u(l,{key:0,"cta-is-hidden":"","data-testid":"status-info-loading-section"},{title:a(()=>[s("div",J,[r(d,{icon:"spinner",color:"rgba(0, 0, 0, 0.1)",size:"42"})]),G]),_:1})):o.hasError?(t(),i(g,{key:1},[r(l,{"cta-is-hidden":""},D({title:a(()=>[s("div",H,[r(d,{class:"kong-icon--centered",icon:"warning",color:"var(--black-75)","secondary-color":"var(--yellow-300)",size:"42"})]),p.shouldShowApiError?(t(),i(g,{key:0},[c(_(o.error.message),1)],64)):(t(),i(g,{key:1},[M],64))]),_:2},[p.shouldShowApiError&&Array.isArray(o.error.causes)&&o.error.causes.length>0?{name:"message",fn:a(()=>[s("details",null,[Q,s("ul",null,[(t(!0),i(g,null,A(o.error.causes,(f,y)=>(t(),i("li",{key:y},[s("b",null,[s("code",null,_(f.field),1)]),c(": "+_(f.message),1)]))),128))])])]),key:"0"}:void 0]),1024),p.shouldShowApiError?(t(),i("div",R,[o.error.code?(t(),u(m,{key:0,appearance:"warning"},{default:a(()=>[c(_(o.error.code),1)]),_:1})):S("",!0),r(m,{appearance:"warning"},{default:a(()=>[c(_(o.error.statusCode),1)]),_:1})])):S("",!0)],64)):o.isEmpty?(t(),u(l,{key:2,"cta-is-hidden":""},{title:a(()=>[s("div",U,[r(d,{class:"kong-icon--centered",icon:"warning",color:"var(--black-75)","secondary-color":"var(--yellow-300)",size:"42"})]),W]),_:1})):(t(),i("div",X,[L(e.$slots,"default",{},void 0,!0)]))])}const $=b(O,[["render",Y],["__scopeId","data-v-b986cb4a"]]);const ee={name:"EnvoyData",components:{CodeBlock:F,KButton:x,KCard:q,KClipboardProvider:V,KPop:j,StatusInfo:$},props:{dataPath:{type:String,required:!0},mesh:{type:String,required:!1,default:""},dppName:{type:String,required:!1,default:""},zoneIngressName:{type:String,required:!1,default:""},zoneEgressName:{type:String,required:!1,default:""}},data(){return{isLoading:!0,error:null}},watch:{dppName(){this.fetchContent()},zoneIngressName(){this.fetchContent()},zoneEgressName(){this.fetchContent()}},mounted(){this.fetchContent()},methods:{async fetchContent(){this.error=null,this.isLoading=!0;try{let e="";this.mesh!==""&&this.dppName!==""?e=await v.getDataplaneData({dataPath:this.dataPath,mesh:this.mesh,dppName:this.dppName}):this.zoneIngressName!==""?e=await v.getZoneIngressData({dataPath:this.dataPath,zoneIngressName:this.zoneIngressName}):this.zoneEgressName!==""&&(e=await v.getZoneEgressData({dataPath:this.dataPath,zoneEgressName:this.zoneEgressName})),this.content=typeof e=="string"?e:JSON.stringify(e,null,2)}catch(e){this.error=e}finally{this.isLoading=!1}}}},te=e=>(k("data-v-28c0ea95"),e=e(),C(),e),ae=c(" Copy config to clipboard "),oe=te(()=>s("div",null,[s("p",null,"Config copied to clipboard!")],-1));function se(e,E,o,K,h,p){const d=n("CodeBlock"),l=n("KButton"),m=n("KPop"),f=n("KClipboardProvider"),y=n("KCard"),I=n("StatusInfo");return t(),u(I,{"has-error":h.error!==null,"is-loading":h.isLoading,error:h.error},{default:a(()=>[r(y,{"border-variant":"noBorder"},{body:a(()=>[r(d,{class:"panel-code-block",language:"json",code:e.content},null,8,["code"])]),actions:a(()=>[e.content?(t(),u(f,{key:0},{default:a(({copyToClipboard:N})=>[r(m,{placement:"bottom"},{content:a(()=>[oe]),default:a(()=>[r(l,{appearance:"primary",onClick:ne=>N(e.content)},{default:a(()=>[ae]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})):S("",!0)]),_:1})]),_:1},8,["has-error","is-loading","error"])}const ce=b(ee,[["render",se],["__scopeId","data-v-28c0ea95"]]);export{ce as E,$ as S};
