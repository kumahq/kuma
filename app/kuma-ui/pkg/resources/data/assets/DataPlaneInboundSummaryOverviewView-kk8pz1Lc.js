import{d as T,r,o as n,m as p,w as e,b as a,s as l,U as i,e as o,t as m,q as g,c as d,p as B,a0 as F,F as f,v as k,a1 as j,a2 as I}from"./index-CU8xvgkY.js";import{A as M,a as q}from"./AccordionList-DqxeEotx.js";import{P as E}from"./PolicyTypeTag-BXwZnpKn.js";import{T as U}from"./TagList-DSw_mSUr.js";import{R as Y}from"./RuleMatchers-DbOJ1le3.js";const G={class:"stack-with-borders"},H={key:0,class:"mt-6"},J={class:"mt-4"},K={class:"stack-with-borders"},Q={class:"mt-2"},nt=T({__name:"DataPlaneInboundSummaryOverviewView",props:{data:{},routeName:{}},setup(P){const s=P;return(W,t)=>{const N=r("XBadge"),v=r("XCopyButton"),V=r("XAction"),z=r("DataSource"),$=r("XCodeBlock"),L=r("XCard"),R=r("DataCollection"),D=r("DataLoader"),S=r("AppView"),h=r("RouteView");return n(),p(h,{params:{mesh:"",proxy:"",connection:""},name:s.routeName},{default:e(({t:C,route:w,uri:X})=>[a(S,null,{default:e(()=>[l("div",G,[a(i,{layout:"horizontal"},{title:e(()=>t[0]||(t[0]=[o(`
            Tags
          `)])),body:e(()=>[a(U,{tags:s.data.tags,alignment:"right"},null,8,["tags"])]),_:1}),t[11]||(t[11]=o()),a(i,{layout:"horizontal"},{title:e(()=>[o(m(C("http.api.property.state")),1)]),body:e(()=>[a(N,{appearance:s.data.state==="Ready"?"success":"danger"},{default:e(()=>[o(m(C(`http.api.value.${s.data.state}`)),1)]),_:2},1032,["appearance"])]),_:2},1024),t[12]||(t[12]=o()),a(i,{layout:"horizontal"},{title:e(()=>t[3]||(t[3]=[o(`
            Protocol
          `)])),body:e(()=>[a(N,{appearance:"info"},{default:e(()=>[o(m(C(`http.api.value.${s.data.protocol}`)),1)]),_:2},1024)]),_:2},1024),t[13]||(t[13]=o()),a(i,{layout:"horizontal"},{title:e(()=>t[5]||(t[5]=[o(`
            Address
          `)])),body:e(()=>[a(v,{text:`${s.data.addressPort}`},null,8,["text"])]),_:1}),t[14]||(t[14]=o()),s.data.serviceAddressPort.length>0?(n(),p(i,{key:0,layout:"horizontal"},{title:e(()=>t[7]||(t[7]=[o(`
            Service Address
          `)])),body:e(()=>[a(v,{text:`${s.data.serviceAddressPort}`},null,8,["text"])]),_:1})):g("",!0),t[15]||(t[15]=o()),s.data.portName.length>0?(n(),p(i,{key:1,layout:"horizontal"},{title:e(()=>t[9]||(t[9]=[o(`
            Name
          `)])),body:e(()=>[a(v,{text:`${s.data.portName}`},null,8,["text"])]),_:1})):g("",!0)]),t[27]||(t[27]=o()),s.data?(n(),d("div",H,[t[25]||(t[25]=l("h3",null,"Rules",-1)),t[26]||(t[26]=o()),a(D,{src:X(B(F),"/meshes/:mesh/rules/for/:dataplane",{mesh:w.params.mesh,dataplane:w.params.proxy})},{default:e(({data:O})=>[a(R,{predicate:_=>_.ruleType==="from"&&Number(_.inbound.port)===Number(w.params.connection.split("_")[1]),items:O.rules},{default:e(({items:_})=>[l("div",J,[a(M,{"initially-open":0,"multiple-open":"",class:"stack"},{default:e(()=>[(n(!0),d(f,null,k(Object.groupBy(_,b=>b.type),(b,x)=>(n(),p(L,{key:x},{default:e(()=>[a(q,null,{"accordion-header":e(()=>[a(E,{"policy-type":x},{default:e(()=>[o(m(x)+" ("+m(b.length)+`)
                        `,1)]),_:2},1032,["policy-type"])]),"accordion-content":e(()=>[l("div",K,[(n(!0),d(f,null,k(b,y=>(n(),d(f,{key:y},[y.matchers.length>0?(n(),p(i,{key:0,layout:"horizontal"},{title:e(()=>t[16]||(t[16]=[o(`
                                From
                              `)])),body:e(()=>[l("p",null,[a(Y,{items:y.matchers},null,8,["items"])])]),_:2},1024)):g("",!0),t[22]||(t[22]=o()),y.origins.length>0?(n(),p(i,{key:1,layout:"horizontal"},{title:e(()=>t[18]||(t[18]=[o(`
                                Origin Policies
                              `)])),body:e(()=>[a(z,{src:X(B(j),"/policy-types",{})},{default:e(({data:A})=>[(n(!0),d(f,null,k([Object.groupBy((A==null?void 0:A.policyTypes)??[],c=>c.name)],c=>(n(),d("ul",{key:c},[(n(!0),d(f,null,k(y.origins,u=>(n(),d("li",{key:`${u.mesh}-${u.name}`},[c[u.type]?(n(),p(V,{key:0,to:{name:"policy-detail-view",params:{mesh:u.mesh,policyPath:c[u.type][0].path,policy:u.name}}},{default:e(()=>[o(m(u.name),1)]),_:2},1032,["to"])):(n(),d(f,{key:1},[o(m(u.name),1)],64))]))),128))]))),128))]),_:2},1032,["src"])]),_:2},1024)):g("",!0),t[23]||(t[23]=o()),l("div",null,[t[20]||(t[20]=l("dt",null,`
                                Config
                              `,-1)),t[21]||(t[21]=o()),l("dd",Q,[l("div",null,[a($,{code:B(I).stringify(y.raw),language:"yaml","show-copy-button":!1},null,8,["code"])])])])],64))),128))])]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)])]),_:2},1032,["predicate","items"])]),_:2},1032,["src"])])):g("",!0)]),_:2},1024)]),_:1},8,["name"])}}});export{nt as default};
