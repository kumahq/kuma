import{l as k,S as D,Y as G,Q as O,r as Y}from"./kongponents.es-bba90403.js";import{_ as I}from"./EmptyBlock.vue_vue_type_script_setup_true_lang-255e2244.js";import{E as M}from"./ErrorBlock-be40f398.js";import{_ as X}from"./LoadingBlock.vue_vue_type_script_setup_true_lang-7f9cc3f9.js";import{d as T,o as t,e as d,a as l,w as s,h as m,b as c,g as o,f as p,Z as B,Q as Z,q as R,c as S,s as J,r as ee,k as _,n as C,l as P,j as te,F as h,t as r,H as N,p as ae,m as se}from"./index-9d631905.js";import{r as q,h as z}from"./RouteView.vue_vue_type_script_setup_true_lang-76145142.js";import{T as ne}from"./TagList-65249449.js";import{S as oe}from"./StatusBadge-e2897fec.js";const ie=""+new URL("icon-empty-table-dbb0b754.svg",import.meta.url).href,le={class:"pagination"},re=T({__name:"PaginationWidget",props:{hasPrevious:{type:Boolean,default:!1},hasNext:{type:Boolean,default:!1}},emits:["next","previous"],setup(n,{emit:u}){const a=n,b=q();function w(){u("next"),b.info(B.PAGINATION_NEXT_BUTTON_CLICKED)}function v(){u("previous"),b.info(B.PAGINATION_PREVIOUS_BUTTON_CLICKED)}return(E,x)=>(t(),d("div",le,[a.hasPrevious?(t(),l(c(D),{key:0,appearance:"primary","data-testid":"pagination-previous-button",onClick:v},{default:s(()=>[m(c(k),{icon:"chevronLeft",color:"currentColor",size:"16","hide-title":"","aria-hidden":"true"}),o(`

      Previous
    `)]),_:1})):p("",!0),o(),a.hasNext?(t(),l(c(D),{key:1,appearance:"primary","data-testid":"pagination-next-button",onClick:w},{default:s(()=>[o(`
      Next

      `),m(c(k),{icon:"chevronRight",color:"currentColor",size:"16","hide-title":"","aria-hidden":"true"})]),_:1})):p("",!0)]))}});const de=z(re,[["__scopeId","data-v-2b854466"]]),ce=n=>(ae("data-v-c8c14806"),n=n(),se(),n),ue={class:"data-overview","data-testid":"data-overview"},fe={class:"data-table-controls mb-2"},pe={key:3,class:"data-overview-content"},me={key:0,class:"data-overview-table"},ve=ce(()=>_("img",{class:"mb-3",src:ie},null,-1)),ye={key:0},ge={key:1},he={key:2,class:"data-overview-content mt-6"},_e=T({__name:"DataOverview",props:{selectedEntityName:{type:String,required:!1,default:""},pageSize:{type:Number,required:!1,default:12},isLoading:{type:Boolean,required:!1,default:!1},error:{type:[Error,null],required:!1,default:null},isEmpty:{type:Boolean,required:!1,default:!1},emptyState:{type:Object,required:!1,default:null},tableData:{type:Object,required:!1,default:null},tableDataIsEmpty:{type:Boolean,required:!1,default:!1},showWarnings:{type:Boolean,required:!1,default:!1},next:{type:[String,Boolean,null],required:!1,default:!1},pageOffset:{type:Number,required:!1,default:0},showDeleteAction:{type:Boolean,required:!1,default:!1}},emits:["delete-resource","load-data","refresh","table-action"],setup(n,{emit:u}){const a=n,b=q(),w=Z(),v=R(a.pageOffset),E=R(0),x=S(()=>a.showWarnings?a.tableData.headers:a.tableData.headers.filter(i=>i.key!=="warnings")),A=S(()=>a.tableData.headers.map(i=>i.key).filter(i=>w[i])),L=S(()=>a.selectedEntityName!==""?a.selectedEntityName:a.tableData.data.length>0?a.tableData.data[0].name:"");J(()=>a.tableData,function(){E.value++});function $(){return{data:a.tableData.data,total:a.tableData.data.length}}function U(i,y){u("table-action",y.entity??y)}function W(){u("refresh"),u("load-data",v.value),b.info(B.TABLE_REFRESH_BUTTON_CLICKED)}function V(){v.value=a.pageOffset-a.pageSize,u("load-data",a.pageOffset-a.pageSize)}function F(){v.value=a.pageOffset+a.pageSize,u("load-data",a.pageOffset+a.pageSize)}function H({headerKey:i}){return{class:{[`${i}-column`]:!0,"text-center":["warnings"].includes(i),"text-right":["details"].includes(i)}}}function K(i){var e;if(!i)return{};const y={};return(((e=i.entity)==null?void 0:e.name)??i.name)===L.value&&(y.class="is-selected"),y}function j(i){u("delete-resource",i)}return(i,y)=>{const g=ee("router-link");return t(),d("div",ue,[_("div",fe,[C(i.$slots,"additionalControls",{},void 0,!0),o(),m(c(D),{class:"refresh-button",appearance:"primary",disabled:n.isLoading,icon:"redo","data-testid":"data-overview-refresh-button",onClick:W},{default:s(()=>[o(`
        Refresh
      `)]),_:1},8,["disabled"])]),o(),n.isLoading?(t(),l(X,{key:0})):n.error!==null?(t(),l(M,{key:1,error:n.error},null,8,["error"])):n.isEmpty?(t(),l(I,{key:2})):(t(),d("div",pe,[!n.tableDataIsEmpty&&n.tableData?(t(),d("div",me,[(t(),l(c(Y),{key:E.value,class:N(["data-overview-table",{"data-table-is-hidden":n.tableDataIsEmpty}]),fetcher:$,headers:x.value,"cell-attrs":H,"row-attrs":K,"disable-pagination":"","is-clickable":"","data-testid":"data-overview-table","onRow:click":U},P({status:s(({rowValue:e})=>[e?(t(),l(oe,{key:0,status:e},null,8,["status"])):(t(),d(h,{key:1},[o(`
              â€”
            `)],64))]),tags:s(({rowValue:e})=>[m(ne,{tags:e},null,8,["tags"])]),entity:s(({rowValue:e,row:f})=>[f.detailViewRoute?(t(),l(g,{key:0,to:f.detailViewRoute,"data-testid":"detail-view-link"},{default:s(()=>[o(r(e.name),1)]),_:2},1032,["to"])):(t(),d(h,{key:1},[o(r(e.name),1)],64))]),mesh:s(({rowValue:e})=>[e.route?(t(),l(g,{key:0,to:e.route},{default:s(()=>[o(r(e.title),1)]),_:2},1032,["to"])):(t(),d(h,{key:1},[o(r(e.title),1)],64))]),service:s(({rowValue:e})=>[e.route?(t(),l(g,{key:0,to:e.route},{default:s(()=>[o(r(e.title),1)]),_:2},1032,["to"])):(t(),d(h,{key:1},[o(r(e.title),1)],64))]),zone:s(({rowValue:e})=>[e.route?(t(),l(g,{key:0,to:e.route},{default:s(()=>[o(r(e.title),1)]),_:2},1032,["to"])):(t(),d(h,{key:1},[o(r(e.title),1)],64))]),totalUpdates:s(({row:e})=>[_("span",null,r(e.totalUpdates),1)]),dpVersion:s(({row:e,rowValue:f})=>[_("div",{class:N({"with-warnings":e.unsupportedEnvoyVersion||e.unsupportedKumaDPVersion||e.kumaDpAndKumaCpMismatch})},r(f),3)]),envoyVersion:s(({row:e,rowValue:f})=>[_("div",{class:N({"with-warnings":e.unsupportedEnvoyVersion})},r(f),3)]),actions:s(({row:e})=>[e.detailViewRoute||a.showDeleteAction?(t(),l(c(G),{key:0,class:"actions-dropdown","kpop-attributes":{placement:"bottomEnd",popoverClasses:"mt-5 more-actions-popover"},width:"150","data-testid":"actions-dropdown"},{default:s(()=>[m(c(D),{class:"non-visual-button",appearance:"secondary",size:"small"},{icon:s(()=>[m(c(k),{color:"var(--black-400)",icon:"more",size:"16"})]),_:1})]),items:s(()=>[e.detailViewRoute?(t(),l(c(O),{key:0,item:{to:e.detailViewRoute,label:"View details"}},null,8,["item"])):p("",!0),o(),a.showDeleteAction?(t(),l(c(O),{key:1,"has-divider":"","is-dangerous":"","data-testid":"dropdown-delete-item",onClick:f=>j(e)},{default:s(()=>[o(`
                  Delete
                `)]),_:2},1032,["onClick"])):p("",!0)]),_:2},1024)):p("",!0)]),_:2},[te(A.value,e=>({name:e,fn:s(({rowValue:f,row:Q})=>[C(i.$slots,e,{rowValue:f,row:Q},void 0,!0)])})),n.showWarnings?{name:"warnings",fn:s(({row:e})=>[e.withWarnings?(t(),l(c(k),{key:0,class:"mr-1",icon:"warning",color:"var(--black-500)","secondary-color":"var(--yellow-300)",size:"20"})):p("",!0)]),key:"0"}:void 0]),1032,["class","headers"])),o(),m(de,{"has-previous":v.value>0,"has-next":!!n.next,onNext:F,onPrevious:V},null,8,["has-previous","has-next"])])):p("",!0),o(),n.tableDataIsEmpty&&n.tableData?(t(),l(I,{key:1},P({title:s(()=>[ve,o(),n.emptyState.title?(t(),d("p",ye,r(n.emptyState.title),1)):(t(),d("p",ge,`
            No items found
          `))]),_:2},[n.emptyState.message?{name:"message",fn:s(()=>[o(r(n.emptyState.message),1)]),key:"0"}:void 0]),1024)):p("",!0),o(),i.$slots.content?(t(),d("div",he,[C(i.$slots,"content",{},void 0,!0)])):p("",!0)]))])}}});const Be=z(_e,[["__scopeId","data-v-c8c14806"]]);export{Be as D};
