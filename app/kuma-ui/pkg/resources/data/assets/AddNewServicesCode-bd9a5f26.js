import{L as x}from"./LoadingBox-8fd677cb.js";import{O as y,a as A,b as N}from"./OnboardingPage-f1ed4ae6.js";import{_ as p}from"./CodeBlock.vue_vue_type_style_index_0_lang-82e53469.js";import{u as C}from"./store-bb95959d.js";import{u as T}from"./index-0e952743.js";import{d as P,r as _,c as D,l as E,e as I,w as d,o,g as s,h as e,b as L,j as a,F as O,i as t,f as S,p as R,m as B}from"./index-834ac640.js";import{_ as V}from"./_plugin-vue_export-helper-c27b6911.js";import"./kongponents.es-131ffe48.js";const h=c=>(R("data-v-9b23b64f"),c=c(),B(),c),G=h(()=>t("p",{class:"mb-4 text-center"},`
        The demo application includes two services: a Redis backend to store a counter value, and a frontend web UI to show and increment the counter.
      `,-1)),K=h(()=>t("p",null,"To run execute the following command:",-1)),q={key:1},F={class:"status-box mt-4"},H={key:0,class:"status--is-connected","data-testid":"dpps-connected"},M={key:1,class:"status--is-disconnected","data-testid":"dpps-disconnected"},U={key:0,class:"status-loading-box mt-4"},$=P({__name:"AddNewServicesCode",setup(c){const b=T(),f=C(),g=1e3,l="https://github.com/kumahq/kuma-counter-demo/",v="https://github.com/kumahq/kuma-counter-demo/blob/master/README.md",k="kubectl apply -f https://bit.ly/3Kh2Try",n=_(!1),r=_(null),w=D(()=>f.getters["config/getEnvironment"]==="kubernetes");u(),E(function(){m()});async function u(){try{const{total:i}=await b.getAllDataplanes();n.value=i>0}catch(i){console.error(i)}finally{n.value||(m(),r.value=window.setTimeout(()=>u(),g))}}function m(){r.value!==null&&window.clearTimeout(r.value)}return(i,j)=>(o(),I(y,null,{header:d(()=>[s(A,null,{title:d(()=>[e(`
          Add services
        `)]),_:1})]),content:d(()=>[G,e(),L(w)?(o(),a(O,{key:0},[K,e(),s(p,{id:"code-block-kubernetes-command",language:"bash",code:k})],64)):(o(),a("div",q,[t("p",{class:"mb-4 text-center"},[e(`
          Clone `),t("a",{href:l,target:"_blank"},"the GitHub repository"),e(` for the demo application:
        `)]),e(),s(p,{id:"code-block-clone-command",language:"bash",code:`git clone ${l}`},null,8,["code"]),e(),t("p",{class:"mt-4 text-center"},[e(`
          And follow the instructions in `),t("a",{href:v,target:"_blank"},"the README"),e(`.
        `)])])),e(),t("div",null,[t("p",F,[e(`
          DPPs status:

          `),n.value?(o(),a("span",H,"Connected")):(o(),a("span",M,"Disconnected"))]),e(),n.value?S("",!0):(o(),a("div",U,[s(x)]))])]),navigation:d(()=>[s(N,{"next-step":"onboarding-dataplanes-overview","previous-step":"onboarding-add-services","should-allow-next":n.value},null,8,["should-allow-next"])]),_:1}))}});const te=V($,[["__scopeId","data-v-9b23b64f"]]);export{te as default};
