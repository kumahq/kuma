import{d as S,r,o as i,m as c,w as e,b as s,e as n,p as M,I as x,c as _,F as h,v as C,q as X,U as D,t as p,V as g}from"./index-C-Llvxgw.js";import{_ as z}from"./ResourceCodeBlock.vue_vue_type_script_setup_true_lang-D7DuEGVs.js";const O=S({__name:"MeshDetailView",props:{mesh:{}},setup(N){const l=N;return(F,o)=>{const R=r("RouteTitle"),B=r("XI18n"),b=r("XNotification"),L=r("XAction"),y=r("XBadge"),P=r("XAboutCard"),k=r("XLayout"),v=r("XCard"),T=r("DataSource"),$=r("AppView"),E=r("RouteView");return i(),c(E,{name:"mesh-detail-view",params:{mesh:""}},{default:e(({route:w,t:a,uri:V})=>[s(R,{title:a("meshes.routes.overview.title"),render:!1},null,8,["title"]),o[9]||(o[9]=n()),s(T,{src:V(M(x),"/mesh-insights/:name",{name:w.params.mesh})},{default:e(({data:t})=>[(i(!0),_(h,null,C([["MeshTrafficPermission","TrafficPermission"].reduce((f,u)=>{var m,d;return f+(((d=(m=t==null?void 0:t.policies)==null?void 0:m[u])==null?void 0:d.total)??0)},0)===0],f=>(i(),c($,{key:f,docs:a("meshes.href.docs"),notifications:!0},{default:e(()=>[l.mesh.mtlsBackend?X("",!0):(i(),c(b,{key:0,uri:`mtls-warning.${l.mesh.id}`},{default:e(()=>[s(B,{path:"meshes.routes.item.mtls-warning"})]),_:1},8,["uri"])),o[7]||(o[7]=n()),l.mesh.mtlsBackend&&f?(i(),c(b,{key:1,uri:`mtp-warning.${l.mesh.id}`},{default:e(()=>[s(B,{path:"meshes.routes.item.mtp-warning"})]),_:1},8,["uri"])):X("",!0),o[8]||(o[8]=n()),s(k,{type:"stack"},{default:e(()=>[s(P,{title:a("meshes.routes.item.about.title"),created:l.mesh.creationTime,modified:l.mesh.modificationTime},{default:e(()=>[(i(),_(h,null,C(["MeshTrafficPermission","MeshMetric","MeshAccessLog","MeshTrace"],u=>(i(),_(h,{key:u},[(i(!0),_(h,null,C([Object.entries((t==null?void 0:t.policies)??{}).find(([m])=>m===u)],m=>(i(),c(D,{key:m,layout:"horizontal"},{title:e(()=>[s(L,{to:{name:"policy-list-view",params:{mesh:w.params.mesh,policyPath:`${u.toLowerCase()}s`}}},{default:e(()=>[n(p(u),1)]),_:2},1032,["to"])]),body:e(()=>[s(y,{appearance:m?"success":"neutral"},{default:e(()=>[n(p(a(m?"meshes.detail.enabled":"meshes.detail.disabled")),1)]),_:2},1032,["appearance"])]),_:2},1024))),128))],64))),64)),o[2]||(o[2]=n()),s(D,{layout:"horizontal"},{title:e(()=>[n(p(a("http.api.property.mtls")),1)]),body:e(()=>[l.mesh.mtlsBackend?(i(),c(y,{key:1,appearance:"info"},{default:e(()=>[n(p(l.mesh.mtlsBackend.type)+" / "+p(l.mesh.mtlsBackend.name),1)]),_:1})):(i(),c(y,{key:0,appearance:"neutral"},{default:e(()=>[n(p(a("meshes.detail.disabled")),1)]),_:2},1024))]),_:2},1024)]),_:2},1032,["title","created","modified"]),o[5]||(o[5]=n()),s(v,null,{default:e(()=>[s(k,{type:"stack"},{default:e(()=>[s(k,{type:"columns",class:"columns-with-borders"},{default:e(()=>[s(g,{total:(t==null?void 0:t.services.total)??0,"data-testid":"services-status"},{title:e(()=>[n(p(a("meshes.detail.services")),1)]),_:2},1032,["total"]),o[3]||(o[3]=n()),s(g,{total:(t==null?void 0:t.dataplanesByType.standard.total)??0,online:(t==null?void 0:t.dataplanesByType.standard.online)??0,"data-testid":"data-plane-proxies-status"},{title:e(()=>[n(p(a("meshes.detail.data_plane_proxies")),1)]),_:2},1032,["total","online"]),o[4]||(o[4]=n()),s(g,{total:(t==null?void 0:t.totalPolicyCount)??0,"data-testid":"policies-status"},{title:e(()=>[n(p(a("meshes.detail.policies")),1)]),_:2},1032,["total"])]),_:2},1024)]),_:2},1024)]),_:2},1024),o[6]||(o[6]=n()),s(v,null,{default:e(()=>[s(z,{resource:l.mesh.config},{default:e(({copy:u,copying:m})=>[m?(i(),c(T,{key:0,src:V(M(x),"/meshes/:name/as/kubernetes",{name:w.params.mesh},{cacheControl:"no-store"}),onChange:d=>{u(A=>A(d))},onError:d=>{u((A,I)=>I(d))}},null,8,["src","onChange","onError"])):X("",!0)]),_:2},1032,["resource"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["docs"]))),128))]),_:2},1032,["src"])]),_:1})}}});export{O as default};
