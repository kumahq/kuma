import{V as F,s as M,x as S,d as R,e as W,a as L,t as N}from"./kongponents.es-7a007505.js";import{d as Z,u as U,c as y,o as z,j as E,i as t,t as o,e as n,h as e,g as l,p as j,m as H,w as r,z as B,r as f,b as T,f as $,F as K,R as G}from"./index-f7ce65b2.js";import{_ as m}from"./CodeBlock.vue_vue_type_style_index_0_lang-d021301d.js";import{u as A}from"./store-24703c45.js";import{a as J,b as q,u as Q}from"./index-8dfd0d8f.js";import{_ as C}from"./_plugin-vue_export-helper-c27b6911.js";import{E as X}from"./ErrorBlock-60de54e4.js";import{_ as Y}from"./EntityScanner.vue_vue_type_script_setup_true_lang-4f0826b7.js";const ee=p=>(j("data-v-9aa4d995"),p=p(),H(),p),ne={href:"https://helm.sh/docs/intro/install/"},te=ee(()=>t("p",null,"On your local machine, create a namespace in your Kubernetes cluster and pull down the kong Helm repo.",-1)),oe={class:"k-input-label mt-4"},se={class:"mt-4"},ae=Z({__name:"ZoneCreateKubernetesInstructions",props:{zoneName:{type:String,required:!0},zoneIngressEnabled:{type:Boolean,required:!0},zoneEgressEnabled:{type:Boolean,required:!0},token:{type:String,required:!0},base64EncodedToken:{type:String,required:!0}},setup(p){const a=p,u=J(),s=q(),b=U(),k=A(),v=y(()=>s.t("zones.form.kubernetes.secret.command",{token:a.base64EncodedToken}).trim()),h=y(()=>{const i={zoneName:a.zoneName,globalKdsAddress:k.state.globalKdsAddress,zoneIngressEnabled:String(a.zoneIngressEnabled),zoneEgressEnabled:String(a.zoneEgressEnabled)};return typeof b.params.virtualControlPlaneId=="string"&&(i.controlPlaneId=b.params.virtualControlPlaneId),s.t("zones.form.kubernetes.connectZone.config",i).trim()});return(i,g)=>(z(),E("div",null,[t("h3",null,"1. "+o(n(s).t("zones.form.kubernetes.prerequisites.title")),1),e(),t("ul",null,[t("li",null,[t("b",null,o(n(s).t("zones.form.kubernetes.prerequisites.step1Label"))+o(a.zoneIngressEnabled?" "+n(s).t("zones.form.kubernetes.prerequisites.step1LabelAddendum"):""),1),e(`:
        `+o(n(s).t("zones.form.kubernetes.prerequisites.step1Description",{productName:n(u)("KUMA_PRODUCT_NAME")})),1)]),e(),t("li",null,[t("b",null,o(n(s).t("zones.form.kubernetes.prerequisites.step2Label")),1),e(`:
        `+o(n(s).t("zones.form.kubernetes.prerequisites.step2Description")),1)]),e(),t("li",null,[t("a",ne,o(n(s).t("zones.form.kubernetes.prerequisites.step3LinkTitle")),1),e(" "+o(n(s).t("zones.form.kubernetes.prerequisites.step3Tail")),1)])]),e(),t("h3",null,"2. "+o(n(s).t("zones.form.kubernetes.helm.title")),1),e(),te,e(),t("ol",null,[t("li",null,[e(o(n(s).t("zones.form.kubernetes.helm.step1Description"))+" ",1),l(m,{id:"zone-kubernetes-create-namespace",class:"mt-4",code:n(s).t("zones.form.kubernetes.helm.step1Command"),language:"bash"},null,8,["code"])]),e(),t("li",null,[e(o(n(s).t("zones.form.kubernetes.helm.step2Description"))+" ",1),l(m,{id:"zone-kubernetes-add-charts-repo",class:"mt-4",code:n(s).t("zones.form.kubernetes.helm.step2Command"),language:"bash"},null,8,["code"])]),e(),t("li",null,[e(o(n(s).t("zones.form.kubernetes.helm.step3Description"))+" ",1),l(m,{id:"zone-kubernetes-repo-update",class:"mt-4",code:n(s).t("zones.form.kubernetes.helm.step3Command"),language:"bash"},null,8,["code"])])]),e(),t("h3",null,"3. "+o(n(s).t("zones.form.kubernetes.secret.title")),1),e(),t("p",null,o(n(s).t("zones.form.kubernetes.secret.description1")),1),e(),l(m,{id:"zone-kubernetes-token",class:"mt-4",code:a.token,language:"bash"},null,8,["code"]),e(),t("p",null,o(n(s).t("zones.form.kubernetes.secret.description2")),1),e(),l(m,{id:"zone-kubernetes-create-secret",class:"mt-4",code:v.value,language:"bash"},null,8,["code"]),e(),t("h3",null,"4. "+o(n(s).t("zones.form.kubernetes.connectZone.title")),1),e(),t("p",null,o(n(s).t("zones.form.kubernetes.connectZone.description1")),1),e(),t("span",oe,o(n(s).t("zones.form.kubernetes.connectZone.fileName")),1),e(),l(m,{id:"zone-kubernetes-config-code-block",code:h.value,language:"yaml"},null,8,["code"]),e(),t("p",se,o(n(s).t("zones.form.kubernetes.connectZone.description2")),1),e(),l(m,{id:"zone-kubernetes-command-code-block",class:"mt-4",code:n(s).t("zones.form.kubernetes.connectZone.command"),language:"bash"},null,8,["code"])]))}});const le=C(ae,[["__scopeId","data-v-9aa4d995"]]),re={class:"k-input-label mt-4"},ue={class:"mt-4"},ie=Z({__name:"ZoneCreateUniversalInstructions",props:{zoneName:{type:String,required:!0},token:{type:String,required:!0},base64EncodedToken:{type:String,required:!0}},setup(p){const a=p,u=q(),s=U(),b=A(),k=y(()=>{const v={zoneName:a.zoneName,globalKdsAddress:b.state.globalKdsAddress,token:a.base64EncodedToken};return typeof s.params.virtualControlPlaneId=="string"&&(v.controlPlaneId=s.params.virtualControlPlaneId),u.t("zones.form.universal.connectZone.config",v).trim()});return(v,h)=>(z(),E("div",null,[t("h3",null,"1. "+o(n(u).t("zones.form.universal.copySaveToken.title")),1),e(),l(n(F),{class:"mt-4",appearance:"info"},{alertMessage:r(()=>[e(o(n(u).t("zones.form.universal.copySaveToken.alertMessage")),1)]),_:1}),e(),l(m,{id:"zone-kubernetes-token",class:"mt-4",code:a.token,language:"bash"},null,8,["code"]),e(),t("h3",null,"2. "+o(n(u).t("zones.form.universal.connectZone.title")),1),e(),t("p",null,o(n(u).t("zones.form.universal.connectZone.description1")),1),e(),t("span",re,o(n(u).t("zones.form.universal.connectZone.fileName")),1),e(),l(m,{id:"zone-universal-config-code-block",class:"mt-4",code:k.value,language:"yaml"},null,8,["code"]),e(),t("p",ue,o(n(u).t("zones.form.universal.connectZone.description2")),1),e(),l(m,{id:"zone-universal-connect-command-code-block",class:"mt-4",code:n(u).t("zones.form.universal.connectZone.command"),language:"bash"},null,8,["code"])]))}});const ce=C(ie,[["__scopeId","data-v-3b2998bf"]]),de={class:"app-title-bar"},me={class:"title-wrapper"},pe={class:"title"},be={class:"action-list"},ve=Z({__name:"WizardTitleBar",setup(p){return(a,u)=>(z(),E("div",de,[t("div",me,[l(n(M),{icon:"kong"}),e(),t("span",pe,[B(a.$slots,"title",{},void 0,!0)])]),e(),t("div",be,[B(a.$slots,"actions",{},void 0,!0)])]))}});const _e=C(ve,[["__scopeId","data-v-f0a75c34"]]),fe={class:"form-content"},ze={class:"form-wrapper mt-4"},ke={key:1,class:"form-wrapper mt-4"},ge={class:"k-input-label"},he={class:"radio-button-group"},ye={class:"k-input-label"},Ee={class:"radio-button-group"},Ie={class:"k-input-label"},Ze={class:"radio-button-group"},Ce={class:"mt-6"},Ve={class:"mt-2"},we=Z({__name:"ZoneCreateView",setup(p){const a=q(),u=Q(),s=f(null),b=f(!1),k=f(null),v=f(!1),h=f(null),i=f(""),g=f("kubernetes"),V=f(!0),w=f(!0),I=y(()=>s.value!==null&&s.value.token?s.value.token:""),x=y(()=>I.value!==""?window.btoa(I.value):""),D=y(()=>i.value!=="");async function P(){b.value=!0,k.value=null;try{s.value=await u.createZone({name:i.value})}catch(d){d instanceof Error?k.value=d:console.error(d)}finally{b.value=!1}}async function O(){v.value=!1,h.value=null;try{const d=await u.getZoneOverview({name:i.value}),c=G(d.zoneInsight);v.value=c==="online"}catch(d){d instanceof Error?h.value=d:console.error(d)}}return(d,c)=>(z(),E(K,null,[l(_e,{class:"mb-6"},{title:r(()=>[e(o(n(a).t("zones.create.pageTitle")),1)]),actions:r(()=>[l(n(S),{appearance:"outline",to:{name:"zone-list-view"}},{default:r(()=>[e(o(n(a).t("zones.form.exit")),1)]),_:1})]),_:1}),e(),t("div",fe,[t("h1",null,o(n(a).t("zones.create.pageTitle")),1),e(),t("div",ze,[t("div",null,[l(n(R),{for:"zone-name"},{default:r(()=>[e(o(n(a).t("zones.form.nameLabel"))+` *
        `,1)]),_:1}),e(),l(n(W),{id:"zone-name",modelValue:i.value,"onUpdate:modelValue":c[0]||(c[0]=_=>i.value=_),type:"text",name:"zone-name","data-testid":"name-input",disabled:s.value!==null},null,8,["modelValue","disabled"])]),e(),l(n(S),{appearance:"creation",icon:b.value?"spinner":"plus",disabled:!D.value||b.value||s.value!==null,"data-testid":"create-zone-button",onClick:P},{default:r(()=>[e(o(n(a).t("zones.form.createZoneButtonLabel")),1)]),_:1},8,["icon","disabled"])]),e(),k.value!==null?(z(),T(X,{key:0,class:"mt-4",error:k.value},{default:r(()=>[e(o(n(a).t("zones.create.errorTitle")),1)]),_:1},8,["error"])):$("",!0),e(),s.value!==null?(z(),E("div",ke,[t("div",null,[t("span",ge,o(n(a).t("zones.form.environmentLabel"))+` *
        `,1),e(),t("div",he,[l(n(L),{id:"zone-environment-universal",modelValue:g.value,"onUpdate:modelValue":c[1]||(c[1]=_=>g.value=_),"selected-value":"universal",name:"zone-environment","data-testid":"environment-universal-radio-button"},{default:r(()=>[e(o(n(a).t("zones.form.universalLabel")),1)]),_:1},8,["modelValue"]),e(),l(n(L),{id:"zone-environment-kubernetes",modelValue:g.value,"onUpdate:modelValue":c[2]||(c[2]=_=>g.value=_),"selected-value":"kubernetes",name:"zone-environment","data-testid":"environment-kubernetes-radio-button"},{default:r(()=>[e(o(n(a).t("zones.form.kubernetesLabel")),1)]),_:1},8,["modelValue"])])]),e(),g.value==="kubernetes"?(z(),E(K,{key:0},[t("div",null,[t("span",ye,o(n(a).t("zones.form.zoneIngressLabel"))+` *
          `,1),e(),t("div",Ee,[l(n(N),{id:"zone-ingress-enabled",modelValue:V.value,"onUpdate:modelValue":c[3]||(c[3]=_=>V.value=_),"data-testid":"ingress-input-switch"},{label:r(()=>[e(o(n(a).t("zones.form.zoneIngressEnabledLabel")),1)]),_:1},8,["modelValue"])])]),e(),t("div",null,[t("span",Ie,o(n(a).t("zones.form.zoneEgressLabel"))+` *
          `,1),e(),t("div",Ze,[l(n(N),{id:"zone-egress-enabled",modelValue:w.value,"onUpdate:modelValue":c[4]||(c[4]=_=>w.value=_),"data-testid":"egress-input-switch"},{label:r(()=>[e(o(n(a).t("zones.form.zoneEgressEnabledLabel")),1)]),_:1},8,["modelValue"])])])],64)):$("",!0),e(),t("h2",Ce,o(n(a).t("zones.form.connectZone")),1),e(),g.value==="universal"?(z(),T(ce,{key:1,"zone-name":i.value,token:I.value,"base64-encoded-token":x.value},null,8,["zone-name","token","base64-encoded-token"])):(z(),T(le,{key:2,"zone-name":i.value,"zone-ingress-enabled":V.value,"zone-egress-enabled":w.value,token:I.value,"base64-encoded-token":x.value},null,8,["zone-name","zone-ingress-enabled","zone-egress-enabled","token","base64-encoded-token"])),e(),l(Y,{"loader-function":O,"has-error":h.value!==null,"can-complete":v.value},{"loading-title":r(()=>[e(o(n(a).t("zones.form.scan.waitTitle")),1)]),"complete-title":r(()=>[e(o(n(a).t("zones.form.scan.completeTitle")),1)]),"complete-content":r(()=>[t("p",null,o(n(a).t("zones.form.scan.completeDescription",{name:i.value})),1),e(),t("p",Ve,[l(n(S),{appearance:"primary",to:{name:"zone-detail-view",params:{zone:i.value}}},{default:r(()=>[e(o(n(a).t("zones.form.scan.completeButtonLabel",{name:i.value})),1)]),_:1},8,["to"])])]),"error-title":r(()=>[t("h3",null,o(n(a).t("zones.form.scan.errorTitle")),1)]),"error-content":r(()=>[t("p",null,o(n(a).t("zones.form.scan.errorDescription")),1)]),_:1},8,["has-error","can-complete"])])):$("",!0)])],64))}});const Ke=C(we,[["__scopeId","data-v-358a7fb3"]]);export{Ke as default};
