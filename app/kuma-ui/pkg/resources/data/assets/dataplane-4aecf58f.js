import{h as o}from"./helpers-32595d9f.js";function m(n){let s=[];n.networking.inbound&&(s=n.networking.inbound.filter(e=>"tags"in e).flatMap(e=>Object.entries(e.tags)).map(([e,i])=>`${e}=${i}`)),n.networking.gateway&&(s=Object.entries(n.networking.gateway.tags).map(([e,i])=>`${e}=${i}`));const t=Array.from(new Set(s));return t.sort((e,i)=>e.localeCompare(i)),t.map(e=>e.split("=")).map(([e,i])=>({label:e,value:i}))}function r(n={subscriptions:[]}){return(n.subscriptions??[]).some(t=>{var e;return((e=t.connectTime)==null?void 0:e.length)&&!t.disconnectTime})?"online":"offline"}function g(n,s={subscriptions:[]}){const t=n.networking.inbound??[],e=t.filter(a=>a.health&&!a.health.ready).map(a=>`Inbound on port ${a.port} is not ready (kuma.io/service: ${a.tags["kuma.io/service"]})`);let i;switch(!0){case t.length===0:i="online";break;case e.length===t.length:i="offline";break;case e.length>0:i="partially_degraded";break;default:i=r(s)}return{status:i,reason:e}}function f(n){if(n===void 0||n.subscriptions.length===0)return null;const s={},t=n.subscriptions[n.subscriptions.length-1];return t.version===void 0?null:(t.version.envoy&&(s.envoy=t.version.envoy.version),t.version.kumaDp&&(s.kumaDp=t.version.kumaDp.version),t.version.dependencies&&Object.entries(t.version.dependencies).forEach(([e,i])=>{s[e]=i}),s)}function _(n){if(n.dataplaneInsight===void 0||n.dataplaneInsight.mTLS===void 0)return null;const{mTLS:s}=n.dataplaneInsight,t=new Date(s.certificateExpirationTime),e=new Date(t.getTime()+t.getTimezoneOffset()*6e4);return{certificateExpirationTime:{label:"Expiration Time",value:`${e.toLocaleDateString("en-US")} ${e.getHours()}:${e.getMinutes()}:${e.getSeconds()}`},lastCertificateRegeneration:{label:"Last Generated",value:o(s.lastCertificateRegeneration)},certificateRegenerations:{label:"Regenerations",value:s.certificateRegenerations}}}function O(n){var e,i;return((e=n.kumaDp)==null?void 0:e.kumaCpCompatible)??!0?((i=n.envoy)==null?void 0:i.kumaDpCompatible)??!0?{kind:u}:{kind:p,payload:{envoy:n.envoy.version,kumaDp:n.kumaDp.version}}:{kind:c,payload:{kumaDp:n.kumaDp.version}}}const u="COMPATIBLE",E="INCOMPATIBLE_ZONE_CP_AND_KUMA_DP_VERSIONS",D="INCOMPATIBLE_ZONE_AND_GLOBAL_CPS_VERSIONS",c="INCOMPATIBLE_UNSUPPORTED_KUMA_DP",p="INCOMPATIBLE_UNSUPPORTED_ENVOY",b="INCOMPATIBLE_WRONG_FORMAT";export{u as C,D as I,E as a,c as b,p as c,m as d,g as e,f,r as g,O as h,b as i,_ as p};
