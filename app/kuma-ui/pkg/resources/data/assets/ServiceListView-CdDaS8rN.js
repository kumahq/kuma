import{d as B,r as n,p as d,o as l,w as a,b as t,e as r,l as h,P as L,m as R,aj as D,q as P,B as N,t as m,S as T,c as _,L as u,y as q,_ as G}from"./index-Dq_FLkmZ.js";import{S as j}from"./SummaryView-DXK1cYh7.js";const E=B({__name:"ServiceListView",setup(F){return(I,i)=>{const y=n("RouteTitle"),w=n("XSearch"),v=n("XAction"),g=n("XCopyButton"),C=n("XActionGroup"),k=n("RouterView"),V=n("DataCollection"),z=n("DataLoader"),X=n("XLayout"),S=n("XCard"),b=n("AppView"),x=n("RouteView");return l(),d(x,{name:"service-list-view",params:{page:1,size:Number,mesh:"",service:"",s:""}},{default:a(({route:s,t:p,uri:A,me:c})=>[t(y,{render:!1,title:p("services.routes.items.title")},null,8,["title"]),i[7]||(i[7]=r()),t(b,{docs:p("services.href.docs")},{default:a(()=>[t(S,null,{default:a(()=>[t(X,null,{default:a(()=>[h("search",null,[h("form",{onSubmit:i[0]||(i[0]=L(()=>{},["prevent"]))},[t(w,{class:"search-field",keys:["name"],value:s.params.s,onChange:o=>s.update({page:1,s:o})},null,8,["value","onChange"])],32)]),i[6]||(i[6]=r()),t(z,{src:A(R(D),"/meshes/:mesh/service-insights/of/:serviceType",{mesh:s.params.mesh,serviceType:"internal"},{page:s.params.page,size:s.params.size,search:s.params.s})},{loadable:a(({data:o})=>[t(V,{type:"services",items:(o==null?void 0:o.items)??[void 0],page:s.params.page,"page-size":s.params.size,total:o==null?void 0:o.total,onChange:s.update},{default:a(()=>[t(N,{class:"service-collection","data-testid":"service-collection",headers:[{...c.get("headers.name"),label:"Name",key:"name"},{...c.get("headers.addressPort"),label:"Address",key:"addressPort"},{...c.get("headers.online"),label:"DP proxies (online / total)",key:"online"},{...c.get("headers.status"),label:"Status",key:"status"},{...c.get("headers.actions"),label:"Actions",key:"actions",hideLabel:!0}],items:o==null?void 0:o.items,"is-selected-row":e=>e.name===s.params.service,onResize:c.set},{name:a(({row:e})=>[t(g,{text:e.name},{default:a(()=>[t(v,{"data-action":"",to:{name:"service-detail-view",params:{mesh:e.mesh,service:e.name},query:{page:s.params.page,size:s.params.size}}},{default:a(()=>[r(m(e.name),1)]),_:2},1032,["to"])]),_:2},1032,["text"])]),addressPort:a(({row:e})=>[e.addressPort?(l(),d(g,{key:0,text:e.addressPort},null,8,["text"])):(l(),_(u,{key:1},[r(m(p("common.collection.none")),1)],64))]),online:a(({row:e})=>[e.dataplanes?(l(),_(u,{key:0},[r(m(e.dataplanes.online||0)+" / "+m(e.dataplanes.total||0),1)],64)):(l(),_(u,{key:1},[r(m(p("common.collection.none")),1)],64))]),status:a(({row:e})=>[t(T,{status:e.status},null,8,["status"])]),actions:a(({row:e})=>[t(C,null,{default:a(()=>[t(v,{to:{name:"service-detail-view",params:{mesh:e.mesh,service:e.name}}},{default:a(()=>[r(m(p("common.collection.actions.view")),1)]),_:2},1032,["to"])]),_:2},1024)]),_:2},1032,["headers","items","is-selected-row","onResize"]),i[5]||(i[5]=r()),s.params.service?(l(),d(k,{key:0},{default:a(e=>[t(j,{onClose:f=>s.replace({name:"service-list-view",params:{mesh:s.params.mesh},query:{page:s.params.page,size:s.params.size}})},{default:a(()=>[(l(),d(q(e.Component),{name:s.params.service,service:o==null?void 0:o.items.find(f=>f.name===s.params.service)},null,8,["name","service"]))]),_:2},1032,["onClose"])]),_:2},1024)):P("",!0)]),_:2},1032,["items","page","page-size","total","onChange"])]),_:2},1032,["src"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["docs"])]),_:1})}}}),H=G(E,[["__scopeId","data-v-04ae192a"]]);export{H as default};
