import{d as D,r as t,p as i,o as r,w as s,b as l,e as m,q as _,m as y,Y as C,F as L,l as d,c as T,t as x,N as q,L as k,M as A,_ as N}from"./index-DGSbEvIm.js";import{_ as Q}from"./PolicySummary.vue_vue_type_script_setup_true_lang-BDANql8p.js";const Y=D({__name:"DataPlanePolicySummaryView",props:{policyTypes:{}},setup(R){const S=R;return(z,c)=>{const w=t("RouteTitle"),M=t("XAction"),V=t("XSelect"),b=t("XLayout"),f=t("XCodeBlock"),g=t("DataLoader"),F=t("AppView"),E=t("DataSource"),P=t("RouteView");return r(),i(P,{name:"data-plane-policy-summary-view",params:{mesh:"",policyPath:"",policy:"",codeSearch:"",codeFilter:!1,codeRegExp:!1,format:String}},{default:s(({route:e,t:n,uri:B})=>[l(E,{src:`/meshes/${e.params.mesh}/policy-path/${e.params.policyPath}/policy/${e.params.policy}`},{default:s(({data:p,error:X})=>[l(F,null,{title:s(()=>[d("h2",null,[l(M,{to:{name:"policy-detail-view",params:{mesh:e.params.mesh,policyPath:e.params.policyPath,policy:e.params.policy}}},{default:s(()=>[l(w,{title:n("policies.routes.item.title",{name:e.params.policy})},null,8,["title"])]),_:2},1032,["to"])])]),default:s(()=>[c[2]||(c[2]=m()),l(g,{data:[p],errors:[X]},{default:s(()=>{var h;return[p?(r(),i(Q,{key:0,policy:p,format:e.params.format,legacy:!((h=S.policyTypes.find(({name:o})=>o===(p==null?void 0:p.type)))!=null&&h.policy.isTargetRef)},{header:s(()=>[d("header",null,[l(b,{type:"separated",size:"max"},{default:s(()=>[d("h3",null,x(n("policies.routes.item.config")),1),c[0]||(c[0]=m()),(r(),T(q,null,k([["structured","universal","k8s"]],o=>d("div",{key:typeof o},[l(V,{label:n("policies.routes.item.format"),selected:o.includes(e.params.format)?e.params.format:o[0],onChange:a=>{e.update({format:a})},onVnodeBeforeMount:a=>{var u;return((u=a==null?void 0:a.props)==null?void 0:u.selected)&&o.includes(a.props.selected)&&a.props.selected!==e.params.format&&e.update({format:a.props.selected})}},A({_:2},[k(o,a=>({name:`${a}-option`,fn:s(()=>[m(x(n(`policies.routes.item.formats.${a}`)),1)])}))]),1032,["label","selected","onChange","onVnodeBeforeMount"])])),64))]),_:2,__:[0]},1024)])]),default:s(()=>[c[1]||(c[1]=m()),e.params.format==="universal"?(r(),i(f,{key:0,"data-testid":"codeblock-yaml-universal",language:"yaml",code:y(C).stringify(p.config),"is-searchable":"","show-k8s-copy-button":!1,query:e.params.codeSearch,"is-filter-mode":e.params.codeFilter,"is-reg-exp-mode":e.params.codeRegExp,onQueryChange:o=>e.update({codeSearch:o}),onFilterModeChange:o=>e.update({codeFilter:o}),onRegExpModeChange:o=>e.update({codeRegExp:o})},null,8,["code","query","is-filter-mode","is-reg-exp-mode","onQueryChange","onFilterModeChange","onRegExpModeChange"])):e.params.format==="k8s"?(r(),i(g,{key:1,src:B(y(L),"/meshes/:mesh/policy-path/:path/policy/:name/as/kubernetes",{mesh:e.params.mesh,path:e.params.policyPath,name:e.params.policy})},{default:s(({data:o})=>[l(f,{"data-testid":"codeblock-yaml-k8s",language:"yaml",code:y(C).stringify(o),"show-k8s-copy-button":!1,"is-searchable":"",query:e.params.codeSearch,"is-filter-mode":e.params.codeFilter,"is-reg-exp-mode":e.params.codeRegExp,onQueryChange:a=>e.update({codeSearch:a}),onFilterModeChange:a=>e.update({codeFilter:a}),onRegExpModeChange:a=>e.update({codeRegExp:a})},null,8,["code","query","is-filter-mode","is-reg-exp-mode","onQueryChange","onFilterModeChange","onRegExpModeChange"])]),_:2},1032,["src"])):_("",!0)]),_:2,__:[1]},1032,["policy","format","legacy"])):_("",!0)]}),_:2},1032,["data","errors"])]),_:2,__:[2]},1024)]),_:2},1032,["src"])]),_:1})}}}),v=N(Y,[["__scopeId","data-v-9df827b1"]]);export{v as default};
