import{a as N,A as S}from"./AccordionList-CHcYyyZh.js";import{C as K}from"./CodeBlock-lWUCIKrQ.js";import{d as O,a as c,o,b as u,w as t,e as a,m as s,Z as d,f as e,t as m,V as C,q as f,c as n,F as p,G as g,p as T}from"./index-B_EoIyfE.js";import{P as F}from"./PolicyTypeTag-jqcNmy6o.js";import{T as j}from"./TagList-BN3DBrWQ.js";import{R as I}from"./RuleMatchers-8-x4gdqf.js";import{t as q}from"./toYaml-DB9FPXFY.js";const E={class:"stack-with-borders"},G={key:0,class:"mt-6"},H=s("h3",null,"Rules",-1),M={class:"stack mt-4"},U={class:"stack-with-borders"},W=s("dt",null,`
                                Config
                              `,-1),Y={class:"mt-2"},st=O({__name:"ConnectionInboundSummaryOverviewView",props:{data:{}},setup(B){const l=B;return(Z,J)=>{const w=c("KBadge"),P=c("RouterLink"),V=c("DataSource"),x=c("KCard"),A=c("DataCollection"),D=c("DataLoader"),z=c("AppView"),L=c("RouteView");return o(),u(L,{params:{mesh:"",dataPlane:"",connection:""},name:"connection-inbound-summary-overview-view"},{default:t(({t:R,route:b})=>[a(z,null,{default:t(()=>[s("div",E,[a(d,{layout:"horizontal"},{title:t(()=>[e(`
            Tags
          `)]),body:t(()=>[a(j,{tags:l.data.tags,alignment:"right"},null,8,["tags"])]),_:1}),e(),a(d,{layout:"horizontal"},{title:t(()=>[e(`
            Status
          `)]),body:t(()=>[a(w,{appearance:l.data.health.ready?"success":"danger"},{default:t(()=>[e(m(l.data.health.ready?"Healthy":"Unhealthy"),1)]),_:1},8,["appearance"])]),_:1}),e(),a(d,{layout:"horizontal"},{title:t(()=>[e(`
            Protocol
          `)]),body:t(()=>[a(w,{appearance:"info"},{default:t(()=>[e(m(R(`http.api.value.${l.data.protocol}`)),1)]),_:2},1024)]),_:2},1024),e(),a(d,{layout:"horizontal"},{title:t(()=>[e(`
            Address
          `)]),body:t(()=>[a(C,{text:`${l.data.addressPort}`},null,8,["text"])]),_:1}),e(),l.data.serviceAddressPort.length>0?(o(),u(d,{key:0,layout:"horizontal"},{title:t(()=>[e(`
            Service Address
          `)]),body:t(()=>[a(C,{text:`${l.data.serviceAddressPort}`},null,8,["text"])]),_:1})):f("",!0)]),e(),l.data?(o(),n("div",G,[H,e(),a(D,{src:`/meshes/${b.params.mesh}/dataplanes/${b.params.dataPlane}/rules`},{default:t(({data:$})=>[a(A,{predicate:h=>h.ruleType==="from"&&Number(h.inbound.port)===Number(b.params.connection.split("_")[1]),items:$.rules},{default:t(({items:h})=>[s("div",M,[a(N,{"initially-open":0,"multiple-open":""},{default:t(()=>[(o(!0),n(p,null,g(Object.groupBy(h,y=>y.type),(y,v)=>(o(),u(x,{key:v},{default:t(()=>[a(S,null,{"accordion-header":t(()=>[a(F,{"policy-type":v},{default:t(()=>[e(m(v)+" ("+m(y.length)+`)
                        `,1)]),_:2},1032,["policy-type"])]),"accordion-content":t(()=>[s("div",U,[(o(!0),n(p,null,g(y,i=>(o(),n(p,{key:i},[i.matchers.length>0?(o(),u(d,{key:0,layout:"horizontal"},{title:t(()=>[e(`
                                From
                              `)]),body:t(()=>[s("p",null,[a(I,{items:i.matchers},null,8,["items"])])]),_:2},1024)):f("",!0),e(),i.origins.length>0?(o(),u(d,{key:1,layout:"horizontal"},{title:t(()=>[e(`
                                Origin Policies
                              `)]),body:t(()=>[a(V,{src:"/*/policy-types"},{default:t(({data:k})=>[(o(!0),n(p,null,g([Object.groupBy((k==null?void 0:k.policies)??[],_=>_.name)],_=>(o(),n("ul",{key:_},[(o(!0),n(p,null,g(i.origins,r=>(o(),n("li",{key:`${r.mesh}-${r.name}`},[_[r.type]?(o(),u(P,{key:0,to:{name:"policy-detail-view",params:{mesh:r.mesh,policyPath:_[r.type][0].path,policy:r.name}}},{default:t(()=>[e(m(r.name),1)]),_:2},1032,["to"])):(o(),n(p,{key:1},[e(m(r.name),1)],64))]))),128))]))),128))]),_:2},1024)]),_:2},1024)):f("",!0),e(),s("div",null,[W,e(),s("dd",Y,[s("div",null,[a(K,{code:T(q)(i.config),language:"yaml","show-copy-button":!1},null,8,["code"])])])])],64))),128))])]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)])]),_:2},1032,["predicate","items"])]),_:2},1032,["src"])])):f("",!0)]),_:2},1024)]),_:1})}}});export{st as default};
