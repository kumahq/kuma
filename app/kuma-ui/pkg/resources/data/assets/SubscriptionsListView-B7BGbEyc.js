import{d as T,p as u,o as i,w as t,b as s,e as r,r as o,K as N,c as m,L as y,N as _,t as p,q as b,y as A}from"./index-Cu0UScaV.js";const P=T({__name:"SubscriptionsListView",props:{routeName:{},routePrefix:{},i18nPrefix:{},subscriptions:{}},setup(h){const a=h;return(D,l)=>{const k=o("RouteTitle"),w=o("XI18n"),x=o("XIcon"),X=o("XAction"),g=o("XLayout"),v=o("XCard"),C=o("AppView"),V=o("XDrawer"),I=o("RouterView"),R=o("RouteView");return i(),u(R,{name:a.routeName,params:{subscription:""}},{default:t(({route:f,me:c})=>[s(w,{prefix:a.i18nPrefix},{default:t(({t:n})=>[s(C,null,{default:t(()=>[s(k,{render:!1,title:n(".routes.item.subscriptions.title")},null,8,["title"]),l[6]||(l[6]=r()),s(v,{"data-testid":"subscriptions-listing"},{default:t(()=>[s(g,{type:"stack"},{default:t(()=>[s(w,{prefix:a.i18nPrefix,path:".routes.item.subscriptions.description"},null,8,["prefix"]),l[5]||(l[5]=r()),s(N,{headers:[{...c.get("headers.connection"),label:"Â ",key:"connection"},{...c.get("headers.instanceId"),label:n(".routes.item.subscriptions.instanceId",null,{defaultMessage:n("http.api.property.instanceId")}),key:"instanceId"},{...c.get("headers.version"),label:n("http.api.property.version"),key:"version"},{...c.get("headers.connected"),label:n("http.api.property.connected"),key:"connected"},{...c.get("headers.disconnected"),label:n("http.api.property.disconnected"),key:"disconnected"},{...c.get("headers.responses"),label:n("subscriptions.routes.item.headers.stat"),key:"responses"}],"is-selected-row":e=>e.id===f.params.subscription,items:[...a.subscriptions].reverse(),onResize:c.set},{connection:t(({row:e})=>[(i(!0),m(_,null,y([e.connectTime&&!e.disconnectTime?"healthy":"unhealthy"],d=>(i(),u(x,{key:`${d}`,name:d},{default:t(()=>[r(p(n(`common.connection.${d}`)),1)]),_:2},1032,["name"]))),128))]),instanceId:t(({row:e})=>[s(X,{"data-action":"",to:{name:`${a.routePrefix}-subscription-summary-view`,params:{subscription:e.id}}},{default:t(()=>[r(p(e.instance.id||"-"),1)]),_:2},1032,["to"])]),version:t(({row:e})=>[r(p(e.instance.version||"-"),1)]),connected:t(({row:e})=>[r(p(n("common.formats.datetime",{value:Date.parse(e.connectTime??"")})),1)]),disconnected:t(({row:e})=>[e.disconnectTime?(i(),m(_,{key:0},[r(p(n("common.formats.datetime",{value:Date.parse(e.disconnectTime)})),1)],64)):b("",!0)]),responses:t(({row:e})=>[(i(!0),m(_,null,y([e.status?.total??{}],d=>(i(),m(_,null,[r(p(d.responsesSent)+"/"+p(d.responsesAcknowledged),1)],64))),256))]),_:2},1032,["headers","is-selected-row","items","onResize"])]),_:2},1024)]),_:2},1024)]),_:2},1024),l[7]||(l[7]=r()),s(I,null,{default:t(e=>[e.route.name!==f.name?(i(),u(V,{key:0,width:"670px",onClose:function(){f.replace({name:a.routeName})}},{default:t(()=>[(i(),u(A(e.Component),{data:a.subscriptions},null,8,["data"]))]),_:2},1032,["onClose"])):b("",!0)]),_:2},1024)]),_:2},1032,["prefix"])]),_:1},8,["name"])}}});export{P as default};
