import{d as K,r as l,o as t,m as c,w as s,b as n,e as i,l as R,aB as L,A as N,U as X,t as m,c as p,F as u,p as h,s as w,E as $}from"./index-BRBWbknO.js";import{S as P}from"./SummaryView-CK1e_JHQ.js";const U=K({__name:"MeshServiceListView",setup(q){return(E,F)=>{const y=l("RouteTitle"),_=l("XAction"),d=l("KTruncate"),g=l("KBadge"),z=l("XActionGroup"),b=l("RouterView"),C=l("DataCollection"),V=l("DataLoader"),A=l("KCard"),D=l("AppView"),S=l("RouteView"),T=l("DataSource");return t(),c(T,{src:"/me"},{default:s(({data:v})=>[v?(t(),c(S,{key:0,name:"mesh-service-list-view",params:{page:1,size:v.pageSize,mesh:"",service:""}},{default:s(({route:o,t:f,can:x,uri:B})=>[n(y,{render:!1,title:f("services.routes.mesh-service-list-view.title")},null,8,["title"]),i(),n(D,null,{default:s(()=>[n(A,null,{default:s(()=>[n(V,{src:B(R(L),"/meshes/:mesh/mesh-services",{mesh:o.params.mesh},{page:o.params.page,size:o.params.size})},{loadable:s(({data:a})=>[n(C,{type:"services",items:(a==null?void 0:a.items)??[void 0]},{default:s(()=>[n(N,{"data-testid":"service-collection",headers:[{label:"Name",key:"name"},{label:"Namespace",key:"namespace"},...x("use zones")?[{label:"Zone",key:"zone"}]:[],{label:"Addresses",key:"addresses"},{label:"Ports",key:"ports"},{label:"Tags",key:"tags"},{label:"Actions",key:"actions",hideLabel:!0}],"page-number":o.params.page,"page-size":o.params.size,total:a==null?void 0:a.total,items:a==null?void 0:a.items,"is-selected-row":e=>e.name===o.params.service,onChange:o.update},{name:s(({row:e})=>[n(X,{text:e.name},{default:s(()=>[n(_,{"data-action":"",to:{name:"mesh-service-summary-view",params:{mesh:e.mesh,service:e.id},query:{page:o.params.page,size:o.params.size}}},{default:s(()=>[i(m(e.name),1)]),_:2},1032,["to"])]),_:2},1032,["text"])]),namespace:s(({row:e})=>[i(m(e.namespace),1)]),zone:s(({row:e})=>[e.labels&&e.labels["kuma.io/origin"]==="zone"&&e.labels["kuma.io/zone"]?(t(),p(u,{key:0},[e.labels["kuma.io/zone"]?(t(),c(_,{key:0,to:{name:"zone-cp-detail-view",params:{zone:e.labels["kuma.io/zone"]}}},{default:s(()=>[i(m(e.labels["kuma.io/zone"]),1)]),_:2},1032,["to"])):h("",!0)],64)):(t(),p(u,{key:1},[i(m(f("common.detail.none")),1)],64))]),addresses:s(({row:e})=>[n(d,null,{default:s(()=>[(t(!0),p(u,null,w(e.status.addresses,r=>(t(),p("span",{key:r.hostname},m(r.hostname),1))),128))]),_:2},1024)]),ports:s(({row:e})=>[n(d,null,{default:s(()=>[(t(!0),p(u,null,w(e.spec.ports,r=>(t(),c(g,{key:r.port,appearance:"info"},{default:s(()=>[i(m(r.port)+":"+m(r.targetPort)+"/"+m(r.appProtocol),1)]),_:2},1024))),128))]),_:2},1024)]),tags:s(({row:e})=>[n(d,null,{default:s(()=>[(t(!0),p(u,null,w(e.spec.selector.dataplaneTags,(r,k)=>(t(),c(g,{key:`${k}:${r}`,appearance:"info"},{default:s(()=>[i(m(k)+":"+m(r),1)]),_:2},1024))),128))]),_:2},1024)]),actions:s(({row:e})=>[n(z,null,{default:s(()=>[n(_,{to:{name:"mesh-service-detail-view",params:{mesh:e.mesh,service:e.id}}},{default:s(()=>[i(m(f("common.collection.actions.view")),1)]),_:2},1032,["to"])]),_:2},1024)]),_:2},1032,["headers","page-number","page-size","total","items","is-selected-row","onChange"]),i(),a!=null&&a.items&&o.params.service?(t(),c(b,{key:0},{default:s(e=>[n(P,{onClose:r=>o.replace({name:"mesh-service-list-view",params:{mesh:o.params.mesh},query:{page:o.params.page,size:o.params.size}})},{default:s(()=>[(t(),c($(e.Component),{items:a==null?void 0:a.items},null,8,["items"]))]),_:2},1032,["onClose"])]),_:2},1024)):h("",!0)]),_:2},1032,["items"])]),_:2},1032,["src"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["params"])):h("",!0)]),_:1})}}});export{U as default};
