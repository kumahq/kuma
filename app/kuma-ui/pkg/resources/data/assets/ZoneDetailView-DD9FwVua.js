import{d as X,r as p,o as c,q as y,w as e,b as s,p as f,y as x,Q as E,e as o,R as w,t as i,S as K,n as M,m as I,V as H,W as U,M as Z,s as b,c as _,A as G,K as g,L as T,G as $,_ as P}from"./index-l3jNaB4C.js";import{S as q}from"./SummaryView-CH9ZqjAL.js";const F=["data-testid","innerHTML"],Q=["innerHTML"],W={key:0},j=X({__name:"ZoneDetailView",props:{data:{}},setup(v){const d=v;return(J,a)=>{const k=p("XBadge"),A=p("KTooltip"),h=p("XLayout"),L=p("XAboutCard"),S=p("XAction"),B=p("RouterView"),D=p("AppView"),N=p("DataSource"),R=p("RouteView");return c(),y(R,{name:"zone-cp-detail-view",params:{zone:"",subscription:""}},{default:e(({t:n,uri:O,route:z,me:m})=>{var C,V;return[s(N,{src:O(f(x),"/control-plane/outdated/:version",{version:((V=(C=d.data.zoneInsight.version)==null?void 0:C.kumaCp)==null?void 0:V.version)??"-"})},{default:e(({data:r})=>[s(D,{docs:n("zones.href.docs.cta")},E({default:e(()=>[a[16]||(a[16]=o()),s(h,{"data-testid":"detail-view-details",type:"stack"},{default:e(()=>[s(L,{title:n("zone-cps.detail.about.title"),created:d.data.creationTime,modified:d.data.modificationTime},{default:e(()=>[s(w,{layout:"horizontal"},{title:e(()=>[o(i(n("http.api.property.status")),1)]),body:e(()=>[s(K,{status:d.data.state},null,8,["status"])]),_:2},1024),a[6]||(a[6]=o()),s(w,{layout:"horizontal",class:M({version:!0,outdated:r==null?void 0:r.outdated})},{title:e(()=>[o(i(n("zone-cps.routes.item.version")),1)]),body:e(()=>[s(h,{type:"separated"},{default:e(()=>[s(k,{appearance:(r==null?void 0:r.outdated)===!0?"warning":"decorative"},{default:e(()=>{var t,l;return[o(i(((l=(t=d.data.zoneInsight.version)==null?void 0:t.kumaCp)==null?void 0:l.version)??"â€”"),1)]}),_:2},1032,["appearance"]),a[2]||(a[2]=o()),(r==null?void 0:r.outdated)===!0?(c(),y(A,{key:0,"max-width":"300"},{content:e(()=>[I("div",{innerHTML:n("zone-cps.routes.item.version_warning")},null,8,Q)]),default:e(()=>[s(f(H),{color:f(U),size:f(Z)},null,8,["color","size"]),a[1]||(a[1]=o())]),_:2},1024)):b("",!0)]),_:2},1024)]),_:2},1032,["class"]),a[7]||(a[7]=o()),s(w,{layout:"horizontal"},{title:e(()=>[o(i(n("http.api.property.type")),1)]),body:e(()=>[s(k,{appearance:"decorative"},{default:e(()=>[o(i(n(`common.product.environment.${d.data.zoneInsight.environment||"unknown"}`)),1)]),_:2},1024)]),_:2},1024),a[8]||(a[8]=o()),s(w,{layout:"horizontal"},{title:e(()=>[o(i(n("zone-cps.routes.item.authentication_type")),1)]),body:e(()=>[s(k,{appearance:"decorative"},{default:e(()=>[o(i(d.data.zoneInsight.authenticationType||n("common.not_applicable")),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["title","created","modified"]),a[15]||(a[15]=o()),d.data.zoneInsight.subscriptions.length>0?(c(),_("div",W,[I("h2",null,i(n("zone-cps.detail.subscriptions")),1),a[13]||(a[13]=o()),s(G,{headers:[{...m.get("headers.zoneInstanceId"),label:n("zone-cps.routes.items.headers.zoneInstanceId"),key:"zoneInstanceId"},{...m.get("headers.version"),label:n("zone-cps.routes.items.headers.version"),key:"version"},{...m.get("headers.connected"),label:n("zone-cps.routes.items.headers.connected"),key:"connected"},{...m.get("headers.disconnected"),label:n("zone-cps.routes.items.headers.disconnected"),key:"disconnected"},{...m.get("headers.responses"),label:n("zone-cps.routes.items.headers.responses"),key:"responses"}],"is-selected-row":t=>t.id===z.params.subscription,items:d.data.zoneInsight.subscriptions.map((t,l,u)=>u[u.length-(l+1)]),onResize:m.set},{zoneInstanceId:e(({row:t})=>[s(S,{"data-action":"",to:{name:"zone-cp-subscription-summary-view",params:{subscription:t.id}}},{default:e(()=>[o(i(t.zoneInstanceId),1)]),_:2},1032,["to"])]),version:e(({row:t})=>{var l,u;return[o(i(((u=(l=t.version)==null?void 0:l.kumaCp)==null?void 0:u.version)??"-"),1)]}),connected:e(({row:t})=>[o(i(n("common.formats.datetime",{value:Date.parse(t.connectTime??"")})),1)]),disconnected:e(({row:t})=>[t.disconnectTime?(c(),_(g,{key:0},[o(i(n("common.formats.datetime",{value:Date.parse(t.disconnectTime)})),1)],64)):b("",!0)]),responses:e(({row:t})=>{var l;return[(c(!0),_(g,null,T([((l=t.status)==null?void 0:l.total)??{}],u=>(c(),_(g,null,[o(i(u.responsesSent)+"/"+i(u.responsesAcknowledged),1)],64))),256))]}),_:2},1032,["headers","is-selected-row","items","onResize"]),a[14]||(a[14]=o()),s(B,null,{default:e(({Component:t})=>[z.child()?(c(),y(q,{key:0,width:"670px",onClose:function(){z.replace({name:"zone-cp-detail-view",params:{zone:z.params.zone}})}},{default:e(()=>[(c(),y($(t),{data:d.data.zoneInsight.subscriptions},{default:e(()=>[I("p",null,i(n("zone-cps.routes.item.subscription_intro")),1)]),_:2},1032,["data"]))]),_:2},1032,["onClose"])):b("",!0)]),_:2},1024)])):b("",!0)]),_:2},1024)]),_:2},[d.data.warnings.length>0?{name:"notifications",fn:e(()=>[I("ul",null,[(c(!0),_(g,null,T(d.data.warnings,t=>(c(),_("li",{key:t.kind,"data-testid":`warning-${t.kind}`,innerHTML:n(`common.warnings.${t.kind}`,{...t.payload,...t.kind==="INCOMPATIBLE_ZONE_AND_GLOBAL_CPS_VERSIONS"?{globalCpVersion:(r==null?void 0:r.version)??""}:{}})},null,8,F))),128))])]),key:"0"}:void 0]),1032,["docs"])]),_:2},1032,["src"])]}),_:1})}}}),te=P(j,[["__scopeId","data-v-30304997"]]);export{te as default};
