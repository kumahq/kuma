import{d as R,I as Y,F as P,o as s,m as k,w as i,c as p,G as st,E as tt,q as A,e as B,k as o,r as h,b as n,j as dt,p as V,a as u,t as r,l as f,H as _,J as q,n as lt,D as ut,Q as j,P as L,S as pt,a0 as ct,K as J,$ as ft,a1 as mt,A as gt}from"./index-CjjKwNo4.js";import{q as yt}from"./kong-icons.es678-VwaidS1F.js";import{S as vt}from"./SummaryView-BhSKxYbl.js";import{T as ot}from"./TagList-pzFi9naC.js";const _t=["aria-hidden"],et='<path d="M15 18L21 12L15 6L13.6 7.4L17.2 11H3V13H17.2L13.6 16.6L15 18Z" fill="currentColor"/>',bt=R({__name:"ForwardIcon",props:{title:{type:String,required:!1,default:""},color:{type:String,required:!1,default:"currentColor"},display:{type:String,required:!1,default:"block"},decorative:{type:Boolean,required:!1,default:!1},size:{type:[Number,String],required:!1,default:Y,validator:d=>{if(typeof d=="number"&&d>0)return!0;if(typeof d=="string"){const a=String(d).replace(/px/gi,""),e=Number(a);if(e&&!isNaN(e)&&Number.isInteger(e)&&e>0)return!0}return!1}},as:{type:String,required:!1,default:"span"},staticIds:{type:Boolean,default:!1}},setup(d){const a=d,e=P(()=>{if(typeof a.size=="number"&&a.size>0)return`${a.size}px`;if(typeof a.size=="string"){const v=String(a.size).replace(/px/gi,""),c=Number(v);if(c&&!isNaN(c)&&Number.isInteger(c)&&c>0)return`${c}px`}return Y}),$=P(()=>({boxSizing:"border-box",color:a.color,display:a.display,flexShrink:"0",height:e.value,lineHeight:"0",width:e.value,pointerEvents:a.decorative?"none":void 0})),N=v=>{const c={},C=Math.random().toString(36).substring(2,12);return v.replace(/id="([^"]+)"/g,(z,I)=>{const E=`${C}-${I}`;return c[I]=E,`id="${E}"`}).replace(/#([^\s^")]+)/g,(z,I)=>c[I]?`#${c[I]}`:z)},t=v=>{const c={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;","`":"&#039;"};return v.replace(/[<>"'`]/g,C=>c[C])},x=`${a.title?`<title data-testid="kui-icon-svg-title">${t(a.title)}</title>`:""}${a.staticIds?et:N(et)}`;return(v,c)=>(s(),k(tt(d.as),{"aria-hidden":d.decorative?"true":void 0,class:"kui-icon forward-icon","data-testid":"kui-icon-wrapper-forward-icon",style:st($.value),tabindex:d.decorative?"-1":void 0},{default:i(()=>[(s(),p("svg",{"aria-hidden":d.decorative?"true":void 0,"data-testid":"kui-icon-svg-forward-icon",fill:"none",height:"100%",role:"img",viewBox:"0 0 24 24",width:"100%",xmlns:"http://www.w3.org/2000/svg",innerHTML:x},null,8,_t))]),_:1},8,["aria-hidden","style","tabindex"]))}}),kt=["aria-hidden"],nt='<path d="M12 21V19H19V5H12V3H19C19.55 3 20.0208 3.19583 20.4125 3.5875C20.8042 3.97917 21 4.45 21 5V19C21 19.55 20.8042 20.0208 20.4125 20.4125C20.0208 20.8042 19.55 21 19 21H12ZM10 17L8.625 15.55L11.175 13H3V11H11.175L8.625 8.45L10 7L15 12L10 17Z" fill="currentColor"/>',xt=R({__name:"GatewayIcon",props:{title:{type:String,required:!1,default:""},color:{type:String,required:!1,default:"currentColor"},display:{type:String,required:!1,default:"block"},decorative:{type:Boolean,required:!1,default:!1},size:{type:[Number,String],required:!1,default:Y,validator:d=>{if(typeof d=="number"&&d>0)return!0;if(typeof d=="string"){const a=String(d).replace(/px/gi,""),e=Number(a);if(e&&!isNaN(e)&&Number.isInteger(e)&&e>0)return!0}return!1}},as:{type:String,required:!1,default:"span"},staticIds:{type:Boolean,default:!1}},setup(d){const a=d,e=P(()=>{if(typeof a.size=="number"&&a.size>0)return`${a.size}px`;if(typeof a.size=="string"){const v=String(a.size).replace(/px/gi,""),c=Number(v);if(c&&!isNaN(c)&&Number.isInteger(c)&&c>0)return`${c}px`}return Y}),$=P(()=>({boxSizing:"border-box",color:a.color,display:a.display,flexShrink:"0",height:e.value,lineHeight:"0",width:e.value,pointerEvents:a.decorative?"none":void 0})),N=v=>{const c={},C=Math.random().toString(36).substring(2,12);return v.replace(/id="([^"]+)"/g,(z,I)=>{const E=`${C}-${I}`;return c[I]=E,`id="${E}"`}).replace(/#([^\s^")]+)/g,(z,I)=>c[I]?`#${c[I]}`:z)},t=v=>{const c={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;","`":"&#039;"};return v.replace(/[<>"'`]/g,C=>c[C])},x=`${a.title?`<title data-testid="kui-icon-svg-title">${t(a.title)}</title>`:""}${a.staticIds?nt:N(nt)}`;return(v,c)=>(s(),k(tt(d.as),{"aria-hidden":d.decorative?"true":void 0,class:"kui-icon gateway-icon","data-testid":"kui-icon-wrapper-gateway-icon",style:st($.value),tabindex:d.decorative?"-1":void 0},{default:i(()=>[(s(),p("svg",{"aria-hidden":d.decorative?"true":void 0,"data-testid":"kui-icon-svg-gateway-icon",fill:"none",height:"100%",role:"img",viewBox:"0 0 24 24",width:"100%",xmlns:"http://www.w3.org/2000/svg",innerHTML:x},null,8,kt))]),_:1},8,["aria-hidden","style","tabindex"]))}}),$t=["B","kB","MB","GB","TB","PB","EB","ZB","YB"],wt=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],St=["b","kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],Ct=["b","kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],at=(d,a,e)=>{let $=d;return typeof a=="string"||Array.isArray(a)?$=d.toLocaleString(a,e):(a===!0||e!==void 0)&&($=d.toLocaleString(void 0,e)),$};function Z(d,a){if(!Number.isFinite(d))throw new TypeError(`Expected a finite number, got ${typeof d}: ${d}`);a={bits:!1,binary:!1,space:!0,...a};const e=a.bits?a.binary?Ct:St:a.binary?wt:$t,$=a.space?" ":"";if(a.signed&&d===0)return` 0${$}${e[0]}`;const N=d<0,t=N?"-":a.signed?"+":"";N&&(d=-d);let x;if(a.minimumFractionDigits!==void 0&&(x={minimumFractionDigits:a.minimumFractionDigits}),a.maximumFractionDigits!==void 0&&(x={maximumFractionDigits:a.maximumFractionDigits,...x}),d<1){const z=at(d,a.locale,x);return t+z+$+e[0]}const v=Math.min(Math.floor(a.binary?Math.log(d)/Math.log(1024):Math.log10(d)/3),e.length-1);d/=(a.binary?1024:1e3)**v,x||(d=d.toPrecision(3));const c=at(Number(d),a.locale,x),C=e[v];return t+c+$+C}const It={},Bt={class:"card"},Nt={class:"title"},Tt={class:"body"};function qt(d,a){const e=B("KCard");return s(),k(e,{class:"data-card"},{default:i(()=>[o("dl",null,[o("div",Bt,[o("dt",Nt,[h(d.$slots,"title",{},void 0,!0)]),a[0]||(a[0]=n()),o("dd",Tt,[h(d.$slots,"default",{},void 0,!0)])])])]),_:3})}const rt=A(It,[["render",qt],["__scopeId","data-v-3f9a3cf3"]]),zt={class:"title"},Dt={key:0},Lt={"data-testid":"grpc-success"},Vt={"data-testid":"grpc-failure"},Et={"data-testid":"rq-2xx"},Mt={"data-testid":"rq-4xx"},ht={"data-testid":"rq-5xx"},Ht={"data-testid":"connections-total"},Rt={key:0,"data-testid":"bytes-received"},Kt={key:1,"data-testid":"bytes-sent"},Pt=R({__name:"ConnectionCard",props:{protocol:{},service:{default:""},traffic:{default:void 0},direction:{default:"downstream"}},setup(d){const{t:a}=dt(),e=d,$=N=>{const t=N.target;if(N.isTrusted&&t.nodeName.toLowerCase()!=="a"){const x=t.closest(".service-traffic-card, a");if(x){const v=x.nodeName.toLowerCase()==="a"?x:x.querySelector("[data-action]");v!==null&&"click"in v&&typeof v.click=="function"&&v.click()}}};return(N,t)=>{const x=B("XBadge"),v=B("KSkeletonBox");return s(),k(rt,{class:"service-traffic-card",onClick:$},{title:i(()=>[e.service.length>0?(s(),k(ot,{key:0,tags:[{label:"kuma.io/service",value:e.service}]},null,8,["tags"])):V("",!0),t[1]||(t[1]=n()),o("div",zt,[u(x,{class:"protocol",appearance:e.protocol==="passthrough"?"success":"info"},{default:i(()=>[n(r(f(a)(`data-planes.components.service_traffic_card.protocol.${e.protocol}`,{},{defaultMessage:f(a)(`http.api.value.${e.protocol}`)})),1)]),_:1},8,["appearance"]),t[0]||(t[0]=n()),h(N.$slots,"default",{},void 0,!0)])]),default:i(()=>{var c,C,z,I,E,U,X,F,G,w,m,K;return[t[22]||(t[22]=n()),e.traffic?(s(),p("dl",Dt,[e.protocol==="passthrough"?(s(!0),p(_,{key:0},q([["http","tcp"].reduce((b,S)=>{var O;const M=e.direction;return Object.entries(((O=e.traffic)==null?void 0:O[S])||{}).reduce((l,[g,y])=>[`${M}_cx_tx_bytes_total`,`${M}_cx_rx_bytes_total`].includes(g)?{...l,[g]:y+(l[g]??0)}:l,b)},{})],(b,S)=>(s(),p(_,{key:S},[o("div",null,[o("dt",null,r(f(a)("data-planes.components.service_traffic_card.tx")),1),t[2]||(t[2]=n()),o("dd",null,r(f(Z)(b.downstream_cx_rx_bytes_total??0)),1)]),t[4]||(t[4]=n()),o("div",null,[o("dt",null,r(f(a)("data-planes.components.service_traffic_card.rx")),1),t[3]||(t[3]=n()),o("dd",null,r(f(Z)(b.downstream_cx_tx_bytes_total??0)),1)])],64))),128)):e.protocol==="grpc"?(s(),p(_,{key:1},[o("div",Lt,[o("dt",null,r(f(a)("data-planes.components.service_traffic_card.grpc_success")),1),t[5]||(t[5]=n()),o("dd",null,r(f(a)("common.formats.integer",{value:(c=e.traffic.grpc)==null?void 0:c.success})),1)]),t[7]||(t[7]=n()),o("div",Vt,[o("dt",null,r(f(a)("data-planes.components.service_traffic_card.grpc_failure")),1),t[6]||(t[6]=n()),o("dd",null,r(f(a)("common.formats.integer",{value:(C=e.traffic.grpc)==null?void 0:C.failure})),1)])],64)):e.protocol.startsWith("http")?(s(),p(_,{key:2},[(s(!0),p(_,null,q([((z=e.traffic.http)==null?void 0:z[`${e.direction}_rq_1xx`])??0].filter(b=>b!==0),b=>(s(),p("div",{key:b,"data-testid":"rq-1xx"},[o("dt",null,r(f(a)("data-planes.components.service_traffic_card.1xx")),1),t[8]||(t[8]=n()),o("dd",null,r(f(a)("common.formats.integer",{value:b})),1)]))),128)),t[13]||(t[13]=n()),o("div",Et,[o("dt",null,r(f(a)("data-planes.components.service_traffic_card.2xx")),1),t[9]||(t[9]=n()),o("dd",null,r(f(a)("common.formats.integer",{value:(I=e.traffic.http)==null?void 0:I[`${e.direction}_rq_2xx`]})),1)]),t[14]||(t[14]=n()),(s(!0),p(_,null,q([((E=e.traffic.http)==null?void 0:E[`${e.direction}_rq_3xx`])??0].filter(b=>b!==0),b=>(s(),p("div",{key:b,"data-testid":"rq-3xx"},[o("dt",null,r(f(a)("data-planes.components.service_traffic_card.3xx")),1),t[10]||(t[10]=n()),o("dd",null,r(f(a)("common.formats.integer",{value:b})),1)]))),128)),t[15]||(t[15]=n()),o("div",Mt,[o("dt",null,r(f(a)("data-planes.components.service_traffic_card.4xx")),1),t[11]||(t[11]=n()),o("dd",null,r(f(a)("common.formats.integer",{value:(U=e.traffic.http)==null?void 0:U[`${e.direction}_rq_4xx`]})),1)]),t[16]||(t[16]=n()),o("div",ht,[o("dt",null,r(f(a)("data-planes.components.service_traffic_card.5xx")),1),t[12]||(t[12]=n()),o("dd",null,r(f(a)("common.formats.integer",{value:(X=e.traffic.http)==null?void 0:X[`${e.direction}_rq_5xx`]})),1)])],64)):(s(),p(_,{key:3},[o("div",Ht,[o("dt",null,r(f(a)("data-planes.components.service_traffic_card.cx")),1),t[17]||(t[17]=n()),o("dd",null,r(f(a)("common.formats.integer",{value:(F=e.traffic.tcp)==null?void 0:F[`${e.direction}_cx_total`]})),1)]),t[20]||(t[20]=n()),typeof((G=e.traffic.tcp)==null?void 0:G[`${e.direction}_cx_tx_bytes_total`])<"u"?(s(),p("div",Rt,[o("dt",null,r(f(a)("data-planes.components.service_traffic_card.rx")),1),t[18]||(t[18]=n()),o("dd",null,r(f(Z)((w=e.traffic.tcp)==null?void 0:w[`${e.direction}_cx_tx_bytes_total`])),1)])):V("",!0),t[21]||(t[21]=n()),typeof((m=e.traffic.tcp)==null?void 0:m[`${e.direction}_cx_rx_bytes_total`])<"u"?(s(),p("div",Kt,[o("dt",null,r(f(a)("data-planes.components.service_traffic_card.tx")),1),t[19]||(t[19]=n()),o("dd",null,r(f(Z)((K=e.traffic.tcp)==null?void 0:K[`${e.direction}_cx_rx_bytes_total`])),1)])):V("",!0)],64))])):(s(),k(v,{key:1,width:"10"}))]}),_:3})}}}),Q=A(Pt,[["__scopeId","data-v-82875ef3"]]),At={class:"body"},Ut=R({__name:"ConnectionGroup",props:{type:{}},setup(d){const a=d;return(e,$)=>{const N=B("KCard");return s(),k(N,{class:lt(["service-traffic-group",`type-${a.type}`])},{default:i(()=>[o("div",At,[h(e.$slots,"default",{},void 0,!0)])]),_:3},8,["class"])}}}),W=A(Ut,[["__scopeId","data-v-9402d5d1"]]),Xt={class:"service-traffic"},Ft={class:"actions"},Gt=R({__name:"ConnectionTraffic",setup(d){return(a,e)=>(s(),p("div",Xt,[o("div",Ft,[h(a.$slots,"actions",{},void 0,!0)]),e[0]||(e[0]=n()),u(rt,{class:"header"},{title:i(()=>[h(a.$slots,"title",{},void 0,!0)]),_:3}),e[1]||(e[1]=n()),h(a.$slots,"default",{},void 0,!0)]))}}),it=A(Gt,[["__scopeId","data-v-e6bd176c"]]),Ot={"data-testid":"dataplane-warnings"},Zt=["data-testid","innerHTML"],Yt={key:0,"data-testid":"warning-stats-loading"},jt={class:"stack","data-testid":"dataplane-details"},Jt={class:"stack"},Qt={class:"columns"},Wt={class:"status-with-reason"},te={class:"columns"},ee={class:"columns"},ne={"data-testid":"dataplane-mtls"},ae={class:"columns"},ie=["innerHTML"],se={key:0,"data-testid":"dataplane-subscriptions"},oe=R({__name:"DataPlaneDetailView",props:{data:{},mesh:{}},setup(d){const a=ut(),e=d,$=P(()=>e.data.warnings.concat(...e.data.isCertExpired?[{kind:"CERT_EXPIRED"}]:[]));return(N,t)=>{const x=B("KTooltip"),v=B("DataCollection"),c=B("XAction"),C=B("KCard"),z=B("XEmptyState"),I=B("XInputSwitch"),E=B("RouterView"),U=B("XAlert"),X=B("AppView"),F=B("DataSource"),G=B("RouteView");return s(),k(G,{params:{mesh:"",dataPlane:"",subscription:"",inactive:!1},name:"data-plane-detail-view"},{default:i(({route:w,t:m,can:K,me:b})=>[u(F,{src:`/meshes/${w.params.mesh}/dataplanes/${w.params.dataPlane}/stats/${e.data.dataplane.networking.inboundAddress}`},{default:i(({data:S,error:M,refresh:O})=>[u(X,null,j({default:i(()=>[t[53]||(t[53]=n()),o("div",jt,[u(C,null,{default:i(()=>[o("div",Jt,[o("div",Qt,[u(L,null,{title:i(()=>[n(r(m("http.api.property.status")),1)]),body:i(()=>[o("div",Wt,[u(pt,{status:e.data.status},null,8,["status"]),t[4]||(t[4]=n()),e.data.dataplaneType==="standard"?(s(),k(v,{key:0,items:e.data.dataplane.networking.inbounds,predicate:l=>l.state!=="Ready",empty:!1},{default:i(({items:l})=>[u(x,{class:"reason-tooltip"},{content:i(()=>[o("ul",null,[(s(!0),p(_,null,q(l,g=>(s(),p("li",{key:`${g.service}:${g.port}`},r(m("data-planes.routes.item.unhealthy_inbound",{service:g.service,port:g.port})),1))),128))])]),default:i(()=>[u(f(yt),{color:f(ct),size:f(J)},null,8,["color","size"]),t[3]||(t[3]=n())]),_:2},1024)]),_:2},1032,["items","predicate"])):V("",!0)])]),_:2},1024),t[12]||(t[12]=n()),K("use zones")&&e.data.zone?(s(),k(L,{key:0},{title:i(()=>t[6]||(t[6]=[n(`
                    Zone
                  `)])),body:i(()=>[u(c,{to:{name:"zone-cp-detail-view",params:{zone:e.data.zone}}},{default:i(()=>[n(r(e.data.zone),1)]),_:1},8,["to"])]),_:1})):V("",!0),t[13]||(t[13]=n()),u(L,null,{title:i(()=>t[8]||(t[8]=[n(`
                    Type
                  `)])),body:i(()=>[n(r(m(`data-planes.type.${e.data.dataplaneType}`)),1)]),_:2},1024),t[14]||(t[14]=n()),e.data.namespace.length>0?(s(),k(L,{key:1},{title:i(()=>t[10]||(t[10]=[n(`
                    Namespace
                  `)])),body:i(()=>[n(r(e.data.namespace),1)]),_:1})):V("",!0)]),t[20]||(t[20]=n()),o("div",te,[u(L,null,{title:i(()=>[n(r(m("data-planes.routes.item.last_updated")),1)]),body:i(()=>[n(r(m("common.formats.datetime",{value:Date.parse(e.data.modificationTime)})),1)]),_:2},1024),t[19]||(t[19]=n()),e.data.dataplane.networking.gateway?(s(),p(_,{key:0},[u(L,null,{title:i(()=>[n(r(m("http.api.property.tags")),1)]),body:i(()=>[u(ot,{tags:e.data.dataplane.networking.gateway.tags},null,8,["tags"])]),_:2},1024),t[18]||(t[18]=n()),u(L,null,{title:i(()=>[n(r(m("http.api.property.address")),1)]),body:i(()=>[u(ft,{text:`${e.data.dataplane.networking.address}`},null,8,["text"])]),_:2},1024)],64)):V("",!0)])])]),_:2},1024),t[49]||(t[49]=n()),u(C,{class:"traffic","data-testid":"dataplane-traffic"},{default:i(()=>[o("div",ee,[u(it,null,{title:i(()=>[u(f(bt),{display:"inline-block",decorative:"",size:f(J)},null,8,["size"]),t[21]||(t[21]=n(`
                  Inbounds
                `))]),default:i(()=>[t[23]||(t[23]=n()),u(W,{type:"inbound","data-testid":"dataplane-inbounds"},{default:i(()=>[(s(!0),p(_,null,q([e.data.dataplane.networking.type==="gateway"?Object.entries((S==null?void 0:S.inbounds)??{}).reduce((l,[g,y])=>{var D;const T=g.split("_").at(-1);return T===(((D=e.data.dataplane.networking.admin)==null?void 0:D.port)??"9901")?l:l.concat([{...e.data.dataplane.networking.inbounds[0],name:g,port:Number(T),protocol:["http","tcp"].find(H=>typeof y[H]<"u")??"tcp",addressPort:`${e.data.dataplane.networking.inbounds[0].address}:${T}`}])},[]):e.data.dataplane.networking.inbounds],l=>(s(),k(v,{key:l,items:l,predicate:g=>g.port!==49151},j({default:i(({items:g})=>[(s(!0),p(_,null,q(g,y=>(s(),p(_,{key:`${y.name}`},[(s(!0),p(_,null,q([S==null?void 0:S.inbounds[y.name]],T=>(s(),k(Q,{key:T,"data-testid":"dataplane-inbound",protocol:y.protocol,service:K("use service-insights",e.mesh)?y.tags["kuma.io/service"]:"",traffic:typeof M>"u"?T:{name:"",protocol:y.protocol,port:`${y.port}`}},{default:i(()=>[u(c,{"data-action":"",to:{name:(D=>D.includes("bound")?D.replace("-outbound-","-inbound-"):"connection-inbound-summary-overview-view")(String(f(a).name)),params:{connection:y.name},query:{inactive:w.params.inactive}}},{default:i(()=>[n(r(y.name.replace("localhost","").replace("_",":")),1)]),_:2},1032,["to"])]),_:2},1032,["protocol","service","traffic"]))),128))],64))),128))]),_:2},[e.data.dataplaneType==="delegated"?{name:"empty",fn:i(()=>[u(z,null,{default:i(()=>[o("p",null,`
                            This proxy is a delegated gateway therefore `+r(m("common.product.name"))+` does not have any visibility into inbounds for this gateway.
                          `,1)]),_:2},1024)]),key:"0"}:void 0]),1032,["items","predicate"]))),128))]),_:2},1024)]),_:2},1024),t[33]||(t[33]=n()),u(it,null,j({title:i(()=>[u(f(xt),{display:"inline-block",decorative:"",size:f(J)},null,8,["size"]),t[27]||(t[27]=n()),t[28]||(t[28]=o("span",null,"Outbounds",-1))]),default:i(()=>[t[31]||(t[31]=n()),t[32]||(t[32]=n()),typeof M>"u"?(s(),p(_,{key:0},[typeof S>"u"?(s(),k(mt,{key:0})):(s(),p(_,{key:1},q(["upstream"],l=>(s(),p(_,{key:l},[u(W,{type:"passthrough"},{default:i(()=>[u(Q,{protocol:"passthrough",traffic:S.passthrough},{default:i(()=>t[29]||(t[29]=[n(`
                          Non mesh traffic
                        `)])),_:2},1032,["traffic"])]),_:2},1024),t[30]||(t[30]=n()),u(v,{predicate:w.params.inactive?void 0:([g,y])=>{var T,D;return((typeof y.tcp<"u"?(T=y.tcp)==null?void 0:T[`${l}_cx_rx_bytes_total`]:(D=y.http)==null?void 0:D[`${l}_rq_total`])??0)>0},items:Object.entries(S.outbounds)},{default:i(({items:g})=>[g.length>0?(s(),k(W,{key:0,type:"outbound","data-testid":"dataplane-outbounds"},{default:i(()=>[(s(),p(_,null,q([/-([a-f0-9]){16}$/],y=>(s(),p(_,{key:y},[(s(!0),p(_,null,q(g,([T,D])=>(s(),k(Q,{key:`${T}`,"data-testid":"dataplane-outbound",protocol:["grpc","http","tcp"].find(H=>typeof D[H]<"u")??"tcp",traffic:D,service:D.$resourceMeta.type===""?T.replace(y,""):void 0,direction:l},{default:i(()=>[u(c,{"data-action":"",to:{name:(H=>H.includes("bound")?H.replace("-inbound-","-outbound-"):"connection-outbound-summary-overview-view")(String(f(a).name)),params:{connection:T},query:{inactive:w.params.inactive}}},{default:i(()=>[n(r(T),1)]),_:2},1032,["to"])]),_:2},1032,["protocol","traffic","service","direction"]))),128))],64))),64))]),_:2},1024)):V("",!0)]),_:2},1032,["predicate","items"])],64))),64))],64)):(s(),k(z,{key:1}))]),_:2},[S?{name:"actions",fn:i(()=>[u(I,{modelValue:w.params.inactive,"onUpdate:modelValue":l=>w.params.inactive=l,"data-testid":"dataplane-outbounds-inactive-toggle"},{label:i(()=>t[24]||(t[24]=[n(`
                      Show inactive
                    `)])),_:2},1032,["modelValue","onUpdate:modelValue"]),t[26]||(t[26]=n()),u(c,{action:"refresh",appearance:"primary",onClick:O},{default:i(()=>t[25]||(t[25]=[n(`
                    Refresh
                  `)])),_:2},1032,["onClick"])]),key:"0"}:void 0]),1024)])]),_:2},1024),t[50]||(t[50]=n()),u(E,null,{default:i(l=>[l.route.name!==w.name?(s(),k(vt,{key:0,width:"670px",onClose:function(){w.replace({name:"data-plane-detail-view",params:{mesh:w.params.mesh,dataPlane:w.params.dataPlane},query:{inactive:w.params.inactive?null:void 0}})}},{default:i(()=>[(s(),k(tt(l.Component),{data:w.params.subscription.length>0?e.data.dataplaneInsight.subscriptions:l.route.name.includes("-inbound-")?e.data.dataplane.networking.inbounds:(S==null?void 0:S.outbounds)||{},"dataplane-overview":e.data},null,8,["data","dataplane-overview"]))]),_:2},1032,["onClose"])):V("",!0)]),_:2},1024),t[51]||(t[51]=n()),o("div",ne,[o("h2",null,r(m("data-planes.routes.item.mtls.title")),1),t[43]||(t[43]=n()),e.data.dataplaneInsight.mTLS?(s(!0),p(_,{key:0},q([e.data.dataplaneInsight.mTLS],l=>(s(),k(C,{key:l,class:"mt-4"},{default:i(()=>[o("div",ae,[u(L,null,{title:i(()=>[n(r(m("data-planes.routes.item.mtls.expiration_time.title")),1)]),body:i(()=>[n(r(m("common.formats.datetime",{value:Date.parse(l.certificateExpirationTime)})),1)]),_:2},1024),t[39]||(t[39]=n()),u(L,null,{title:i(()=>[n(r(m("data-planes.routes.item.mtls.generation_time.title")),1)]),body:i(()=>[n(r(m("common.formats.datetime",{value:Date.parse(l.lastCertificateRegeneration)})),1)]),_:2},1024),t[40]||(t[40]=n()),u(L,null,{title:i(()=>[n(r(m("data-planes.routes.item.mtls.regenerations.title")),1)]),body:i(()=>[n(r(m("common.formats.integer",{value:l.certificateRegenerations})),1)]),_:2},1024),t[41]||(t[41]=n()),u(L,null,{title:i(()=>[n(r(m("data-planes.routes.item.mtls.issued_backend.title")),1)]),body:i(()=>[n(r(l.issuedBackend),1)]),_:2},1024),t[42]||(t[42]=n()),u(L,null,{title:i(()=>[n(r(m("data-planes.routes.item.mtls.supported_backends.title")),1)]),body:i(()=>[o("ul",null,[(s(!0),p(_,null,q(l.supportedBackends,g=>(s(),p("li",{key:g},r(g),1))),128))])]),_:2},1024)])]),_:2},1024))),128)):(s(),k(U,{key:1,class:"mt-4",appearance:"warning"},{default:i(()=>[o("div",{innerHTML:m("data-planes.routes.item.mtls.disabled")},null,8,ie)]),_:2},1024))]),t[52]||(t[52]=n()),e.data.dataplaneInsight.subscriptions.length>0?(s(),p("div",se,[o("h2",null,r(m("data-planes.routes.item.subscriptions.title")),1),t[48]||(t[48]=n()),u(gt,{headers:[{...b.get("headers.instanceId"),label:m("http.api.property.instanceId"),key:"instanceId"},{...b.get("headers.version"),label:m("http.api.property.version"),key:"version"},{...b.get("headers.connected"),label:m("http.api.property.connected"),key:"connected"},{...b.get("headers.disconnected"),label:m("http.api.property.disconnected"),key:"disconnected"},{...b.get("headers.responses"),label:m("http.api.property.responses"),key:"responses"}],"is-selected-row":l=>l.id===w.params.subscription,items:e.data.dataplaneInsight.subscriptions.map((l,g,y)=>y[y.length-(g+1)]),onResize:b.set},{instanceId:i(({row:l})=>[u(c,{"data-action":"",to:{name:"data-plane-subscription-summary-view",params:{subscription:l.id}}},{default:i(()=>[n(r(l.controlPlaneInstanceId),1)]),_:2},1032,["to"])]),version:i(({row:l})=>{var g,y;return[n(r(((y=(g=l.version)==null?void 0:g.kumaDp)==null?void 0:y.version)??"-"),1)]}),connected:i(({row:l})=>[n(r(m("common.formats.datetime",{value:Date.parse(l.connectTime??"")})),1)]),disconnected:i(({row:l})=>[l.disconnectTime?(s(),p(_,{key:0},[n(r(m("common.formats.datetime",{value:Date.parse(l.disconnectTime)})),1)],64)):V("",!0)]),responses:i(({row:l})=>{var g;return[(s(!0),p(_,null,q([((g=l.status)==null?void 0:g.total)??{}],y=>(s(),p(_,null,[n(r(y.responsesSent)+"/"+r(y.responsesAcknowledged),1)],64))),256))]}),_:2},1032,["headers","is-selected-row","items","onResize"])])):V("",!0)])]),_:2},[$.value.length>0||M?{name:"notifications",fn:i(()=>[o("ul",Ot,[(s(!0),p(_,null,q($.value,l=>(s(),p("li",{key:l.kind,"data-testid":`warning-${l.kind}`,innerHTML:m(`common.warnings.${l.kind}`,l.payload)},null,8,Zt))),128)),t[2]||(t[2]=n()),M?(s(),p("li",Yt,[t[0]||(t[0]=n(`
              The below view is not enhanced with runtime stats (Error loading stats: `)),o("strong",null,r(M.toString()),1),t[1]||(t[1]=n(`)
            `))])):V("",!0)])]),key:"0"}:void 0]),1024)]),_:2},1032,["src"])]),_:1})}}}),pe=A(oe,[["__scopeId","data-v-5bed4307"]]);export{pe as default};
