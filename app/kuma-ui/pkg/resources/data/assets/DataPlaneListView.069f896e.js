import{d as _,q as D,r as l,f as A,k as h,o as x,c as P}from"./index.0c4c6d47.js";import{p as G}from"./patchQueryParam.3ef0b93e.js";import{D as E}from"./DataPlaneList.536442cf.js";import"./EmptyBlock.vue_vue_type_script_setup_true_lang.16c6ba85.js";import"./ErrorBlock.39782751.js";import"./LoadingBlock.vue_vue_type_script_setup_true_lang.e84843f4.js";import"./StatusBadge.e9f457ff.js";import"./TagList.0486290a.js";import"./ContentWrapper.0535eefe.js";import"./YamlView.vue_vue_type_script_setup_true_lang.812a5c39.js";import"./index.58caa11d.js";import"./CodeBlock.vue_vue_type_style_index_0_lang.cc0862d4.js";import"./_commonjsHelpers.f037b798.js";const F=_({__name:"DataPlaneListView",props:{selectedDppName:{type:String,required:!1,default:null},offset:{type:Number,required:!1,default:0},isGatewayView:{type:Boolean,required:!1,default:!1}},setup(v){const e=v,d=50,w={All:!0,Builtin:"builtin",Delegated:"delegated"},s=D(),r=l([]),u=l(!0),c=l(null),n=l(null),f=l(e.offset);A(()=>s.params.mesh,function(){s.name!=="data-plane-list-view"&&s.name!=="gateway-list-view"||o(0)}),o(e.offset);async function o(a,i="All"){f.value=a,G("offset",a>0?a:null),u.value=!0;const p=s.params.mesh,y=d;try{const t=e.isGatewayView?w[i]:!1,{items:m,next:g}=await h.getAllDataplaneOverviewsFromMesh({mesh:p},{size:y,offset:a,gateway:t});Array.isArray(m)&&m.length>0?(r.value=m,n.value=g):(r.value=[],n.value=null)}catch(t){t instanceof Error?c.value=t:console.error(t),r.value=[],n.value=null}finally{u.value=!1}}return(a,i)=>(x(),P(E,{"data-plane-overviews":r.value,"is-loading":u.value,error:c.value,"next-url":n.value,"page-offset":f.value,"selected-dpp-name":e.selectedDppName,"is-gateway-view":e.isGatewayView,onGatewayTypeChange:i[0]||(i[0]=p=>o(0,p)),onLoadData:o},null,8,["data-plane-overviews","is-loading","error","next-url","page-offset","selected-dpp-name","is-gateway-view"]))}});export{F as default};
