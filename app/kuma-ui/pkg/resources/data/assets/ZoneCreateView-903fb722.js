import{R as G,u as M,T as w,N as j,r as F,a as S,q as L}from"./kongponents.es-a62ec79b.js";import{_ as i}from"./CodeBlock.vue_vue_type_style_index_0_lang-caf13288.js";import{a as R,b as q,u as W}from"./index-6d226453.js";import{d as C,c as g,j as h,i as t,t as o,b as e,h as n,g as l,H as K,p as H,m as P,o as v,w as u,z as x,r as b,F as B,f as N,e as A}from"./index-5550fdb4.js";import{_ as V}from"./_plugin-vue_export-helper-c27b6911.js";import{_ as J}from"./EntityScanner.vue_vue_type_script_setup_true_lang-8c6aa78d.js";const Q=d=>(H("data-v-e6ee1246"),d=d(),P(),d),X={href:"https://helm.sh/docs/intro/install/"},Y=Q(()=>t("p",null,"On your local machine, create a namespace in your Kubernetes cluster and pull down the kong Helm repo.",-1)),ee={class:"k-input-label mt-4"},ne={class:"mt-4"},te=C({__name:"ZoneCreateKubernetesInstructions",props:{zone:{type:Object,required:!0},zoneIngressEnabled:{type:Boolean,required:!0},zoneEgressEnabled:{type:Boolean,required:!0},token:{type:String,required:!0},base64EncodedToken:{type:String,required:!0}},setup(d){const s=d,z=R(),r=K(),a=q(),y=g(()=>a.t("zones.form.kubernetes.secret.command",{token:s.base64EncodedToken})),f=g(()=>a.t("zones.form.kubernetes.connectZone.config",{zoneName:s.zone.name,globalKdsAddress:r(),zoneIngressEnabled:String(s.zoneIngressEnabled),zoneEgressEnabled:String(s.zoneEgressEnabled)}));return(E,m)=>(v(),h("div",null,[t("h3",null,"1. "+o(e(a).t("zones.form.kubernetes.prerequisites.title")),1),n(),t("ul",null,[t("li",null,[t("b",null,o(e(a).t("zones.form.kubernetes.prerequisites.step1Label"))+o(s.zoneIngressEnabled?" "+e(a).t("zones.form.kubernetes.prerequisites.step1LabelAddendum"):""),1),n(`:
        `+o(e(a).t("zones.form.kubernetes.prerequisites.step1Description",{productName:e(z)("KUMA_PRODUCT_NAME")})),1)]),n(),t("li",null,[t("b",null,o(e(a).t("zones.form.kubernetes.prerequisites.step2Label")),1),n(`:
        `+o(e(a).t("zones.form.kubernetes.prerequisites.step2Description")),1)]),n(),t("li",null,[t("a",X,o(e(a).t("zones.form.kubernetes.prerequisites.step3LinkTitle")),1),n(" "+o(e(a).t("zones.form.kubernetes.prerequisites.step3Tail")),1)])]),n(),t("h3",null,"2. "+o(e(a).t("zones.form.kubernetes.helm.title")),1),n(),Y,n(),t("ol",null,[t("li",null,[n(o(e(a).t("zones.form.kubernetes.helm.step1Description"))+" ",1),l(i,{id:"zone-kubernetes-create-namespace",class:"mt-4",code:e(a).t("zones.form.kubernetes.helm.step1Command"),language:"bash"},null,8,["code"])]),n(),t("li",null,[n(o(e(a).t("zones.form.kubernetes.helm.step2Description"))+" ",1),l(i,{id:"zone-kubernetes-add-charts-repo",class:"mt-4",code:e(a).t("zones.form.kubernetes.helm.step2Command"),language:"bash"},null,8,["code"])]),n(),t("li",null,[n(o(e(a).t("zones.form.kubernetes.helm.step3Description"))+" ",1),l(i,{id:"zone-kubernetes-repo-update",class:"mt-4",code:e(a).t("zones.form.kubernetes.helm.step3Command"),language:"bash"},null,8,["code"])])]),n(),t("h3",null,"3. "+o(e(a).t("zones.form.kubernetes.secret.title")),1),n(),t("p",null,o(e(a).t("zones.form.kubernetes.secret.description1")),1),n(),l(i,{id:"zone-kubernetes-token",class:"mt-4",code:s.token,language:"bash"},null,8,["code"]),n(),t("p",null,o(e(a).t("zones.form.kubernetes.secret.description2")),1),n(),l(i,{id:"zone-kubernetes-create-secret",class:"mt-4",code:e(y),language:"bash"},null,8,["code"]),n(),t("h3",null,"4. "+o(e(a).t("zones.form.kubernetes.connectZone.title")),1),n(),t("p",null,o(e(a).t("zones.form.kubernetes.connectZone.description1")),1),n(),t("span",ee,o(e(a).t("zones.form.kubernetes.connectZone.fileName")),1),n(),l(i,{id:"zone-kubernetes-config-code-block",code:e(f),language:"yaml"},null,8,["code"]),n(),t("p",ne,o(e(a).t("zones.form.kubernetes.connectZone.description2")),1),n(),l(i,{id:"zone-kubernetes-command-code-block",class:"mt-4",code:e(a).t("zones.form.kubernetes.connectZone.command"),language:"bash"},null,8,["code"])]))}});const oe=V(te,[["__scopeId","data-v-e6ee1246"]]),se={class:"k-input-label mt-4"},ae={class:"mt-4"},le=C({__name:"ZoneCreateUniversalInstructions",props:{zone:{type:Object,required:!0},token:{type:String,required:!0},base64EncodedToken:{type:String,required:!0}},setup(d){const s=d,z=K(),r=q(),a=g(()=>r.t("zones.form.universal.connectZone.config",{zoneName:s.zone.name,globalKdsAddress:z(),token:s.base64EncodedToken}));return(y,f)=>(v(),h("div",null,[t("h3",null,"1. "+o(e(r).t("zones.form.universal.copySaveToken.title")),1),n(),l(e(G),{class:"mt-4",appearance:"info"},{alertMessage:u(()=>[n(o(e(r).t("zones.form.universal.copySaveToken.alertMessage")),1)]),_:1}),n(),l(i,{id:"zone-kubernetes-token",class:"mt-4",code:s.token,language:"bash"},null,8,["code"]),n(),t("h3",null,"2. "+o(e(r).t("zones.form.universal.connectZone.title")),1),n(),t("p",null,o(e(r).t("zones.form.universal.connectZone.description1")),1),n(),t("span",se,o(e(r).t("zones.form.universal.connectZone.fileName")),1),n(),l(i,{id:"zone-universal-config-code-block",class:"mt-4",code:e(a),language:"yaml"},null,8,["code"]),n(),t("p",ae,o(e(r).t("zones.form.universal.connectZone.description2")),1),n(),l(i,{id:"zone-universal-connect-command-code-block",class:"mt-4",code:e(r).t("zones.form.universal.connectZone.command"),language:"bash"},null,8,["code"])]))}});const re=V(le,[["__scopeId","data-v-f39337bc"]]),ue={class:"app-title-bar"},ce={class:"title-wrapper"},ie={class:"title"},de={class:"action-list"},me=C({__name:"WizardTitleBar",setup(d){return(s,z)=>(v(),h("div",ue,[t("div",ce,[l(e(M),{icon:"kong"}),n(),t("span",ie,[x(s.$slots,"title",{},void 0,!0)])]),n(),t("div",de,[x(s.$slots,"actions",{},void 0,!0)])]))}});const pe=V(me,[["__scopeId","data-v-6a174e13"]]),be={class:"form-content"},_e={class:"form-wrapper mt-4"},ve={key:0,class:"form-wrapper mt-4"},ze={class:"k-input-label"},fe={class:"radio-button-group"},ke={class:"k-input-label"},ge={class:"radio-button-group"},he={class:"k-input-label"},ye={class:"radio-button-group"},Ee={class:"mt-6"},Ze={class:"mt-2"},Ce=C({__name:"ZoneCreateView",setup(d){const s=q(),z=W(),r=b(null),a=b(!1),y=b(null),f=b(!1),E=b(null),m=b(""),k=b("kubernetes"),I=b(!0),T=b(!0),Z=g(()=>r.value!==null&&r.value.token?r.value.token:""),$=g(()=>Z.value!==""?window.btoa(Z.value):""),U=g(()=>m.value!=="");async function D(){a.value=!0,y.value=null;try{r.value=await z.createZone({name:m.value})}catch(_){_ instanceof Error?y.value=_:console.error(_)}finally{a.value=!1}}async function O(){f.value=!1,E.value=null;try{await z.getZoneOverview({name:m.value}),f.value=!0}catch(_){_ instanceof Error?E.value=_:console.error(_)}}return(_,c)=>(v(),h(B,null,[l(pe,{class:"mb-6"},{title:u(()=>[n(o(e(s).t("zones.create.pageTitle")),1)]),actions:u(()=>[l(e(w),{appearance:"outline",to:{name:"zone-list-view"}},{default:u(()=>[n(o(e(s).t("zones.form.exit")),1)]),_:1})]),_:1}),n(),t("div",be,[t("h1",null,o(e(s).t("zones.create.pageTitle")),1),n(),t("div",_e,[t("div",null,[l(e(j),{for:"zone-name"},{default:u(()=>[n(o(e(s).t("zones.form.nameLabel"))+` *
        `,1)]),_:1}),n(),l(e(F),{id:"zone-name",modelValue:m.value,"onUpdate:modelValue":c[0]||(c[0]=p=>m.value=p),type:"text",name:"zone-name","data-testid":"name-input",disabled:r.value!==null},null,8,["modelValue","disabled"])]),n(),l(e(w),{appearance:"creation",icon:a.value?"spinner":"plus",disabled:!e(U)||a.value||r.value!==null,"data-testid":"create-zone-button",onClick:D},{default:u(()=>[n(o(e(s).t("zones.form.createZoneButtonLabel")),1)]),_:1},8,["icon","disabled"])]),n(),r.value!==null?(v(),h("div",ve,[t("div",null,[t("span",ze,o(e(s).t("zones.form.environmentLabel"))+` *
        `,1),n(),t("div",fe,[l(e(S),{id:"zone-environment-universal",modelValue:k.value,"onUpdate:modelValue":c[1]||(c[1]=p=>k.value=p),"selected-value":"universal",name:"zone-environment","data-testid":"environment-universal-radio-button"},{default:u(()=>[n(o(e(s).t("zones.form.universalLabel")),1)]),_:1},8,["modelValue"]),n(),l(e(S),{id:"zone-environment-kubernetes",modelValue:k.value,"onUpdate:modelValue":c[2]||(c[2]=p=>k.value=p),"selected-value":"kubernetes",name:"zone-environment","data-testid":"environment-kubernetes-radio-button"},{default:u(()=>[n(o(e(s).t("zones.form.kubernetesLabel")),1)]),_:1},8,["modelValue"])])]),n(),k.value==="kubernetes"?(v(),h(B,{key:0},[t("div",null,[t("span",ke,o(e(s).t("zones.form.zoneIngressLabel"))+` *
          `,1),n(),t("div",ge,[l(e(L),{id:"zone-ingress-enabled",modelValue:I.value,"onUpdate:modelValue":c[3]||(c[3]=p=>I.value=p),"data-testid":"ingress-input-switch"},{label:u(()=>[n(o(e(s).t("zones.form.zoneIngressEnabledLabel")),1)]),_:1},8,["modelValue"])])]),n(),t("div",null,[t("span",he,o(e(s).t("zones.form.zoneEgressLabel"))+` *
          `,1),n(),t("div",ye,[l(e(L),{id:"zone-egress-enabled",modelValue:T.value,"onUpdate:modelValue":c[4]||(c[4]=p=>T.value=p),"data-testid":"egress-input-switch"},{label:u(()=>[n(o(e(s).t("zones.form.zoneEgressEnabledLabel")),1)]),_:1},8,["modelValue"])])])],64)):N("",!0),n(),t("h2",Ee,o(e(s).t("zones.form.connectZone")),1),n(),k.value==="universal"?(v(),A(re,{key:1,zone:r.value,token:e(Z),"base64-encoded-token":e($)},null,8,["zone","token","base64-encoded-token"])):(v(),A(oe,{key:2,zone:r.value,"zone-ingress-enabled":I.value,"zone-egress-enabled":T.value,token:e(Z),"base64-encoded-token":e($)},null,8,["zone","zone-ingress-enabled","zone-egress-enabled","token","base64-encoded-token"])),n(),l(J,{"loader-function":O,"has-error":E.value!==null,"can-complete":f.value},{"loading-title":u(()=>[n(o(e(s).t("zones.form.scan.waitTitle")),1)]),"complete-title":u(()=>[n(o(e(s).t("zones.form.scan.completeTitle")),1)]),"complete-content":u(()=>[t("p",null,o(e(s).t("zones.form.scan.completeDescription",{name:m.value})),1),n(),t("p",Ze,[l(e(w),{appearance:"primary",to:{name:"zone-detail-view",params:{zone:m.value}}},{default:u(()=>[n(o(e(s).t("zones.form.scan.completeButtonLabel",{name:m.value})),1)]),_:1},8,["to"])])]),"error-title":u(()=>[t("h3",null,o(e(s).t("zones.form.scan.errorTitle")),1)]),"error-content":u(()=>[t("p",null,o(e(s).t("zones.form.scan.errorDescription")),1)]),_:1},8,["has-error","can-complete"])])):N("",!0)])],64))}});const Se=V(Ce,[["__scopeId","data-v-c13ba094"]]);export{Se as default};
