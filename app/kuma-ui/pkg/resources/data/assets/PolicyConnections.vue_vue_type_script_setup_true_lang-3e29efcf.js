import{d as N,l as k,r as t,j as x,n as D,a5 as T,K as q,o as u,c,a as f,w as h,f as l,b as p,a7 as L,a8 as P,F as S,z as V,y as b,u as B}from"./index-be86debd.js";import{_ as F}from"./LabelList.vue_vue_type_style_index_0_lang-6231c603.js";const A=l("h4",null,"Dataplanes",-1),K=N({__name:"PolicyConnections",props:{mesh:{type:String,required:!0},policyType:{type:String,required:!0},policyName:{type:String,required:!0}},setup(v){const n=v,_=k(),d=t(!1),o=t(!0),r=t(!1),m=t([]),i=t(""),g=x(()=>{const s=i.value.toLowerCase();return m.value.filter(({dataplane:e})=>e.name.toLowerCase().includes(s))});D(()=>n.policyName,function(){y()}),T(function(){y()});async function y(){r.value=!1,o.value=!0;try{const{items:s,total:e}=await _.getPolicyConnections({mesh:n.mesh,policyType:n.policyType,policyName:n.policyName});d.value=e>0,m.value=s??[]}catch{r.value=!0}finally{o.value=!1}}return(s,e)=>{const w=q("router-link");return u(),c("div",null,[f(F,{"has-error":r.value,"is-loading":o.value,"is-empty":!d.value},{default:h(()=>[l("ul",null,[l("li",null,[A,p(),L(l("input",{id:"dataplane-search","onUpdate:modelValue":e[0]||(e[0]=a=>i.value=a),type:"text",class:"k-input mb-4",placeholder:"Filter by name",required:"","data-testid":"dataplane-search-input"},null,512),[[P,i.value]]),p(),(u(!0),c(S,null,V(B(g),(a,C)=>(u(),c("p",{key:C,class:"my-1","data-testid":"dataplane-name"},[f(w,{to:{name:"data-plane-detail-view",params:{mesh:a.dataplane.mesh,dataPlane:a.dataplane.name}}},{default:h(()=>[p(b(a.dataplane.name),1)]),_:2},1032,["to"])]))),128))])])]),_:1},8,["has-error","is-loading","is-empty"])])}}});export{K as _};
