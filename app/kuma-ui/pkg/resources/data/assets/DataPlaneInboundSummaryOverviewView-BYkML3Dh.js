import{d as I,r as s,p as u,o as a,w as e,b as n,l,e as o,c as i,q as k,O as p,t as y,m as N,F as M,V as Y,N as g,L as C,Y as q}from"./index-C2xkzb-Z.js";import{A as E,a as T}from"./AccordionList-qN9Ag1Nz.js";import{P as G}from"./PolicyTypeTag-BaFmSF0f.js";import{T as H}from"./TagList-D24c2Pno.js";import{R as J}from"./RuleMatchers-yNTrkhVy.js";const K={class:"stack-with-borders"},Q={key:0,class:"mt-6"},U={class:"mt-4"},W={class:"stack-with-borders"},Z={class:"mt-2"},st=I({__name:"DataPlaneInboundSummaryOverviewView",props:{data:{},routeName:{}},setup($){const r=$;return(tt,t)=>{const V=s("XBadge"),w=s("XCopyButton"),z=s("XAction"),R=s("XCodeBlock"),L=s("XCard"),O=s("DataCollection"),S=s("DataLoader"),X=s("DataSource"),h=s("AppView"),F=s("RouteView");return a(),u(F,{params:{mesh:"",proxy:"",connection:""},name:r.routeName},{default:e(({t:A,route:B,uri:P})=>[n(h,null,{default:e(()=>[l("div",K,[n(p,{layout:"horizontal"},{title:e(()=>t[0]||(t[0]=[o(`
            Tags
          `)])),body:e(()=>[n(H,{tags:r.data.tags,alignment:"right"},null,8,["tags"])]),_:1,__:[1]}),t[11]||(t[11]=o()),n(p,{layout:"horizontal"},{title:e(()=>[o(y(A("http.api.property.state")),1)]),body:e(()=>[n(V,{appearance:r.data.state==="Ready"?"success":"danger"},{default:e(()=>[o(y(A(`http.api.value.${r.data.state}`)),1)]),_:2},1032,["appearance"])]),_:2,__:[2]},1024),t[12]||(t[12]=o()),n(p,{layout:"horizontal"},{title:e(()=>t[3]||(t[3]=[o(`
            Protocol
          `)])),body:e(()=>[n(V,{appearance:"info"},{default:e(()=>[o(y(A(`http.api.value.${r.data.protocol}`)),1)]),_:2},1024)]),_:2,__:[4]},1024),t[13]||(t[13]=o()),n(p,{layout:"horizontal"},{title:e(()=>t[5]||(t[5]=[o(`
            Address
          `)])),body:e(()=>[n(w,{text:`${r.data.addressPort}`},null,8,["text"])]),_:1,__:[6]}),t[14]||(t[14]=o()),r.data.serviceAddressPort.length>0?(a(),u(p,{key:0,layout:"horizontal"},{title:e(()=>t[7]||(t[7]=[o(`
            Service Address
          `)])),body:e(()=>[n(w,{text:`${r.data.serviceAddressPort}`},null,8,["text"])]),_:1,__:[8]})):k("",!0),t[15]||(t[15]=o()),r.data.portName.length>0?(a(),u(p,{key:1,layout:"horizontal"},{title:e(()=>t[9]||(t[9]=[o(`
            Name
          `)])),body:e(()=>[n(w,{text:`${r.data.portName}`},null,8,["text"])]),_:1,__:[10]})):k("",!0)]),t[27]||(t[27]=o()),r.data?(a(),i("div",Q,[t[25]||(t[25]=l("h3",null,"Rules",-1)),t[26]||(t[26]=o()),n(X,{src:P(N(M),"/policy-types",{})},{default:e(({data:v,error:j})=>[n(X,{src:P(N(Y),"/meshes/:mesh/rules/for/:dataplane",{mesh:B.params.mesh,dataplane:B.params.proxy})},{default:e(({data:x,error:D})=>[n(S,{data:[v,x],errors:[j,D]},{default:e(()=>[(a(!0),i(g,null,C([Object.groupBy((v==null?void 0:v.policyTypes)??[],({name:_})=>_)],_=>(a(),u(O,{key:`${typeof _}`,predicate:f=>{var m,c;return(f.ruleType==="inbound"||f.ruleType==="from"&&!((c=(m=_[f.type])==null?void 0:m[0])!=null&&c.policy.isFromAsRules))&&Number(f.inbound.port)===Number(B.params.connection.split("_")[1])},items:[...x.rules,...x.inboundRules]},{default:e(({items:f})=>[l("div",U,[n(E,{"initially-open":0,"multiple-open":"",class:"stack"},{default:e(()=>[(a(!0),i(g,null,C(Object.groupBy(f,m=>m.type),(m,c)=>(a(),u(L,{key:c},{default:e(()=>[n(T,null,{"accordion-header":e(()=>[n(G,{"policy-type":c},{default:e(()=>[o(y(c)+" ("+y(m.length)+`)
                              `,1)]),_:2},1032,["policy-type"])]),"accordion-content":e(()=>[l("div",W,[(a(!0),i(g,null,C(m,b=>(a(),i(g,{key:b},[b.matchers.length>0?(a(),u(p,{key:0,layout:"horizontal"},{title:e(()=>t[16]||(t[16]=[o(`
                                      From
                                    `)])),body:e(()=>[l("p",null,[n(J,{items:b.matchers},null,8,["items"])])]),_:2,__:[17]},1024)):k("",!0),t[22]||(t[22]=o()),b.origins.length>0?(a(),u(p,{key:1,layout:"horizontal"},{title:e(()=>t[18]||(t[18]=[o(`
                                      Origin Policies
                                    `)])),body:e(()=>[l("ul",null,[(a(!0),i(g,null,C(b.origins,d=>(a(),i("li",{key:`${d.mesh}-${d.name}`},[_[d.type]?(a(),u(z,{key:0,to:{name:"policy-detail-view",params:{mesh:d.mesh,policyPath:_[d.type][0].path,policy:d.name}}},{default:e(()=>[o(y(d.name),1)]),_:2},1032,["to"])):(a(),i(g,{key:1},[o(y(d.name),1)],64))]))),128))])]),_:2,__:[19]},1024)):k("",!0),t[23]||(t[23]=o()),l("div",null,[t[20]||(t[20]=l("dt",null,`
                                      Config
                                    `,-1)),t[21]||(t[21]=o()),l("dd",Z,[l("div",null,[n(R,{code:N(q).stringify(b.raw),language:"yaml","show-copy-button":!1},null,8,["code"])])])])],64))),128))])]),_:2,__:[24]},1024)]),_:2},1024))),128))]),_:2},1024)])]),_:2},1032,["predicate","items"]))),128))]),_:2},1032,["data","errors"])]),_:2},1032,["src"])]),_:2},1032,["src"])])):k("",!0)]),_:2,__:[27]},1024)]),_:1},8,["name"])}}});export{st as default};
