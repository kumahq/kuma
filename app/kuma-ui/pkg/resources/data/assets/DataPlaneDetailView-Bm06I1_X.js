import{d as X,I as W,G as A,o as s,p as b,w as i,c,H as dt,F as nt,_ as P,e as C,l as o,r as H,b as a,k as pt,q as L,a as p,t as r,m as f,J as v,K as N,n as ct,E as mt,Y as ft,R as Q,Q as V,S as yt,W as gt,L as tt,V as vt,Z as _t,A as bt}from"./index-D0CRkaTO.js";import{B as kt}from"./kong-icons.es678-BaQCPFsE.js";import{S as xt}from"./SummaryView-EQdukgQw.js";import{T as lt}from"./TagList-EX2Pjl8Z.js";const wt=["aria-hidden"],it='<path d="M15 18L21 12L15 6L13.6 7.4L17.2 11H3V13H17.2L13.6 16.6L15 18Z" fill="currentColor"/>',$t=X({__name:"ForwardIcon",props:{title:{type:String,required:!1,default:""},color:{type:String,required:!1,default:"currentColor"},display:{type:String,required:!1,default:"block"},decorative:{type:Boolean,required:!1,default:!1},size:{type:[Number,String],required:!1,default:W,validator:d=>{if(typeof d=="number"&&d>0)return!0;if(typeof d=="string"){const n=String(d).replace(/px/gi,""),e=Number(n);if(e&&!isNaN(e)&&Number.isInteger(e)&&e>0)return!0}return!1}},as:{type:String,required:!1,default:"span"},staticIds:{type:Boolean,default:!1}},setup(d){const n=d,e=A(()=>{if(typeof n.size=="number"&&n.size>0)return`${n.size}px`;if(typeof n.size=="string"){const _=String(n.size).replace(/px/gi,""),m=Number(_);if(m&&!isNaN(m)&&Number.isInteger(m)&&m>0)return`${m}px`}return W}),x=A(()=>({boxSizing:"border-box",color:n.color,display:n.display,flexShrink:"0",height:e.value,lineHeight:"0",width:e.value,pointerEvents:n.decorative?"none":void 0})),B=_=>{const m={},z=Math.random().toString(36).substring(2,12);return _.replace(/id="([^"]+)"/g,(D,w)=>{const h=`${z}-${w}`;return m[w]=h,`id="${h}"`}).replace(/#([^\s^")]+)/g,(D,w)=>m[w]?`#${m[w]}`:D)},t={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","&":"&amp;"},k=_=>_.replace(/[<>"'&]/g,m=>t[m]),I=`${n.title?`<title data-testid="kui-icon-svg-title">${k(n.title)}</title>`:""}${n.staticIds?it:B(it)}`;return(_,m)=>(s(),b(nt(d.as),{"aria-hidden":d.decorative?"true":void 0,class:"kui-icon forward-icon","data-testid":"kui-icon-wrapper-forward-icon",style:dt(x.value),tabindex:d.decorative?"-1":void 0},{default:i(()=>[(s(),c("svg",{"aria-hidden":d.decorative?"true":void 0,"data-testid":"kui-icon-svg-forward-icon",fill:"none",height:"100%",role:"img",viewBox:"0 0 24 24",width:"100%",xmlns:"http://www.w3.org/2000/svg",innerHTML:I},null,8,wt))]),_:1},8,["aria-hidden","style","tabindex"]))}}),St=["aria-hidden"],st='<path d="M12 21V19H19V5H12V3H19C19.55 3 20.0208 3.19583 20.4125 3.5875C20.8042 3.97917 21 4.45 21 5V19C21 19.55 20.8042 20.0208 20.4125 20.4125C20.0208 20.8042 19.55 21 19 21H12ZM10 17L8.625 15.55L11.175 13H3V11H11.175L8.625 8.45L10 7L15 12L10 17Z" fill="currentColor"/>',Ct=X({__name:"GatewayIcon",props:{title:{type:String,required:!1,default:""},color:{type:String,required:!1,default:"currentColor"},display:{type:String,required:!1,default:"block"},decorative:{type:Boolean,required:!1,default:!1},size:{type:[Number,String],required:!1,default:W,validator:d=>{if(typeof d=="number"&&d>0)return!0;if(typeof d=="string"){const n=String(d).replace(/px/gi,""),e=Number(n);if(e&&!isNaN(e)&&Number.isInteger(e)&&e>0)return!0}return!1}},as:{type:String,required:!1,default:"span"},staticIds:{type:Boolean,default:!1}},setup(d){const n=d,e=A(()=>{if(typeof n.size=="number"&&n.size>0)return`${n.size}px`;if(typeof n.size=="string"){const _=String(n.size).replace(/px/gi,""),m=Number(_);if(m&&!isNaN(m)&&Number.isInteger(m)&&m>0)return`${m}px`}return W}),x=A(()=>({boxSizing:"border-box",color:n.color,display:n.display,flexShrink:"0",height:e.value,lineHeight:"0",width:e.value,pointerEvents:n.decorative?"none":void 0})),B=_=>{const m={},z=Math.random().toString(36).substring(2,12);return _.replace(/id="([^"]+)"/g,(D,w)=>{const h=`${z}-${w}`;return m[w]=h,`id="${h}"`}).replace(/#([^\s^")]+)/g,(D,w)=>m[w]?`#${m[w]}`:D)},t={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","&":"&amp;"},k=_=>_.replace(/[<>"'&]/g,m=>t[m]),I=`${n.title?`<title data-testid="kui-icon-svg-title">${k(n.title)}</title>`:""}${n.staticIds?st:B(st)}`;return(_,m)=>(s(),b(nt(d.as),{"aria-hidden":d.decorative?"true":void 0,class:"kui-icon gateway-icon","data-testid":"kui-icon-wrapper-gateway-icon",style:dt(x.value),tabindex:d.decorative?"-1":void 0},{default:i(()=>[(s(),c("svg",{"aria-hidden":d.decorative?"true":void 0,"data-testid":"kui-icon-svg-gateway-icon",fill:"none",height:"100%",role:"img",viewBox:"0 0 24 24",width:"100%",xmlns:"http://www.w3.org/2000/svg",innerHTML:I},null,8,St))]),_:1},8,["aria-hidden","style","tabindex"]))}}),It=["B","kB","MB","GB","TB","PB","EB","ZB","YB"],Bt=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],Tt=["b","kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],Nt=["b","kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],ot=(d,n,e)=>{let x=d;return typeof n=="string"||Array.isArray(n)?x=d.toLocaleString(n,e):(n===!0||e!==void 0)&&(x=d.toLocaleString(void 0,e)),x};function j(d,n){if(!Number.isFinite(d))throw new TypeError(`Expected a finite number, got ${typeof d}: ${d}`);n={bits:!1,binary:!1,space:!0,...n};const e=n.bits?n.binary?Nt:Tt:n.binary?Bt:It,x=n.space?" ":"";if(n.signed&&d===0)return` 0${x}${e[0]}`;const B=d<0,t=B?"-":n.signed?"+":"";B&&(d=-d);let k;if(n.minimumFractionDigits!==void 0&&(k={minimumFractionDigits:n.minimumFractionDigits}),n.maximumFractionDigits!==void 0&&(k={maximumFractionDigits:n.maximumFractionDigits,...k}),d<1){const z=ot(d,n.locale,k);return t+z+x+e[0]}const I=Math.min(Math.floor(n.binary?Math.log(d)/Math.log(1024):Math.log10(d)/3),e.length-1);d/=(n.binary?1024:1e3)**I,k||(d=d.toPrecision(3));const _=ot(Number(d),n.locale,k),m=e[I];return t+_+x+m}const zt={},qt={class:"card"},Lt={class:"title"},Dt={class:"body"};function Vt(d,n){const e=C("KCard");return s(),b(e,{class:"data-card"},{default:i(()=>[o("dl",null,[o("div",qt,[o("dt",Lt,[H(d.$slots,"title",{},void 0,!0)]),n[0]||(n[0]=a()),o("dd",Dt,[H(d.$slots,"default",{},void 0,!0)])])])]),_:3})}const ut=P(zt,[["render",Vt],["__scopeId","data-v-3f9a3cf3"]]),ht={class:"title"},Et={key:0},Mt={"data-testid":"grpc-success"},Ht={"data-testid":"grpc-failure"},Rt={"data-testid":"rq-2xx"},Kt={"data-testid":"rq-4xx"},Xt={"data-testid":"rq-5xx"},At={"data-testid":"connections-total"},Pt={key:0,"data-testid":"bytes-received"},Ut={key:1,"data-testid":"bytes-sent"},Ft=X({__name:"ConnectionCard",props:{protocol:{},service:{default:""},traffic:{default:void 0},direction:{default:"downstream"}},setup(d){const{t:n}=pt(),e=d,x=B=>{const t=B.target;if(B.isTrusted&&t.nodeName.toLowerCase()!=="a"){const k=t.closest(".service-traffic-card, a");if(k){const I=k.nodeName.toLowerCase()==="a"?k:k.querySelector("[data-action]");I!==null&&"click"in I&&typeof I.click=="function"&&I.click()}}};return(B,t)=>{const k=C("XBadge"),I=C("KSkeletonBox");return s(),b(ut,{class:"service-traffic-card",onClick:x},{title:i(()=>[e.service.length>0?(s(),b(lt,{key:0,tags:[{label:"kuma.io/service",value:e.service}]},null,8,["tags"])):L("",!0),t[1]||(t[1]=a()),o("div",ht,[p(k,{class:"protocol",appearance:e.protocol==="passthrough"?"success":"info"},{default:i(()=>[a(r(f(n)(`data-planes.components.service_traffic_card.protocol.${e.protocol}`,{},{defaultMessage:f(n)(`http.api.value.${e.protocol}`)})),1)]),_:1},8,["appearance"]),t[0]||(t[0]=a()),H(B.$slots,"default",{},void 0,!0)])]),default:i(()=>{var _,m,z,D,w,h,U,F,Z,G,O,$;return[t[22]||(t[22]=a()),e.traffic?(s(),c("dl",Et,[e.protocol==="passthrough"?(s(!0),c(v,{key:0},N([["http","tcp"].reduce((u,R)=>{var Y;const E=e.direction;return Object.entries(((Y=e.traffic)==null?void 0:Y[R])||{}).reduce((S,[M,J])=>[`${E}_cx_tx_bytes_total`,`${E}_cx_rx_bytes_total`].includes(M)?{...S,[M]:J+(S[M]??0)}:S,u)},{})],(u,R)=>(s(),c(v,{key:R},[o("div",null,[o("dt",null,r(f(n)("data-planes.components.service_traffic_card.tx")),1),t[2]||(t[2]=a()),o("dd",null,r(f(j)(u.downstream_cx_rx_bytes_total??0)),1)]),t[4]||(t[4]=a()),o("div",null,[o("dt",null,r(f(n)("data-planes.components.service_traffic_card.rx")),1),t[3]||(t[3]=a()),o("dd",null,r(f(j)(u.downstream_cx_tx_bytes_total??0)),1)])],64))),128)):e.protocol==="grpc"?(s(),c(v,{key:1},[o("div",Mt,[o("dt",null,r(f(n)("data-planes.components.service_traffic_card.grpc_success")),1),t[5]||(t[5]=a()),o("dd",null,r(f(n)("common.formats.integer",{value:(_=e.traffic.grpc)==null?void 0:_.success})),1)]),t[7]||(t[7]=a()),o("div",Ht,[o("dt",null,r(f(n)("data-planes.components.service_traffic_card.grpc_failure")),1),t[6]||(t[6]=a()),o("dd",null,r(f(n)("common.formats.integer",{value:(m=e.traffic.grpc)==null?void 0:m.failure})),1)])],64)):e.protocol.startsWith("http")?(s(),c(v,{key:2},[(s(!0),c(v,null,N([((z=e.traffic.http)==null?void 0:z[`${e.direction}_rq_1xx`])??0].filter(u=>u!==0),u=>(s(),c("div",{key:u,"data-testid":"rq-1xx"},[o("dt",null,r(f(n)("data-planes.components.service_traffic_card.1xx")),1),t[8]||(t[8]=a()),o("dd",null,r(f(n)("common.formats.integer",{value:u})),1)]))),128)),t[13]||(t[13]=a()),o("div",Rt,[o("dt",null,r(f(n)("data-planes.components.service_traffic_card.2xx")),1),t[9]||(t[9]=a()),o("dd",null,r(f(n)("common.formats.integer",{value:(D=e.traffic.http)==null?void 0:D[`${e.direction}_rq_2xx`]})),1)]),t[14]||(t[14]=a()),(s(!0),c(v,null,N([((w=e.traffic.http)==null?void 0:w[`${e.direction}_rq_3xx`])??0].filter(u=>u!==0),u=>(s(),c("div",{key:u,"data-testid":"rq-3xx"},[o("dt",null,r(f(n)("data-planes.components.service_traffic_card.3xx")),1),t[10]||(t[10]=a()),o("dd",null,r(f(n)("common.formats.integer",{value:u})),1)]))),128)),t[15]||(t[15]=a()),o("div",Kt,[o("dt",null,r(f(n)("data-planes.components.service_traffic_card.4xx")),1),t[11]||(t[11]=a()),o("dd",null,r(f(n)("common.formats.integer",{value:(h=e.traffic.http)==null?void 0:h[`${e.direction}_rq_4xx`]})),1)]),t[16]||(t[16]=a()),o("div",Xt,[o("dt",null,r(f(n)("data-planes.components.service_traffic_card.5xx")),1),t[12]||(t[12]=a()),o("dd",null,r(f(n)("common.formats.integer",{value:(U=e.traffic.http)==null?void 0:U[`${e.direction}_rq_5xx`]})),1)])],64)):(s(),c(v,{key:3},[o("div",At,[o("dt",null,r(f(n)("data-planes.components.service_traffic_card.cx")),1),t[17]||(t[17]=a()),o("dd",null,r(f(n)("common.formats.integer",{value:(F=e.traffic.tcp)==null?void 0:F[`${e.direction}_cx_total`]})),1)]),t[20]||(t[20]=a()),typeof((Z=e.traffic.tcp)==null?void 0:Z[`${e.direction}_cx_tx_bytes_total`])<"u"?(s(),c("div",Pt,[o("dt",null,r(f(n)("data-planes.components.service_traffic_card.rx")),1),t[18]||(t[18]=a()),o("dd",null,r(f(j)((G=e.traffic.tcp)==null?void 0:G[`${e.direction}_cx_tx_bytes_total`])),1)])):L("",!0),t[21]||(t[21]=a()),typeof((O=e.traffic.tcp)==null?void 0:O[`${e.direction}_cx_rx_bytes_total`])<"u"?(s(),c("div",Ut,[o("dt",null,r(f(n)("data-planes.components.service_traffic_card.tx")),1),t[19]||(t[19]=a()),o("dd",null,r(f(j)(($=e.traffic.tcp)==null?void 0:$[`${e.direction}_cx_rx_bytes_total`])),1)])):L("",!0)],64))])):(s(),b(I,{key:1,width:"10"}))]}),_:3})}}}),et=P(Ft,[["__scopeId","data-v-82875ef3"]]),Zt={class:"body"},Gt=X({__name:"ConnectionGroup",props:{type:{}},setup(d){const n=d;return(e,x)=>{const B=C("KCard");return s(),b(B,{class:ct(["service-traffic-group",`type-${n.type}`])},{default:i(()=>[o("div",Zt,[H(e.$slots,"default",{},void 0,!0)])]),_:3},8,["class"])}}}),at=P(Gt,[["__scopeId","data-v-a119a970"]]),Ot={class:"service-traffic"},Yt={class:"actions"},jt=X({__name:"ConnectionTraffic",setup(d){return(n,e)=>(s(),c("div",Ot,[o("div",Yt,[H(n.$slots,"actions",{},void 0,!0)]),e[0]||(e[0]=a()),p(ut,{class:"header"},{title:i(()=>[H(n.$slots,"title",{},void 0,!0)]),_:3}),e[1]||(e[1]=a()),H(n.$slots,"default",{},void 0,!0)]))}}),rt=P(jt,[["__scopeId","data-v-e6bd176c"]]),Wt={"data-testid":"dataplane-warnings"},Jt=["data-testid","innerHTML"],Qt={key:0,"data-testid":"warning-stats-loading"},te={class:"stack","data-testid":"dataplane-details"},ee={class:"stack"},ae={class:"columns"},ne={class:"status-with-reason"},ie={key:0,class:"columns"},se={class:"columns"},oe={"data-testid":"dataplane-mtls"},re={class:"columns"},de=["innerHTML"],le={key:0,"data-testid":"dataplane-subscriptions"},ue=X({__name:"DataPlaneDetailView",props:{data:{},mesh:{}},setup(d){const n=mt(),e=d,x=A(()=>e.data.warnings.concat(...e.data.isCertExpired?[{kind:"CERT_EXPIRED"}]:[]));return(B,t)=>{const k=C("XTimespan"),I=C("KTooltip"),_=C("DataCollection"),m=C("XAction"),z=C("KCard"),D=C("XEmptyState"),w=C("XLayout"),h=C("XInputSwitch"),U=C("RouterView"),F=C("XAlert"),Z=C("AppView"),G=C("DataSource"),O=C("RouteView");return s(),b(O,{params:{mesh:"",dataPlane:"",subscription:"",inactive:!1},name:"data-plane-detail-view"},{default:i(({route:$,t:u,can:R,me:E,uri:Y})=>[p(G,{src:Y(f(ft),"/meshes/:mesh/dataplanes/:name/stats/:address",{mesh:$.params.mesh,name:$.params.dataPlane,address:e.data.dataplane.networking.inboundAddress})},{default:i(({data:S,error:M,refresh:J})=>[p(Z,null,Q({default:i(()=>[t[52]||(t[52]=a()),o("div",te,[p(z,null,{default:i(()=>[o("div",ee,[p(k,{start:u("common.formats.datetime",{value:Date.parse(e.data.creationTime)}),end:u("common.formats.datetime",{value:Date.parse(e.data.modificationTime)})},null,8,["start","end"]),t[18]||(t[18]=a()),o("div",ae,[p(V,null,{title:i(()=>[a(r(u("http.api.property.status")),1)]),body:i(()=>[o("div",ne,[p(yt,{status:e.data.status},null,8,["status"]),t[4]||(t[4]=a()),e.data.dataplaneType==="standard"?(s(),b(_,{key:0,items:e.data.dataplane.networking.inbounds,predicate:l=>l.state!=="Ready",empty:!1},{default:i(({items:l})=>[p(I,{class:"reason-tooltip"},{content:i(()=>[o("ul",null,[(s(!0),c(v,null,N(l,y=>(s(),c("li",{key:`${y.service}:${y.port}`},r(u("data-planes.routes.item.unhealthy_inbound",{service:y.service,port:y.port})),1))),128))])]),default:i(()=>[p(f(kt),{color:f(gt),size:f(tt)},null,8,["color","size"]),t[3]||(t[3]=a())]),_:2},1024)]),_:2},1032,["items","predicate"])):L("",!0)])]),_:2},1024),t[12]||(t[12]=a()),R("use zones")&&e.data.zone?(s(),b(V,{key:0},{title:i(()=>t[6]||(t[6]=[a(`
                    Zone
                  `)])),body:i(()=>[p(m,{to:{name:"zone-cp-detail-view",params:{zone:e.data.zone}}},{default:i(()=>[a(r(e.data.zone),1)]),_:1},8,["to"])]),_:1})):L("",!0),t[13]||(t[13]=a()),p(V,null,{title:i(()=>t[8]||(t[8]=[a(`
                    Type
                  `)])),body:i(()=>[a(r(u(`data-planes.type.${e.data.dataplaneType}`)),1)]),_:2},1024),t[14]||(t[14]=a()),e.data.namespace.length>0?(s(),b(V,{key:1},{title:i(()=>t[10]||(t[10]=[a(`
                    Namespace
                  `)])),body:i(()=>[a(r(e.data.namespace),1)]),_:1})):L("",!0)]),t[19]||(t[19]=a()),e.data.dataplane.networking.gateway?(s(),c("div",ie,[p(V,null,{title:i(()=>[a(r(u("http.api.property.tags")),1)]),body:i(()=>[p(lt,{tags:e.data.dataplane.networking.gateway.tags},null,8,["tags"])]),_:2},1024),t[17]||(t[17]=a()),p(V,null,{title:i(()=>[a(r(u("http.api.property.address")),1)]),body:i(()=>[p(vt,{text:`${e.data.dataplane.networking.address}`},null,8,["text"])]),_:2},1024)])):L("",!0)])]),_:2},1024),t[48]||(t[48]=a()),p(z,{class:"traffic","data-testid":"dataplane-traffic"},{default:i(()=>[o("div",se,[p(rt,null,{title:i(()=>[p(f($t),{display:"inline-block",decorative:"",size:f(tt)},null,8,["size"]),t[20]||(t[20]=a(`
                  Inbounds
                `))]),default:i(()=>[t[22]||(t[22]=a()),p(at,{type:"inbound","data-testid":"dataplane-inbounds"},{default:i(()=>[(s(!0),c(v,null,N([e.data.dataplane.networking.type==="gateway"?Object.entries((S==null?void 0:S.inbounds)??{}).reduce((l,[y,g])=>{var q;const T=y.split("_").at(-1);return T===(((q=e.data.dataplane.networking.admin)==null?void 0:q.port)??"9901")?l:l.concat([{...e.data.dataplane.networking.inbounds[0],name:y,port:Number(T),protocol:["http","tcp"].find(K=>typeof g[K]<"u")??"tcp",addressPort:`${e.data.dataplane.networking.inbounds[0].address}:${T}`}])},[]):e.data.dataplane.networking.inbounds],l=>(s(),b(_,{key:l,items:l,predicate:y=>y.port!==49151},Q({default:i(({items:y})=>[p(w,{type:"stack",size:"small"},{default:i(()=>[(s(!0),c(v,null,N(y,g=>(s(),c(v,{key:`${g.name}`},[(s(!0),c(v,null,N([S==null?void 0:S.inbounds[g.name]],T=>(s(),b(et,{key:T,"data-testid":"dataplane-inbound",protocol:g.protocol,service:R("use service-insights",e.mesh)?g.tags["kuma.io/service"]:"",traffic:typeof M>"u"?T:{name:"",protocol:g.protocol,port:`${g.port}`}},{default:i(()=>[p(m,{"data-action":"",to:{name:(q=>q.includes("bound")?q.replace("-outbound-","-inbound-"):"connection-inbound-summary-overview-view")(String(f(n).name)),params:{connection:g.name},query:{inactive:$.params.inactive}}},{default:i(()=>[a(r(g.name.replace("localhost","").replace("_",":")),1)]),_:2},1032,["to"])]),_:2},1032,["protocol","service","traffic"]))),128))],64))),128))]),_:2},1024)]),_:2},[e.data.dataplaneType==="delegated"?{name:"empty",fn:i(()=>[p(D,null,{default:i(()=>[o("p",null,`
                            This proxy is a delegated gateway therefore `+r(u("common.product.name"))+` does not have any visibility into inbounds for this gateway.
                          `,1)]),_:2},1024)]),key:"0"}:void 0]),1032,["items","predicate"]))),128))]),_:2},1024)]),_:2},1024),t[32]||(t[32]=a()),p(rt,null,Q({title:i(()=>[p(f(Ct),{display:"inline-block",decorative:"",size:f(tt)},null,8,["size"]),t[26]||(t[26]=a()),t[27]||(t[27]=o("span",null,"Outbounds",-1))]),default:i(()=>[t[30]||(t[30]=a()),t[31]||(t[31]=a()),typeof M>"u"?(s(),c(v,{key:0},[typeof S>"u"?(s(),b(_t,{key:0})):(s(),c(v,{key:1},N(["upstream"],l=>(s(),c(v,{key:l},[p(at,{type:"passthrough"},{default:i(()=>[p(et,{protocol:"passthrough",traffic:S.passthrough},{default:i(()=>t[28]||(t[28]=[a(`
                          Non mesh traffic
                        `)])),_:2},1032,["traffic"])]),_:2},1024),t[29]||(t[29]=a()),p(_,{predicate:$.params.inactive?void 0:([y,g])=>{var T,q;return((typeof g.tcp<"u"?(T=g.tcp)==null?void 0:T[`${l}_cx_rx_bytes_total`]:(q=g.http)==null?void 0:q[`${l}_rq_total`])??0)>0},items:Object.entries(S.outbounds)},{default:i(({items:y})=>[y.length>0?(s(),b(at,{key:0,type:"outbound","data-testid":"dataplane-outbounds"},{default:i(()=>[(s(),c(v,null,N([/-([a-f0-9]){16}$/],g=>p(w,{key:g,type:"stack",size:"small"},{default:i(()=>[(s(!0),c(v,null,N(y,([T,q])=>(s(),b(et,{key:`${T}`,"data-testid":"dataplane-outbound",protocol:["grpc","http","tcp"].find(K=>typeof q[K]<"u")??"tcp",traffic:q,service:q.$resourceMeta.type===""?T.replace(g,""):void 0,direction:l},{default:i(()=>[p(m,{"data-action":"",to:{name:(K=>K.includes("bound")?K.replace("-inbound-","-outbound-"):"connection-outbound-summary-overview-view")(String(f(n).name)),params:{connection:T},query:{inactive:$.params.inactive}}},{default:i(()=>[a(r(T),1)]),_:2},1032,["to"])]),_:2},1032,["protocol","traffic","service","direction"]))),128))]),_:2},1024)),64))]),_:2},1024)):L("",!0)]),_:2},1032,["predicate","items"])],64))),64))],64)):(s(),b(D,{key:1}))]),_:2},[S?{name:"actions",fn:i(()=>[p(h,{modelValue:$.params.inactive,"onUpdate:modelValue":l=>$.params.inactive=l,"data-testid":"dataplane-outbounds-inactive-toggle"},{label:i(()=>t[23]||(t[23]=[a(`
                      Show inactive
                    `)])),_:2},1032,["modelValue","onUpdate:modelValue"]),t[25]||(t[25]=a()),p(m,{action:"refresh",appearance:"primary",onClick:J},{default:i(()=>t[24]||(t[24]=[a(`
                    Refresh
                  `)])),_:2},1032,["onClick"])]),key:"0"}:void 0]),1024)])]),_:2},1024),t[49]||(t[49]=a()),p(U,null,{default:i(l=>[l.route.name!==$.name?(s(),b(xt,{key:0,width:"670px",onClose:function(){$.replace({name:"data-plane-detail-view",params:{mesh:$.params.mesh,dataPlane:$.params.dataPlane},query:{inactive:$.params.inactive?null:void 0}})}},{default:i(()=>[(s(),b(nt(l.Component),{data:$.params.subscription.length>0?e.data.dataplaneInsight.subscriptions:l.route.name.includes("-inbound-")?e.data.dataplane.networking.inbounds:(S==null?void 0:S.outbounds)||{},"dataplane-overview":e.data},null,8,["data","dataplane-overview"]))]),_:2},1032,["onClose"])):L("",!0)]),_:2},1024),t[50]||(t[50]=a()),o("div",oe,[o("h2",null,r(u("data-planes.routes.item.mtls.title")),1),t[42]||(t[42]=a()),e.data.dataplaneInsight.mTLS?(s(!0),c(v,{key:0},N([e.data.dataplaneInsight.mTLS],l=>(s(),b(z,{key:l,class:"mt-4"},{default:i(()=>[o("div",re,[p(V,null,{title:i(()=>[a(r(u("data-planes.routes.item.mtls.expiration_time.title")),1)]),body:i(()=>[a(r(u("common.formats.datetime",{value:Date.parse(l.certificateExpirationTime)})),1)]),_:2},1024),t[38]||(t[38]=a()),p(V,null,{title:i(()=>[a(r(u("data-planes.routes.item.mtls.generation_time.title")),1)]),body:i(()=>[a(r(u("common.formats.datetime",{value:Date.parse(l.lastCertificateRegeneration)})),1)]),_:2},1024),t[39]||(t[39]=a()),p(V,null,{title:i(()=>[a(r(u("data-planes.routes.item.mtls.regenerations.title")),1)]),body:i(()=>[a(r(u("common.formats.integer",{value:l.certificateRegenerations})),1)]),_:2},1024),t[40]||(t[40]=a()),p(V,null,{title:i(()=>[a(r(u("data-planes.routes.item.mtls.issued_backend.title")),1)]),body:i(()=>[a(r(l.issuedBackend),1)]),_:2},1024),t[41]||(t[41]=a()),p(V,null,{title:i(()=>[a(r(u("data-planes.routes.item.mtls.supported_backends.title")),1)]),body:i(()=>[o("ul",null,[(s(!0),c(v,null,N(l.supportedBackends,y=>(s(),c("li",{key:y},r(y),1))),128))])]),_:2},1024)])]),_:2},1024))),128)):(s(),b(F,{key:1,class:"mt-4",appearance:"warning"},{default:i(()=>[o("div",{innerHTML:u("data-planes.routes.item.mtls.disabled")},null,8,de)]),_:2},1024))]),t[51]||(t[51]=a()),e.data.dataplaneInsight.subscriptions.length>0?(s(),c("div",le,[o("h2",null,r(u("data-planes.routes.item.subscriptions.title")),1),t[47]||(t[47]=a()),p(bt,{headers:[{...E.get("headers.instanceId"),label:u("http.api.property.instanceId"),key:"instanceId"},{...E.get("headers.version"),label:u("http.api.property.version"),key:"version"},{...E.get("headers.connected"),label:u("http.api.property.connected"),key:"connected"},{...E.get("headers.disconnected"),label:u("http.api.property.disconnected"),key:"disconnected"},{...E.get("headers.responses"),label:u("http.api.property.responses"),key:"responses"}],"is-selected-row":l=>l.id===$.params.subscription,items:e.data.dataplaneInsight.subscriptions.map((l,y,g)=>g[g.length-(y+1)]),onResize:E.set},{instanceId:i(({row:l})=>[p(m,{"data-action":"",to:{name:"data-plane-subscription-summary-view",params:{subscription:l.id}}},{default:i(()=>[a(r(l.controlPlaneInstanceId),1)]),_:2},1032,["to"])]),version:i(({row:l})=>{var y,g;return[a(r(((g=(y=l.version)==null?void 0:y.kumaDp)==null?void 0:g.version)??"-"),1)]}),connected:i(({row:l})=>[a(r(u("common.formats.datetime",{value:Date.parse(l.connectTime??"")})),1)]),disconnected:i(({row:l})=>[l.disconnectTime?(s(),c(v,{key:0},[a(r(u("common.formats.datetime",{value:Date.parse(l.disconnectTime)})),1)],64)):L("",!0)]),responses:i(({row:l})=>{var y;return[(s(!0),c(v,null,N([((y=l.status)==null?void 0:y.total)??{}],g=>(s(),c(v,null,[a(r(g.responsesSent)+"/"+r(g.responsesAcknowledged),1)],64))),256))]}),_:2},1032,["headers","is-selected-row","items","onResize"])])):L("",!0)])]),_:2},[x.value.length>0||M?{name:"notifications",fn:i(()=>[o("ul",Wt,[(s(!0),c(v,null,N(x.value,l=>(s(),c("li",{key:l.kind,"data-testid":`warning-${l.kind}`,innerHTML:u(`common.warnings.${l.kind}`,l.payload)},null,8,Jt))),128)),t[2]||(t[2]=a()),M?(s(),c("li",Qt,[t[0]||(t[0]=a(`
              The below view is not enhanced with runtime stats (Error loading stats: `)),o("strong",null,r(M.toString()),1),t[1]||(t[1]=a(`)
            `))])):L("",!0)])]),key:"0"}:void 0]),1024)]),_:2},1032,["src"])]),_:1})}}}),ye=P(ue,[["__scopeId","data-v-d20bb760"]]);export{ye as default};
