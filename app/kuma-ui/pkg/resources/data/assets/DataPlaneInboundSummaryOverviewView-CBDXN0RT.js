import{d as q,r as p,p as d,o,w as r,b as l,c as s,e as n,q as k,N as u,L as m,l as e,t as g,m as v,F as T,ab as E,Y as K}from"./index-B9Y98Ayj.js";import{A as M,a as G}from"./AccordionList-COEydcN-.js";import{P as H}from"./PolicyTypeTag-BrltUYOK.js";import{T as J}from"./TagList-DOLhrySD.js";const Q={key:0},U={key:1},W={colspan:"2"},nt=q({__name:"DataPlaneInboundSummaryOverviewView",props:{data:{},dataPlaneOverview:{},routeName:{}},setup(_){const i=_;return(Z,t)=>{const O=p("XBadge"),X=p("XCopyButton"),B=p("XTable"),$=p("XAction"),D=p("XCodeBlock"),x=p("XLayout"),b=p("XCard"),z=p("DataLoader"),C=p("DataSource"),F=p("AppView"),I=p("RouteView");return o(),d(I,{params:{mesh:"",proxy:"",connection:""},name:i.routeName},{default:r(({t:R,route:P,uri:N})=>[l(F,null,{default:r(()=>[l(x,{type:"stack"},{default:r(()=>[(o(!0),s(u,null,m([i.dataPlaneOverview.dataplane.networking.inbounds.find(a=>a.port===i.data.port)],a=>(o(),s(u,{key:typeof a},[a?(o(),d(B,{key:0,variant:"kv"},{default:r(()=>[e("tr",null,[t[0]||(t[0]=e("th",{scope:"row"},`
                Tags
              `,-1)),t[1]||(t[1]=n()),e("td",null,[l(J,{tags:a.tags,alignment:"right"},null,8,["tags"])])]),t[10]||(t[10]=n()),e("tr",null,[t[2]||(t[2]=e("th",{scope:"row"},`
                Protocol
              `,-1)),t[3]||(t[3]=n()),e("td",null,[l(O,{appearance:"info"},{default:r(()=>[n(g(R(`http.api.value.${a.protocol}`)),1)]),_:2},1024)])]),t[11]||(t[11]=n()),e("tr",null,[t[4]||(t[4]=e("th",{scope:"row"},`
                Address
              `,-1)),t[5]||(t[5]=n()),e("td",null,[l(X,{text:`${a.addressPort}`},null,8,["text"])])]),t[12]||(t[12]=n()),a.serviceAddressPort.length>0?(o(),s("tr",Q,[t[6]||(t[6]=e("th",{scope:"row"},`
                Service address
              `,-1)),t[7]||(t[7]=n()),e("td",null,[l(X,{text:`${a.serviceAddressPort}`},null,8,["text"])])])):k("",!0),t[13]||(t[13]=n()),a.portName.length>0?(o(),s("tr",U,[t[8]||(t[8]=e("th",{scope:"row"},`
                Name
              `,-1)),t[9]||(t[9]=n()),e("td",null,[l(X,{text:`${a.portName}`},null,8,["text"])])])):k("",!0)]),_:2},1024)):k("",!0)],64))),128)),t[22]||(t[22]=n()),i.data?(o(),d(x,{key:0,type:"stack",size:"small"},{default:r(()=>[t[20]||(t[20]=e("h3",null,"Policies",-1)),t[21]||(t[21]=n()),l(C,{src:N(v(T),"/policy-types",{})},{default:r(({data:a,error:Y})=>[l(C,{src:N(v(T),"/meshes/:mesh/dataplanes/:name/policies/for/inbound/:kri",{mesh:P.params.mesh,name:P.params.proxy,kri:i.data.kri})},{default:r(({data:L,error:j})=>[l(z,{data:[a,L],errors:[Y,j]},{default:r(()=>[(o(!0),s(u,null,m([Object.groupBy(a?.policyTypes??[],({name:y})=>y)],y=>(o(),d(M,{key:`${typeof y}`,"initially-open":0,"multiple-open":"",class:"stack","data-testid":"inbound-policies-rules"},{default:r(()=>[(o(!0),s(u,null,m(L?.policies||[],({rules:V,kind:f,origins:c})=>(o(),d(b,{key:f},{default:r(()=>[l(G,null,{"accordion-header":r(()=>[l(H,{"policy-type":f},{default:r(()=>[n(g(f)+" ("+g(V.length)+`)
                            `,1)]),_:2},1032,["policy-type"])]),"accordion-content":r(()=>[l(B,{variant:"kv"},{default:r(()=>[(o(!0),s(u,null,m(V,S=>(o(),s(u,{key:S},[c.length>0?(o(),s(u,{key:0},[e("tr",null,[t[14]||(t[14]=e("th",{scope:"row"},`
                                      Origin policies
                                    `,-1)),t[15]||(t[15]=n()),e("td",null,[e("ul",null,[(o(!0),s(u,null,m(c,w=>(o(),s("li",{key:w.kri},[(o(!0),s(u,null,m([v(E).fromString(w.kri)],A=>(o(),s(u,{key:typeof A},[y[f]?(o(),d($,{key:0,to:{name:"policy-detail-view",params:{mesh:A.mesh,policyPath:y[f][0].path,policy:A.name}}},{default:r(()=>[n(g(w.kri),1)]),_:2},1032,["to"])):(o(),s(u,{key:1},[n(g(w.kri),1)],64))],64))),128))]))),128))])])]),t[18]||(t[18]=n()),e("tr",null,[e("td",W,[l(x,{type:"stack",size:"small"},{default:r(()=>[t[16]||(t[16]=e("span",null,"Config",-1)),t[17]||(t[17]=n()),l(D,{code:v(K).stringify(S.conf),language:"yaml","show-copy-button":!1},null,8,["code"])]),_:2},1024)])])],64)):k("",!0)],64))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024))),128))]),_:2},1032,["data","errors"])]),_:2},1032,["src"])]),_:2},1032,["src"])]),_:2},1024)):k("",!0)]),_:2},1024)]),_:2},1024)]),_:1},8,["name"])}}});export{nt as default};
