import{d as B,r as l,p as m,o as r,w as e,b as o,e as a,q as c,O as z,t,c as h,l as w,m as L,F as P,K as T,N as q,y as F}from"./index-BRjpzT8y.js";const G={key:0},S=B({__name:"PolicyDetailView",props:{data:{}},setup(k){const n=k;return(E,s)=>{const u=l("XBadge"),f=l("XAction"),C=l("XAboutCard"),b=l("XActionGroup"),v=l("XDrawer"),X=l("RouterView"),R=l("DataCollection"),V=l("DataLoader"),A=l("XCard"),D=l("AppView"),x=l("RouteView");return r(),m(x,{name:"policy-detail-view",params:{page:1,size:Number,s:"",mesh:"",policy:"",policyPath:"",proxy:""}},{default:e(({route:p,t:d,uri:N,can:g,me:y})=>[o(D,null,{default:e(()=>[o(C,{title:d("policies.detail.about.title"),created:n.data.creationTime,modified:n.data.modificationTime},{default:e(()=>[o(z,{layout:"horizontal"},{title:e(()=>[a(t(d("http.api.property.type")),1)]),body:e(()=>[o(u,{appearance:"decorative"},{default:e(()=>[a(t(n.data.type),1)]),_:1})]),_:2},1024),s[5]||(s[5]=a()),n.data.namespace.length>0?(r(),m(z,{key:0,layout:"horizontal"},{title:e(()=>[a(t(d("http.api.property.namespace")),1)]),body:e(()=>[o(u,{appearance:"decorative"},{default:e(()=>[a(t(n.data.namespace),1)]),_:1})]),_:2},1024)):c("",!0),s[6]||(s[6]=a()),g("use zones")&&n.data.zone?(r(),m(z,{key:1,layout:"horizontal"},{title:e(()=>[a(t(d("http.api.property.zone")),1)]),body:e(()=>[o(u,{appearance:"decorative"},{default:e(()=>[o(f,{to:{name:"zone-cp-detail-view",params:{zone:n.data.zone}}},{default:e(()=>[a(t(n.data.zone),1)]),_:1},8,["to"])]),_:1})]),_:2},1024)):c("",!0),s[7]||(s[7]=a()),n.data.spec?(r(),m(z,{key:2,layout:"horizontal"},{title:e(()=>[a(t(d("http.api.property.targetRef")),1)]),body:e(()=>[n.data.spec.targetRef?(r(),m(u,{key:0,appearance:"neutral"},{default:e(()=>[a(t(n.data.spec.targetRef.kind),1),n.data.spec.targetRef.name?(r(),h("span",G,[s[3]||(s[3]=a(":",-1)),w("b",null,t(n.data.spec.targetRef.name),1)])):c("",!0)]),_:1})):(r(),m(u,{key:1,appearance:"neutral"},{default:e(()=>[a(t(d("http.api.property.mesh")),1)]),_:2},1024))]),_:2},1024)):c("",!0)]),_:2},1032,["title","created","modified"]),s[13]||(s[13]=a()),o(A,null,{title:e(()=>[w("h3",null,t(d("policies.detail.data-planes.title")),1)]),default:e(()=>[s[12]||(s[12]=a()),o(V,{src:N(L(P),"/meshes/:mesh/policy-path/:path/policy/:name/dataplanes",{mesh:p.params.mesh,path:p.params.policyPath,name:n.data.id},{page:p.params.page,size:p.params.size}),variant:"list"},{default:e(({data:_})=>[o(R,{type:"data-planes",items:_.items,page:p.params.page,"page-size":p.params.size,total:_.total,onChange:p.update},{default:e(()=>[o(T,{headers:[{...y.get("headers.name"),label:"Name",key:"name"},{...y.get("headers.namespace"),label:"Namespace",key:"namespace"},...g("use zones")?[{...y.get("headers.zone"),label:"Zone",key:"zone"}]:[],{...y.get("headers.actions"),label:"Actions",key:"actions",hideLabel:!0}],items:_.items,"is-selected-row":i=>i.id===p.params.proxy,onResize:y.set},{name:e(({row:i})=>[o(f,{"data-action":"",to:{name:"data-plane-detail-view",params:{proxy:i.id}}},{default:e(()=>[a(t(i.name),1)]),_:2},1032,["to"])]),namespace:e(({row:i})=>[a(t(i.namespace),1)]),zone:e(({row:i})=>[i.zone?(r(),m(f,{key:0,to:{name:"zone-cp-detail-view",params:{zone:i.zone}}},{default:e(()=>[a(t(i.zone),1)]),_:2},1032,["to"])):(r(),h(q,{key:1},[a(t(d("common.collection.none")),1)],64))]),actions:e(({row:i})=>[o(b,null,{default:e(()=>[o(f,{to:{name:"data-plane-detail-view",params:{proxy:i.id}}},{default:e(()=>[a(t(d("common.collection.actions.view")),1)]),_:2},1032,["to"])]),_:2},1024)]),_:2},1032,["headers","items","is-selected-row","onResize"]),s[11]||(s[11]=a()),o(X,null,{default:e(({Component:i})=>[p.child()?(r(),m(v,{key:0,onClose:K=>p.replace({params:{mesh:p.params.mesh},query:{page:p.params.page,size:p.params.size,s:p.params.s}})},{default:e(()=>[typeof _<"u"?(r(),m(F(i),{key:0,items:_.items},null,8,["items"])):c("",!0)]),_:2},1032,["onClose"])):c("",!0)]),_:2},1024)]),_:2},1032,["items","page","page-size","total","onChange"])]),_:2},1032,["src"])]),_:2},1024)]),_:2},1024)]),_:1})}}});export{S as default};
