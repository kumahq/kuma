import{d as F,p as z,o as p,w as e,b as n,r as l,c as _,e as o,J as k,L as f,q as b,M as g,S as G,t as r,n as J,B as M,y as H,l as B,m as K,A as P,_ as Q}from"./index-Dq_FLkmZ.js";import{S as U}from"./SummaryView-DXK1cYh7.js";const W=F({__name:"ZoneDetailView",props:{data:{}},setup(R){const d=R;return(Y,s)=>{const h=l("XI18n"),$=l("XNotification"),w=l("XBadge"),C=l("XIcon"),I=l("XLayout"),x=l("XAboutCard"),N=l("XAction"),L=l("RouterView"),j=l("XCard"),E=l("AppView"),O=l("DataSource"),Z=l("RouteView");return p(),z(Z,{name:"zone-cp-detail-view",params:{zone:"",subscription:""}},{default:e(({t:i,uri:q,route:y,me:m})=>{var X,V;return[n(O,{src:q(K(P),"/control-plane/outdated/:version",{version:((V=(X=d.data.zoneInsight.version)==null?void 0:X.kumaCp)==null?void 0:V.version)??"-"})},{default:e(({data:c})=>[n(E,{docs:i("zones.href.docs.cta"),notifications:!0},{default:e(()=>{var v,A,D,S,T;return[(p(!0),_(f,null,k([{bool:d.data.zoneInsight.store==="memory",key:"store-memory"},{bool:!((A=(v=d.data.zoneInsight.version)==null?void 0:v.kumaCp)!=null&&A.kumaCpGlobalCompatible),key:"global-cp-incompatible",params:{zoneCpVersion:((S=(D=d.data.zoneInsight.version)==null?void 0:D.kumaCp)==null?void 0:S.version)??"-",globalCpVersion:(c==null?void 0:c.version)??""}},{bool:(((T=d.data.zoneInsight.connectedSubscription)==null?void 0:T.status.total.responsesRejected)??0)>0,key:"global-nack-response"}],({bool:t,key:a,params:u})=>(p(),z($,{key:a,notify:t,"data-testid":`warning-${a}`,uri:`zone-cps.notifications.${a}.${d.data.id}`},{default:e(()=>[n(h,{path:`zone-cps.notifications.${a}`,params:Object.fromEntries(Object.entries(u??{}))},null,8,["path","params"])]),_:2},1032,["notify","data-testid","uri"]))),128)),s[17]||(s[17]=o()),n(I,{"data-testid":"detail-view-details",type:"stack"},{default:e(()=>[n(x,{title:i("zone-cps.detail.about.title"),created:d.data.creationTime,modified:d.data.modificationTime},{default:e(()=>[n(g,{layout:"horizontal"},{title:e(()=>[o(r(i("http.api.property.status")),1)]),body:e(()=>[n(G,{status:d.data.state},null,8,["status"])]),_:2},1024),s[5]||(s[5]=o()),n(g,{layout:"horizontal",class:J({version:!0,outdated:c==null?void 0:c.outdated})},{title:e(()=>[o(r(i("zone-cps.routes.item.version")),1)]),body:e(()=>[n(I,{type:"separated"},{default:e(()=>[n(w,{appearance:(c==null?void 0:c.outdated)===!0?"warning":"decorative"},{default:e(()=>{var t,a;return[o(r(((a=(t=d.data.zoneInsight.version)==null?void 0:t.kumaCp)==null?void 0:a.version)??"—"),1)]}),_:2},1032,["appearance"]),s[1]||(s[1]=o()),(c==null?void 0:c.outdated)===!0?(p(),z(C,{key:0,name:"info"},{default:e(()=>[n(h,{path:"zone-cps.routes.item.version_warning"})]),_:1})):b("",!0)]),_:2},1024)]),_:2},1032,["class"]),s[6]||(s[6]=o()),n(g,{layout:"horizontal"},{title:e(()=>[o(r(i("http.api.property.type")),1)]),body:e(()=>[n(w,{appearance:"decorative"},{default:e(()=>[o(r(i(`common.product.environment.${d.data.zoneInsight.environment||"unknown"}`)),1)]),_:2},1024)]),_:2},1024),s[7]||(s[7]=o()),n(g,{layout:"horizontal"},{title:e(()=>[o(r(i("zone-cps.routes.item.authentication_type")),1)]),body:e(()=>[n(w,{appearance:"decorative"},{default:e(()=>[o(r(d.data.zoneInsight.authenticationType||i("common.not_applicable")),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["title","created","modified"]),s[16]||(s[16]=o()),d.data.zoneInsight.subscriptions.length>0?(p(),z(j,{key:0},{title:e(()=>[B("h2",null,r(i("zone-cps.detail.subscriptions.title")),1)]),default:e(()=>[s[14]||(s[14]=o()),n(I,null,{default:e(()=>[n(h,{path:"zone-cps.detail.subscriptions.description"}),s[13]||(s[13]=o()),n(M,{headers:[{...m.get("headers.connection"),label:" ",key:"connection"},{...m.get("headers.zoneInstanceId"),label:i("zone-cps.routes.items.headers.zoneInstanceId"),key:"zoneInstanceId"},{...m.get("headers.version"),label:i("zone-cps.routes.items.headers.version"),key:"version"},{...m.get("headers.connected"),label:i("zone-cps.routes.items.headers.connected"),key:"connected"},{...m.get("headers.disconnected"),label:i("zone-cps.routes.items.headers.disconnected"),key:"disconnected"},{...m.get("headers.responses"),label:i("zone-cps.routes.items.headers.responses"),key:"responses"}],"is-selected-row":t=>t.id===y.params.subscription,items:d.data.zoneInsight.subscriptions.map((t,a,u)=>u[u.length-(a+1)]),onResize:m.set},{connection:e(({row:t})=>[(p(!0),_(f,null,k([t.connectTime&&!t.disconnectTime?"healthy":"unhealthy"],a=>(p(),z(C,{key:`${a}`,name:a},{default:e(()=>[o(r(i(`common.connection.${a}`)),1)]),_:2},1032,["name"]))),128))]),zoneInstanceId:e(({row:t})=>[n(N,{"data-action":"",to:{name:"zone-cp-subscription-summary-view",params:{subscription:t.id}}},{default:e(()=>[o(r(t.zoneInstanceId),1)]),_:2},1032,["to"])]),version:e(({row:t})=>{var a,u;return[o(r(((u=(a=t.version)==null?void 0:a.kumaCp)==null?void 0:u.version)??"-"),1)]}),connected:e(({row:t})=>[o(r(i("common.formats.datetime",{value:Date.parse(t.connectTime??"")})),1)]),disconnected:e(({row:t})=>[t.disconnectTime?(p(),_(f,{key:0},[o(r(i("common.formats.datetime",{value:Date.parse(t.disconnectTime)})),1)],64)):b("",!0)]),responses:e(({row:t})=>{var a;return[(p(!0),_(f,null,k([((a=t.status)==null?void 0:a.total)??{}],u=>(p(),_(f,null,[o(r(u.responsesSent)+"/"+r(u.responsesAcknowledged),1)],64))),256))]}),_:2},1032,["headers","is-selected-row","items","onResize"])]),_:2},1024),s[15]||(s[15]=o()),n(L,null,{default:e(({Component:t})=>[y.child()?(p(),z(U,{key:0,width:"670px",onClose:function(){y.replace({name:"zone-cp-detail-view",params:{zone:y.params.zone}})}},{default:e(()=>[(p(),z(H(t),{data:d.data.zoneInsight.subscriptions},{default:e(()=>[B("p",null,r(i("zone-cps.routes.item.subscription_intro")),1)]),_:2},1032,["data"]))]),_:2},1032,["onClose"])):b("",!0)]),_:2},1024)]),_:2},1024)):b("",!0)]),_:2},1024)]}),_:2},1032,["docs"])]),_:2},1032,["src"])]}),_:1})}}}),oe=Q(W,[["__scopeId","data-v-8a74b3c4"]]);export{oe as default};
