import{J as b,O as x,o as e,b as m,w as d,h as a,t as h,L as i,d as p,f as c,j as w,F as f,e as I,s as L,_ as B,p as j,cN as C,cH as S,cM as k,K as E}from"./index.5371ce6a.js";import{E as N}from"./EntityTag.8896cfa4.js";import{E as T}from"./EntityURLControl.0333e810.js";import{L as $}from"./LabelList.1ff3344f.js";import{T as D}from"./TabsWidget.f3b99bc7.js";import{Y as O}from"./YamlView.f5ba09e5.js";import{E as V,_ as Y}from"./ErrorBlock.a4674dd2.js";import{_ as A}from"./CodeBlock.2c568e63.js";const H={key:0,class:"entity-tag-list"},M=b({__name:"ExternalServiceDetails",props:{externalService:{type:Object,required:!0}},setup(y){const t=y,v=[{hash:"#overview",title:"Overview"},{hash:"#yaml",title:"YAML"}],r=x(()=>{const{name:l,mesh:o}=t.externalService,n=Object.entries(t.externalService.tags).map(([g,q])=>({label:g,value:q})),s=t.externalService.networking.address,u=t.externalService.networking.tls.enabled?"Enabled":"Disabled";return{name:l,mesh:o,tags:n,address:s,tls:u}}),_=x(()=>L(t.externalService));return(l,o)=>(e(),m(D,{tabs:v,"initial-tab-override":"overview"},{tabHeader:d(()=>[a("div",null,[a("h3",null," Service: "+h(i(r).name),1)]),a("div",null,[p(T,{route:{name:"external-service-detail-view",params:{service:i(r).name,mesh:i(r).mesh}}},null,8,["route"])])]),overview:d(()=>[p($,null,{default:d(()=>[a("div",null,[a("ul",null,[(e(!0),c(f,null,w(i(r),(n,s)=>(e(),c("li",{key:s},[a("h4",null,h(s),1),s==="tags"?(e(),c("div",H,[(e(!0),c(f,null,w(n,(u,g)=>(e(),m(N,{key:g,tag:u},null,8,["tag"]))),128))])):(e(),c(f,{key:1},[I(h(n),1)],64))]))),128))])])]),_:1})]),yaml:d(()=>[p(O,{content:i(_)},null,8,["content"])]),_:1}))}});const F=B(M,[["__scopeId","data-v-b77c5895"]]),K={class:"entity-status__label"},U=b({__name:"ServiceInsightDetails",props:{serviceInsight:{type:Object,required:!0}},setup(y){const t=y,v=[{hash:"#overview",title:"Overview"},{hash:"#yaml",title:"YAML"}],r=x(()=>{const{name:l,mesh:o}=t.serviceInsight,n={title:C[t.serviceInsight.status].title,name:t.serviceInsight.status},{total:s,online:u}=t.serviceInsight.dataplanes,g=`Total: ${s} (online: ${u})`;return{name:l,mesh:o,status:n,dataPlanes:g}}),_=x(()=>L(t.serviceInsight));return(l,o)=>(e(),m(D,{tabs:v,"initial-tab-override":"overview"},{tabHeader:d(()=>[a("div",null,[a("h3",null," Service: "+h(i(r).name),1)]),a("div",null,[p(T,{route:{name:"service-insight-detail-view",params:{service:i(r).name,mesh:i(r).mesh}}},null,8,["route"])])]),overview:d(()=>[p($,null,{default:d(()=>[a("div",null,[a("ul",null,[(e(!0),c(f,null,w(i(r),(n,s)=>(e(),c("li",{key:s},[a("h4",null,h(s),1),s==="status"?(e(),c("div",{key:0,class:j(["entity-status",{"is-offline":n.name==="offline","is-degraded":n.name==="partially_degraded"}])},[a("span",K,h(n.title),1)],2)):(e(),c(f,{key:1},[I(h(n),1)],64))]))),128))])])]),_:1})]),yaml:d(()=>[p(O,{content:i(_)},null,8,["content"])]),_:1}))}}),z={class:"component-frame"},ee=b({__name:"ServiceDetails",props:{type:{type:String,required:!0},name:{type:String,required:!0},mesh:{type:String,required:!0}},setup(y){const t=y,v=S(null),r=S(null),_=S(!0),l=S(null);k(()=>t.mesh,function(){o()}),k(()=>t.name,function(){o()}),o();async function o(){_.value=!0,l.value=null,v.value=null,r.value=null;const n=t.mesh,s=t.name;try{t.type==="ServiceInsight"?v.value=await E.getServiceInsight({mesh:n,name:s}):r.value=await E.getExternalService({mesh:n,name:s})}catch(u){u instanceof Error?l.value=u:console.error(u)}finally{_.value=!1}}return(n,s)=>(e(),c("div",z,[_.value?(e(),m(A,{key:0})):l.value!==null?(e(),m(V,{key:1,error:l.value},null,8,["error"])):v.value!==null?(e(),m(U,{key:2,"service-insight":v.value},null,8,["service-insight"])):r.value!==null?(e(),m(F,{key:3,"external-service":r.value},null,8,["external-service"])):(e(),m(Y,{key:4}))]))}});export{ee as _};
