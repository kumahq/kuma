import{Z as F,c as G,E as T,R as M,e as j,u as q,g as L}from"./kongponents.es-905931b8.js";import{_ as d}from"./CodeBlock.vue_vue_type_style_index_0_lang-72ab3849.js";import{a as R,b as S,u as W}from"./index-913b8be6.js";import{d as I,c as g,o as v,j as h,i as t,t as o,e as n,h as e,g as l,a4 as N,p as P,m as H,w as u,A as x,r as _,F as B,f as A,b as K,S as J}from"./index-566d109f.js";import{_ as C}from"./_plugin-vue_export-helper-c27b6911.js";import{_ as Q}from"./EntityScanner.vue_vue_type_script_setup_true_lang-8a0daec1.js";const X=m=>(P("data-v-ec071a34"),m=m(),H(),m),Y={href:"https://helm.sh/docs/intro/install/"},ee=X(()=>t("p",null,"On your local machine, create a namespace in your Kubernetes cluster and pull down the kong Helm repo.",-1)),ne={class:"k-input-label mt-4"},te={class:"mt-4"},oe=I({__name:"ZoneCreateKubernetesInstructions",props:{zone:{type:Object,required:!0},zoneIngressEnabled:{type:Boolean,required:!0},zoneEgressEnabled:{type:Boolean,required:!0},token:{type:String,required:!0},base64EncodedToken:{type:String,required:!0}},setup(m){const s=m,z=R(),r=N(),a=S(),y=g(()=>a.t("zones.form.kubernetes.secret.command",{token:s.base64EncodedToken}).trim()),f=g(()=>a.t("zones.form.kubernetes.connectZone.config",{zoneName:s.zone.name,globalKdsAddress:r(),zoneIngressEnabled:String(s.zoneIngressEnabled),zoneEgressEnabled:String(s.zoneEgressEnabled)}).trim());return(E,p)=>(v(),h("div",null,[t("h3",null,"1. "+o(n(a).t("zones.form.kubernetes.prerequisites.title")),1),e(),t("ul",null,[t("li",null,[t("b",null,o(n(a).t("zones.form.kubernetes.prerequisites.step1Label"))+o(s.zoneIngressEnabled?" "+n(a).t("zones.form.kubernetes.prerequisites.step1LabelAddendum"):""),1),e(`:
        `+o(n(a).t("zones.form.kubernetes.prerequisites.step1Description",{productName:n(z)("KUMA_PRODUCT_NAME")})),1)]),e(),t("li",null,[t("b",null,o(n(a).t("zones.form.kubernetes.prerequisites.step2Label")),1),e(`:
        `+o(n(a).t("zones.form.kubernetes.prerequisites.step2Description")),1)]),e(),t("li",null,[t("a",Y,o(n(a).t("zones.form.kubernetes.prerequisites.step3LinkTitle")),1),e(" "+o(n(a).t("zones.form.kubernetes.prerequisites.step3Tail")),1)])]),e(),t("h3",null,"2. "+o(n(a).t("zones.form.kubernetes.helm.title")),1),e(),ee,e(),t("ol",null,[t("li",null,[e(o(n(a).t("zones.form.kubernetes.helm.step1Description"))+" ",1),l(d,{id:"zone-kubernetes-create-namespace",class:"mt-4",code:n(a).t("zones.form.kubernetes.helm.step1Command"),language:"bash"},null,8,["code"])]),e(),t("li",null,[e(o(n(a).t("zones.form.kubernetes.helm.step2Description"))+" ",1),l(d,{id:"zone-kubernetes-add-charts-repo",class:"mt-4",code:n(a).t("zones.form.kubernetes.helm.step2Command"),language:"bash"},null,8,["code"])]),e(),t("li",null,[e(o(n(a).t("zones.form.kubernetes.helm.step3Description"))+" ",1),l(d,{id:"zone-kubernetes-repo-update",class:"mt-4",code:n(a).t("zones.form.kubernetes.helm.step3Command"),language:"bash"},null,8,["code"])])]),e(),t("h3",null,"3. "+o(n(a).t("zones.form.kubernetes.secret.title")),1),e(),t("p",null,o(n(a).t("zones.form.kubernetes.secret.description1")),1),e(),l(d,{id:"zone-kubernetes-token",class:"mt-4",code:s.token,language:"bash"},null,8,["code"]),e(),t("p",null,o(n(a).t("zones.form.kubernetes.secret.description2")),1),e(),l(d,{id:"zone-kubernetes-create-secret",class:"mt-4",code:y.value,language:"bash"},null,8,["code"]),e(),t("h3",null,"4. "+o(n(a).t("zones.form.kubernetes.connectZone.title")),1),e(),t("p",null,o(n(a).t("zones.form.kubernetes.connectZone.description1")),1),e(),t("span",ne,o(n(a).t("zones.form.kubernetes.connectZone.fileName")),1),e(),l(d,{id:"zone-kubernetes-config-code-block",code:f.value,language:"yaml"},null,8,["code"]),e(),t("p",te,o(n(a).t("zones.form.kubernetes.connectZone.description2")),1),e(),l(d,{id:"zone-kubernetes-command-code-block",class:"mt-4",code:n(a).t("zones.form.kubernetes.connectZone.command"),language:"bash"},null,8,["code"])]))}});const se=C(oe,[["__scopeId","data-v-ec071a34"]]),ae={class:"k-input-label mt-4"},le={class:"mt-4"},re=I({__name:"ZoneCreateUniversalInstructions",props:{zone:{type:Object,required:!0},token:{type:String,required:!0},base64EncodedToken:{type:String,required:!0}},setup(m){const s=m,z=N(),r=S(),a=g(()=>r.t("zones.form.universal.connectZone.config",{zoneName:s.zone.name,globalKdsAddress:z(),token:s.base64EncodedToken}).trim());return(y,f)=>(v(),h("div",null,[t("h3",null,"1. "+o(n(r).t("zones.form.universal.copySaveToken.title")),1),e(),l(n(F),{class:"mt-4",appearance:"info"},{alertMessage:u(()=>[e(o(n(r).t("zones.form.universal.copySaveToken.alertMessage")),1)]),_:1}),e(),l(d,{id:"zone-kubernetes-token",class:"mt-4",code:s.token,language:"bash"},null,8,["code"]),e(),t("h3",null,"2. "+o(n(r).t("zones.form.universal.connectZone.title")),1),e(),t("p",null,o(n(r).t("zones.form.universal.connectZone.description1")),1),e(),t("span",ae,o(n(r).t("zones.form.universal.connectZone.fileName")),1),e(),l(d,{id:"zone-universal-config-code-block",class:"mt-4",code:a.value,language:"yaml"},null,8,["code"]),e(),t("p",le,o(n(r).t("zones.form.universal.connectZone.description2")),1),e(),l(d,{id:"zone-universal-connect-command-code-block",class:"mt-4",code:n(r).t("zones.form.universal.connectZone.command"),language:"bash"},null,8,["code"])]))}});const ue=C(re,[["__scopeId","data-v-f425fe71"]]),ie={class:"app-title-bar"},ce={class:"title-wrapper"},de={class:"title"},me={class:"action-list"},pe=I({__name:"WizardTitleBar",setup(m){return(s,z)=>(v(),h("div",ie,[t("div",ce,[l(n(G),{icon:"kong"}),e(),t("span",de,[x(s.$slots,"title",{},void 0,!0)])]),e(),t("div",me,[x(s.$slots,"actions",{},void 0,!0)])]))}});const be=C(pe,[["__scopeId","data-v-6a174e13"]]),_e={class:"form-content"},ve={class:"form-wrapper mt-4"},ze={key:0,class:"form-wrapper mt-4"},fe={class:"k-input-label"},ke={class:"radio-button-group"},ge={class:"k-input-label"},he={class:"radio-button-group"},ye={class:"k-input-label"},Ee={class:"radio-button-group"},Ze={class:"mt-6"},Ie={class:"mt-2"},Ce=I({__name:"ZoneCreateView",setup(m){const s=S(),z=W(),r=_(null),a=_(!1),y=_(null),f=_(!1),E=_(null),p=_(""),k=_("kubernetes"),V=_(!0),w=_(!0),Z=g(()=>r.value!==null&&r.value.token?r.value.token:""),$=g(()=>Z.value!==""?window.btoa(Z.value):""),U=g(()=>p.value!=="");async function D(){a.value=!0,y.value=null;try{r.value=await z.createZone({name:p.value})}catch(c){c instanceof Error?y.value=c:console.error(c)}finally{a.value=!1}}async function O(){f.value=!1,E.value=null;try{const c=await z.getZoneOverview({name:p.value}),i=J(c.zoneInsight);f.value=i==="online"}catch(c){c instanceof Error?E.value=c:console.error(c)}}return(c,i)=>(v(),h(B,null,[l(be,{class:"mb-6"},{title:u(()=>[e(o(n(s).t("zones.create.pageTitle")),1)]),actions:u(()=>[l(n(T),{appearance:"outline",to:{name:"zone-list-view"}},{default:u(()=>[e(o(n(s).t("zones.form.exit")),1)]),_:1})]),_:1}),e(),t("div",_e,[t("h1",null,o(n(s).t("zones.create.pageTitle")),1),e(),t("div",ve,[t("div",null,[l(n(M),{for:"zone-name"},{default:u(()=>[e(o(n(s).t("zones.form.nameLabel"))+` *
        `,1)]),_:1}),e(),l(n(j),{id:"zone-name",modelValue:p.value,"onUpdate:modelValue":i[0]||(i[0]=b=>p.value=b),type:"text",name:"zone-name","data-testid":"name-input",disabled:r.value!==null},null,8,["modelValue","disabled"])]),e(),l(n(T),{appearance:"creation",icon:a.value?"spinner":"plus",disabled:!U.value||a.value||r.value!==null,"data-testid":"create-zone-button",onClick:D},{default:u(()=>[e(o(n(s).t("zones.form.createZoneButtonLabel")),1)]),_:1},8,["icon","disabled"])]),e(),r.value!==null?(v(),h("div",ze,[t("div",null,[t("span",fe,o(n(s).t("zones.form.environmentLabel"))+` *
        `,1),e(),t("div",ke,[l(n(q),{id:"zone-environment-universal",modelValue:k.value,"onUpdate:modelValue":i[1]||(i[1]=b=>k.value=b),"selected-value":"universal",name:"zone-environment","data-testid":"environment-universal-radio-button"},{default:u(()=>[e(o(n(s).t("zones.form.universalLabel")),1)]),_:1},8,["modelValue"]),e(),l(n(q),{id:"zone-environment-kubernetes",modelValue:k.value,"onUpdate:modelValue":i[2]||(i[2]=b=>k.value=b),"selected-value":"kubernetes",name:"zone-environment","data-testid":"environment-kubernetes-radio-button"},{default:u(()=>[e(o(n(s).t("zones.form.kubernetesLabel")),1)]),_:1},8,["modelValue"])])]),e(),k.value==="kubernetes"?(v(),h(B,{key:0},[t("div",null,[t("span",ge,o(n(s).t("zones.form.zoneIngressLabel"))+` *
          `,1),e(),t("div",he,[l(n(L),{id:"zone-ingress-enabled",modelValue:V.value,"onUpdate:modelValue":i[3]||(i[3]=b=>V.value=b),"data-testid":"ingress-input-switch"},{label:u(()=>[e(o(n(s).t("zones.form.zoneIngressEnabledLabel")),1)]),_:1},8,["modelValue"])])]),e(),t("div",null,[t("span",ye,o(n(s).t("zones.form.zoneEgressLabel"))+` *
          `,1),e(),t("div",Ee,[l(n(L),{id:"zone-egress-enabled",modelValue:w.value,"onUpdate:modelValue":i[4]||(i[4]=b=>w.value=b),"data-testid":"egress-input-switch"},{label:u(()=>[e(o(n(s).t("zones.form.zoneEgressEnabledLabel")),1)]),_:1},8,["modelValue"])])])],64)):A("",!0),e(),t("h2",Ze,o(n(s).t("zones.form.connectZone")),1),e(),k.value==="universal"?(v(),K(ue,{key:1,zone:r.value,token:Z.value,"base64-encoded-token":$.value},null,8,["zone","token","base64-encoded-token"])):(v(),K(se,{key:2,zone:r.value,"zone-ingress-enabled":V.value,"zone-egress-enabled":w.value,token:Z.value,"base64-encoded-token":$.value},null,8,["zone","zone-ingress-enabled","zone-egress-enabled","token","base64-encoded-token"])),e(),l(Q,{"loader-function":O,"has-error":E.value!==null,"can-complete":f.value},{"loading-title":u(()=>[e(o(n(s).t("zones.form.scan.waitTitle")),1)]),"complete-title":u(()=>[e(o(n(s).t("zones.form.scan.completeTitle")),1)]),"complete-content":u(()=>[t("p",null,o(n(s).t("zones.form.scan.completeDescription",{name:p.value})),1),e(),t("p",Ie,[l(n(T),{appearance:"primary",to:{name:"zone-detail-view",params:{zone:p.value}}},{default:u(()=>[e(o(n(s).t("zones.form.scan.completeButtonLabel",{name:p.value})),1)]),_:1},8,["to"])])]),"error-title":u(()=>[t("h3",null,o(n(s).t("zones.form.scan.errorTitle")),1)]),"error-content":u(()=>[t("p",null,o(n(s).t("zones.form.scan.errorDescription")),1)]),_:1},8,["has-error","can-complete"])])):A("",!0)])],64))}});const Le=C(Ce,[["__scopeId","data-v-28b8b2be"]]);export{Le as default};
