import{d as $,e as i,o as r,p as f,w as e,a as o,b as n,m as V,D,c as d,J as h,K as v,R as j,l as k,Q as b,t as u,T,q as B}from"./index-DH1Ug2X_.js";import{_ as q}from"./ResourceCodeBlock.vue_vue_type_script_setup_true_lang-D0DnA-2s.js";const F=["innerHTML"],J=["innerHTML"],O={class:"columns"},Q={class:"stack"},z={class:"columns"},U=$({__name:"MeshDetailView",props:{mesh:{}},setup(L){const c=L;return(R,s)=>{const x=i("RouteTitle"),A=i("XTimespan"),H=i("XAction"),C=i("XBadge"),w=i("XLayout"),N=i("XCard"),E=i("KCard"),M=i("DataSource"),K=i("AppView"),P=i("RouteView");return r(),f(P,{name:"mesh-detail-view",params:{mesh:""}},{default:e(({route:y,t:l,uri:X})=>[o(x,{title:l("meshes.routes.overview.title"),render:!1},null,8,["title"]),s[10]||(s[10]=n()),o(M,{src:X(V(D),"/mesh-insights/:name",{name:y.params.mesh})},{default:e(({data:t})=>[(r(!0),d(h,null,v([["MeshTrafficPermission","TrafficPermission"].reduce((_,a)=>{var m,p;return _+(((p=(m=t==null?void 0:t.policies)==null?void 0:m[a])==null?void 0:p.total)??0)},0)===0],_=>(r(),f(K,{key:_,docs:l("meshes.href.docs")},j({default:e(()=>[s[9]||(s[9]=n()),o(w,{type:"stack"},{default:e(()=>[o(N,null,{default:e(()=>[o(w,{type:"stack"},{default:e(()=>[o(A,{start:l("common.formats.datetime",{value:Date.parse(c.mesh.creationTime)}),end:l("common.formats.datetime",{value:Date.parse(c.mesh.modificationTime)})},null,8,["start","end"]),s[2]||(s[2]=n()),k("div",O,[(r(),d(h,null,v(["MeshTrafficPermission","MeshMetric","MeshAccessLog","MeshTrace"],a=>(r(),d(h,{key:a},[(r(!0),d(h,null,v([Object.entries((t==null?void 0:t.policies)??{}).find(([m,p])=>m===a)],m=>(r(),f(b,{key:m},{title:e(()=>[o(H,{to:{name:"policy-list-view",params:{mesh:y.params.mesh,policyPath:`${a.toLowerCase()}s`}}},{default:e(()=>[n(u(a),1)]),_:2},1032,["to"])]),body:e(()=>[o(C,{appearance:"neutral"},{default:e(()=>[n(u(l(m?"meshes.detail.enabled":"meshes.detail.disabled")),1)]),_:2},1024)]),_:2},1024))),128))],64))),64))])]),_:2},1024)]),_:2},1024),s[7]||(s[7]=n()),o(E,null,{default:e(()=>[k("div",Q,[k("div",z,[o(T,{total:(t==null?void 0:t.services.total)??0,"data-testid":"services-status"},{title:e(()=>[n(u(l("meshes.detail.services")),1)]),_:2},1032,["total"]),s[4]||(s[4]=n()),o(T,{total:(t==null?void 0:t.dataplanesByType.standard.total)??0,online:(t==null?void 0:t.dataplanesByType.standard.online)??0,"data-testid":"data-plane-proxies-status"},{title:e(()=>[n(u(l("meshes.detail.data_plane_proxies")),1)]),_:2},1032,["total","online"]),s[5]||(s[5]=n()),o(T,{total:(t==null?void 0:t.totalPolicyCount)??0,"data-testid":"policies-status"},{title:e(()=>[n(u(l("meshes.detail.policies")),1)]),_:2},1032,["total"]),s[6]||(s[6]=n()),o(b,null,{title:e(()=>[n(u(l("http.api.property.mtls")),1)]),body:e(()=>[c.mesh.mtlsBackend?(r(),d(h,{key:1},[n(u(c.mesh.mtlsBackend.type)+" / "+u(c.mesh.mtlsBackend.name),1)],64)):(r(),f(C,{key:0,appearance:"neutral"},{default:e(()=>[n(u(l("meshes.detail.disabled")),1)]),_:2},1024))]),_:2},1024)])])]),_:2},1024),s[8]||(s[8]=n()),o(q,{resource:R.mesh.config},{default:e(({copy:a,copying:m})=>[m?(r(),f(M,{key:0,src:X(V(D),"/meshes/:name/as/kubernetes",{name:y.params.mesh},{cacheControl:"no-store"}),onChange:p=>{a(g=>g(p))},onError:p=>{a((g,S)=>S(p))}},null,8,["src","onChange","onError"])):B("",!0)]),_:2},1032,["resource"])]),_:2},1024)]),_:2},[!c.mesh.mtlsBackend||_?{name:"notifications",fn:e(()=>[k("ul",null,[c.mesh.mtlsBackend?B("",!0):(r(),d("li",{key:0,innerHTML:l("meshes.routes.item.mtls-warning")},null,8,F)),s[0]||(s[0]=n()),c.mesh.mtlsBackend&&_?(r(),d("li",{key:1,innerHTML:l("meshes.routes.item.mtp-warning")},null,8,J)):B("",!0)])]),key:"0"}:void 0]),1032,["docs"]))),128))]),_:2},1032,["src"])]),_:1})}}});export{U as default};
