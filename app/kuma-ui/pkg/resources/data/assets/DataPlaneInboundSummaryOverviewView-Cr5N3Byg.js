import{d as q,r as a,p as d,o,w as t,b as n,l,e as r,q as N,O as x,t as p,m as k,F as h,c as s,N as u,L as c,Y as E}from"./index-C8cHhogd.js";import{A as M,a as G}from"./AccordionList-AZPLZtN0.js";import{P as H}from"./PolicyTypeTag-T-Tn9F9k.js";import{K as J}from"./kri-Dtsf0JIc.js";const Q={class:"stack-with-borders"},U={class:"stack-with-borders"},W={class:"mt-2"},ot=q({__name:"DataPlaneInboundSummaryOverviewView",props:{data:{},routeName:{}},setup(P){const w=P;return(Z,e)=>{const S=a("XBadge"),O=a("XAction"),$=a("XCodeBlock"),z=a("XCard"),R=a("DataLoader"),g=a("DataSource"),C=a("XLayout"),F=a("AppView"),I=a("RouteView");return o(),d(I,{params:{mesh:"",proxy:"",connection:""},name:w.routeName},{default:t(({t:K,route:b,uri:X})=>[n(F,null,{default:t(()=>[n(C,{type:"stack"},{default:t(()=>[l("div",Q,[n(x,{layout:"horizontal"},{title:t(()=>e[0]||(e[0]=[r(`
              Protocol
            `,-1)])),body:t(()=>[n(S,{appearance:"info"},{default:t(()=>[r(p(K(`http.api.value.${w.data.protocol}`)),1)]),_:2},1024)]),_:2,__:[1]},1024)]),e[10]||(e[10]=r()),w.data?(o(),d(C,{key:0,type:"stack",size:"small"},{default:t(()=>[e[8]||(e[8]=l("h3",null,"Rules",-1)),e[9]||(e[9]=r()),n(g,{src:X(k(h),"/policy-types",{})},{default:t(({data:_,error:Y})=>[n(g,{src:X(k(h),"/meshes/:mesh/dataplanes/:name/policies/for/inbound/:kri",{mesh:b.params.mesh,name:b.params.proxy,kri:b.params.connection})},{default:t(({data:f,error:j})=>[n(R,{data:[_,f],errors:[Y,j]},{default:t(()=>[(o(!0),s(u,null,c([Object.groupBy((_==null?void 0:_.policyTypes)??[],({name:i})=>i)],i=>(o(),d(M,{key:`${typeof i}`,"initially-open":0,"multiple-open":"",class:"stack","data-testid":"inbound-policies-rules"},{default:t(()=>[(o(!0),s(u,null,c((f==null?void 0:f.policies)||[],({rules:v,kind:m,origins:B})=>(o(),d(z,{key:m},{default:t(()=>[n(G,null,{"accordion-header":t(()=>[n(H,{"policy-type":m},{default:t(()=>[r(p(m)+" ("+p(v.length)+`)
                            `,1)]),_:2},1032,["policy-type"])]),"accordion-content":t(()=>[l("div",U,[(o(!0),s(u,null,c(v,V=>(o(),s(u,{key:V},[B.length>0?(o(),d(x,{key:0,layout:"horizontal"},{title:t(()=>e[2]||(e[2]=[r(`
                                    Origin policies
                                  `,-1)])),body:t(()=>[l("ul",null,[(o(!0),s(u,null,c(B,y=>(o(),s("li",{key:y.kri},[(o(!0),s(u,null,c([k(J).fromString(y.kri)],({mesh:A,name:L})=>(o(),s(u,{key:`${A}-${L}`},[i[m]?(o(),d(O,{key:0,to:{name:"policy-detail-view",params:{mesh:A,policyPath:i[m][0].path,policy:L}}},{default:t(()=>[r(p(y.kri),1)]),_:2},1032,["to"])):(o(),s(u,{key:1},[r(p(y.kri),1)],64))],64))),128))]))),128))])]),_:2,__:[3]},1024)):N("",!0),e[6]||(e[6]=r()),l("div",null,[e[4]||(e[4]=l("dt",null,`
                                    Config
                                  `,-1)),e[5]||(e[5]=r()),l("dd",W,[l("div",null,[n($,{code:k(E).stringify(V.conf),language:"yaml","show-copy-button":!1},null,8,["code"])])])])],64))),128))])]),_:2,__:[7]},1024)]),_:2},1024))),128))]),_:2},1024))),128))]),_:2},1032,["data","errors"])]),_:2},1032,["src"])]),_:2},1032,["src"])]),_:2,__:[8,9]},1024)):N("",!0)]),_:2,__:[10]},1024)]),_:2},1024)]),_:1},8,["name"])}}});export{ot as default};
