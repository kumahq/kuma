import{d as C,c as d,a5 as $,r as B,o as n,a,w as e,h as o,e as g,F as b,s as y,b as u,Y as D,g as _,t as f,R as N,q as T}from"./index-fd0688ab.js";import{a as V,A as x,_ as L,S as E}from"./SubscriptionHeader.vue_vue_type_script_setup_true_lang-6640b218.js";import{_ as R}from"./CodeBlock.vue_vue_type_style_index_0_lang-4bbdcb3f.js";import{D as Z,a as q}from"./DefinitionListItem-aa9fbb97.js";import{T as F}from"./TabsWidget-9d1f7c85.js";import{T as M}from"./TextWithCopyButton-7c3f1ae7.js";import{_ as W}from"./WarningsWidget.vue_vue_type_script_setup_true_lang-012ac4e6.js";import{g as I,B as j,n as G,D as J,A as P,p as Y,r as K,E as U,s as H,_ as Q}from"./RouteView.vue_vue_type_script_setup_true_lang-b0370148.js";import{_ as X}from"./RouteTitle.vue_vue_type_script_setup_true_lang-0a897f5f.js";import"./CopyButton-ce689fe8.js";const ee=C({__name:"ZoneDetails",props:{zoneOverview:{type:Object,required:!0}},setup(z){const s=z,{t:h}=I(),k=j(),p=[{hash:"#overview",title:"Overview"},{hash:"#insights",title:"Zone Insights"},{hash:"#config",title:"Config"},{hash:"#warnings",title:"Warnings"}],v=d(()=>{const{type:t,name:i}=s.zoneOverview,r=G(s.zoneOverview.zoneInsight);return{type:t,name:i,status:r,"Authentication Type":$(s.zoneOverview)}}),w=d(()=>{var i;const t=((i=s.zoneOverview.zoneInsight)==null?void 0:i.subscriptions)??[];return Array.from(t).reverse()}),m=d(()=>{var r;const t=[],i=((r=s.zoneOverview.zoneInsight)==null?void 0:r.subscriptions)??[];if(i.length>0){const c=i[i.length-1],l=c.version.kumaCp.version||"-",{kumaCpGlobalCompatible:A=!0}=c.version.kumaCp;A||t.push({kind:J,payload:{zoneCpVersion:l,globalCpVersion:k("KUMA_VERSION")}})}return t}),O=d(()=>{var i;const t=((i=s.zoneOverview.zoneInsight)==null?void 0:i.subscriptions)??[];if(t.length>0){const r=t[t.length-1];if(r.config)return JSON.stringify(JSON.parse(r.config),null,2)}return null}),S=d(()=>m.value.length===0?p.filter(t=>t.hash!=="#warnings"):p);return(t,i)=>{const r=B("RouterLink");return n(),a(F,{tabs:S.value},{overview:e(()=>[o(Z,null,{default:e(()=>[(n(!0),g(b,null,y(v.value,(c,l)=>(n(),a(q,{key:l,term:u(h)(`http.api.property.${l}`)},{default:e(()=>[l==="status"?(n(),a(u(D),{key:0,appearance:c==="offline"?"danger":"success"},{default:e(()=>[_(f(c),1)]),_:2},1032,["appearance"])):l==="name"?(n(),a(M,{key:1,text:s.zoneOverview.name},{default:e(()=>[o(r,{to:{name:"zone-cp-detail-view",params:{zone:s.zoneOverview.name}}},{default:e(()=>[_(f(s.zoneOverview.name),1)]),_:1},8,["to"])]),_:1},8,["text"])):(n(),g(b,{key:2},[_(f(c),1)],64))]),_:2},1032,["term"]))),128))]),_:1})]),insights:e(()=>[o(V,{"initially-open":0},{default:e(()=>[(n(!0),g(b,null,y(w.value,(c,l)=>(n(),a(x,{key:l},{"accordion-header":e(()=>[o(L,{details:c},null,8,["details"])]),"accordion-content":e(()=>[o(E,{details:c},null,8,["details"])]),_:2},1024))),128))]),_:1})]),config:e(()=>[O.value!==null?(n(),a(R,{key:0,id:"code-block-zone-config",language:"json",code:O.value,"is-searchable":"","query-key":"zone-config"},null,8,["code"])):(n(),a(u(N),{key:1,"data-testid":"warning-no-subscriptions",appearance:"warning"},{alertMessage:e(()=>[_(f(u(h)("zone-cps.routes.item.config.no-subscriptions")),1)]),_:1}))]),warnings:e(()=>[o(W,{warnings:m.value},null,8,["warnings"])]),_:1},8,["tabs"])}}}),ne={key:3,class:"kcard-border","data-testid":"detail-view-details"},me=C({__name:"ZoneDetailView",setup(z){const{t:s}=I();return(h,k)=>(n(),a(Q,{name:"zone-cp-detail-view","data-testid":"zone-cp-detail-view"},{default:e(({route:p})=>[o(P,{breadcrumbs:[{to:{name:"zone-cp-list-view"},text:u(s)("zone-cps.routes.item.breadcrumbs")}]},{title:e(()=>[T("h1",null,[o(X,{title:u(s)("zone-cps.routes.item.title",{name:p.params.zone}),render:!0},null,8,["title"])])]),default:e(()=>[_(),o(Y,{src:`/zone-cps/${p.params.zone}`},{default:e(({data:v,isLoading:w,error:m})=>[w?(n(),a(K,{key:0})):m!==void 0?(n(),a(U,{key:1,error:m},null,8,["error"])):v===void 0?(n(),a(H,{key:2})):(n(),g("div",ne,[o(ee,{"zone-overview":v},null,8,["zone-overview"])]))]),_:2},1032,["src"])]),_:2},1032,["breadcrumbs"])]),_:1}))}});export{me as default};
