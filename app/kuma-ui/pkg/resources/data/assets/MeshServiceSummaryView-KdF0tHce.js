import{d as F,r as l,o as i,q as u,w as t,b as n,m as g,e as o,t as p,T as M,N as v,c as _,U as c,s as C,M as h}from"./index-DELdVnGm.js";import{_ as N}from"./ResourceCodeBlock.vue_vue_type_script_setup_true_lang-gSzYjsvJ.js";const A={key:0,class:"stack-with-borders","data-testid":"structured-view"},T={key:1,class:"mt-4"},Q=F({__name:"MeshServiceSummaryView",props:{items:{}},setup(z){const k=z;return(q,e)=>{const w=l("RouteTitle"),x=l("XAction"),R=l("XSelect"),y=l("XLayout"),S=l("XBadge"),V=l("KumaPort"),E=l("DataSource"),P=l("AppView"),X=l("DataCollection"),D=l("RouteView");return i(),u(D,{name:"mesh-service-summary-view",params:{mesh:"",service:"",codeSearch:"",codeFilter:!1,codeRegExp:!1,format:String}},{default:t(({route:r,t:f,can:$})=>[n(X,{items:k.items,predicate:s=>s.id===r.params.service},{item:t(({item:s})=>[n(P,null,{title:t(()=>[g("h2",null,[n(x,{to:{name:"mesh-service-detail-view",params:{mesh:r.params.mesh,service:r.params.service}}},{default:t(()=>[n(w,{title:f("services.routes.item.title",{name:s.name})},null,8,["title"])]),_:2},1032,["to"])])]),default:t(()=>[e[19]||(e[19]=o()),n(y,{type:"stack"},{default:t(()=>[g("header",null,[n(y,{type:"separated",size:"max"},{default:t(()=>[g("h3",null,p(f("services.routes.item.config")),1),e[0]||(e[0]=o()),g("div",null,[n(R,{label:f("services.routes.item.format"),selected:r.params.format,onChange:a=>{r.update({format:a})}},M({_:2},[v(["structured","yaml"],a=>({name:`${a}-option`,fn:t(()=>[o(p(f(`services.routes.item.formats.${a}`)),1)])}))]),1032,["label","selected","onChange"])])]),_:2},1024)]),e[18]||(e[18]=o()),r.params.format==="structured"?(i(),_("div",A,[n(c,{layout:"horizontal"},{title:t(()=>e[1]||(e[1]=[o(`
                    State
                  `)])),body:t(()=>[n(S,{appearance:s.spec.state==="Available"?"success":"danger"},{default:t(()=>[o(p(s.spec.state),1)]),_:2},1032,["appearance"])]),_:2},1024),e[13]||(e[13]=o()),n(c,{layout:"horizontal"},{title:t(()=>e[3]||(e[3]=[o(`
                    Dataplane Proxies
                  `)])),body:t(()=>{var a,d,m;return[o(p((a=s.status.dataplaneProxies)==null?void 0:a.connected)+" connected, "+p((d=s.status.dataplaneProxies)==null?void 0:d.healthy)+" healthy ("+p((m=s.status.dataplaneProxies)==null?void 0:m.total)+` total)
                  `,1)]}),_:2},1024),e[14]||(e[14]=o()),s.namespace?(i(),u(c,{key:0,layout:"horizontal"},{title:t(()=>e[5]||(e[5]=[o(`
                    Namespace
                  `)])),body:t(()=>[o(p(s.namespace),1)]),_:2},1024)):C("",!0),e[15]||(e[15]=o()),$("use zones")&&s.zone?(i(),u(c,{key:1,layout:"horizontal"},{title:t(()=>e[7]||(e[7]=[o(`
                    Zone
                  `)])),body:t(()=>[n(x,{to:{name:"zone-cp-detail-view",params:{zone:s.zone}}},{default:t(()=>[o(p(s.zone),1)]),_:2},1032,["to"])]),_:2},1024)):C("",!0),e[16]||(e[16]=o()),n(c,{layout:"horizontal"},{title:t(()=>e[9]||(e[9]=[o(`
                    Ports
                  `)])),body:t(()=>[n(y,{type:"separated",truncate:""},{default:t(()=>[(i(!0),_(h,null,v(s.spec.ports,a=>(i(),u(V,{key:a.port,port:{...a,targetPort:void 0}},null,8,["port"]))),128))]),_:2},1024)]),_:2},1024),e[17]||(e[17]=o()),n(c,{layout:"horizontal"},{title:t(()=>e[11]||(e[11]=[o(`
                    Selector
                  `)])),body:t(()=>[n(y,{type:"separated",truncate:""},{default:t(()=>[(i(!0),_(h,null,v(s.spec.selector.dataplaneTags,(a,d)=>(i(),u(S,{key:`${d}:${a}`,appearance:"info"},{default:t(()=>[o(p(d)+":"+p(a),1)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)])):(i(),_("div",T,[n(N,{resource:s.config,"is-searchable":"",query:r.params.codeSearch,"is-filter-mode":r.params.codeFilter,"is-reg-exp-mode":r.params.codeRegExp,onQueryChange:a=>r.update({codeSearch:a}),onFilterModeChange:a=>r.update({codeFilter:a}),onRegExpModeChange:a=>r.update({codeRegExp:a})},{default:t(({copy:a,copying:d})=>[d?(i(),u(E,{key:0,src:`/meshes/${r.params.mesh}/mesh-service/${r.params.service}/as/kubernetes?no-store`,onChange:m=>{a(b=>b(m))},onError:m=>{a((b,B)=>B(m))}},null,8,["src","onChange","onError"])):C("",!0)]),_:2},1032,["resource","query","is-filter-mode","is-reg-exp-mode","onQueryChange","onFilterModeChange","onRegExpModeChange"])]))]),_:2},1024)]),_:2},1024)]),_:2},1032,["items","predicate"])]),_:1})}}});export{Q as default};
