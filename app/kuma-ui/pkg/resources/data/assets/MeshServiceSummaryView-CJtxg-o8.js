import{d as D,r as p,p as c,o as i,w as l,b as d,e as o,l as n,c as g,t as m,L as v,M as y,N,q as M,m as x,Y as h,a1 as T}from"./index-CJOY8Jaq.js";const q={key:0},A={key:1},K=D({__name:"MeshServiceSummaryView",props:{items:{}},setup(R){const S=R;return(Q,e)=>{const _=p("RouteTitle"),C=p("XAction"),k=p("XBadge"),f=p("XLayout"),X=p("XSelect"),V=p("KumaPort"),b=p("XTable"),w=p("XCodeBlock"),B=p("DataLoader"),E=p("AppView"),F=p("DataCollection"),z=p("RouteView");return i(),c(z,{name:"mesh-service-summary-view",params:{mesh:"",service:"",codeSearch:"",codeFilter:!1,codeRegExp:!1,format:String}},{default:l(({route:t,t:u,can:L,uri:P})=>[d(F,{items:S.items,predicate:r=>r.id===t.params.service},{item:l(({item:r})=>[d(E,null,{title:l(()=>[d(f,{size:"small"},{default:l(()=>[n("h2",null,[d(C,{to:{name:"mesh-service-detail-view",params:{mesh:t.params.mesh,service:t.params.service}}},{default:l(()=>[d(_,{title:u("services.routes.item.title",{name:r.name})},null,8,["title"])]),_:2},1032,["to"])]),e[0]||(e[0]=o()),d(k,{appearance:u(`common.status.appearance.${r.spec.state}`,void 0,{defaultMessage:"neutral"})},{default:l(()=>[o(m(u(`http.api.value.${r.spec.state}`)),1)]),_:2},1032,["appearance"])]),_:2},1024)]),default:l(()=>[e[17]||(e[17]=o()),d(f,{type:"stack"},{default:l(()=>[n("header",null,[d(f,{type:"separated",size:"max"},{default:l(()=>[n("h3",null,m(u("services.routes.item.config")),1),e[1]||(e[1]=o()),(i(),g(v,null,y([["structured","universal","k8s"]],s=>n("div",{key:typeof s},[d(X,{label:u("services.routes.item.format"),selected:t.params.format,onChange:a=>{t.update({format:a})},onVnodeBeforeMount:a=>a?.props?.selected&&s.includes(a.props.selected)&&a.props.selected!==t.params.format&&t.update({format:a.props.selected})},N({_:2},[y(s,a=>({name:`${a}-option`,fn:l(()=>[o(m(u(`services.routes.item.formats.${a}`)),1)])}))]),1032,["label","selected","onChange","onVnodeBeforeMount"])])),64))]),_:2},1024)]),e[16]||(e[16]=o()),t.params.format==="structured"?(i(),c(b,{key:0,"data-testid":"structured-view",variant:"kv"},{default:l(()=>[n("tr",null,[e[2]||(e[2]=n("th",{scope:"row"},`
                    Data plane proxies
                  `,-1)),e[3]||(e[3]=o()),n("td",null,m(r.status.dataplaneProxies?.connected)+" connected, "+m(r.status.dataplaneProxies?.healthy)+" healthy ("+m(r.status.dataplaneProxies?.total)+` total)
                  `,1)]),e[12]||(e[12]=o()),r.namespace?(i(),g("tr",q,[e[4]||(e[4]=n("th",{scope:"row"},`
                    Namespace
                  `,-1)),e[5]||(e[5]=o()),n("td",null,m(r.namespace),1)])):M("",!0),e[13]||(e[13]=o()),L("use zones")&&r.zone?(i(),g("tr",A,[e[6]||(e[6]=n("th",{scope:"row"},`
                    Zone
                  `,-1)),e[7]||(e[7]=o()),n("td",null,[d(C,{to:{name:"zone-cp-detail-view",params:{zone:r.zone}}},{default:l(()=>[o(m(r.zone),1)]),_:2},1032,["to"])])])):M("",!0),e[14]||(e[14]=o()),n("tr",null,[e[8]||(e[8]=n("th",{scope:"row"},`
                    Ports
                  `,-1)),e[9]||(e[9]=o()),n("td",null,[d(f,{type:"separated",truncate:""},{default:l(()=>[(i(!0),g(v,null,y(r.spec.ports,s=>(i(),c(V,{key:s.port,port:{...s,targetPort:void 0}},null,8,["port"]))),128))]),_:2},1024)])]),e[15]||(e[15]=o()),n("tr",null,[e[10]||(e[10]=n("th",{scope:"row"},`
                    Selector
                  `,-1)),e[11]||(e[11]=o()),n("td",null,[d(f,{type:"separated",truncate:""},{default:l(()=>[(i(!0),g(v,null,y(r.spec.selector.dataplaneTags,(s,a)=>(i(),c(k,{key:`${a}:${s}`,appearance:"info"},{default:l(()=>[o(m(a)+":"+m(s),1)]),_:2},1024))),128))]),_:2},1024)])])]),_:2},1024)):t.params.format==="universal"?(i(),c(w,{key:1,"data-testid":"codeblock-yaml-universal",language:"yaml",code:x(h).stringify(r.config),"is-searchable":"",query:t.params.codeSearch,"is-filter-mode":t.params.codeFilter,"is-reg-exp-mode":t.params.codeRegExp,onQueryChange:s=>t.update({codeSearch:s}),onFilterModeChange:s=>t.update({codeFilter:s}),onRegExpModeChange:s=>t.update({codeRegExp:s})},null,8,["code","query","is-filter-mode","is-reg-exp-mode","onQueryChange","onFilterModeChange","onRegExpModeChange"])):(i(),c(B,{key:2,src:P(x(T),"/meshes/:mesh/mesh-service/:name/as/kubernetes",{mesh:t.params.mesh,name:t.params.service})},{default:l(({data:s})=>[d(w,{"data-testid":"codeblock-yaml-k8s",language:"yaml",code:x(h).stringify(s),"is-searchable":"",query:t.params.codeSearch,"is-filter-mode":t.params.codeFilter,"is-reg-exp-mode":t.params.codeRegExp,onQueryChange:a=>t.update({codeSearch:a}),onFilterModeChange:a=>t.update({codeFilter:a}),onRegExpModeChange:a=>t.update({codeRegExp:a})},null,8,["code","query","is-filter-mode","is-reg-exp-mode","onQueryChange","onFilterModeChange","onRegExpModeChange"])]),_:2},1032,["src"]))]),_:2},1024)]),_:2},1024)]),_:2},1032,["items","predicate"])]),_:1})}}});export{K as default};
