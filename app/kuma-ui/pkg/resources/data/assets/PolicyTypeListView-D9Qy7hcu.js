import{d as S,r as e,p as u,o,w as t,b as s,e as _,m as v,H as b,F,l as f,c as r,N as m,L as w,n as M,t as C,y as $,_ as z}from"./index-8QMKyk4n.js";const E={class:"policy-list-content"},H={class:"policy-count"},j={class:"policy-list"},q=S({__name:"PolicyTypeListView",setup(G){return(J,i)=>{const D=e("RouteTitle"),R=e("XAction"),L=e("DataCollection"),P=e("DataLoader"),T=e("XCard"),x=e("RouterView"),V=e("DataSource"),A=e("AppView"),B=e("RouteView");return o(),u(B,{name:"policy-list-view",params:{mesh:"",policyPath:"",policy:""}},{default:t(({uri:h,route:n,t:X})=>[s(D,{render:!1,title:X("policies.routes.types.title")},null,8,["title"]),i[2]||(i[2]=_()),s(A,null,{default:t(()=>[s(V,{src:h(v(b),"/mesh-insights/:name",{name:n.params.mesh},{})},{default:t(({data:d})=>[s(V,{src:h(v(F),"/policy-types",{})},{default:t(({data:p,error:g})=>[f("div",E,[s(T,{class:"policy-type-list","data-testid":"policy-type-list"},{default:t(()=>[s(P,{data:[p],errors:[g]},{default:t(()=>[(o(!0),r(m,null,w([typeof d?.policies>"u"?p.policyTypes:p.policyTypes.filter(a=>!a.policy.isTargetRef&&(d.policies?.[a.name]?.total??0)>0)],a=>(o(),u(L,{key:a,predicate:typeof d?.policies>"u"?void 0:y=>a.length>0||y.policy.isTargetRef,items:p.policyTypes},{default:t(({items:y})=>[(o(!0),r(m,null,w([y.find(c=>c.path===n.params.policyPath)],c=>(o(),r(m,{key:c},[(o(!0),r(m,null,w(y,(l,N)=>(o(),r("div",{key:l.path,class:M(["policy-type-link-wrapper",{"policy-type-link-wrapper--is-active":c&&c.path===l.path}])},[s(R,{class:"policy-type-link",to:{name:"policy-list-view",params:{mesh:n.params.mesh,policyPath:l.path}},"data-testid":`policy-type-link-${l.name}`,onVnodeMounted:k=>{n.params.policyPath.length===0&&N===0&&k.props?.to&&n.replace(k.props.to)}},{default:t(()=>[_(C(l.name),1)]),_:2},1032,["to","data-testid","onVnodeMounted"]),i[0]||(i[0]=_()),f("div",H,C(d?.policies?.[l.name]?.total??0),1)],2))),128))],64))),128))]),_:2},1032,["predicate","items"]))),128))]),_:2},1032,["data","errors"])]),_:2},1024),i[1]||(i[1]=_()),f("div",j,[s(x,null,{default:t(({Component:a})=>[(o(),u($(a),{"policy-types":p?.policyTypes},null,8,["policy-types"]))]),_:2},1024)])])]),_:2},1032,["src"])]),_:2},1032,["src"])]),_:2},1024)]),_:1})}}}),O=z(q,[["__scopeId","data-v-f10c68ba"]]);export{O as default};
