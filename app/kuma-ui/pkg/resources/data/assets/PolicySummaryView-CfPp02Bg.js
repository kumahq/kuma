import{_ as v}from"./PolicySummary.vue_vue_type_script_setup_true_lang-DmPbwemd.js";import{d as D,r as s,x as L,p as i,o as n,w as t,b as p,c as g,L as C,M as h,e as m,q as x,m as q,F as N,l as d,t as u,N as P,z as A}from"./index-B99ecjhH.js";const G=D({__name:"PolicySummaryView",props:{items:{},policyType:{}},setup(k){const y=k;return(Q,l)=>{const R=s("XEmptyState"),S=s("RouteTitle"),w=s("XAction"),E=s("XSelect"),F=s("XLayout"),_=s("XCodeBlock"),M=s("DataLoader"),V=s("AppView"),b=s("DataCollection"),X=s("RouteView"),B=L("icon-start");return n(),i(X,{name:"policy-summary-view",params:{mesh:"",policyPath:"",policy:"",codeSearch:"",codeFilter:!1,codeRegExp:!1,format:String}},{default:t(({uri:T,route:e,t:c})=>[p(b,{items:y.items,predicate:f=>f.id===e.params.policy,find:!0},{empty:t(()=>[p(R,null,{title:t(()=>[d("h2",null,u(c("common.collection.summary.empty_title",{type:y.policyType.name})),1)]),default:t(()=>[l[0]||(l[0]=m()),d("p",null,u(c("common.collection.summary.empty_message",{type:y.policyType.name})),1)]),_:2},1024)]),default:t(({items:f})=>[(n(!0),g(C,null,h([f[0]],r=>(n(),i(V,{key:r.id},{title:t(()=>[A((n(),g("h2",null,[p(w,{to:{name:"policy-detail-view",params:{mesh:e.params.mesh,policyPath:e.params.policyPath,policy:e.params.policy}}},{default:t(()=>[p(S,{title:c("policies.routes.item.title",{name:r.name})},null,8,["title"])]),_:2},1032,["to"])])),[[B,"policy"]])]),default:t(()=>[l[3]||(l[3]=m()),r?(n(),i(v,{key:0,policy:r,format:e.params.format,legacy:!y.policyType.policy?.isTargetRef},{header:t(()=>[d("header",null,[p(F,{type:"separated",size:"max"},{default:t(()=>[d("h3",null,u(c("policies.routes.item.config")),1),l[1]||(l[1]=m()),(n(),g(C,null,h([["structured","universal","k8s"]],o=>d("div",{key:typeof o},[p(E,{label:c("policies.routes.item.format"),selected:o.includes(e.params.format)?e.params.format:o[0],onChange:a=>{e.update({format:a})},onVnodeBeforeMount:a=>a?.props?.selected&&o.includes(a.props.selected)&&a.props.selected!==e.params.format&&e.update({format:a.props.selected})},P({_:2},[h(o,a=>({name:`${a}-option`,fn:t(()=>[m(u(c(`policies.routes.item.formats.${a}`)),1)])}))]),1032,["label","selected","onChange","onVnodeBeforeMount"])])),64))]),_:2},1024)])]),default:t(()=>[l[2]||(l[2]=m()),e.params.format==="universal"?(n(),i(_,{key:0,"data-testid":"codeblock-yaml-universal",language:"yaml",code:r.yaml,"is-searchable":"","show-k8s-copy-button":!1,query:e.params.codeSearch,"is-filter-mode":e.params.codeFilter,"is-reg-exp-mode":e.params.codeRegExp,onQueryChange:o=>e.update({codeSearch:o}),onFilterModeChange:o=>e.update({codeFilter:o}),onRegExpModeChange:o=>e.update({codeRegExp:o})},null,8,["code","query","is-filter-mode","is-reg-exp-mode","onQueryChange","onFilterModeChange","onRegExpModeChange"])):e.params.format==="k8s"?(n(),i(M,{key:1,src:T(q(N),"/meshes/:mesh/policy-path/:path/policy/:name/as/kubernetes",{mesh:e.params.mesh,path:e.params.policyPath,name:e.params.policy})},{default:t(({data:o})=>[p(_,{"data-testid":"codeblock-yaml-k8s",language:"yaml",code:o,"is-searchable":"","show-k8s-copy-button":!1,query:e.params.codeSearch,"is-filter-mode":e.params.codeFilter,"is-reg-exp-mode":e.params.codeRegExp,onQueryChange:a=>e.update({codeSearch:a}),onFilterModeChange:a=>e.update({codeFilter:a}),onRegExpModeChange:a=>e.update({codeRegExp:a})},null,8,["code","query","is-filter-mode","is-reg-exp-mode","onQueryChange","onFilterModeChange","onRegExpModeChange"])]),_:2},1032,["src"])):x("",!0)]),_:2},1032,["policy","format","legacy"])):x("",!0)]),_:2},1024))),128))]),_:2},1032,["items","predicate"])]),_:1})}}});export{G as default};
