import{_ as g}from"./CodeBlock.vue_vue_type_style_index_0_lang-dd2d709e.js";import{C as x}from"./TextWithCopyButton-860756b2.js";import{_ as b}from"./StatusInfo.vue_vue_type_script_setup_true_lang-f290dc9e.js";import{g as _}from"./RouteView.vue_vue_type_script_setup_true_lang-71d22094.js";import{t as v}from"./toYaml-4e00099e.js";import{d as q,r as n,s as m,o as B,c as S,w as c,a as d,x as k,u as h,b as C,t as F}from"./index-459c156d.js";const Y=q({__name:"ResourceCodeBlock",props:{id:{type:String,required:!0},resourceFetcher:{type:Function,required:!0},resourceFetcherWatchKey:{type:[String,Number],required:!1,default:null},codeMaxHeight:{type:String,required:!1,default:null},isSearchable:{type:Boolean,required:!1,default:!1},showCopyAsKubernetesButton:{type:Boolean,required:!1,default:!0}},setup(r){const t=r,u=_(),i=n(""),o=n(!1),a=n(null);m(()=>t.resourceFetcherWatchKey,function(e,s){e!==s&&e!==null&&l()}),m(()=>t.resourceFetcher,function(){l()},{immediate:!0});async function l(){o.value=!0,a.value=null;try{const e=await t.resourceFetcher();i.value=f(e)}catch(e){e instanceof Error?a.value=e:console.error(e)}finally{o.value=!1}}async function y(){const e=await t.resourceFetcher({format:"kubernetes"});return f(e)}function f(e){const{creationTime:s,modificationTime:K,...p}=e;return v(p)}return(e,s)=>(B(),S(b,{"is-loading":o.value,error:a.value},{default:c(()=>[d(g,{id:r.id,language:"yaml",code:i.value,"is-searchable":t.isSearchable,"query-key":t.id,"code-max-height":t.codeMaxHeight},k({_:2},[r.showCopyAsKubernetesButton?{name:"secondary-actions",fn:c(()=>[d(x,{"get-text":y,"copy-text":h(u).t("common.copyKubernetesText")},{default:c(()=>[C(F(h(u).t("common.copyKubernetesShortText")),1)]),_:1},8,["copy-text"])]),key:"0"}:void 0]),1032,["id","code","is-searchable","query-key","code-max-height"])]),_:1},8,["is-loading","error"]))}});export{Y as _};
