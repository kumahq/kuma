import{d as D,r as p,m,o as d,w as a,b as l,e as n,q as g,c as h,t as i,F as _,v as x,M as L,p as b,L as u,s as q,ao as A}from"./index-wrWrvwI9.js";import{_ as v}from"./ResourceCodeBlock.vue_vue_type_script_setup_true_lang-CUsODxx_.js";const N={key:0,class:"stack-with-borders","data-testid":"structured-view"},Z=D({__name:"MeshServiceSummaryView",props:{items:{}},setup(w){const S=w;return(Q,e)=>{const z=p("RouteTitle"),C=p("XAction"),R=p("XSelect"),y=p("XLayout"),k=p("XBadge"),M=p("KumaPort"),F=p("DataLoader"),V=p("AppView"),E=p("DataCollection"),B=p("RouteView");return d(),m(B,{name:"mesh-service-summary-view",params:{mesh:"",service:"",codeSearch:"",codeFilter:!1,codeRegExp:!1,format:String}},{default:a(({route:t,t:f,can:P,uri:X})=>[l(E,{items:S.items,predicate:r=>r.id===t.params.service},{item:a(({item:r})=>[l(V,null,{title:a(()=>[g("h2",null,[l(C,{to:{name:"mesh-service-detail-view",params:{mesh:t.params.mesh,service:t.params.service}}},{default:a(()=>[l(z,{title:f("services.routes.item.title",{name:r.name})},null,8,["title"])]),_:2},1032,["to"])])]),default:a(()=>[e[19]||(e[19]=n()),l(y,{type:"stack"},{default:a(()=>[g("header",null,[l(y,{type:"separated",size:"max"},{default:a(()=>[g("h3",null,i(f("services.routes.item.config")),1),e[0]||(e[0]=n()),(d(),h(_,null,x([["structured","universal","k8s"]],s=>g("div",{key:typeof s},[l(R,{label:f("services.routes.item.format"),selected:t.params.format,onChange:o=>{t.update({format:o})},onVnodeBeforeMount:o=>{var c;return((c=o==null?void 0:o.props)==null?void 0:c.selected)&&s.includes(o.props.selected)&&o.props.selected!==t.params.format&&t.update({format:o.props.selected})}},L({_:2},[x(s,o=>({name:`${o}-option`,fn:a(()=>[n(i(f(`services.routes.item.formats.${o}`)),1)])}))]),1032,["label","selected","onChange","onVnodeBeforeMount"])])),64))]),_:2},1024)]),e[18]||(e[18]=n()),t.params.format==="structured"?(d(),h("div",N,[l(u,{layout:"horizontal"},{title:a(()=>e[1]||(e[1]=[n(`
                    State
                  `)])),body:a(()=>[l(k,{appearance:r.spec.state==="Available"?"success":"danger"},{default:a(()=>[n(i(r.spec.state),1)]),_:2},1032,["appearance"])]),_:2},1024),e[13]||(e[13]=n()),l(u,{layout:"horizontal"},{title:a(()=>e[3]||(e[3]=[n(`
                    Dataplane Proxies
                  `)])),body:a(()=>{var s,o,c;return[n(i((s=r.status.dataplaneProxies)==null?void 0:s.connected)+" connected, "+i((o=r.status.dataplaneProxies)==null?void 0:o.healthy)+" healthy ("+i((c=r.status.dataplaneProxies)==null?void 0:c.total)+` total)
                  `,1)]}),_:2},1024),e[14]||(e[14]=n()),r.namespace?(d(),m(u,{key:0,layout:"horizontal"},{title:a(()=>e[5]||(e[5]=[n(`
                    Namespace
                  `)])),body:a(()=>[n(i(r.namespace),1)]),_:2},1024)):b("",!0),e[15]||(e[15]=n()),P("use zones")&&r.zone?(d(),m(u,{key:1,layout:"horizontal"},{title:a(()=>e[7]||(e[7]=[n(`
                    Zone
                  `)])),body:a(()=>[l(C,{to:{name:"zone-cp-detail-view",params:{zone:r.zone}}},{default:a(()=>[n(i(r.zone),1)]),_:2},1032,["to"])]),_:2},1024)):b("",!0),e[16]||(e[16]=n()),l(u,{layout:"horizontal"},{title:a(()=>e[9]||(e[9]=[n(`
                    Ports
                  `)])),body:a(()=>[l(y,{type:"separated",truncate:""},{default:a(()=>[(d(!0),h(_,null,x(r.spec.ports,s=>(d(),m(M,{key:s.port,port:{...s,targetPort:void 0}},null,8,["port"]))),128))]),_:2},1024)]),_:2},1024),e[17]||(e[17]=n()),l(u,{layout:"horizontal"},{title:a(()=>e[11]||(e[11]=[n(`
                    Selector
                  `)])),body:a(()=>[l(y,{type:"separated",truncate:""},{default:a(()=>[(d(!0),h(_,null,x(r.spec.selector.dataplaneTags,(s,o)=>(d(),m(k,{key:`${o}:${s}`,appearance:"info"},{default:a(()=>[n(i(o)+":"+i(s),1)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)])):t.params.format==="universal"?(d(),m(v,{key:1,"data-testid":"codeblock-yaml-universal",language:"yaml",resource:r.config,"show-k8s-copy-button":!1,"is-searchable":"",query:t.params.codeSearch,"is-filter-mode":t.params.codeFilter,"is-reg-exp-mode":t.params.codeRegExp,onQueryChange:s=>t.update({codeSearch:s}),onFilterModeChange:s=>t.update({codeFilter:s}),onRegExpModeChange:s=>t.update({codeRegExp:s})},null,8,["resource","query","is-filter-mode","is-reg-exp-mode","onQueryChange","onFilterModeChange","onRegExpModeChange"])):(d(),m(F,{key:2,src:X(q(A),"/meshes/:mesh/mesh-service/:name/as/kubernetes",{mesh:t.params.mesh,name:t.params.service})},{default:a(({data:s})=>[l(v,{"data-testid":"codeblock-yaml-k8s",language:"yaml",resource:s,"show-k8s-copy-button":!1,"is-searchable":"",query:t.params.codeSearch,"is-filter-mode":t.params.codeFilter,"is-reg-exp-mode":t.params.codeRegExp,onQueryChange:o=>t.update({codeSearch:o}),onFilterModeChange:o=>t.update({codeFilter:o}),onRegExpModeChange:o=>t.update({codeRegExp:o})},null,8,["resource","query","is-filter-mode","is-reg-exp-mode","onQueryChange","onFilterModeChange","onRegExpModeChange"])]),_:2},1032,["src"]))]),_:2},1024)]),_:2},1024)]),_:2},1032,["items","predicate"])]),_:1})}}});export{Z as default};
