import{d as I,r as a,o as r,q as d,w as e,b as t,e as n,p as M,G as A,c as f,M as h,N as B,T as $,U as x,t as u,V as C,s as X,m as j}from"./index-DELdVnGm.js";import{_ as q}from"./ResourceCodeBlock.vue_vue_type_script_setup_true_lang-gSzYjsvJ.js";const F={key:0},G={key:1},H=I({__name:"MeshDetailView",props:{mesh:{}},setup(D){const p=D;return(N,o)=>{const R=a("RouteTitle"),b=a("XI18n"),E=a("XAction"),y=a("XBadge"),L=a("XAboutCard"),k=a("XLayout"),v=a("XCard"),T=a("DataSource"),P=a("AppView"),S=a("RouteView");return r(),d(S,{name:"mesh-detail-view",params:{mesh:""}},{default:e(({route:w,t:l,uri:V})=>[t(R,{title:l("meshes.routes.overview.title"),render:!1},null,8,["title"]),o[9]||(o[9]=n()),t(T,{src:V(M(A),"/mesh-insights/:name",{name:w.params.mesh})},{default:e(({data:s})=>[(r(!0),f(h,null,B([["MeshTrafficPermission","TrafficPermission"].reduce((_,m)=>{var i,c;return _+(((c=(i=s==null?void 0:s.policies)==null?void 0:i[m])==null?void 0:c.total)??0)},0)===0],_=>(r(),d(P,{key:_,docs:l("meshes.href.docs")},$({default:e(()=>[o[8]||(o[8]=n()),t(k,{type:"stack"},{default:e(()=>[t(L,{title:l("meshes.routes.item.about.title"),created:p.mesh.creationTime,modified:p.mesh.modificationTime},{default:e(()=>[(r(),f(h,null,B(["MeshTrafficPermission","MeshMetric","MeshAccessLog","MeshTrace"],m=>(r(),f(h,{key:m},[(r(!0),f(h,null,B([Object.entries((s==null?void 0:s.policies)??{}).find(([i])=>i===m)],i=>(r(),d(x,{key:i,layout:"horizontal"},{title:e(()=>[t(E,{to:{name:"policy-list-view",params:{mesh:w.params.mesh,policyPath:`${m.toLowerCase()}s`}}},{default:e(()=>[n(u(m),1)]),_:2},1032,["to"])]),body:e(()=>[t(y,{appearance:i?"success":"neutral"},{default:e(()=>[n(u(l(i?"meshes.detail.enabled":"meshes.detail.disabled")),1)]),_:2},1032,["appearance"])]),_:2},1024))),128))],64))),64)),o[3]||(o[3]=n()),t(x,{layout:"horizontal"},{title:e(()=>[n(u(l("http.api.property.mtls")),1)]),body:e(()=>[p.mesh.mtlsBackend?(r(),d(y,{key:1,appearance:"info"},{default:e(()=>[n(u(p.mesh.mtlsBackend.type)+" / "+u(p.mesh.mtlsBackend.name),1)]),_:1})):(r(),d(y,{key:0,appearance:"neutral"},{default:e(()=>[n(u(l("meshes.detail.disabled")),1)]),_:2},1024))]),_:2},1024)]),_:2},1032,["title","created","modified"]),o[6]||(o[6]=n()),t(v,null,{default:e(()=>[t(k,{type:"stack"},{default:e(()=>[t(k,{type:"columns",class:"columns-with-borders"},{default:e(()=>[t(C,{total:(s==null?void 0:s.services.total)??0,"data-testid":"services-status"},{title:e(()=>[n(u(l("meshes.detail.services")),1)]),_:2},1032,["total"]),o[4]||(o[4]=n()),t(C,{total:(s==null?void 0:s.dataplanesByType.standard.total)??0,online:(s==null?void 0:s.dataplanesByType.standard.online)??0,"data-testid":"data-plane-proxies-status"},{title:e(()=>[n(u(l("meshes.detail.data_plane_proxies")),1)]),_:2},1032,["total","online"]),o[5]||(o[5]=n()),t(C,{total:(s==null?void 0:s.totalPolicyCount)??0,"data-testid":"policies-status"},{title:e(()=>[n(u(l("meshes.detail.policies")),1)]),_:2},1032,["total"])]),_:2},1024)]),_:2},1024)]),_:2},1024),o[7]||(o[7]=n()),t(v,null,{default:e(()=>[t(q,{resource:N.mesh.config},{default:e(({copy:m,copying:i})=>[i?(r(),d(T,{key:0,src:V(M(A),"/meshes/:name/as/kubernetes",{name:w.params.mesh},{cacheControl:"no-store"}),onChange:c=>{m(g=>g(c))},onError:c=>{m((g,z)=>z(c))}},null,8,["src","onChange","onError"])):X("",!0)]),_:2},1032,["resource"])]),_:2},1024)]),_:2},1024)]),_:2},[!p.mesh.mtlsBackend||_?{name:"notifications",fn:e(()=>[j("ul",null,[p.mesh.mtlsBackend?X("",!0):(r(),f("li",F,[t(b,{path:"meshes.routes.item.mtls-warning"})])),o[0]||(o[0]=n()),p.mesh.mtlsBackend&&_?(r(),f("li",G,[t(b,{path:"meshes.routes.item.mtp-warning"})])):X("",!0)])]),key:"0"}:void 0]),1032,["docs"]))),128))]),_:2},1032,["src"])]),_:1})}}});export{H as default};
