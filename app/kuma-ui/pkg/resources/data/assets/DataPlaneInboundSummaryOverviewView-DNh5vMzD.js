import{d as I,r,p as u,o as a,w as o,b as n,l as s,e,c as i,q as g,O as p,t as k,m as x,F as M,V as Y,N as b,L as C,Y as q}from"./index-CYOTm_Oc.js";import{A as E,a as T}from"./AccordionList-BmeTdWOz.js";import{P as G}from"./PolicyTypeTag-DCf_PBjX.js";import{T as H}from"./TagList-DhZ2HUWV.js";import{R as J}from"./RuleMatchers-CfP4lwOu.js";const K={class:"stack-with-borders"},Q={key:0,class:"mt-6"},U={class:"mt-4"},W={class:"stack-with-borders"},Z={class:"mt-2"},st=I({__name:"DataPlaneInboundSummaryOverviewView",props:{data:{},routeName:{}},setup(X){const l=X;return(tt,t)=>{const P=r("XBadge"),w=r("XCopyButton"),$=r("XAction"),z=r("XCodeBlock"),L=r("XCard"),R=r("DataCollection"),O=r("DataLoader"),N=r("DataSource"),S=r("AppView"),F=r("RouteView");return a(),u(F,{params:{mesh:"",proxy:"",connection:""},name:l.routeName},{default:o(({t:h,route:A,uri:V})=>[n(S,null,{default:o(()=>[s("div",K,[n(p,{layout:"horizontal"},{title:o(()=>t[0]||(t[0]=[e(`
            Tags
          `)])),body:o(()=>[n(H,{tags:l.data.tags,alignment:"right"},null,8,["tags"])]),_:1,__:[1]}),t[10]||(t[10]=e()),n(p,{layout:"horizontal"},{title:o(()=>t[2]||(t[2]=[e(`
            Protocol
          `)])),body:o(()=>[n(P,{appearance:"info"},{default:o(()=>[e(k(h(`http.api.value.${l.data.protocol}`)),1)]),_:2},1024)]),_:2,__:[3]},1024),t[11]||(t[11]=e()),n(p,{layout:"horizontal"},{title:o(()=>t[4]||(t[4]=[e(`
            Address
          `)])),body:o(()=>[n(w,{text:`${l.data.addressPort}`},null,8,["text"])]),_:1,__:[5]}),t[12]||(t[12]=e()),l.data.serviceAddressPort.length>0?(a(),u(p,{key:0,layout:"horizontal"},{title:o(()=>t[6]||(t[6]=[e(`
            Service Address
          `)])),body:o(()=>[n(w,{text:`${l.data.serviceAddressPort}`},null,8,["text"])]),_:1,__:[7]})):g("",!0),t[13]||(t[13]=e()),l.data.portName.length>0?(a(),u(p,{key:1,layout:"horizontal"},{title:o(()=>t[8]||(t[8]=[e(`
            Name
          `)])),body:o(()=>[n(w,{text:`${l.data.portName}`},null,8,["text"])]),_:1,__:[9]})):g("",!0)]),t[25]||(t[25]=e()),l.data?(a(),i("div",Q,[t[23]||(t[23]=s("h3",null,"Rules",-1)),t[24]||(t[24]=e()),n(N,{src:V(x(M),"/policy-types",{})},{default:o(({data:v,error:j})=>[n(N,{src:V(x(Y),"/meshes/:mesh/rules/for/:dataplane",{mesh:A.params.mesh,dataplane:A.params.proxy})},{default:o(({data:B,error:D})=>[n(O,{data:[v,B],errors:[j,D]},{default:o(()=>[(a(!0),i(b,null,C([Object.groupBy((v==null?void 0:v.policyTypes)??[],({name:y})=>y)],y=>(a(),u(R,{key:`${typeof y}`,predicate:_=>{var m,f;return(_.ruleType==="inbound"||_.ruleType==="from"&&!((f=(m=y[_.type])==null?void 0:m[0])!=null&&f.policy.isFromAsRules))&&Number(_.inbound.port)===Number(A.params.connection.split("_")[1])},items:[...B.rules,...B.inboundRules]},{default:o(({items:_})=>[s("div",U,[n(E,{"initially-open":0,"multiple-open":"",class:"stack"},{default:o(()=>[(a(!0),i(b,null,C(Object.groupBy(_,m=>m.type),(m,f)=>(a(),u(L,{key:f},{default:o(()=>[n(T,null,{"accordion-header":o(()=>[n(G,{"policy-type":f},{default:o(()=>[e(k(f)+" ("+k(m.length)+`)
                              `,1)]),_:2},1032,["policy-type"])]),"accordion-content":o(()=>[s("div",W,[(a(!0),i(b,null,C(m,c=>(a(),i(b,{key:c},[c.matchers.length>0?(a(),u(p,{key:0,layout:"horizontal"},{title:o(()=>t[14]||(t[14]=[e(`
                                      From
                                    `)])),body:o(()=>[s("p",null,[n(J,{items:c.matchers},null,8,["items"])])]),_:2,__:[15]},1024)):g("",!0),t[20]||(t[20]=e()),c.origins.length>0?(a(),u(p,{key:1,layout:"horizontal"},{title:o(()=>t[16]||(t[16]=[e(`
                                      Origin Policies
                                    `)])),body:o(()=>[s("ul",null,[(a(!0),i(b,null,C(c.origins,d=>(a(),i("li",{key:`${d.mesh}-${d.name}`},[y[d.type]?(a(),u($,{key:0,to:{name:"policy-detail-view",params:{mesh:d.mesh,policyPath:y[d.type][0].path,policy:d.name}}},{default:o(()=>[e(k(d.name),1)]),_:2},1032,["to"])):(a(),i(b,{key:1},[e(k(d.name),1)],64))]))),128))])]),_:2,__:[17]},1024)):g("",!0),t[21]||(t[21]=e()),s("div",null,[t[18]||(t[18]=s("dt",null,`
                                      Config
                                    `,-1)),t[19]||(t[19]=e()),s("dd",Z,[s("div",null,[n(z,{code:x(q).stringify(c.raw),language:"yaml","show-copy-button":!1},null,8,["code"])])])])],64))),128))])]),_:2,__:[22]},1024)]),_:2},1024))),128))]),_:2},1024)])]),_:2},1032,["predicate","items"]))),128))]),_:2},1032,["data","errors"])]),_:2},1032,["src"])]),_:2},1032,["src"])])):g("",!0)]),_:2,__:[25]},1024)]),_:1},8,["name"])}}});export{st as default};
