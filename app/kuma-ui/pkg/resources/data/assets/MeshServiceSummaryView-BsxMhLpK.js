import{_ as F}from"./ResourceCodeBlock.vue_vue_type_script_setup_true_lang-DvxaD5US.js";import{d as M,r as l,o as c,m as d,w as e,b as s,k as m,e as t,Z as u,t as n,p as h,c as x,L as C,M as z}from"./index-C4A671Or.js";import"./CodeBlock-DPfixpTM.js";const P={class:"stack"},T={class:"stack-with-borders"},$={class:"mt-4"},Q=M({__name:"MeshServiceSummaryView",props:{items:{}},setup(b){const k=b;return(A,N)=>{const w=l("RouteTitle"),f=l("XAction"),_=l("KBadge"),g=l("KTruncate"),S=l("DataSource"),R=l("AppView"),V=l("DataCollection"),E=l("RouteView");return c(),d(E,{name:"mesh-service-summary-view",params:{mesh:"",service:"",codeSearch:"",codeFilter:!1,codeRegExp:!1}},{default:e(({route:r,t:y,can:D})=>[s(V,{items:k.items,predicate:o=>o.id===r.params.service},{item:e(({item:o})=>[s(R,null,{title:e(()=>[m("h2",null,[s(f,{to:{name:"mesh-service-detail-view",params:{mesh:r.params.mesh,service:r.params.service}}},{default:e(()=>[s(w,{title:y("services.routes.item.title",{name:o.name})},null,8,["title"])]),_:2},1032,["to"])])]),default:e(()=>[t(),m("div",P,[m("div",T,[s(u,{layout:"horizontal"},{title:e(()=>[t(`
                  State
                `)]),body:e(()=>[s(_,{appearance:o.spec.state==="Available"?"success":"danger"},{default:e(()=>[t(n(o.spec.state),1)]),_:2},1032,["appearance"])]),_:2},1024),t(),s(u,{layout:"horizontal"},{title:e(()=>[t(`
                  Dataplane Proxies
                `)]),body:e(()=>{var a,i,p;return[t(n((a=o.status.dataplaneProxies)==null?void 0:a.connected)+" connected, "+n((i=o.status.dataplaneProxies)==null?void 0:i.healthy)+" healthy ("+n((p=o.status.dataplaneProxies)==null?void 0:p.total)+` total)
                `,1)]}),_:2},1024),t(),o.namespace?(c(),d(u,{key:0,layout:"horizontal"},{title:e(()=>[t(`
                  Namespace
                `)]),body:e(()=>[t(n(o.namespace),1)]),_:2},1024)):h("",!0),t(),D("use zones")&&o.zone?(c(),d(u,{key:1,layout:"horizontal"},{title:e(()=>[t(`
                  Zone
                `)]),body:e(()=>[s(f,{to:{name:"zone-cp-detail-view",params:{zone:o.zone}}},{default:e(()=>[t(n(o.zone),1)]),_:2},1032,["to"])]),_:2},1024)):h("",!0),t(),s(u,{layout:"horizontal"},{title:e(()=>[t(`
                  Ports
                `)]),body:e(()=>[s(g,null,{default:e(()=>[(c(!0),x(C,null,z(o.spec.ports,a=>(c(),d(_,{key:a.port,appearance:"info"},{default:e(()=>[t(n(a.port)+"/"+n(a.appProtocol)+n(a.name&&a.name!==String(a.port)?` (${a.name})`:""),1)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024),t(),s(u,{layout:"horizontal"},{title:e(()=>[t(`
                  Selector
                `)]),body:e(()=>[s(g,null,{default:e(()=>[(c(!0),x(C,null,z(o.spec.selector.dataplaneTags,(a,i)=>(c(),d(_,{key:`${i}:${a}`,appearance:"info"},{default:e(()=>[t(n(i)+":"+n(a),1)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)]),t(),m("div",null,[m("h3",null,n(y("services.routes.item.config")),1),t(),m("div",$,[s(F,{resource:o.config,"is-searchable":"",query:r.params.codeSearch,"is-filter-mode":r.params.codeFilter,"is-reg-exp-mode":r.params.codeRegExp,onQueryChange:a=>r.update({codeSearch:a}),onFilterModeChange:a=>r.update({codeFilter:a}),onRegExpModeChange:a=>r.update({codeRegExp:a})},{default:e(({copy:a,copying:i})=>[i?(c(),d(S,{key:0,src:`/meshes/${r.params.mesh}/mesh-service/${r.params.service}/as/kubernetes?no-store`,onChange:p=>{a(v=>v(p))},onError:p=>{a((v,B)=>B(p))}},null,8,["src","onChange","onError"])):h("",!0)]),_:2},1032,["resource","query","is-filter-mode","is-reg-exp-mode","onQueryChange","onFilterModeChange","onRegExpModeChange"])])])])]),_:2},1024)]),_:2},1032,["items","predicate"])]),_:1})}}});export{Q as default};
