import{d as q,r as a,p as u,o as e,w as o,b as r,l as s,e as n,q as L,O as C,t as p,m as k,F as N,c as l,N as d,L as w,Y as E}from"./index-GFWvH1vH.js";import{A as I,a as M}from"./AccordionList-Cv11EaJI.js";import{P as G}from"./PolicyTypeTag-C28z_SLd.js";import{K as H}from"./kri-D19gROKk.js";const J={class:"stack-with-borders"},Q={class:"stack-with-borders"},U={class:"mt-2"},ot=q({__name:"DataPlaneOutboundSummaryOverviewView",props:{data:{},routeName:{}},setup(x){const _=x;return(W,t)=>{const P=a("XBadge"),O=a("XAction"),S=a("XCodeBlock"),z=a("XCard"),$=a("DataLoader"),X=a("DataSource"),g=a("XLayout"),R=a("AppView"),F=a("RouteView");return e(),u(F,{params:{mesh:"",proxy:"",connection:""},name:_.routeName},{default:o(({t:K,route:b,uri:v})=>[r(R,null,{default:o(()=>[r(g,{type:"stack"},{default:o(()=>[s("div",J,[r(C,{layout:"horizontal"},{title:o(()=>t[0]||(t[0]=[n(`
              Protocol
            `,-1)])),body:o(()=>[r(P,{appearance:"info"},{default:o(()=>[n(p(K(`http.api.value.${_.data.protocol}`)),1)]),_:2},1024)]),_:2,__:[1]},1024),t[4]||(t[4]=n()),r(C,{layout:"horizontal"},{title:o(()=>t[2]||(t[2]=[n(`
              Port
            `,-1)])),body:o(()=>[n(p(_.data.port),1)]),_:1,__:[3]})]),t[13]||(t[13]=n()),_.data?(e(),u(g,{key:0,type:"stack",size:"small"},{default:o(()=>[t[11]||(t[11]=s("h3",null,"Rules",-1)),t[12]||(t[12]=n()),r(X,{src:v(k(N),"/policy-types",{})},{default:o(({data:c,error:Y})=>[r(X,{src:v(k(N),"/meshes/:mesh/dataplanes/:name/policies/for/outbound/:kri",{mesh:b.params.mesh,name:b.params.proxy,kri:b.params.connection})},{default:o(({data:f,error:h})=>[r($,{data:[c,f],errors:[Y,h]},{default:o(()=>[(e(!0),l(d,null,w([Object.groupBy((c==null?void 0:c.policyTypes)??[],({name:i})=>i)],i=>(e(),u(I,{key:`${typeof i}`,"initially-open":0,"multiple-open":"",class:"stack","data-testid":"outbound-policies-rules"},{default:o(()=>[(e(!0),l(d,null,w((f==null?void 0:f.policies)||[],({conf:j,kind:m,origins:B})=>(e(),u(z,{key:m},{default:o(()=>[r(M,null,{"accordion-header":o(()=>[r(G,{"policy-type":m},{default:o(()=>[n(p(m),1)]),_:2},1032,["policy-type"])]),"accordion-content":o(()=>[s("div",Q,[B.length>0?(e(),u(C,{key:0,layout:"horizontal"},{title:o(()=>t[5]||(t[5]=[n(`
                                  Origin policies
                                `,-1)])),body:o(()=>[s("ul",null,[(e(!0),l(d,null,w(B,y=>(e(),l("li",{key:y.kri},[(e(!0),l(d,null,w([k(H).fromString(y.kri)],({mesh:V,name:A})=>(e(),l(d,{key:`${V}-${A}`},[i[m]?(e(),u(O,{key:0,to:{name:"policy-detail-view",params:{mesh:V,policyPath:i[m][0].path,policy:A}}},{default:o(()=>[n(p(y.kri),1)]),_:2},1032,["to"])):(e(),l(d,{key:1},[n(p(y.kri),1)],64))],64))),128))]))),128))])]),_:2,__:[6]},1024)):L("",!0),t[9]||(t[9]=n()),s("div",null,[t[7]||(t[7]=s("dt",null,`
                                  Config
                                `,-1)),t[8]||(t[8]=n()),s("dd",U,[s("div",null,[r(S,{code:k(E).stringify(j),language:"yaml","show-copy-button":!1},null,8,["code"])])])])])]),_:2,__:[10]},1024)]),_:2},1024))),128))]),_:2},1024))),128))]),_:2},1032,["data","errors"])]),_:2},1032,["src"])]),_:2},1032,["src"])]),_:2,__:[11,12]},1024)):L("",!0)]),_:2,__:[13]},1024)]),_:2},1024)]),_:1},8,["name"])}}});export{ot as default};
