import{d as D,a as t,o as n,b as i,w as a,e as o,m as b,f as p,p as d,aG as S,a1 as T,t as k,E as x,q as r}from"./index-DErYAxry.js";import{A}from"./AppCollection-CiaTWp17.js";import{S as N}from"./SummaryView-n4OolBax.js";const E=D({__name:"MeshServiceListView",setup(R){return(X,q)=>{const l=t("RouteTitle"),_=t("XTeleportTemplate"),u=t("XAction"),v=t("RouterView"),h=t("DataCollection"),f=t("DataLoader"),w=t("KCard"),g=t("AppView"),C=t("RouteView"),V=t("DataSource");return n(),i(V,{src:"/me"},{default:a(({data:c})=>[c?(n(),i(C,{key:0,name:"mesh-service-list-view",params:{page:1,size:c.pageSize,mesh:"",service:""}},{default:a(({route:s,t:y,uri:z})=>[o(g,null,{title:a(()=>[o(_,{to:{name:"service-list-tabs-view-title"}},{default:a(()=>[b("h2",null,[o(l,{title:y("services.routes.mesh-service-list-view.title")},null,8,["title"])])]),_:2},1024)]),default:a(()=>[p(),o(w,null,{default:a(()=>[o(f,{src:z(d(S),"/meshes/:mesh/mesh-services",{mesh:s.params.mesh},{page:s.params.page,size:s.params.size})},{loadable:a(({data:e})=>[o(h,{type:"services",items:(e==null?void 0:e.items)??[void 0]},{default:a(()=>[o(A,{"data-testid":"service-collection",headers:[{label:"Name",key:"name"},{label:"Namespace",key:"namespace"}],"page-number":s.params.page,"page-size":s.params.size,total:e==null?void 0:e.total,items:e==null?void 0:e.items,"is-selected-row":m=>m.name===s.params.service,onChange:s.update},{name:a(({row:m})=>[o(T,{text:m.name},{default:a(()=>[o(u,{to:{name:"mesh-service-summary-view",params:{mesh:m.mesh,service:m.id},query:{page:s.params.page,size:s.params.size}}},{default:a(()=>[p(k(m.name),1)]),_:2},1032,["to"])]),_:2},1032,["text"])]),_:2},1032,["page-number","page-size","total","items","is-selected-row","onChange"]),p(),e!=null&&e.items&&s.params.service?(n(),i(v,{key:0},{default:a(m=>[o(N,{onClose:B=>s.replace({name:"mesh-service-list-view",params:{mesh:s.params.mesh},query:{page:s.params.page,size:s.params.size}})},{default:a(()=>[(n(),i(x(m.Component),{items:e==null?void 0:e.items},null,8,["items"]))]),_:2},1032,["onClose"])]),_:2},1024)):r("",!0)]),_:2},1032,["items"])]),_:2},1032,["src"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["params"])):r("",!0)]),_:1})}}});export{E as default};
