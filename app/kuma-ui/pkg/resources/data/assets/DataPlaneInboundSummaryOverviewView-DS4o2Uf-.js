import{d as q,r as l,p as X,o as s,w as r,b as n,e,c as a,q as k,l as o,t as w,m as A,F as z,a9 as D,N as g,L as B,Y as E}from"./index-AyKB-3zh.js";import{A as G,a as H}from"./AccordionList-C_U-yGv-.js";import{P as J}from"./PolicyTypeTag-DcWSilQ7.js";import{T as K}from"./TagList-C3VBc3xN.js";import{R as Q}from"./RuleMatchers-CFYHC1rD.js";const U={key:0},W={key:1},Z={key:0},h={class:"mt-4"},tt={key:0},ot={key:1},et={colspan:"2"},dt=q({__name:"DataPlaneInboundSummaryOverviewView",props:{data:{},routeName:{}},setup(P){const u=P;return(nt,t)=>{const $=l("XBadge"),C=l("XCopyButton"),N=l("XTable"),R=l("XAction"),c=l("XCodeBlock"),_=l("XLayout"),S=l("XCard"),F=l("DataCollection"),O=l("DataLoader"),L=l("DataSource"),T=l("AppView"),j=l("RouteView");return s(),X(j,{params:{mesh:"",proxy:"",connection:""},name:u.routeName},{default:r(({t:I,route:b,uri:V})=>[n(T,null,{default:r(()=>[n(_,{type:"stack"},{default:r(()=>[n(N,{variant:"kv"},{default:r(()=>[o("tr",null,[t[0]||(t[0]=o("th",{scope:"row"},`
              Tags
            `,-1)),t[1]||(t[1]=e()),o("td",null,[n(K,{tags:u.data.tags,alignment:"right"},null,8,["tags"])])]),t[10]||(t[10]=e()),o("tr",null,[t[2]||(t[2]=o("th",{scope:"row"},`
              Protocol
            `,-1)),t[3]||(t[3]=e()),o("td",null,[n($,{appearance:"info"},{default:r(()=>[e(w(I(`http.api.value.${u.data.protocol}`)),1)]),_:2},1024)])]),t[11]||(t[11]=e()),o("tr",null,[t[4]||(t[4]=o("th",{scope:"row"},`
              Address
            `,-1)),t[5]||(t[5]=e()),o("td",null,[n(C,{text:`${u.data.addressPort}`},null,8,["text"])])]),t[12]||(t[12]=e()),u.data.serviceAddressPort.length>0?(s(),a("tr",U,[t[6]||(t[6]=o("th",{scope:"row"},`
              Service address
            `,-1)),t[7]||(t[7]=e()),o("td",null,[n(C,{text:`${u.data.serviceAddressPort}`},null,8,["text"])])])):k("",!0),t[13]||(t[13]=e()),u.data.portName.length>0?(s(),a("tr",W,[t[8]||(t[8]=o("th",{scope:"row"},`
              Name
            `,-1)),t[9]||(t[9]=e()),o("td",null,[n(C,{text:`${u.data.portName}`},null,8,["text"])])])):k("",!0)]),_:2},1024),t[25]||(t[25]=e()),u.data?(s(),a("div",Z,[t[23]||(t[23]=o("h3",null,"Rules",-1)),t[24]||(t[24]=e()),n(L,{src:V(A(z),"/policy-types",{})},{default:r(({data:v,error:M})=>[n(L,{src:V(A(D),"/meshes/:mesh/rules/for/:dataplane",{mesh:b.params.mesh,dataplane:b.params.proxy})},{default:r(({data:x,error:Y})=>[n(O,{data:[v,x],errors:[M,Y]},{default:r(()=>[(s(!0),a(g,null,B([Object.groupBy((v==null?void 0:v.policyTypes)??[],({name:m})=>m)],m=>(s(),X(F,{key:`${typeof m}`,predicate:i=>{var p,f;return(i.ruleType==="inbound"||i.ruleType==="from"&&!((f=(p=m[i.type])==null?void 0:p[0])!=null&&f.policy.isFromAsRules))&&Number(i.inbound.port)===Number(b.params.connection.split("_")[1])},items:[...x.rules,...x.inboundRules]},{default:r(({items:i})=>[o("div",h,[n(G,{"initially-open":0,"multiple-open":"",class:"stack"},{default:r(()=>[(s(!0),a(g,null,B(Object.groupBy(i,p=>p.type),(p,f)=>(s(),X(S,{key:f},{default:r(()=>[n(H,null,{"accordion-header":r(()=>[n(J,{"policy-type":f},{default:r(()=>[e(w(f)+" ("+w(p.length)+`)
                                `,1)]),_:2},1032,["policy-type"])]),"accordion-content":r(()=>[n(N,{variant:"kv"},{default:r(()=>[(s(!0),a(g,null,B(p,y=>(s(),a(g,{key:y},[y.matchers.length>0?(s(),a("tr",tt,[t[14]||(t[14]=o("th",{scope:"row"},`
                                        From
                                      `,-1)),t[15]||(t[15]=e()),o("td",null,[o("p",null,[n(Q,{items:y.matchers},null,8,["items"])])])])):k("",!0),t[20]||(t[20]=e()),y.origins.length>0?(s(),a("tr",ot,[t[16]||(t[16]=o("th",{scope:"row"},`
                                        Origin policies
                                      `,-1)),t[17]||(t[17]=e()),o("td",null,[o("ul",null,[(s(!0),a(g,null,B(y.origins,d=>(s(),a("li",{key:`${d.mesh}-${d.name}`},[m[d.type]?(s(),X(R,{key:0,to:{name:"policy-detail-view",params:{mesh:d.mesh,policyPath:m[d.type][0].path,policy:d.name}}},{default:r(()=>[e(w(d.name),1)]),_:2},1032,["to"])):(s(),a(g,{key:1},[e(w(d.name),1)],64))]))),128))])])])):k("",!0),t[21]||(t[21]=e()),o("tr",null,[o("td",et,[n(_,{type:"stack",size:"small"},{default:r(()=>[t[18]||(t[18]=o("span",null,"Config",-1)),t[19]||(t[19]=e()),n(c,{code:A(E).stringify(y.raw),language:"yaml","show-copy-button":!1},null,8,["code"])]),_:2},1024)])])],64))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)])]),_:2},1032,["predicate","items"]))),128))]),_:2},1032,["data","errors"])]),_:2},1032,["src"])]),_:2},1032,["src"])])):k("",!0)]),_:2},1024)]),_:2},1024)]),_:1},8,["name"])}}});export{dt as default};
