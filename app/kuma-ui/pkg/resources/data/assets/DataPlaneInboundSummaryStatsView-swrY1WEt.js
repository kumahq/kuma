import{K as R}from"./index-CMzbRF1u.js";import{d as S,a as o,o as c,b as l,w as t,e as r,m as _,f,Y as k,q as h}from"./index-G4vI7xl4.js";import{C as E}from"./CodeBlock-q0w5aanp.js";import{E as V}from"./ErrorBlock-LAhFgvYT.js";import{_ as v}from"./LoadingBlock.vue_vue_type_script_setup_true_lang-YOir_rOx.js";import"./TextWithCopyButton-L1zSxs0W.js";import"./CopyButton-otyxHii5.js";import"./WarningIcon.vue_vue_type_script_setup_true_lang-t6VKdIxt.js";const q=S({__name:"DataPlaneInboundSummaryStatsView",props:{inbound:{},gateway:{}},setup(g){const C=g,y=(p,d)=>{if(C.gateway){const a=d.split(":");return p.raw.split(`
`).filter(e=>e.includes(`.${a[0]}.`)).filter(e=>!e.startsWith("listener.")||e.includes(`_${a[1]}.`)).filter(e=>!e.includes(".rds.")||e.includes(`_${a[1]}_*.`)).map(e=>e.replace(`${a[0]}.`,"")).map(e=>e.replace(`_${a[1]}.`,".")).map(e=>{if(e.includes(".rds.")){const i=e.split(".");return i.splice(2,1),i.join(".")}else return e}).join(`
`)}else{const a=`localhost_${d.split(":")[1]}`;return p.raw.split(`
`).filter(e=>e.includes(`.${a}.`)).map(e=>e.replace(`${a}.`,"")).join(`
`)}};return(p,d)=>{const a=o("RouteTitle"),e=o("KButton"),i=o("DataSource"),w=o("AppView"),$=o("RouteView");return c(),l($,{params:{codeSearch:"",codeFilter:!1,codeRegExp:!1,mesh:"",dataPlane:"",service:""},name:"data-plane-inbound-summary-stats-view"},{default:t(({route:n})=>[r(w,null,{title:t(()=>[_("h3",null,[r(a,{title:"Stats"})])]),default:t(()=>[f(),_("div",null,[r(i,{src:`/meshes/${n.params.mesh}/dataplanes/${n.params.dataPlane}/stats/${n.params.service}`},{default:t(({data:m,error:u,refresh:x})=>[u?(c(),l(V,{key:0,error:u},null,8,["error"])):m===void 0?(c(),l(v,{key:1})):(c(),l(E,{key:2,language:"json",code:y(m,n.params.service),"is-searchable":"",query:n.params.codeSearch,"is-filter-mode":n.params.codeFilter,"is-reg-exp-mode":n.params.codeRegExp,onQueryChange:s=>n.update({codeSearch:s}),onFilterModeChange:s=>n.update({codeFilter:s}),onRegExpModeChange:s=>n.update({codeRegExp:s})},{"primary-actions":t(()=>[r(e,{appearance:"primary",onClick:x},{default:t(()=>[r(h(k),{size:h(R)},null,8,["size"]),f(`
                Refresh
              `)]),_:2},1032,["onClick"])]),_:2},1032,["code","query","is-filter-mode","is-reg-exp-mode","onQueryChange","onFilterModeChange","onRegExpModeChange"]))]),_:2},1032,["src"])])]),_:2},1024)]),_:1})}}});export{q as default};
