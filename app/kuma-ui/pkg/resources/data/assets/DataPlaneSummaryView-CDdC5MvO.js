import{d as M,r as d,o as i,q as u,w as e,b as o,m,t as l,e as a,c as C,M as T,N as x,n as P,T as q,U as y,S as I,p as b,ag as U,s as g,Y as O}from"./index-CjpuIAP7.js";import{T as Q}from"./TagList-CSMSGr39.js";import{_ as K}from"./ResourceCodeBlock.vue_vue_type_script_setup_true_lang-CN4zJ844.js";const Y={class:"stack-with-borders"},Z={class:"stack-with-borders"},W=M({__name:"DataPlaneSummaryView",props:{items:{},routeName:{}},setup(X){const w=X;return(j,t)=>{const E=d("XEmptyState"),R=d("RouteTitle"),h=d("XAction"),v=d("XSelect"),c=d("XLayout"),D=d("XIcon"),z=d("DataCollection"),V=d("XCopyButton"),N=d("DataSource"),$=d("AppView"),B=d("RouteView");return i(),u(B,{name:w.routeName,params:{mesh:"",proxy:"",codeSearch:"",codeFilter:!1,codeRegExp:!1,format:String}},{default:e(({route:p,t:r,uri:F,can:L})=>[o(z,{items:w.items,predicate:_=>_.id===p.params.proxy},{empty:e(()=>[o(E,null,{title:e(()=>[m("h2",null,l(r("common.collection.summary.empty_title",{type:"Data Plane Proxy"})),1)]),default:e(()=>[t[0]||(t[0]=a()),m("p",null,l(r("common.collection.summary.empty_message",{type:"Data Plane Proxy"})),1)]),_:2},1024)]),default:e(({items:_})=>[(i(!0),C(T,null,x([_[0]],n=>(i(),u($,{key:n.id},{title:e(()=>[m("h2",{class:P(`type-${n.dataplaneType}`)},[o(h,{to:{name:"data-plane-detail-view",params:{proxy:n.id}}},{default:e(()=>[o(R,{title:r("data-planes.routes.item.title",{name:n.name})},null,8,["title"])]),_:2},1032,["to"])],2)]),default:e(()=>[t[19]||(t[19]=a()),o(c,null,{default:e(()=>[m("header",null,[o(c,{type:"separated",size:"max"},{default:e(()=>[m("h3",null,l(r("data-planes.routes.item.config")),1),t[1]||(t[1]=a()),m("div",null,[o(v,{label:r("data-planes.routes.item.format"),selected:p.params.format,onChange:s=>{p.update({format:s})}},q({_:2},[x(["structured","yaml"],s=>({name:`${s}-option`,fn:e(()=>[a(l(r(`data-planes.routes.item.formats.${s}`)),1)])}))]),1032,["label","selected","onChange"])])]),_:2},1024)])]),_:2},1024),t[20]||(t[20]=a()),p.params.format==="structured"?(i(),u(c,{key:0,type:"stack","data-testid":"structured-view"},{default:e(()=>[m("div",Y,[o(y,{layout:"horizontal"},{title:e(()=>[a(l(r("http.api.property.status")),1)]),body:e(()=>[o(c,{type:"separated"},{default:e(()=>[o(I,{status:n.status},null,8,["status"]),t[2]||(t[2]=a()),n.dataplaneType==="standard"?(i(),u(z,{key:0,items:n.dataplane.networking.inbounds,predicate:s=>s.state!=="Ready",empty:!1},{default:e(({items:s})=>[o(D,{name:"info",color:b(U)},{default:e(()=>[m("ul",null,[(i(!0),C(T,null,x(s,f=>(i(),C("li",{key:`${f.service}:${f.port}`},l(r("data-planes.routes.item.unhealthy_inbound",{service:f.service,port:f.port})),1))),128))])]),_:2},1032,["color"])]),_:2},1032,["items","predicate"])):g("",!0)]),_:2},1024)]),_:2},1024),t[10]||(t[10]=a()),o(y,{layout:"horizontal"},{title:e(()=>t[4]||(t[4]=[a(`
                      Type
                    `)])),body:e(()=>[a(l(r(`data-planes.type.${n.dataplaneType}`)),1)]),_:2},1024),t[11]||(t[11]=a()),n.namespace.length>0?(i(),u(y,{key:0,layout:"horizontal"},{title:e(()=>[a(l(r("data-planes.routes.item.namespace")),1)]),body:e(()=>[a(l(n.namespace),1)]),_:2},1024)):g("",!0),t[12]||(t[12]=a()),L("use zones")&&n.zone?(i(),u(y,{key:1,layout:"horizontal"},{title:e(()=>t[7]||(t[7]=[a(`
                      Zone
                    `)])),body:e(()=>[o(h,{to:{name:"zone-cp-detail-view",params:{zone:n.zone}}},{default:e(()=>[a(l(n.zone),1)]),_:2},1032,["to"])]),_:2},1024)):g("",!0),t[13]||(t[13]=a()),o(y,{layout:"horizontal"},{title:e(()=>[a(l(r("http.api.property.modificationTime")),1)]),body:e(()=>[a(l(r("common.formats.datetime",{value:Date.parse(n.modificationTime)})),1)]),_:2},1024)]),t[18]||(t[18]=a()),n.dataplane.networking.gateway?(i(),u(c,{key:0,type:"stack"},{default:e(()=>[m("h3",null,l(r("data-planes.routes.item.gateway")),1),t[17]||(t[17]=a()),m("div",Z,[o(y,{layout:"horizontal"},{title:e(()=>[a(l(r("http.api.property.tags")),1)]),body:e(()=>[o(Q,{alignment:"right",tags:n.dataplane.networking.gateway.tags},null,8,["tags"])]),_:2},1024),t[16]||(t[16]=a()),o(y,{layout:"horizontal"},{title:e(()=>[a(l(r("http.api.property.address")),1)]),body:e(()=>[o(V,{text:`${n.dataplane.networking.address}`},null,8,["text"])]),_:2},1024)])]),_:2},1024)):g("",!0)]),_:2},1024)):(i(),u(c,{key:1,type:"stack"},{default:e(()=>[o(K,{resource:n.config,language:"yaml","is-searchable":"",query:p.params.codeSearch,"is-filter-mode":p.params.codeFilter,"is-reg-exp-mode":p.params.codeRegExp,onQueryChange:s=>p.update({codeSearch:s}),onFilterModeChange:s=>p.update({codeFilter:s}),onRegExpModeChange:s=>p.update({codeRegExp:s})},{default:e(({copy:s,copying:f})=>[f?(i(),u(N,{key:0,src:F(b(O),"/meshes/:mesh/dataplanes/:name/as/kubernetes",{mesh:p.params.mesh,name:p.params.proxy},{cacheControl:"no-store"}),onChange:k=>{s(S=>S(k))},onError:k=>{s((S,A)=>A(k))}},null,8,["src","onChange","onError"])):g("",!0)]),_:2},1032,["resource","query","is-filter-mode","is-reg-exp-mode","onQueryChange","onFilterModeChange","onRegExpModeChange"])]),_:2},1024))]),_:2},1024))),128))]),_:2},1032,["items","predicate"])]),_:1},8,["name"])}}});export{W as default};
