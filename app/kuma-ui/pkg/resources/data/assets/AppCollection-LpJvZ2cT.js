import{d as D,l as F,I as L,A as u,D as P,a3 as h,a as V,o as i,b as g,O as k,w as l,e as T,Y as j,f as r,t as d,p as m,c as S,F as w,q as N,J as E,y as K,C as U,r as $,a4 as W,a5 as X,_ as H}from"./index-C4D0ozC7.js";const J={key:0,class:"app-collection-toolbar"},A=5,Y=D({__name:"AppCollection",props:{isSelectedRow:{type:[Function,null],default:null},total:{default:0},pageNumber:{default:0},pageSize:{default:30},items:{},headers:{},error:{default:void 0},emptyStateTitle:{default:void 0},emptyStateMessage:{default:void 0},emptyStateCtaTo:{default:void 0},emptyStateCtaText:{default:void 0}},emits:["change"],setup(x,{emit:z}){const{t:I}=F(),e=x,M=z,O=L(),v=u(e.items),_=u(0),f=u(0),y=u(e.pageNumber),b=u(e.pageSize),R=P(()=>{const t=e.headers.filter(n=>["details","warnings","actions"].includes(n.key));if(t.length>4)return"initial";const a=100-t.length*A,o=e.headers.length-t.length;return`calc(${a}% / ${o})`});h(()=>e.items,(t,a)=>{t!==a&&(_.value++,v.value=e.items)}),h(()=>e.pageNumber,function(){e.pageNumber!==y.value&&f.value++}),h(()=>e.headers,function(){f.value++});function q(t){if(!t)return{};const a={};return e.isSelectedRow!==null&&e.isSelectedRow(t)&&(a.class="is-selected"),a}const B=t=>{const a=t.target.closest("tr");if(a){const o=["td:first-child a","[data-action]"].reduce((n,s)=>n===null?a.querySelector(s):n,null);o!==null&&o.closest("tr, li")===a&&o.click()}};return(t,a)=>{var n;const o=V("XAction");return i(),g(m(X),{key:f.value,class:"app-collection",style:W(`--column-width: ${R.value}; --special-column-width: ${A}%;`),"has-error":typeof e.error<"u","pagination-total-items":e.total,"initial-fetcher-params":{page:e.pageNumber,pageSize:e.pageSize},headers:e.headers,"fetcher-cache-key":String(_.value),fetcher:({page:s,pageSize:c,query:C})=>{const p={};return y.value!==s&&(p.page=s),b.value!==c&&(p.size=c),y.value=s,b.value=c,Object.keys(p).length>0&&M("change",p),{data:v.value}},"cell-attrs":({headerKey:s})=>({class:`${s}-column`}),"row-attrs":q,"disable-sorting":"","disable-pagination":e.pageNumber===0,"hide-pagination-when-optional":"","onRow:click":B},k({_:2},[((n=e.items)==null?void 0:n.length)===0?{name:"empty-state",fn:l(()=>[T(j,null,k({title:l(()=>[r(d(e.emptyStateTitle??m(I)("common.emptyState.title")),1)]),default:l(()=>[r(),e.emptyStateMessage?(i(),S(w,{key:0},[r(d(e.emptyStateMessage),1)],64)):N("",!0),r()]),_:2},[e.emptyStateCtaTo?{name:"action",fn:l(()=>[typeof e.emptyStateCtaTo=="string"?(i(),g(o,{key:0,type:"docs",href:e.emptyStateCtaTo},{default:l(()=>[r(d(e.emptyStateCtaText),1)]),_:1},8,["href"])):(i(),g(m(E),{key:1,appearance:"primary",to:e.emptyStateCtaTo},{default:l(()=>[T(m(K)),r(" "+d(e.emptyStateCtaText),1)]),_:1},8,["to"]))]),key:"0"}:void 0]),1024)]),key:"0"}:void 0,U(Object.keys(m(O)),s=>({name:s,fn:l(({row:c,rowValue:C})=>[s==="toolbar"?(i(),S("div",J,[$(t.$slots,"toolbar",{},void 0,!0)])):(i(),S(w,{key:1},[(e.items??[]).length>0?$(t.$slots,s,{key:0,row:c,rowValue:C},void 0,!0):N("",!0)],64))])}))]),1032,["style","has-error","pagination-total-items","initial-fetcher-params","headers","fetcher-cache-key","fetcher","cell-attrs","disable-pagination"])}}}),Q=H(Y,[["__scopeId","data-v-11b03fb4"]]);export{Q as A};
