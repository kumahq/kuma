import{d as q,r as a,p as d,o as e,w as o,b as n,l as s,e as r,q as L,O as b,t as _,m as k,F as N,c as l,N as u,L as w,Y as E}from"./index-WlwqbDfl.js";import{A as I,a as M}from"./AccordionList-BcUsD0TK.js";import{P as G}from"./PolicyTypeTag-B9FYIiwk.js";import{K as H}from"./kri-CjUta6FR.js";const J={class:"stack-with-borders"},Q={class:"stack-with-borders"},U={class:"mt-2"},ot=q({__name:"DataPlaneOutboundSummaryOverviewView",props:{data:{},routeName:{}},setup(P){const i=P;return(W,t)=>{const x=a("XBadge"),O=a("XAction"),S=a("XCodeBlock"),z=a("XCard"),$=a("DataLoader"),C=a("DataSource"),X=a("XLayout"),F=a("AppView"),K=a("RouteView");return e(),d(K,{params:{mesh:"",proxy:"",connection:""},name:i.routeName},{default:o(({t:R,route:g,uri:v})=>[n(F,null,{default:o(()=>[n(X,{type:"stack"},{default:o(()=>[s("div",J,[n(b,{layout:"horizontal"},{title:o(()=>t[0]||(t[0]=[r(`
              Protocol
            `,-1)])),body:o(()=>[n(x,{appearance:"info"},{default:o(()=>[r(_(R(`http.api.value.${i.data.protocol}`)),1)]),_:2},1024)]),_:2,__:[1]},1024),t[4]||(t[4]=r()),n(b,{layout:"horizontal"},{title:o(()=>t[2]||(t[2]=[r(`
              Port
            `,-1)])),body:o(()=>[r(_(i.data.port),1)]),_:1,__:[3]})]),t[13]||(t[13]=r()),i.data?(e(),d(X,{key:0,type:"stack",size:"small"},{default:o(()=>[t[11]||(t[11]=s("h3",null,"Policies",-1)),t[12]||(t[12]=r()),n(C,{src:v(k(N),"/policy-types",{})},{default:o(({data:c,error:Y})=>[n(C,{src:v(k(N),"/meshes/:mesh/dataplanes/:name/policies/for/outbound/:kri",{mesh:g.params.mesh,name:g.params.proxy,kri:i.data.kri})},{default:o(({data:f,error:h})=>[n($,{data:[c,f],errors:[Y,h]},{default:o(()=>[(e(!0),l(u,null,w([Object.groupBy((c==null?void 0:c.policyTypes)??[],({name:m})=>m)],m=>(e(),d(I,{key:`${typeof m}`,"initially-open":0,"multiple-open":"",class:"stack","data-testid":"outbound-policies-rules"},{default:o(()=>[(e(!0),l(u,null,w((f==null?void 0:f.policies)||[],({conf:j,kind:p,origins:B})=>(e(),d(z,{key:p},{default:o(()=>[n(M,null,{"accordion-header":o(()=>[n(G,{"policy-type":p},{default:o(()=>[r(_(p),1)]),_:2},1032,["policy-type"])]),"accordion-content":o(()=>[s("div",Q,[B.length>0?(e(),d(b,{key:0,layout:"horizontal"},{title:o(()=>t[5]||(t[5]=[r(`
                                  Origin policies
                                `,-1)])),body:o(()=>[s("ul",null,[(e(!0),l(u,null,w(B,y=>(e(),l("li",{key:y.kri},[(e(!0),l(u,null,w([k(H).fromString(y.kri)],({mesh:V,name:A})=>(e(),l(u,{key:`${V}-${A}`},[m[p]?(e(),d(O,{key:0,to:{name:"policy-detail-view",params:{mesh:V,policyPath:m[p][0].path,policy:A}}},{default:o(()=>[r(_(y.kri),1)]),_:2},1032,["to"])):(e(),l(u,{key:1},[r(_(y.kri),1)],64))],64))),128))]))),128))])]),_:2,__:[6]},1024)):L("",!0),t[9]||(t[9]=r()),s("div",null,[t[7]||(t[7]=s("dt",null,`
                                  Config
                                `,-1)),t[8]||(t[8]=r()),s("dd",U,[s("div",null,[n(S,{code:k(E).stringify(j),language:"yaml","show-copy-button":!1},null,8,["code"])])])])])]),_:2,__:[10]},1024)]),_:2},1024))),128))]),_:2},1024))),128))]),_:2},1032,["data","errors"])]),_:2},1032,["src"])]),_:2},1032,["src"])]),_:2,__:[11,12]},1024)):L("",!0)]),_:2,__:[13]},1024)]),_:2},1024)]),_:1},8,["name"])}}});export{ot as default};
