import{d as $,j as L,r as S,o as e,e as u,g as y,O as V,P as A,q as P,h as n,w as r,a,F as k,s as C,t as B,b as h,G as q}from"./index-bb115be3.js";import{p as v,E as w,q as b,o as g,m as N,g as E,A as F,_ as O}from"./RouteView.vue_vue_type_script_setup_true_lang-e50bfc04.js";import{_ as j}from"./ResourceCodeBlock.vue_vue_type_script_setup_true_lang-73008343.js";import{T as I}from"./TabsWidget-4ef098a4.js";import{_ as R}from"./RouteTitle.vue_vue_type_script_setup_true_lang-c0548d11.js";import"./CodeBlock.vue_vue_type_style_index_0_lang-bc7de660.js";import"./CopyButton-9e08aa37.js";const D=P("h2",null,"Dataplanes",-1),G=$({__name:"PolicyConnections",props:{mesh:{type:String,required:!0},policyPath:{type:String,required:!0},policyName:{type:String,required:!0}},setup(d){const t=d,c=L("");return(_,s)=>{const o=S("RouterLink");return e(),u(k,null,[D,y(),V(P("input",{id:"dataplane-search","onUpdate:modelValue":s[0]||(s[0]=l=>c.value=l),type:"text",class:"k-input mt-4",placeholder:"Filter by name",required:"","data-testid":"dataplane-search-input"},null,512),[[A,c.value]]),y(),n(g,{src:`/meshes/${t.mesh}/policy-path/${t.policyPath}/policy/${t.policyName}/dataplanes`},{default:r(({data:l,isLoading:m,error:i})=>[m?(e(),a(v,{key:0})):i?(e(),a(w,{key:1,error:i},null,8,["error"])):l===void 0||l.items.length===0?(e(),a(b,{key:2})):(e(!0),u(k,{key:3},C(l.items.filter(p=>p.dataplane.name.toLowerCase().includes(c.value.toLowerCase())),(p,f)=>(e(),u("p",{key:f,class:"mt-2","data-testid":"dataplane-name"},[n(o,{to:{name:"data-plane-detail-view",params:{mesh:p.dataplane.mesh,dataPlane:p.dataplane.name}}},{default:r(()=>[y(B(p.dataplane.name),1)]),_:2},1032,["to"])]))),128))]),_:1},8,["src"])],64)}}}),K=$({__name:"PolicyDetails",props:{policy:{type:Object,required:!0},path:{type:String,required:!0}},setup(d){const t=d,c=N(),_=[{hash:"#overview",title:"Overview"},{hash:"#affected-dpps",title:"Affected DPPs"}];async function s(o){const{name:l,mesh:m}=t.policy,i=t.path;return await c.getSinglePolicyEntity({name:l,mesh:m,path:i},o)}return(o,l)=>(e(),a(I,{tabs:_},{overview:r(()=>[n(h(q),null,{body:r(()=>[n(j,{id:"code-block-policy",resource:t.policy,"resource-fetcher":s,"is-searchable":""},null,8,["resource"])]),_:1})]),"affected-dpps":r(()=>[n(h(q),null,{body:r(()=>[n(G,{mesh:t.policy.mesh,"policy-name":t.policy.name,"policy-path":t.path},null,8,["mesh","policy-name","policy-path"])]),_:1})]),_:1}))}}),Q=$({__name:"PolicyDetailView",setup(d){const{t}=E();return(c,_)=>(e(),a(O,{name:"policy-detail-view","data-testid":"policy-detail-view"},{default:r(({route:s})=>[n(g,{src:"/*/policy-types"},{default:r(({data:o,isLoading:l,error:m})=>[l?(e(),a(v,{key:0})):m?(e(),a(w,{key:1,error:m},null,8,["error"])):o===void 0||o.policies.length===0?(e(),a(b,{key:2})):(e(!0),u(k,{key:3},C([o.policies.find(i=>i.path===s.params.policyPath)??o.policies[0]],i=>(e(),a(F,{key:i.name,breadcrumbs:[{to:{name:"policies-list-view",params:{mesh:s.params.mesh,policyPath:s.params.policyPath}},text:h(t)("policies.routes.item.breadcrumbs")}]},{title:r(()=>[P("h2",null,[n(R,{title:h(t)("policies.routes.item.title",{name:s.params.policy,type:i.name}),render:!0},null,8,["title"])])]),default:r(()=>[y(),n(g,{src:`/meshes/${s.params.mesh}/policy-path/${i.path}/policy/${s.params.policy}`},{default:r(({data:p,isLoading:f,error:x})=>[f?(e(),a(v,{key:0})):x?(e(),a(w,{key:1,error:x},null,8,["error"])):p===void 0?(e(),a(b,{key:2})):(e(),a(K,{key:3,policy:p,path:i.path,"data-testid":"detail-view-details"},null,8,["policy","path"]))]),_:2},1032,["src"])]),_:2},1032,["breadcrumbs"]))),128))]),_:2},1024)]),_:1}))}});export{Q as default};
