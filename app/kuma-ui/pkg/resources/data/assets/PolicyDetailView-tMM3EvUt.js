import{d as b,r as s,o as p,m,w as e,b as t,l as v,aA as D,A as P,e as l,t as c,c as R,F as S,E as L,p as i}from"./index-BRBWbknO.js";import{S as N}from"./SummaryView-CK1e_JHQ.js";const K=b({__name:"PolicyDetailView",setup(x){return(X,B)=>{const r=s("RouterLink"),u=s("XAction"),y=s("XActionGroup"),h=s("DataCollection"),f=s("RouterView"),w=s("DataLoader"),z=s("KCard"),g=s("AppView"),k=s("RouteView"),C=s("DataSource");return p(),m(C,{src:"/me"},{default:e(({data:_})=>[_?(p(),m(k,{key:0,name:"policy-detail-view",params:{mesh:"",policy:"",policyPath:"",dataPlane:"",s:"",page:1,size:_.pageSize}},{default:e(({route:a,t:d,uri:V,can:A})=>[t(g,null,{default:e(()=>[t(z,null,{default:e(()=>[t(w,{src:V(v(D),"/meshes/:mesh/policy-path/:path/policy/:name/dataplanes",{mesh:a.params.mesh,path:a.params.policyPath,name:a.params.policy},{page:a.params.page,size:a.params.size})},{loadable:e(({data:n})=>[t(h,{type:"data-planes",items:(n==null?void 0:n.items)??[void 0]},{default:e(()=>[t(P,{"page-number":a.params.page,"page-size":a.params.size,headers:[{label:"Name",key:"name"},{label:"Namespace",key:"namespace"},...A("use zones")?[{label:"Zone",key:"zone"}]:[],{label:"Actions",key:"actions",hideLabel:!0}],items:n==null?void 0:n.items,total:n==null?void 0:n.total,"is-selected-row":o=>o.id===a.params.dataPlane,onChange:a.update},{name:e(({row:o})=>[t(r,{"data-action":"",to:{name:"data-plane-detail-view",params:{dataPlane:o.id}}},{default:e(()=>[l(c(o.name),1)]),_:2},1032,["to"])]),namespace:e(({row:o})=>[l(c(o.namespace),1)]),zone:e(({row:o})=>[o.zone?(p(),m(r,{key:0,to:{name:"zone-cp-detail-view",params:{zone:o.zone}}},{default:e(()=>[l(c(o.zone),1)]),_:2},1032,["to"])):(p(),R(S,{key:1},[l(c(d("common.collection.none")),1)],64))]),actions:e(({row:o})=>[t(y,null,{default:e(()=>[t(u,{to:{name:"data-plane-detail-view",params:{dataPlane:o.id}}},{default:e(()=>[l(c(d("common.collection.actions.view")),1)]),_:2},1032,["to"])]),_:2},1024)]),_:2},1032,["page-number","page-size","headers","items","total","is-selected-row","onChange"])]),_:2},1032,["items"]),l(),t(f,null,{default:e(({Component:o})=>[a.child()?(p(),m(N,{key:0,onClose:E=>a.replace({params:{mesh:a.params.mesh},query:{page:a.params.page,size:a.params.size,s:a.params.s}})},{default:e(()=>[typeof n<"u"?(p(),m(L(o),{key:0,items:n.items},null,8,["items"])):i("",!0)]),_:2},1032,["onClose"])):i("",!0)]),_:2},1024)]),_:2},1032,["src"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["params"])):i("",!0)]),_:1})}}});export{K as default};
