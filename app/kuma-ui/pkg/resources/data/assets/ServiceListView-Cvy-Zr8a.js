import{d as T,i as n,o as i,a as m,w as s,j as t,g as A,k as l,A as p,aw as N,Y as g,t as r,b as _,H as d,K as R,r as B,e as w,_ as L}from"./index-DJJJbhb4.js";import{p as P}from"./kong-icons.es249-B2cFYeBL.js";import{A as I}from"./AppCollection-CFB36ii6.js";import{S as K}from"./StatusBadge-D5YRdgeg.js";import{S as X}from"./SummaryView-B3ZwfuDC.js";import"./kong-icons.es245-DWECRukk.js";const q=T({__name:"ServiceListView",setup(E){return($,j)=>{const h=n("RouteTitle"),y=n("XTeleportTemplate"),u=n("XAction"),k=n("RouterView"),C=n("DataCollection"),z=n("DataLoader"),V=n("KCard"),b=n("AppView"),S=n("RouteView"),x=n("DataSource");return i(),m(x,{src:"/me"},{default:s(({data:v})=>[v?(i(),m(S,{key:0,name:"service-list-view",params:{page:1,size:v.pageSize,mesh:"",service:""}},{default:s(({route:a,t:c,uri:D})=>[t(b,null,{title:s(()=>[t(y,{to:{name:"service-list-tabs-view-title"}},{default:s(()=>[A("h2",null,[t(h,{title:c("services.routes.items.title")},null,8,["title"])])]),_:2},1024)]),default:s(()=>[l(),t(V,null,{default:s(()=>[t(z,{src:D(p(N),"/meshes/:mesh/service-insights/of/:serviceType",{mesh:a.params.mesh,serviceType:"internal"},{page:a.params.page,size:a.params.size})},{loadable:s(({data:o})=>[t(C,{type:"services",items:(o==null?void 0:o.items)??[void 0]},{default:s(()=>[t(I,{class:"service-collection","data-testid":"service-collection",headers:[{label:"Name",key:"name"},{label:"Address",key:"addressPort"},{label:"DP proxies (online / total)",key:"online"},{label:"Status",key:"status"},{label:"Details",key:"details",hideLabel:!0}],"page-number":a.params.page,"page-size":a.params.size,total:o==null?void 0:o.total,items:o==null?void 0:o.items,"is-selected-row":e=>e.name===a.params.service,onChange:a.update},{name:s(({row:e})=>[t(g,{text:e.name},{default:s(()=>[t(u,{to:{name:"service-detail-view",params:{mesh:e.mesh,service:e.name},query:{page:a.params.page,size:a.params.size}}},{default:s(()=>[l(r(e.name),1)]),_:2},1032,["to"])]),_:2},1032,["text"])]),addressPort:s(({row:e})=>[e.addressPort?(i(),m(g,{key:0,text:e.addressPort},null,8,["text"])):(i(),_(d,{key:1},[l(r(c("common.collection.none")),1)],64))]),online:s(({row:e})=>[e.dataplanes?(i(),_(d,{key:0},[l(r(e.dataplanes.online||0)+" / "+r(e.dataplanes.total||0),1)],64)):(i(),_(d,{key:1},[l(r(c("common.collection.none")),1)],64))]),status:s(({row:e})=>[t(K,{status:e.status},null,8,["status"])]),details:s(({row:e})=>[t(u,{class:"details-link","data-testid":"details-link",to:{name:"service-detail-view",params:{mesh:e.mesh,service:e.name}}},{default:s(()=>[l(r(c("common.collection.details_link"))+" ",1),t(p(P),{decorative:"",size:p(R)},null,8,["size"])]),_:2},1032,["to"])]),_:2},1032,["page-number","page-size","total","items","is-selected-row","onChange"]),l(),a.params.service?(i(),m(k,{key:0},{default:s(e=>[t(X,{onClose:f=>a.replace({name:"service-list-view",params:{mesh:a.params.mesh},query:{page:a.params.page,size:a.params.size}})},{default:s(()=>[(i(),m(B(e.Component),{name:a.params.service,service:o==null?void 0:o.items.find(f=>f.name===a.params.service)},null,8,["name","service"]))]),_:2},1032,["onClose"])]),_:2},1024)):w("",!0)]),_:2},1032,["items"])]),_:2},1032,["src"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["params"])):w("",!0)]),_:1})}}}),G=L(q,[["__scopeId","data-v-9f1e80cb"]]);export{G as default};
