function p(n){let o=[];n.networking.inbound&&(o=n.networking.inbound.filter(e=>"tags"in e).flatMap(e=>Object.entries(e.tags)).map(([e,t])=>`${e}=${t}`)),n.networking.gateway&&(o=Object.entries(n.networking.gateway.tags).map(([e,t])=>`${e}=${t}`));const i=Array.from(new Set(o));return i.sort((e,t)=>e.localeCompare(t)),i.map(e=>e.split("=")).map(([e,t])=>({label:e,value:t}))}function r(n={subscriptions:[]}){return(n.subscriptions??[]).some(i=>{var e;return((e=i.connectTime)==null?void 0:e.length)&&!i.disconnectTime})?"online":"offline"}function l(n,o={subscriptions:[]}){const i=n.networking.inbound??[],e=i.filter(s=>s.health&&!s.health.ready).map(s=>`Inbound on port ${s.port} is not ready (kuma.io/service: ${s.tags["kuma.io/service"]})`);let t;switch(!0){case i.length===0:t="online";break;case e.length===i.length:t="offline";break;case e.length>0:t="partially_degraded";break;default:t=r(o)}return{status:t,reason:e}}function m(n){const o=(n==null?void 0:n.subscriptions)||[];if(o.length===0)return null;const i={},e=o[o.length-1];return e.version===void 0?null:(e.version.envoy&&(i.envoy=e.version.envoy.version),e.version.kumaDp&&(i.kumaDp=e.version.kumaDp.version),e.version.dependencies&&Object.entries(e.version.dependencies).forEach(([t,s])=>{i[t]=s}),i)}function O(n,o){if(n.dataplaneInsight===void 0||n.dataplaneInsight.mTLS===void 0)return null;const{mTLS:i}=n.dataplaneInsight,e=new Date(i.certificateExpirationTime),t=new Date(e.getTime()+e.getTimezoneOffset()*6e4);return{certificateExpirationTime:o(t.toISOString()),lastCertificateRegeneration:o(i.lastCertificateRegeneration),certificateRegenerations:i.certificateRegenerations}}function _(n){var e,t;return((e=n.kumaDp)==null?void 0:e.kumaCpCompatible)??!0?((t=n.envoy)==null?void 0:t.kumaDpCompatible)??!0?{kind:a}:{kind:u,payload:{envoy:n.envoy.version,kumaDp:n.kumaDp.version}}:{kind:c,payload:{kumaDp:n.kumaDp.version}}}const a="COMPATIBLE",f="INCOMPATIBLE_ZONE_CP_AND_KUMA_DP_VERSIONS",g="INCOMPATIBLE_ZONE_AND_GLOBAL_CPS_VERSIONS",c="INCOMPATIBLE_UNSUPPORTED_KUMA_DP",u="INCOMPATIBLE_UNSUPPORTED_ENVOY",E="INCOMPATIBLE_WRONG_FORMAT";export{a as C,E as I,l as a,m as b,_ as c,p as d,f as e,g as f,r as g,c as h,u as i,O as p};
