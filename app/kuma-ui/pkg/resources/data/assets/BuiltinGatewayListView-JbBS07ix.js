import{d as A,r as t,p as c,o as m,w as a,b as o,l as g,e as l,I as x,m as L,a3 as D,q as y,B as N,t as r,c as R,M as S,y as G,_ as q}from"./index-D08nM_8E.js";import{S as I}from"./SummaryView-DrddxxU5.js";const M=A({__name:"BuiltinGatewayListView",setup(E){return(F,i)=>{const d=t("XSearch"),u=t("XAction"),w=t("XCopyButton"),h=t("XActionGroup"),f=t("DataCollection"),z=t("RouterView"),b=t("DataLoader"),C=t("XLayout"),k=t("XCard"),v=t("AppView"),V=t("RouteView");return m(),c(V,{name:"builtin-gateway-list-view",params:{page:1,size:Number,mesh:"",gateway:"",s:""}},{default:a(({route:e,t:_,can:X,me:p,uri:B})=>[o(v,{docs:_("builtin-gateways.href.docs")},{default:a(()=>[o(k,null,{default:a(()=>[o(C,null,{default:a(()=>[g("search",null,[g("form",{onSubmit:i[0]||(i[0]=x(()=>{},["prevent"]))},[o(d,{class:"search-field",keys:["name","zone"],value:e.params.s,onChange:n=>e.update({page:1,s:n})},null,8,["value","onChange"])],32)]),i[4]||(i[4]=l()),o(b,{src:B(L(D),"/meshes/:mesh/mesh-gateways",{mesh:e.params.mesh},{page:e.params.page,size:e.params.size,search:e.params.s})},{loadable:a(({data:n})=>[o(f,{type:"gateways",items:(n==null?void 0:n.items)??[void 0],page:e.params.page,"page-size":e.params.size,total:n==null?void 0:n.total,onChange:e.update},{default:a(()=>[o(N,{class:"builtin-gateway-collection","data-testid":"builtin-gateway-collection",headers:[{...p.get("headers.name"),label:"Name",key:"name"},...X("use zones")?[{...p.get("headers.zone"),label:"Zone",key:"zone"}]:[],{...p.get("headers.actions"),label:"Actions",key:"actions",hideLabel:!0}],items:n==null?void 0:n.items,onResize:p.set},{name:a(({row:s})=>[o(w,{text:s.name},{default:a(()=>[o(u,{"data-action":"",to:{name:"builtin-gateway-summary-view",query:{size:e.params.size,page:e.params.page,s:e.params.s},params:{mesh:s.mesh,gateway:s.id}}},{default:a(()=>[l(r(s.name),1)]),_:2},1032,["to"])]),_:2},1032,["text"])]),zone:a(({row:s})=>[s.labels&&s.labels["kuma.io/origin"]==="zone"&&s.labels["kuma.io/zone"]?(m(),c(u,{key:0,to:{name:"zone-cp-detail-view",params:{zone:s.labels["kuma.io/zone"]}}},{default:a(()=>[l(r(s.labels["kuma.io/zone"]),1)]),_:2},1032,["to"])):(m(),R(S,{key:1},[l(r(_("common.detail.none")),1)],64))]),actions:a(({row:s})=>[o(h,null,{default:a(()=>[o(u,{to:{name:"builtin-gateway-detail-view",params:{mesh:s.mesh,gateway:s.name}}},{default:a(()=>[l(r(_("common.collection.actions.view")),1)]),_:2},1032,["to"])]),_:2},1024)]),_:2},1032,["headers","items","onResize"])]),_:2},1032,["items","page","page-size","total","onChange"]),i[3]||(i[3]=l()),e.child()?(m(),c(z,{key:0},{default:a(({Component:s})=>[o(I,{onClose:T=>e.replace({name:"builtin-gateway-list-view",params:{mesh:e.params.mesh},query:{page:e.params.page,size:e.params.size,s:e.params.s}})},{default:a(()=>[typeof n<"u"?(m(),c(G(s),{key:0,items:n.items},null,8,["items"])):y("",!0)]),_:2},1032,["onClose"])]),_:2},1024)):y("",!0)]),_:2},1032,["src"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["docs"])]),_:1})}}}),j=q(M,[["__scopeId","data-v-8327933a"]]);export{j as default};
