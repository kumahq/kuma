import{_ as E}from"./ResourceCodeBlock.vue_vue_type_style_index_0_lang-5c4d11ef.js";import{_ as V}from"./EmptyBlock.vue_vue_type_script_setup_true_lang-3556e308.js";import{E as f}from"./ErrorBlock-eae09ed8.js";import{_ as g}from"./LoadingBlock.vue_vue_type_script_setup_true_lang-6c7e8a5b.js";import{T as P}from"./TextWithCopyButton-e98ec405.js";import{d as F,a as p,o as t,b as r,w as s,e as i,m as _,f as l,c as d,t as x,F as B,C as S,p as L}from"./index-6594470f.js";import"./CodeBlock-13aedd48.js";import"./uniqueId-90cc9b93.js";import"./CopyButton-60165c43.js";import"./index-fce48c05.js";import"./toYaml-4e00099e.js";import"./WarningIcon.vue_vue_type_script_setup_true_lang-9e7cbe5c.js";const T={key:2,class:"stack","data-testid":"detail-view-details"},I={class:"mt-4"},K={key:3,"data-testid":"affected-data-plane-proxies"},Y=F({__name:"PolicyDetailView",setup(M){return(N,q)=>{const C=p("RouteTitle"),k=p("KInput"),w=p("RouterLink"),h=p("DataSource"),v=p("KCard"),$=p("AppView"),R=p("RouteView");return t(),r(R,{name:"policy-detail-view",params:{mesh:"",policy:"",policyPath:"",codeSearch:"",codeFilter:!1,codeRegExp:!1,dataplane:""}},{default:s(({route:e,t:n})=>[i($,{breadcrumbs:[{to:{name:"mesh-detail-view",params:{mesh:e.params.mesh}},text:e.params.mesh},{to:{name:"policy-list-view",params:{mesh:e.params.mesh,policyPath:e.params.policyPath}},text:n("policies.routes.item.breadcrumbs")}]},{title:s(()=>[_("h1",null,[i(P,{text:e.params.policy},{default:s(()=>[i(C,{title:n("policies.routes.item.title",{name:e.params.policy})},null,8,["title"])]),_:2},1032,["text"])])]),default:s(()=>[l(),i(h,{src:`/meshes/${e.params.mesh}/policy-path/${e.params.policyPath}/policy/${e.params.policy}`},{default:s(({data:u,error:y})=>[y?(t(),r(f,{key:0,error:y},null,8,["error"])):u===void 0?(t(),r(g,{key:1})):(t(),d("div",T,[i(v,null,{default:s(()=>[_("h2",null,x(n("policies.detail.affected_dpps")),1),l(),_("div",I,[i(k,{id:"dataplane-search","model-value":e.params.dataplane,type:"text",placeholder:n("policies.detail.dataplane_input_placeholder"),required:"","data-testid":"dataplane-search-input",onInput:a=>e.update({dataplane:a})},null,8,["model-value","placeholder","onInput"]),l(),i(h,{src:`/meshes/${e.params.mesh}/policy-path/${e.params.policyPath}/policy/${e.params.policy}/dataplanes`},{default:s(({data:a,error:m})=>[m?(t(),r(f,{key:0,error:m},null,8,["error"])):a===void 0?(t(),r(g,{key:1})):a.items.length===0?(t(),r(V,{key:2})):(t(),d("ul",K,[(t(!0),d(B,null,S(a.items.filter(o=>o.name.toLowerCase().includes(e.params.dataplane.toLowerCase())),(o,c)=>(t(),d("li",{key:c,"data-testid":"dataplane-name"},[i(w,{to:{name:"data-plane-detail-view",params:{mesh:o.mesh,dataPlane:o.name}}},{default:s(()=>[l(x(o.name),1)]),_:2},1032,["to"])]))),128))]))]),_:2},1032,["src"])])]),_:2},1024),l(),i(E,{resource:u.config,"is-searchable":"",query:e.params.codeSearch,"is-filter-mode":e.params.codeFilter,"is-reg-exp-mode":e.params.codeRegExp,onQueryChange:a=>e.update({codeSearch:a}),onFilterModeChange:a=>e.update({codeFilter:a}),onRegExpModeChange:a=>e.update({codeRegExp:a})},{default:s(({copy:a,copying:m})=>[m?(t(),r(h,{key:0,src:`/meshes/${e.params.mesh}/policy-path/${e.params.policyPath}/policy/${e.params.policy}/as/kubernetes?no-store`,onChange:o=>{a(c=>c(o))},onError:o=>{a((c,b)=>b(o))}},null,8,["src","onChange","onError"])):L("",!0)]),_:2},1032,["resource","query","is-filter-mode","is-reg-exp-mode","onQueryChange","onFilterModeChange","onRegExpModeChange"])]))]),_:2},1032,["src"])]),_:2},1032,["breadcrumbs"])]),_:1})}}});export{Y as default};
