import{_ as E}from"./PolicySummary.vue_vue_type_script_setup_true_lang-B6T9kww6.js";import{d as P,r as t,p as m,o as r,w as s,b as l,e as i,q as h,m as B,F as X,l as d,c as D,t as u,N as L,L as g,M as T,_ as q}from"./index-CKvajQBz.js";const N=P({__name:"DataPlanePolicySummaryView",props:{policyTypes:{}},setup(_){const C=_;return(v,p)=>{const x=t("RouteTitle"),k=t("XAction"),R=t("XSelect"),S=t("XLayout"),y=t("XCodeBlock"),f=t("DataLoader"),b=t("AppView"),w=t("DataSource"),V=t("RouteView");return r(),m(V,{name:"data-plane-policy-summary-view",params:{mesh:"",policyPath:"",policy:"",codeSearch:"",codeFilter:!1,codeRegExp:!1,format:String}},{default:s(({route:e,t:n,uri:F})=>[l(w,{src:`/meshes/${e.params.mesh}/policy-path/${e.params.policyPath}/policy/${e.params.policy}`},{default:s(({data:c,error:M})=>[l(b,null,{title:s(()=>[d("h2",null,[l(k,{to:{name:"policy-detail-view",params:{mesh:e.params.mesh,policyPath:e.params.policyPath,policy:e.params.policy}}},{default:s(()=>[l(x,{title:n("policies.routes.item.title",{name:e.params.policy})},null,8,["title"])]),_:2},1032,["to"])])]),default:s(()=>[p[2]||(p[2]=i()),l(f,{data:[c],errors:[M]},{default:s(()=>[c?(r(),m(E,{key:0,policy:c,format:e.params.format,legacy:!C.policyTypes.find(({name:a})=>a===c?.type)?.policy.isTargetRef},{header:s(()=>[d("header",null,[l(S,{type:"separated",size:"max"},{default:s(()=>[d("h3",null,u(n("policies.routes.item.config")),1),p[0]||(p[0]=i()),(r(),D(L,null,g([["structured","universal","k8s"]],a=>d("div",{key:typeof a},[l(R,{label:n("policies.routes.item.format"),selected:a.includes(e.params.format)?e.params.format:a[0],onChange:o=>{e.update({format:o})},onVnodeBeforeMount:o=>o?.props?.selected&&a.includes(o.props.selected)&&o.props.selected!==e.params.format&&e.update({format:o.props.selected})},T({_:2},[g(a,o=>({name:`${o}-option`,fn:s(()=>[i(u(n(`policies.routes.item.formats.${o}`)),1)])}))]),1032,["label","selected","onChange","onVnodeBeforeMount"])])),64))]),_:2},1024)])]),default:s(()=>[p[1]||(p[1]=i()),e.params.format==="universal"?(r(),m(y,{key:0,"data-testid":"codeblock-yaml-universal",language:"yaml",code:c.yaml,"is-searchable":"","show-k8s-copy-button":!1,query:e.params.codeSearch,"is-filter-mode":e.params.codeFilter,"is-reg-exp-mode":e.params.codeRegExp,onQueryChange:a=>e.update({codeSearch:a}),onFilterModeChange:a=>e.update({codeFilter:a}),onRegExpModeChange:a=>e.update({codeRegExp:a})},null,8,["code","query","is-filter-mode","is-reg-exp-mode","onQueryChange","onFilterModeChange","onRegExpModeChange"])):e.params.format==="k8s"?(r(),m(f,{key:1,src:F(B(X),"/meshes/:mesh/policy-path/:path/policy/:name/as/kubernetes",{mesh:e.params.mesh,path:e.params.policyPath,name:e.params.policy})},{default:s(({data:a})=>[l(y,{"data-testid":"codeblock-yaml-k8s",language:"yaml",code:a,"show-k8s-copy-button":!1,"is-searchable":"",query:e.params.codeSearch,"is-filter-mode":e.params.codeFilter,"is-reg-exp-mode":e.params.codeRegExp,onQueryChange:o=>e.update({codeSearch:o}),onFilterModeChange:o=>e.update({codeFilter:o}),onRegExpModeChange:o=>e.update({codeRegExp:o})},null,8,["code","query","is-filter-mode","is-reg-exp-mode","onQueryChange","onFilterModeChange","onRegExpModeChange"])]),_:2},1032,["src"])):h("",!0)]),_:2},1032,["policy","format","legacy"])):h("",!0)]),_:2},1032,["data","errors"])]),_:2},1024)]),_:2},1032,["src"])]),_:1})}}}),$=q(N,[["__scopeId","data-v-fb72e66b"]]);export{$ as default};
