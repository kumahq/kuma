import{d as $,r as t,p as f,o as l,w as o,b as p,e as y,m as b,F as z,l as m,c as d,N as u,L as w,n as E,t as C,y as j,_ as q}from"./index-CYOTm_Oc.js";const G={class:"policy-list-content"},H={class:"policy-count"},J={class:"policy-list"},K=$({__name:"PolicyTypeListView",setup(M){return(O,n)=>{const D=t("RouteTitle"),R=t("XAction"),L=t("DataCollection"),P=t("DataLoader"),T=t("XCard"),x=t("RouterView"),v=t("DataSource"),A=t("AppView"),B=t("RouteView");return l(),f(B,{name:"policy-list-view",params:{mesh:"",policyPath:"",policy:""}},{default:o(({uri:N,route:_,t:X})=>[p(D,{render:!1,title:X("policies.routes.types.title")},null,8,["title"]),n[2]||(n[2]=y()),p(A,null,{default:o(()=>[p(v,{src:`/mesh-insights/${_.params.mesh}`},{default:o(({data:e})=>[p(v,{src:N(b(z),"/policy-types",{})},{default:o(({data:i,error:S})=>[m("div",G,[p(T,{class:"policy-type-list","data-testid":"policy-type-list"},{default:o(()=>[p(P,{data:[i],errors:[S]},{default:o(()=>[(l(!0),d(u,null,w([typeof(e==null?void 0:e.policies)>"u"?i.policyTypes:i.policyTypes.filter(s=>{var c,a;return!s.policy.isTargetRef&&(((a=(c=e.policies)==null?void 0:c[s.name])==null?void 0:a.total)??0)>0})],s=>(l(),f(L,{key:s,predicate:typeof(e==null?void 0:e.policies)>"u"?void 0:c=>s.length>0||c.policy.isTargetRef,items:i.policyTypes},{default:o(({items:c})=>[(l(!0),d(u,null,w([c.find(a=>a.path===_.params.policyPath)],a=>(l(),d(u,{key:a},[(l(!0),d(u,null,w(c,(r,F)=>{var V,k;return l(),d("div",{key:r.path,class:E(["policy-type-link-wrapper",{"policy-type-link-wrapper--is-active":a&&a.path===r.path}])},[p(R,{class:"policy-type-link",to:{name:"policy-list-view",params:{mesh:_.params.mesh,policyPath:r.path}},mount:_.params.policyPath.length===0&&F===0?_.replace:void 0,"data-testid":`policy-type-link-${r.name}`},{default:o(()=>[y(C(r.name),1)]),_:2},1032,["to","mount","data-testid"]),n[0]||(n[0]=y()),m("div",H,C(((k=(V=e==null?void 0:e.policies)==null?void 0:V[r.name])==null?void 0:k.total)??0),1)],2)}),128))],64))),128))]),_:2},1032,["predicate","items"]))),128))]),_:2},1032,["data","errors"])]),_:2},1024),n[1]||(n[1]=y()),m("div",J,[p(x,null,{default:o(({Component:s})=>[(l(),f(j(s),{"policy-types":i==null?void 0:i.policyTypes},null,8,["policy-types"]))]),_:2},1024)])])]),_:2},1032,["src"])]),_:2},1032,["src"])]),_:2},1024)]),_:1,__:[2]})}}}),U=q(K,[["__scopeId","data-v-e5fa100c"]]);export{U as default};
