import{d as A,r as m,p as u,o as r,w as e,b as o,c,N as b,L as x,e as a,l as y,t as n,M as Q,q as f,O as _,S as I,m as T,a2 as O,Q as $,n as U,_ as j}from"./index-C2xkzb-Z.js";import{T as z}from"./TagList-D24c2Pno.js";import{_ as X}from"./ResourceCodeBlock.vue_vue_type_script_setup_true_lang-C75vmuAR.js";const K={class:"stack-with-borders"},Z={class:"stack-with-borders"},G={key:0},H={key:0},J=A({__name:"DataPlaneSummaryView",props:{items:{},routeName:{}},setup(E){const v=E;return(W,t)=>{const V=m("XEmptyState"),B=m("RouteTitle"),R=m("XAction"),D=m("XSelect"),g=m("XLayout"),M=m("XIcon"),w=m("DataCollection"),h=m("XCopyButton"),S=m("XBadge"),F=m("DataLoader"),L=m("AppView"),N=m("RouteView");return r(),u(N,{name:v.routeName,params:{mesh:"",proxy:"",codeSearch:"",codeFilter:!1,codeRegExp:!1,format:String}},{default:e(({route:d,t:l,uri:P,can:q})=>[o(w,{items:v.items,predicate:C=>C.id===d.params.proxy},{empty:e(()=>[o(V,null,{title:e(()=>[y("h2",null,n(l("common.collection.summary.empty_title",{type:"Data Plane Proxy"})),1)]),default:e(()=>[t[0]||(t[0]=a()),y("p",null,n(l("common.collection.summary.empty_message",{type:"Data Plane Proxy"})),1)]),_:2,__:[0]},1024)]),default:e(({items:C})=>[(r(!0),c(b,null,x([C[0]],p=>(r(),u(L,{key:p.id},{title:e(()=>[y("h2",{class:U(`type-${p.dataplaneType}`)},[o(R,{to:{name:"data-plane-detail-view",params:{proxy:p.id}}},{default:e(()=>[o(B,{title:l("data-planes.routes.item.title",{name:p.name})},null,8,["title"])]),_:2},1032,["to"])],2)]),default:e(()=>[t[33]||(t[33]=a()),o(g,null,{default:e(()=>[y("header",null,[o(g,{type:"separated",size:"max"},{default:e(()=>[y("h3",null,n(l("data-planes.routes.item.config")),1),t[1]||(t[1]=a()),(r(),c(b,null,x([["structured","universal","k8s"]],i=>y("div",{key:typeof i},[o(D,{label:l("data-planes.routes.item.format"),selected:d.params.format,onChange:s=>{d.update({format:s})},onVnodeBeforeMount:s=>{var k;return((k=s==null?void 0:s.props)==null?void 0:k.selected)&&i.includes(s.props.selected)&&s.props.selected!==d.params.format&&d.update({format:s.props.selected})}},Q({_:2},[x(i,s=>({name:`${s}-option`,fn:e(()=>[a(n(l(`data-planes.routes.item.formats.${s}`)),1)])}))]),1032,["label","selected","onChange","onVnodeBeforeMount"])])),64))]),_:2,__:[1]},1024)])]),_:2},1024),t[34]||(t[34]=a()),d.params.format==="structured"?(r(),u(g,{key:0,type:"stack",size:"large","data-testid":"structured-view"},{default:e(()=>[y("div",K,[o(_,{layout:"horizontal"},{title:e(()=>[a(n(l("http.api.property.status")),1)]),body:e(()=>[o(g,{type:"separated"},{default:e(()=>[o(I,{status:p.status},null,8,["status"]),t[2]||(t[2]=a()),p.dataplaneType==="standard"?(r(),u(w,{key:0,items:p.dataplane.networking.inbounds,predicate:i=>i.state!=="Ready",empty:!1},{default:e(({items:i})=>[o(M,{name:"info",color:T(O)},{default:e(()=>[y("ul",null,[(r(!0),c(b,null,x(i,s=>(r(),c("li",{key:`${s.service}:${s.port}`},n(l("data-planes.routes.item.unhealthy_inbound",{service:s.service,port:s.port})),1))),128))])]),_:2},1032,["color"])]),_:2},1032,["items","predicate"])):f("",!0)]),_:2,__:[2]},1024)]),_:2,__:[3]},1024),t[10]||(t[10]=a()),o(_,{layout:"horizontal"},{title:e(()=>t[4]||(t[4]=[a(`
                      Type
                    `)])),body:e(()=>[a(n(l(`data-planes.type.${p.dataplaneType}`)),1)]),_:2,__:[5]},1024),t[11]||(t[11]=a()),p.namespace.length>0?(r(),u(_,{key:0,layout:"horizontal"},{title:e(()=>[a(n(l("data-planes.routes.item.namespace")),1)]),body:e(()=>[a(n(p.namespace),1)]),_:2,__:[6]},1024)):f("",!0),t[12]||(t[12]=a()),q("use zones")&&p.zone?(r(),u(_,{key:1,layout:"horizontal"},{title:e(()=>t[7]||(t[7]=[a(`
                      Zone
                    `)])),body:e(()=>[o(R,{to:{name:"zone-cp-detail-view",params:{zone:p.zone}}},{default:e(()=>[a(n(p.zone),1)]),_:2},1032,["to"])]),_:2,__:[8]},1024)):f("",!0),t[13]||(t[13]=a()),o(_,{layout:"horizontal"},{title:e(()=>[a(n(l("http.api.property.modificationTime")),1)]),body:e(()=>[a(n(l("common.formats.datetime",{value:Date.parse(p.modificationTime)})),1)]),_:2,__:[9]},1024)]),t[30]||(t[30]=a()),p.dataplane.networking.gateway?(r(),u(g,{key:0,type:"stack"},{default:e(()=>[y("h3",null,n(l("data-planes.routes.item.gateway")),1),t[17]||(t[17]=a()),y("div",Z,[o(_,{layout:"horizontal"},{title:e(()=>[a(n(l("http.api.property.tags")),1)]),body:e(()=>[o(z,{alignment:"right",tags:p.dataplane.networking.gateway.tags},null,8,["tags"])]),_:2,__:[14]},1024),t[16]||(t[16]=a()),o(_,{layout:"horizontal"},{title:e(()=>[a(n(l("http.api.property.address")),1)]),body:e(()=>[o(h,{text:`${p.dataplane.networking.address}`},null,8,["text"])]),_:2,__:[15]},1024)])]),_:2,__:[17]},1024)):f("",!0),t[31]||(t[31]=a()),p.dataplaneType==="standard"?(r(),u(w,{key:1,items:p.dataplane.networking.inbounds},{default:e(({items:i})=>[o(g,{"data-testid":"dataplane-inbounds"},{default:e(()=>[y("h3",null,n(l("data-planes.routes.item.inbounds")),1),t[24]||(t[24]=a()),(r(!0),c(b,null,x(i,(s,k)=>(r(),u(g,{key:k,class:"inbound"},{default:e(()=>[s.tags["kuma.io/service"]?(r(),c("h4",G,[o(h,{text:s.tags["kuma.io/service"]},{default:e(()=>[a(n(l("data-planes.routes.item.inbound_name",{service:s.tags["kuma.io/service"]})),1)]),_:2},1032,["text"])])):f("",!0),t[23]||(t[23]=a()),o(g,{class:"stack-with-borders",size:"small"},{default:e(()=>[o(_,{layout:"horizontal"},{title:e(()=>[a(n(l("http.api.property.state")),1)]),body:e(()=>[s.state==="Ready"?(r(),u(S,{key:0,appearance:"success"},{default:e(()=>[a(n(l(`http.api.value.${s.state}`)),1)]),_:2},1024)):(r(),u(S,{key:1,appearance:"danger"},{default:e(()=>[a(n(l(`http.api.value.${s.state}`)),1)]),_:2},1024))]),_:2,__:[18]},1024),t[21]||(t[21]=a()),o(_,{layout:"horizontal"},{title:e(()=>[a(n(l("http.api.property.tags")),1)]),body:e(()=>[o(z,{alignment:"right",tags:s.tags},null,8,["tags"])]),_:2,__:[19]},1024),t[22]||(t[22]=a()),o(_,{layout:"horizontal"},{title:e(()=>[a(n(l("http.api.property.address")),1)]),body:e(()=>[o(h,{text:s.addressPort},null,8,["text"])]),_:2,__:[20]},1024)]),_:2,__:[21,22]},1024)]),_:2,__:[23]},1024))),128))]),_:2,__:[24]},1024)]),_:2},1032,["items"])):f("",!0),t[32]||(t[32]=a()),p.dataplaneType==="standard"?(r(),u(w,{key:2,items:p.dataplane.networking.outbounds},{default:e(({items:i})=>[o(g,{"data-testid":"dataplane-outbounds"},{default:e(()=>[y("h3",null,n(l("data-planes.routes.item.outbounds")),1),t[29]||(t[29]=a()),(r(!0),c(b,null,x(i,(s,k)=>(r(),u(g,{key:k,class:"inbound",size:"small"},{default:e(()=>[s.tags["kuma.io/service"]?(r(),c("h4",H,[o(h,{text:s.tags["kuma.io/service"]},{default:e(()=>[a(n(l("data-planes.routes.item.inbound_name",{service:s.tags["kuma.io/service"]})),1)]),_:2},1032,["text"])])):f("",!0),t[28]||(t[28]=a()),o(g,{class:"stack-with-borders",size:"small"},{default:e(()=>[Object.keys(s.tags).length?(r(),u(_,{key:0,layout:"horizontal"},{title:e(()=>[a(n(l("http.api.property.tags")),1)]),body:e(()=>[o(z,{alignment:"right",tags:s.tags},null,8,["tags"])]),_:2,__:[25]},1024)):f("",!0),t[27]||(t[27]=a()),o(_,{layout:"horizontal"},{title:e(()=>[a(n(l("http.api.property.address")),1)]),body:e(()=>[o(h,{text:s.addressPort},null,8,["text"])]),_:2,__:[26]},1024)]),_:2,__:[27]},1024)]),_:2,__:[28]},1024))),128))]),_:2,__:[29]},1024)]),_:2},1032,["items"])):f("",!0)]),_:2,__:[30,31,32]},1024)):d.params.format==="universal"?(r(),u(X,{key:1,"data-testid":"codeblock-yaml-universal",language:"yaml",resource:p.config,"show-k8s-copy-button":!1,"is-searchable":"",query:d.params.codeSearch,"is-filter-mode":d.params.codeFilter,"is-reg-exp-mode":d.params.codeRegExp,onQueryChange:i=>d.update({codeSearch:i}),onFilterModeChange:i=>d.update({codeFilter:i}),onRegExpModeChange:i=>d.update({codeRegExp:i})},null,8,["resource","query","is-filter-mode","is-reg-exp-mode","onQueryChange","onFilterModeChange","onRegExpModeChange"])):(r(),u(F,{key:2,src:P(T($),"/meshes/:mesh/dataplanes/:name/as/kubernetes",{mesh:d.params.mesh,name:d.params.proxy})},{default:e(({data:i})=>[o(X,{"data-testid":"codeblock-yaml-k8s",language:"yaml",resource:i,"show-k8s-copy-button":!1,"is-searchable":"",query:d.params.codeSearch,"is-filter-mode":d.params.codeFilter,"is-reg-exp-mode":d.params.codeRegExp,onQueryChange:s=>d.update({codeSearch:s}),onFilterModeChange:s=>d.update({codeFilter:s}),onRegExpModeChange:s=>d.update({codeRegExp:s})},null,8,["resource","query","is-filter-mode","is-reg-exp-mode","onQueryChange","onFilterModeChange","onRegExpModeChange"])]),_:2},1032,["src"]))]),_:2,__:[33,34]},1024))),128))]),_:2,__:[35]},1032,["items","predicate"])]),_:1},8,["name"])}}}),ae=j(J,[["__scopeId","data-v-d7ba9b98"]]);export{ae as default};
