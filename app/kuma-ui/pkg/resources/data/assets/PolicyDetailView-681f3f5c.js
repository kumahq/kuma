import{d as f,j as q,r as S,o as s,e as _,g as y,X as B,Z as C,q as v,h as r,w as i,a as l,F as k,s as V,t as A,b as d,G as P}from"./index-840bc7ec.js";import{q as w,E as b,r as $,o as g,m as L,g as N,e as T,A as D,_ as E}from"./RouteView.vue_vue_type_script_setup_true_lang-3639338c.js";import{_ as F}from"./ResourceCodeBlock.vue_vue_type_script_setup_true_lang-40ea73ad.js";import{T as j}from"./TabsWidget-7ec7b3a9.js";import{_ as I}from"./RouteTitle.vue_vue_type_script_setup_true_lang-6980b8ac.js";import"./CodeBlock.vue_vue_type_style_index_0_lang-d059b5be.js";import"./CopyButton-6a8a0e66.js";const O=v("h2",null,"Dataplanes",-1),R=f({__name:"PolicyConnections",props:{mesh:{type:String,required:!0},policyPath:{type:String,required:!0},policyName:{type:String,required:!0}},setup(u){const t=u,o=q("");return(h,n)=>{const e=S("RouterLink");return s(),_(k,null,[O,y(),B(v("input",{id:"dataplane-search","onUpdate:modelValue":n[0]||(n[0]=a=>o.value=a),type:"text",class:"k-input mt-4",placeholder:"Filter by name",required:"","data-testid":"dataplane-search-input"},null,512),[[C,o.value]]),y(),r(g,{src:`/meshes/${t.mesh}/policy-path/${t.policyPath}/policy/${t.policyName}/dataplanes`},{default:i(({data:a,isLoading:c,error:p})=>[c?(s(),l(w,{key:0})):p?(s(),l(b,{key:1,error:p},null,8,["error"])):a===void 0||a.items.length===0?(s(),l($,{key:2})):(s(!0),_(k,{key:3},V(a.items.filter(m=>m.dataplane.name.toLowerCase().includes(o.value.toLowerCase())),(m,x)=>(s(),_("p",{key:x,class:"mt-2","data-testid":"dataplane-name"},[r(e,{to:{name:"data-plane-detail-view",params:{mesh:m.dataplane.mesh,dataPlane:m.dataplane.name}}},{default:i(()=>[y(A(m.dataplane.name),1)]),_:2},1032,["to"])]))),128))]),_:1},8,["src"])],64)}}}),G=f({__name:"PolicyDetails",props:{policy:{type:Object,required:!0},path:{type:String,required:!0}},setup(u){const t=u,o=L(),h=[{hash:"#overview",title:"Overview"},{hash:"#affected-dpps",title:"Affected DPPs"}];async function n(e){const{name:a,mesh:c}=t.policy,p=t.path;return await o.getSinglePolicyEntity({name:a,mesh:c,path:p},e)}return(e,a)=>(s(),l(j,{tabs:h},{overview:i(()=>[r(d(P),null,{body:i(()=>[r(F,{id:"code-block-policy",resource:t.policy,"resource-fetcher":n,"is-searchable":""},null,8,["resource"])]),_:1})]),"affected-dpps":i(()=>[r(d(P),null,{body:i(()=>[r(R,{mesh:t.policy.mesh,"policy-name":t.policy.name,"policy-path":t.path},null,8,["mesh","policy-name","policy-path"])]),_:1})]),_:1}))}}),H=f({__name:"PolicyDetailView",setup(u){const{t}=N(),o=T();return(h,n)=>(s(),l(E,{name:"policy-detail-view","data-testid":"policy-detail-view"},{default:i(({route:e})=>[r(D,{breadcrumbs:[{to:{name:"policies-list-view",params:{mesh:e.params.mesh,policyPath:e.params.policyPath}},text:d(t)("policies.routes.item.breadcrumbs")}]},{title:i(()=>{var a;return[v("h2",null,[r(I,{title:d(t)("policies.routes.item.title",{name:e.params.policy,type:((a=d(o).state.policyTypesByPath[e.params.policyPath])==null?void 0:a.name)??e.params.policyPath}),render:!0},null,8,["title"])])]}),default:i(()=>[y(),r(g,{src:`/meshes/${e.params.mesh}/policy-path/${e.params.policyPath}/policy/${e.params.policy}`},{default:i(({data:a,isLoading:c,error:p})=>[c?(s(),l(w,{key:0})):p?(s(),l(b,{key:1,error:p},null,8,["error"])):a===void 0?(s(),l($,{key:2})):(s(),l(G,{key:3,policy:a,path:e.params.policyPath,"data-testid":"detail-view-details"},null,8,["policy","path"]))]),_:2},1032,["src"])]),_:2},1032,["breadcrumbs"])]),_:1}))}});export{H as default};
