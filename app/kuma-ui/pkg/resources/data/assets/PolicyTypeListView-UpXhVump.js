import{d as F,a,o,b as _,w as e,e as c,m as d,f as u,F as y,n as G,t as C,c as r,H as w,D as K,q as M,_ as T}from"./index-j5csqEhF.js";const $={class:"policy-list-content"},b={class:"policy-count"},q={class:"policy-list"},E=F({__name:"PolicyTypeListView",setup(H){return(j,J)=>{const R=a("RouteTitle"),D=a("RouterLink"),L=a("DataCollection"),B=a("DataLoader"),x=a("KCard"),P=a("RouterView"),m=a("DataSource"),N=a("AppView"),S=a("RouteView");return o(),_(m,{src:"/me"},{default:e(({data:k})=>[k?(o(),_(S,{key:0,name:"policy-list-view",params:{page:1,size:k.pageSize,mesh:"",policyPath:"",policy:""}},{default:e(({route:f,t:z})=>[c(N,null,{title:e(()=>[d("h2",null,[c(R,{title:z("policies.routes.types.title")},null,8,["title"])])]),default:e(()=>[u(),c(m,{src:`/mesh-insights/${f.params.mesh}`},{default:e(({data:t})=>[c(m,{src:"/*/policy-types"},{default:e(({data:p,error:A})=>[d("div",$,[c(x,{class:"policy-type-list","data-testid":"policy-type-list"},{default:e(()=>[c(B,{data:[p],errors:[A]},{default:e(()=>[(o(!0),r(y,null,w([typeof(t==null?void 0:t.policies)>"u"?p.policies:p.policies.filter(l=>{var i,s;return!l.isTargetRefBased&&l.name!=="MeshGateway"&&(((s=(i=t.policies)==null?void 0:i[l.name])==null?void 0:s.total)??0)>0})],l=>(o(),_(L,{key:l,predicate:typeof(t==null?void 0:t.policies)>"u"?void 0:i=>l.length>0||i.isTargetRefBased||i.name==="MeshGateway",items:p.policies},{default:e(({items:i})=>[(o(!0),r(y,null,w([i.find(s=>s.path===f.params.policyPath)],s=>(o(),r(y,{key:s},[(o(!0),r(y,null,w(i,n=>{var V,v;return o(),r("div",{key:n.path,class:G(["policy-type-link-wrapper",{"policy-type-link-wrapper--is-active":s&&s.path===n.path}])},[c(D,{class:"policy-type-link",to:{name:"policy-list-view",params:{mesh:f.params.mesh,policyPath:n.path}},"data-testid":`policy-type-link-${n.name}`},{default:e(()=>[u(C(n.name),1)]),_:2},1032,["to","data-testid"]),u(),d("div",b,C(((v=(V=t==null?void 0:t.policies)==null?void 0:V[n.name])==null?void 0:v.total)??0),1)],2)}),128))],64))),128))]),_:2},1032,["predicate","items"]))),128))]),_:2},1032,["data","errors"])]),_:2},1024),u(),d("div",q,[c(P,null,{default:e(({Component:l})=>[(o(),_(K(l),{"policy-types":p==null?void 0:p.policies},null,8,["policy-types"]))]),_:2},1024)])])]),_:2},1024)]),_:2},1032,["src"])]),_:2},1024)]),_:2},1032,["params"])):M("",!0)]),_:1})}}}),Q=T(E,[["__scopeId","data-v-d89da267"]]);export{Q as default};
