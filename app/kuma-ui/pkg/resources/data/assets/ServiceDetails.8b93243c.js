import{d as I,p as E,f as p,x as T,o as a,j as v,l as e,a as g,w as C,b as x,t as o,u as n,c as h,z as f,i as B,B as q,C as A,D as $,cD as L,A as N,F as w,r as S,g as b,k as D}from"./index.7fb3bbf1.js";import{T as P}from"./TagList.e2aa7193.js";import{_ as V}from"./EntityURLControl.vue_vue_type_script_setup_true_lang.78ea28bc.js";import{Y as j}from"./YamlView.77c21317.js";import{_ as O}from"./EmptyBlock.vue_vue_type_script_setup_true_lang.4c2c295a.js";import{E as R}from"./ErrorBlock.ea8501b0.js";import{_ as z}from"./LoadingBlock.vue_vue_type_script_setup_true_lang.489330d0.js";const y=s=>(q("data-v-16fee495"),s=s(),A(),s),F={class:"entity-summary entity-section-list"},M={class:"entity-title"},Y=y(()=>e("span",{class:"kutil-sr-only"},"Service:",-1)),U={class:"definition"},G=y(()=>e("span",null,"Mesh:",-1)),H={class:"definition"},J=y(()=>e("span",null,"Address:",-1)),K={class:"definition"},Q=y(()=>e("span",null,"TLS:",-1)),W={key:0},X=y(()=>e("h4",null,"Tags",-1)),Z=I({__name:"ExternalServiceDetails",props:{externalService:{type:Object,required:!0}},setup(s){const t=s,u=E(),i=p(()=>({name:"external-service-detail-view",params:{service:t.externalService.name,mesh:t.externalService.mesh}})),r=p(()=>Object.entries(t.externalService.tags).map(([d,l])=>({label:d,value:l}))),c=p(()=>T(t.externalService));return(d,l)=>{var _;const m=B("router-link");return a(),v("div",F,[e("h3",M,[Y,g(m,{to:n(i)},{default:C(()=>[x(o(s.externalService.name),1)]),_:1},8,["to"]),n(u).name!==n(i).name?(a(),h(V,{key:0,route:n(i)},null,8,["route"])):f("",!0)]),e("section",null,[e("div",U,[G,e("span",null,o(s.externalService.mesh),1)]),e("div",H,[J,e("span",null,o(t.externalService.networking.address),1)]),e("div",K,[Q,e("span",null,o((_=t.externalService.networking.tls)!=null&&_.enabled?"Enabled":"Disabled"),1)])]),n(r).length>0?(a(),v("section",W,[X,g(P,{tags:n(r)},null,8,["tags"])])):f("",!0),g(j,{id:"code-block-external-service",content:n(c),"is-searchable":""},null,8,["content"])])}}});const ee=$(Z,[["__scopeId","data-v-16fee495"]]),k=s=>(q("data-v-99bfa0d3"),s=s(),A(),s),te={class:"entity-summary entity-section-list"},se={class:"entity-title"},ne=k(()=>e("span",{class:"kutil-sr-only"},"Service:",-1)),ae={class:"definition"},ie=k(()=>e("span",null,"Mesh:",-1)),re={class:"definition"},le=k(()=>e("span",null,"Address:",-1)),ce={key:0,class:"definition"},oe=k(()=>e("span",null,"DP proxies (online / total):",-1)),ue=I({__name:"ServiceInsightDetails",props:{serviceInsight:{type:Object,required:!0}},setup(s){const t=s,u=E(),i=p(()=>({name:t.serviceInsight.serviceType==="external"?"external-service-detail-view":"service-insight-detail-view",params:{service:t.serviceInsight.name,mesh:t.serviceInsight.mesh}})),r=p(()=>t.serviceInsight.status?L[t.serviceInsight.status]:null),c=p(()=>{var l;return t.serviceInsight.dataplanes?`${(l=t.serviceInsight.dataplanes.online)!=null?l:0} / ${t.serviceInsight.dataplanes.total}`:null}),d=p(()=>T(t.serviceInsight));return(l,m)=>{const _=B("router-link");return a(),v("div",te,[e("h3",se,[ne,g(_,{to:n(i)},{default:C(()=>[x(o(s.serviceInsight.name),1)]),_:1},8,["to"]),n(r)!==null?(a(),v("div",{key:0,class:N(`status status--${n(r).appearance}`),"data-testid":"data-plane-status-badge"},o(n(r).title.toLowerCase()),3)):f("",!0),n(u).name!==n(i).name?(a(),h(V,{key:1,route:n(i)},null,8,["route"])):f("",!0)]),e("section",null,[e("div",ae,[ie,e("span",null,o(s.serviceInsight.mesh),1)]),e("div",re,[le,e("span",null,[s.serviceInsight.addressPort?(a(),v(w,{key:0},[x(o(s.serviceInsight.addressPort),1)],64)):(a(),v(w,{key:1},[x("\u2014")],64))])]),n(c)!==null?(a(),v("div",ce,[oe,e("span",null,o(n(c)),1)])):f("",!0)]),g(j,{id:"code-block-service-insight",content:n(d),"is-searchable":""},null,8,["content"])])}}});const de=$(ue,[["__scopeId","data-v-99bfa0d3"]]),_e={class:"service-details"},ve=I({__name:"ServiceDetails",props:{serviceType:{type:String,required:!1,default:"internal"},name:{type:String,required:!0},mesh:{type:String,required:!0}},setup(s){const t=s,u=S(null),i=S(null),r=S(!0),c=S(null);b(()=>t.mesh,function(){d()}),b(()=>t.name,function(){d()}),d();async function d(){r.value=!0,c.value=null,u.value=null,i.value=null;const l=t.mesh,m=t.name;try{t.serviceType==="external"?i.value=await D.getExternalService({mesh:l,name:m}):u.value=await D.getServiceInsight({mesh:l,name:m})}catch(_){_ instanceof Error?c.value=_:console.error(_)}finally{r.value=!1}}return(l,m)=>(a(),v("div",_e,[r.value?(a(),h(z,{key:0})):c.value!==null?(a(),h(R,{key:1,error:c.value},null,8,["error"])):u.value!==null?(a(),h(de,{key:2,"service-insight":u.value},null,8,["service-insight"])):i.value!==null?(a(),h(ee,{key:3,"external-service":i.value},null,8,["external-service"])):(a(),h(O,{key:4}))]))}});const xe=$(ve,[["__scopeId","data-v-c0c06f69"]]);export{xe as S};
