import{d as S,r as o,p as d,o as c,w as s,b as t,e as l,m as N,ak as I,l as k,I as q,q as u,K as B,t as m,y as P,_ as T}from"./index-CpFYS729.js";const G=S({__name:"WorkloadListView",setup(W){return(K,n)=>{const f=o("RouteTitle"),h=o("XI18n"),g=o("XSearch"),_=o("XAction"),y=o("XActionGroup"),C=o("DataCollection"),z=o("XDrawer"),X=o("RouterView"),v=o("DataLoader"),V=o("XLayout"),b=o("XCard"),D=o("DataSource"),x=o("AppView"),A=o("RouteView");return c(),d(A,{name:"workload-list-view",params:{page:1,size:Number,mesh:"",s:""}},{default:s(({route:e,me:i,uri:L,can:w,t:r})=>[t(f,{render:!1,title:r("workloads.routes.items.title")},null,8,["title"]),n[7]||(n[7]=l()),t(x,{docs:r("workloads.href.docs.workload")},{default:s(()=>[t(h,{path:"workloads.routes.items.intro","default-path":"common.i18n.ignore-error"}),n[6]||(n[6]=l()),t(D,{src:L(N(I),"/meshes/:mesh/workloads",{mesh:e.params.mesh},{page:e.params.page,size:e.params.size,search:e.params.s})},{default:s(({data:p,error:R})=>[t(b,null,{default:s(()=>[t(V,{variant:"y-stack"},{default:s(()=>[k("search",null,[k("form",{class:"search-form",onSubmit:n[0]||(n[0]=q(()=>{},["prevent"]))},[t(g,{class:"search-field",keys:["name","namespace",...w("use zones")?["zone"]:[],"label"],value:e.params.s,onChange:a=>e.update({page:1,s:a})},null,8,["keys","value","onChange"])],32)]),n[5]||(n[5]=l()),t(v,{data:[p],errors:[R],variant:"list"},{default:s(()=>[typeof p<"u"?(c(),d(C,{key:0,items:p.items,total:p.total,page:e.params.page,"page-size":e.params.size,onChange:e.update},{default:s(()=>[t(B,{items:p.items,type:"workload",headers:[{...i.get("headers.name"),label:r("workloads.routes.items.headers.name"),key:"name"},{...i.get("headers.namespace"),label:r("workloads.routes.items.headers.namespace"),key:"namespace"},...w("use zones")?[{...i.get("headers.zone"),label:r("workloads.routes.items.headers.zone"),key:"zone"}]:[],{...i.get("headers.status"),label:r("workloads.routes.items.headers.dpps"),key:"dpps"},{...i.get("headers.actions"),label:r("workloads.routes.items.headers.actions"),key:"actions",hideLabel:!0}]},{name:s(({row:a})=>[t(_,{"data-action":"",class:"name-link",title:a.name,to:{name:"workload-summary-view",params:{wl:a.kri},query:{page:e.params.page,size:e.params.size,s:e.params.s}}},{default:s(()=>[l(m(a.name),1)]),_:2},1032,["title","to"])]),namespace:s(({row:a})=>[l(m(a.namespace),1)]),dpps:s(({row:a})=>[l(m(a.status.dataplaneProxies.connected)+` /
                    `+m(a.status.dataplaneProxies.healthy)+` /
                    `+m(a.status.dataplaneProxies.total),1)]),actions:s(({row:a})=>[t(y,null,{default:s(()=>[t(_,{to:{name:"workload-detail-view",params:{wl:a.kri}}},{default:s(()=>[l(m(r("common.collection.actions.view")),1)]),_:2},1032,["to"])]),_:2},1024)]),_:2},1032,["items","headers"])]),_:2},1032,["items","total","page","page-size","onChange"])):u("",!0),n[4]||(n[4]=l()),t(X,null,{default:s(a=>[e.name!==a.route.name?(c(),d(z,{key:0,onClose:M=>e.replace({name:e.name,params:{mesh:e.params.mesh},query:{page:e.params.page,size:e.params.size,s:e.params.s}})},{default:s(()=>[typeof p<"u"?(c(),d(P(a.Component),{key:0,items:p.items},null,8,["items"])):u("",!0)]),_:2},1032,["onClose"])):u("",!0)]),_:2},1024)]),_:2},1032,["data","errors"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["src"])]),_:2},1032,["docs"])]),_:1})}}}),j=T(G,[["__scopeId","data-v-5fd8979f"]]);export{j as default};
