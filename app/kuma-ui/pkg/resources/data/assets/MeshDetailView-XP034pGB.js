import{d as E,m as f,o as p,w as e,b as t,e as o,r as i,c as h,v as T,F as _,L as V,t as l,R as C,p as z,s as A,J as M}from"./index-D6IHSCMw.js";import{_ as F}from"./ResourceCodeBlock.vue_vue_type_script_setup_true_lang-Dqz53bTK.js";const j=E({__name:"MeshDetailView",props:{mesh:{}},setup(D){const a=D;return(L,s)=>{const R=i("RouteTitle"),y=i("XI18n"),k=i("XNotification"),x=i("XAction"),v=i("XBadge"),N=i("XAboutCard"),w=i("XLayout"),X=i("XCard"),g=i("DataSource"),S=i("AppView"),$=i("RouteView");return p(),f($,{name:"mesh-detail-view",params:{mesh:""}},{default:e(({route:c,t:r,uri:b})=>[t(R,{title:r("meshes.routes.overview.title"),render:!1},null,8,["title"]),s[10]||(s[10]=o()),t(g,{src:b(A(M),"/mesh-insights/:name",{name:c.params.mesh})},{default:e(({data:n})=>[t(S,{docs:r("meshes.href.docs"),notifications:!0},{default:e(()=>[t(k,{notify:!a.mesh.mtlsBackend,uri:`meshes.notifications.mtls-warning:${a.mesh.id}`},{default:e(()=>[t(y,{path:"meshes.notifications.mtls-warning"})]),_:1},8,["notify","uri"]),s[8]||(s[8]=o()),t(k,{notify:L.mesh.meshServices.mode==="Disabled",uri:`meshes.notifications.mesh-service-activation:${c.params.mesh}`,variant:"info"},{default:e(()=>[t(y,{path:"meshes.notifications.mesh-service-activation"})]),_:2},1032,["notify","uri"]),s[9]||(s[9]=o()),t(w,{type:"stack"},{default:e(()=>[t(N,{title:r("meshes.routes.item.about.title"),created:a.mesh.creationTime,modified:a.mesh.modificationTime},{default:e(()=>[(p(),h(_,null,T(["MeshTrafficPermission","MeshMetric","MeshAccessLog","MeshTrace"],m=>{var d;return p(),h(_,{key:m},[(p(!0),h(_,null,T([((d=n==null?void 0:n.policies)==null?void 0:d[m])??{total:0}],u=>(p(),h(_,{key:typeof u},[t(k,{notify:m==="MeshTrafficPermission"&&a.mesh.mtlsBackend&&u.total===0,uri:`meshes.notifications.mtp-warning:${a.mesh.id}`},{default:e(()=>[t(y,{path:"meshes.notifications.mtp-warning"})]),_:2},1032,["notify","uri"]),s[1]||(s[1]=o()),t(V,{layout:"horizontal"},{title:e(()=>[t(x,{to:{name:"policy-list-view",params:{mesh:c.params.mesh,policyPath:`${m.toLowerCase()}s`}}},{default:e(()=>[o(l(m),1)]),_:2},1032,["to"])]),body:e(()=>[t(v,{appearance:u.total>0?"success":"neutral"},{default:e(()=>[o(l(u.total>0?r("meshes.detail.enabled"):r("meshes.detail.disabled")),1)]),_:2},1032,["appearance"])]),_:2},1024)],64))),128))],64)}),64)),s[3]||(s[3]=o()),t(V,{layout:"horizontal"},{title:e(()=>[o(l(r("http.api.property.mtls")),1)]),body:e(()=>[a.mesh.mtlsBackend?(p(),f(v,{key:1,appearance:"info"},{default:e(()=>[o(l(a.mesh.mtlsBackend.type)+" / "+l(a.mesh.mtlsBackend.name),1)]),_:1})):(p(),f(v,{key:0,appearance:"neutral"},{default:e(()=>[o(l(r("meshes.detail.disabled")),1)]),_:2},1024))]),_:2},1024)]),_:2},1032,["title","created","modified"]),s[6]||(s[6]=o()),t(X,null,{default:e(()=>[t(w,{type:"stack"},{default:e(()=>[t(w,{type:"columns",class:"columns-with-borders"},{default:e(()=>[t(C,{total:(n==null?void 0:n.services.total)??0,"data-testid":"services-status"},{title:e(()=>[o(l(r("meshes.detail.services")),1)]),_:2},1032,["total"]),s[4]||(s[4]=o()),t(C,{total:(n==null?void 0:n.dataplanesByType.standard.total)??0,online:(n==null?void 0:n.dataplanesByType.standard.online)??0,"data-testid":"data-plane-proxies-status"},{title:e(()=>[o(l(r("meshes.detail.data_plane_proxies")),1)]),_:2},1032,["total","online"]),s[5]||(s[5]=o()),t(C,{total:(n==null?void 0:n.totalPolicyCount)??0,"data-testid":"policies-status"},{title:e(()=>[o(l(r("meshes.detail.policies")),1)]),_:2},1032,["total"])]),_:2},1024)]),_:2},1024)]),_:2},1024),s[7]||(s[7]=o()),t(X,null,{default:e(()=>[t(F,{resource:a.mesh.config},{default:e(({copy:m,copying:d})=>[d?(p(),f(g,{key:0,src:b(A(M),"/meshes/:name/as/kubernetes",{name:c.params.mesh},{cacheControl:"no-store"}),onChange:u=>{m(B=>B(u))},onError:u=>{m((B,P)=>P(u))}},null,8,["src","onChange","onError"])):z("",!0)]),_:2},1032,["resource"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["docs"])]),_:2},1032,["src"])]),_:1})}}});export{j as default};
