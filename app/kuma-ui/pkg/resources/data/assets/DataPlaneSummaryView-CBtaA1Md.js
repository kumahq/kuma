import{d as B,j as F,e as m,o as p,p as c,w as t,a as n,l as i,t as s,b as a,c as f,J as x,K as T,n as K,Q as u,S as X,m as g,W as q,L as I,q as _,V as M,ae as O}from"./index-D8KcXOkO.js";import{q as U}from"./kong-icons.es678-B-3d6QMe.js";import{T as Q}from"./TagList-CJ9Lwxv3.js";import{_ as Z}from"./ResourceCodeBlock.vue_vue_type_script_setup_true_lang-Ch_PDPX3.js";const j={class:"stack-with-borders"},G={class:"status-with-reason"},J={key:0},W={class:"mt-4"},H={class:"stack-with-borders"},Y={class:"mt-4"},se=B({__name:"DataPlaneSummaryView",props:{items:{},routeName:{}},setup(R){const E=F(),h=R;return(ee,e)=>{const S=m("XEmptyState"),b=m("RouteTitle"),k=m("XAction"),D=m("KTooltip"),z=m("DataCollection"),V=m("XLayout"),N=m("DataSource"),P=m("AppView"),L=m("RouteView");return p(),c(L,{name:h.routeName,params:{mesh:"",dataPlane:"",codeSearch:"",codeFilter:!1,codeRegExp:!1}},{default:t(({route:d,t:l,uri:$})=>[n(z,{items:h.items,predicate:C=>C.id===d.params.dataPlane},{empty:t(()=>[n(S,null,{title:t(()=>[i("h2",null,s(l("common.collection.summary.empty_title",{type:"Data Plane Proxy"})),1)]),default:t(()=>[e[0]||(e[0]=a()),i("p",null,s(l("common.collection.summary.empty_message",{type:"Data Plane Proxy"})),1)]),_:2},1024)]),default:t(({items:C})=>[(p(!0),f(x,null,T([C[0]],o=>(p(),c(P,{key:o.id},{title:t(()=>[i("h2",{class:K(`type-${o.dataplaneType}`)},[n(k,{to:{name:"data-plane-detail-view",params:{dataPlane:o.id}}},{default:t(()=>[n(b,{title:l("data-planes.routes.item.title",{name:o.name})},null,8,["title"])]),_:2},1032,["to"])],2)]),default:t(()=>[e[20]||(e[20]=a()),n(V,{type:"stack"},{default:t(()=>[i("div",j,[n(u,{layout:"horizontal"},{title:t(()=>[a(s(l("http.api.property.status")),1)]),body:t(()=>[i("div",G,[n(X,{status:o.status},null,8,["status"]),e[2]||(e[2]=a()),o.dataplaneType==="standard"?(p(),c(z,{key:0,items:o.dataplane.networking.inbounds,predicate:r=>r.state!=="Ready",empty:!1},{default:t(({items:r})=>[n(D,{class:"reason-tooltip"},{content:t(()=>[i("ul",null,[(p(!0),f(x,null,T(r,y=>(p(),f("li",{key:`${y.service}:${y.port}`},s(l("data-planes.routes.item.unhealthy_inbound",{service:y.service,port:y.port})),1))),128))])]),default:t(()=>[n(g(U),{color:g(q),size:g(I)},null,8,["color","size"]),e[1]||(e[1]=a())]),_:2},1024)]),_:2},1032,["items","predicate"])):_("",!0)])]),_:2},1024),e[10]||(e[10]=a()),n(u,{layout:"horizontal"},{title:t(()=>e[4]||(e[4]=[a(`
                    Type
                  `)])),body:t(()=>[a(s(l(`data-planes.type.${o.dataplaneType}`)),1)]),_:2},1024),e[11]||(e[11]=a()),o.namespace.length>0?(p(),c(u,{key:0,layout:"horizontal"},{title:t(()=>[a(s(l("data-planes.routes.item.namespace")),1)]),body:t(()=>[a(s(o.namespace),1)]),_:2},1024)):_("",!0),e[12]||(e[12]=a()),g(E)("use zones")&&o.zone?(p(),c(u,{key:1,layout:"horizontal"},{title:t(()=>e[7]||(e[7]=[a(`
                    Zone
                  `)])),body:t(()=>[n(k,{to:{name:"zone-cp-detail-view",params:{zone:o.zone}}},{default:t(()=>[a(s(o.zone),1)]),_:2},1032,["to"])]),_:2},1024)):_("",!0),e[13]||(e[13]=a()),n(u,{layout:"horizontal"},{title:t(()=>[a(s(l("http.api.property.modificationTime")),1)]),body:t(()=>[a(s(l("common.formats.datetime",{value:Date.parse(o.modificationTime)})),1)]),_:2},1024)]),e[18]||(e[18]=a()),o.dataplane.networking.gateway?(p(),f("div",J,[i("h3",null,s(l("data-planes.routes.item.gateway")),1),e[17]||(e[17]=a()),i("div",W,[i("div",H,[n(u,{layout:"horizontal"},{title:t(()=>[a(s(l("http.api.property.tags")),1)]),body:t(()=>[n(Q,{alignment:"right",tags:o.dataplane.networking.gateway.tags},null,8,["tags"])]),_:2},1024),e[16]||(e[16]=a()),n(u,{layout:"horizontal"},{title:t(()=>[a(s(l("http.api.property.address")),1)]),body:t(()=>[n(M,{text:`${o.dataplane.networking.address}`},null,8,["text"])]),_:2},1024)])])])):_("",!0)]),_:2},1024),e[21]||(e[21]=a()),i("div",null,[i("h3",null,s(l("data-planes.routes.item.config")),1),e[19]||(e[19]=a()),i("div",Y,[n(Z,{resource:o.config,language:"yaml","is-searchable":"",query:d.params.codeSearch,"is-filter-mode":d.params.codeFilter,"is-reg-exp-mode":d.params.codeRegExp,onQueryChange:r=>d.update({codeSearch:r}),onFilterModeChange:r=>d.update({codeFilter:r}),onRegExpModeChange:r=>d.update({codeRegExp:r})},{default:t(({copy:r,copying:y})=>[y?(p(),c(N,{key:0,src:$(g(O),"/meshes/:mesh/dataplanes/:name/as/kubernetes",{mesh:d.params.mesh,name:d.params.dataPlane},{cacheControl:"no-store"}),onChange:w=>{r(v=>v(w))},onError:w=>{r((v,A)=>A(w))}},null,8,["src","onChange","onError"])):_("",!0)]),_:2},1032,["resource","query","is-filter-mode","is-reg-exp-mode","onQueryChange","onFilterModeChange","onRegExpModeChange"])])])]),_:2},1024))),128))]),_:2},1032,["items","predicate"])]),_:1},8,["name"])}}});export{se as default};
