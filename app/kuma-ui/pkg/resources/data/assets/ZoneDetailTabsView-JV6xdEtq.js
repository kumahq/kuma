import{d as L,aw as O,l as B,A as Z,a as o,o as u,b as _,w as e,e as n,p as i,O as b,m as f,T as S,f as s,C as $,t as d,B as K,aq as M,q as C,aC as z}from"./index-Bqk11xPq.js";import{_ as X}from"./DeleteResourceModal.vue_vue_type_script_setup_true_lang-CsHrxduG.js";import{_ as P}from"./NavTabs.vue_vue_type_script_setup_true_lang-BiJ6jadv.js";const j=L({__name:"ZoneDetailTabsView",setup(q){const v=O(),{t}=B(),w=Z([]),k=c=>{const r=[];c.zoneInsight.store==="memory"&&r.push({kind:"ZONE_STORE_TYPE_MEMORY",payload:{}}),z(c.zoneInsight,"version.kumaCp.kumaCpGlobalCompatible","true")||r.push({kind:"INCOMPATIBLE_ZONE_AND_GLOBAL_CPS_VERSIONS",payload:{zoneCpVersion:z(c.zoneInsight,"version.kumaCp.version",t("common.collection.none"))}}),w.value=r};async function x(c){await v.deleteZone({name:c})}return(c,r)=>{const h=o("RouteTitle"),g=o("KDropdownItem"),D=o("XTeleportTemplate"),y=o("XDisclosure"),T=o("KDropdown"),V=o("RouterLink"),R=o("RouterView"),I=o("AppView"),N=o("DataLoader"),A=o("RouteView");return u(),_(A,{name:"zone-cp-detail-tabs-view",params:{zone:""}},{default:e(({can:E,route:l})=>[n(N,{src:`/zone-cps/${l.params.zone}`,onChange:k},{default:e(({data:m})=>[m?(u(),_(I,{key:0,breadcrumbs:[{to:{name:"zone-cp-list-view"},text:i(t)("zone-cps.routes.item.breadcrumbs")}]},b({title:e(()=>[f("h1",null,[n(S,{text:l.params.zone},{default:e(()=>[n(h,{title:i(t)("zone-cps.routes.item.title",{name:l.params.zone})},null,8,["title"])]),_:2},1032,["text"])])]),default:e(()=>{var p;return[s(),s(),n(P,{"active-route-name":(p=l.active)==null?void 0:p.name},b({_:2},[$(l.children,({name:a})=>({name:`${a}`,fn:e(()=>[n(V,{to:{name:a},"data-testid":`${a}-tab`},{default:e(()=>[s(d(i(t)(`zone-cps.routes.item.navigation.${a}`)),1)]),_:2},1032,["to","data-testid"])])}))]),1032,["active-route-name"]),s(),n(R,null,{default:e(a=>[(u(),_(K(a.Component),{data:m,notifications:w.value},null,8,["data","notifications"]))]),_:2},1024)]}),_:2},[E("create zones")?{name:"actions",fn:e(()=>[n(T,{"kpop-attributes":{placement:"bottomEnd"},"trigger-text":i(t)("zones.action_menu.toggle_button"),"show-caret":"",width:"280"},{items:e(()=>[n(y,null,{default:e(({expanded:p,toggle:a})=>[n(g,{danger:"","data-testid":"delete-button",onClick:M(a,["prevent"])},{default:e(()=>[s(d(i(t)("zones.action_menu.delete_button")),1)]),_:2},1032,["onClick"]),s(),n(D,{to:{name:"modal-layer"}},{default:e(()=>[p?(u(),_(X,{key:0,"confirmation-text":m.name,"delete-function":()=>x(m.name),"is-visible":"","action-button-text":i(t)("common.delete_modal.proceed_button"),title:i(t)("common.delete_modal.title",{type:"Zone"}),"data-testid":"delete-zone-modal",onCancel:a,onDelete:()=>l.replace({name:"zone-cp-list-view"})},{default:e(()=>[f("p",null,d(i(t)("common.delete_modal.text1",{type:"Zone",name:m.name})),1),s(),f("p",null,d(i(t)("common.delete_modal.text2")),1)]),_:2},1032,["confirmation-text","delete-function","action-button-text","title","onCancel","onDelete"])):C("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["trigger-text"])]),key:"0"}:void 0]),1032,["breadcrumbs"])):C("",!0)]),_:2},1032,["src"])]),_:1})}}});export{j as default};
