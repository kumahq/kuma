import{d as K,e as d,o as e,m as i,w as t,a as c,c as o,H as p,J as _,Y as M,b as a,t as h,l as R,av as Y,k as l,p as b,a4 as A,L as q,M as E,q as G}from"./index-C4IVBmnO.js";import{a as Q,A as U}from"./AccordionList-TGr7twc-.js";import{P as L}from"./PolicyTypeTag-BWgvkWVS.js";import{R as W}from"./RuleMatchers-DFgCh-0m.js";const D=v=>(q("data-v-0d1f1614"),v=v(),E(),v),Z={key:0,class:"rules"},ee=D(()=>l("h3",null,"Rules",-1)),te={class:"stack-with-borders mt-4"},ae={class:"stack-with-borders mt-4"},oe={class:"mt-4"},ne={class:"stack-with-borders"},se=D(()=>l("dt",null,`
                                          Config
                                        `,-1)),re={class:"mt-2"},ce=K({__name:"ConnectionOutboundSummaryOverviewView",props:{data:{},dataplaneOverview:{}},setup(v){const k=v,S=(w,f)=>w.$resourceMeta.name===f.name&&w.$resourceMeta.namespace===f.namespace&&w.$resourceMeta.zone===f.zone&&(f.resourceSectionName===""||w.$resourceMeta.port===f.port);return(w,f)=>{const z=d("XBadge"),N=d("XAction"),O=d("DataCollection"),V=d("XCodeBlock"),X=d("RouterLink"),x=d("KCard"),I=d("DataLoader"),j=d("DataSource"),F=d("AppView"),T=d("RouteView");return e(),i(T,{params:{mesh:"",dataPlane:"",connection:""},name:"connection-outbound-summary-overview-view"},{default:t(({t:H,route:B,uri:J})=>[c(F,null,{default:t(()=>[(e(!0),o(p,null,_([B.params.connection.replace(/-([a-f0-9]){16}$/,"")],P=>(e(),o("div",{key:P,class:"stack-with-borders"},[c(M,{layout:"horizontal"},{title:t(()=>[a(`
              Protocol
            `)]),body:t(()=>[c(z,{appearance:"info"},{default:t(()=>[a(h(H(`http.api.value.${["grpc","http","tcp"].find(g=>typeof k.data[g]<"u")}`)),1)]),_:2},1024)]),_:2},1024),a(),k.data?(e(),o("div",Z,[ee,a(),c(j,{src:"/policy-types"},{default:t(({data:g})=>[(e(!0),o(p,null,_([Object.groupBy((g==null?void 0:g.policies)??[],y=>y.name)],y=>(e(),i(I,{key:typeof y,src:J(R(Y),"/meshes/:mesh/rules/for/:dataplane",{mesh:B.params.mesh,dataplane:B.params.dataPlane})},{default:t(({data:$})=>[k.data.$resourceMeta.type!==""?(e(),i(O,{key:0,predicate:u=>u.resourceMeta.type==="Mesh"||S(k.data,u),items:$.toResourceRules},{default:t(({items:u})=>[l("div",te,[(e(!0),o(p,null,_(Object.groupBy(u,n=>n.type),(n,m)=>(e(),o("div",{key:m},[c(L,{"policy-type":m},{default:t(()=>[a(h(m),1)]),_:2},1032,["policy-type"]),a(),l("div",ae,[(e(!0),o(p,null,_(n.length>1?n.filter(s=>S(k.data,s)):n,s=>(e(),o("div",{key:s},[s.origins.length>0?(e(),i(M,{key:0,layout:"horizontal"},{title:t(()=>[a(`
                                      Origin Policies
                                    `)]),body:t(()=>[c(O,{predicate:r=>typeof r.resourceMeta<"u",items:s.origins,empty:!1},{default:t(({items:r})=>[l("ul",null,[(e(!0),o(p,null,_(r,C=>(e(),o("li",{key:JSON.stringify(C)},[Object.keys(y).length>0?(e(),i(N,{key:0,to:{name:"policy-detail-view",params:{policyPath:y[m][0].path,mesh:C.resourceMeta.mesh,policy:C.resourceMeta.name}}},{default:t(()=>[a(h(C.resourceMeta.name),1)]),_:2},1032,["to"])):b("",!0)]))),128))])]),_:2},1032,["predicate","items"])]),_:2},1024)):b("",!0),a(),c(V,{class:"mt-2",code:R(A).stringify(s.raw),language:"yaml","show-copy-button":!1},null,8,["code"])]))),128))])]))),128))])]),_:2},1032,["predicate","items"])):(e(),i(O,{key:1,predicate:u=>u.ruleType==="to"&&!["MeshHTTPRoute","MeshTCPRoute"].includes(u.type)&&u.matchers.every(n=>n.key==="kuma.io/service"&&(n.not?n.value!==P:n.value===P)),items:$.rules},{default:t(({items:u})=>[l("div",oe,[c(Q,{"initially-open":0,"multiple-open":"",class:"stack"},{default:t(()=>[(e(!0),o(p,null,_(Object.groupBy(u,n=>n.type),(n,m)=>(e(),i(x,{key:m},{default:t(()=>[c(U,null,{"accordion-header":t(()=>[c(L,{"policy-type":m},{default:t(()=>[a(h(m)+" ("+h(n.length)+`)
                                  `,1)]),_:2},1032,["policy-type"])]),"accordion-content":t(()=>[l("div",ne,[(e(!0),o(p,null,_(n,s=>(e(),o(p,{key:s},[s.matchers.length>0?(e(),i(M,{key:0,layout:"horizontal"},{title:t(()=>[a(`
                                          From
                                        `)]),body:t(()=>[l("p",null,[c(W,{items:s.matchers},null,8,["items"])])]),_:2},1024)):b("",!0),a(),s.origins.length>0?(e(),i(M,{key:1,layout:"horizontal"},{title:t(()=>[a(`
                                          Origin Policies
                                        `)]),body:t(()=>[l("ul",null,[(e(!0),o(p,null,_(s.origins,r=>(e(),o("li",{key:`${r.mesh}-${r.name}`},[y[r.type]?(e(),i(X,{key:0,to:{name:"policy-detail-view",params:{mesh:r.mesh,policyPath:y[r.type][0].path,policy:r.name}}},{default:t(()=>[a(h(r.name),1)]),_:2},1032,["to"])):(e(),o(p,{key:1},[a(h(r.name),1)],64))]))),128))])]),_:2},1024)):b("",!0),a(),l("div",null,[se,a(),l("dd",re,[l("div",null,[c(V,{code:R(A).stringify(s.raw),language:"yaml","show-copy-button":!1},null,8,["code"])])])])],64))),128))])]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)])]),_:2},1032,["predicate","items"]))]),_:2},1032,["src"]))),128))]),_:2},1024)])):b("",!0)]))),128))]),_:2},1024)]),_:1})}}}),pe=G(ce,[["__scopeId","data-v-0d1f1614"]]);export{pe as default};
