import{d as R,k as B,B as L,a as r,o as t,b as l,w as a,q as u,e as n,m as D,f as o,E as $,V as h,t as m,F as d,c as _,U as N,K as A,D as P,p as w,n as E,H as I,W as K,_ as T}from"./index-8scsg5Gp.js";import{A as q}from"./AppCollection-KYM0CAD8.js";import{L as F}from"./LinkBox-PEe1XYRx.js";import{S as U}from"./StatusBadge-QOuhoGfw.js";import{S as W}from"./SummaryView-d0770qei.js";const H=R({__name:"ServiceListView",setup(O){const k=B(),C=L();return(Z,j)=>{const S=r("RouteTitle"),v=r("RouterLink"),z=r("KCard"),V=r("RouterView"),x=r("AppView"),f=r("DataSource"),b=r("RouteView");return t(),l(f,{src:"/me"},{default:a(({data:g})=>[g?(t(),l(b,{key:0,name:"service-list-view",params:{page:1,size:g.pageSize,mesh:"",service:""}},{default:a(({route:s,t:c})=>[n(f,{src:`/meshes/${s.params.mesh}/service-insights/of/${u(k)("use gateways ui")?"internal":"all"}?page=${s.params.page}&size=${s.params.size}`},{default:a(({data:i,error:y})=>[n(x,null,K({title:a(()=>[D("h2",null,[n(S,{title:c(`${u(C).name==="service-list-view"?"":"external-"}services.routes.items.title`)},null,8,["title"])])]),default:a(()=>[o(),o(),n(z,null,{default:a(()=>[y!==void 0?(t(),l($,{key:0,error:y},null,8,["error"])):(t(),l(q,{key:1,class:"service-collection","data-testid":"service-collection","empty-state-message":c("common.emptyState.message",{type:"Services"}),headers:[{label:"Name",key:"name"},{label:"Address",key:"addressPort"},{label:"DP proxies (online / total)",key:"online"},{label:"Status",key:"status"},{label:"Details",key:"details",hideLabel:!0}],"page-number":s.params.page,"page-size":s.params.size,total:i==null?void 0:i.total,items:i==null?void 0:i.items,error:y,"is-selected-row":e=>e.name===s.params.service,onChange:s.update},{name:a(({row:e})=>[n(h,{text:e.name},{default:a(()=>[n(v,{to:{name:"service-detail-view",params:{mesh:e.mesh,service:e.name},query:{page:s.params.page,size:s.params.size}}},{default:a(()=>[o(m(e.name),1)]),_:2},1032,["to"])]),_:2},1032,["text"])]),addressPort:a(({row:e})=>[e.addressPort?(t(),l(h,{key:0,text:e.addressPort},null,8,["text"])):(t(),_(d,{key:1},[o(m(c("common.collection.none")),1)],64))]),online:a(({row:e})=>[e.dataplanes?(t(),_(d,{key:0},[o(m(e.dataplanes.online||0)+" / "+m(e.dataplanes.total||0),1)],64)):(t(),_(d,{key:1},[o(m(c("common.collection.none")),1)],64))]),status:a(({row:e})=>[n(U,{status:e.status},null,8,["status"])]),details:a(({row:e})=>[n(v,{class:"details-link","data-testid":"details-link",to:{name:"service-detail-view",params:{mesh:e.mesh,service:e.name}}},{default:a(()=>[o(m(c("common.collection.details_link"))+" ",1),n(u(N),{display:"inline-block",decorative:"",size:u(A)},null,8,["size"])]),_:2},1032,["to"])]),_:2},1032,["empty-state-message","headers","page-number","page-size","total","items","error","is-selected-row","onChange"]))]),_:2},1024),o(),s.params.service?(t(),l(V,{key:0},{default:a(e=>[n(W,{onClose:p=>s.replace({name:"service-list-view",params:{mesh:s.params.mesh},query:{page:s.params.page,size:s.params.size}})},{default:a(()=>[(t(),l(P(e.Component),{name:s.params.service,service:i==null?void 0:i.items.find(p=>p.name===s.params.service)},null,8,["name","service"]))]),_:2},1032,["onClose"])]),_:2},1024)):w("",!0)]),_:2},[u(k)("use gateways ui")?{name:"actions",fn:a(()=>[n(F,null,{default:a(()=>[(t(!0),_(d,null,I(s.children,({name:e})=>{var p;return t(),l(v,{key:e,class:E({active:((p=s.active)==null?void 0:p.name)===e}),to:{name:e,params:{mesh:s.params.mesh}}},{default:a(()=>[o(m(c(`services.routes.items.navigation.${e}`)),1)]),_:2},1032,["class","to"])}),128))]),_:2},1024)]),key:"0"}:void 0]),1024)]),_:2},1032,["src"])]),_:2},1032,["params"])):w("",!0)]),_:1})}}}),Y=T(H,[["__scopeId","data-v-2d52a06e"]]);export{Y as default};
