import{d as S,c as _,V as x,o as a,a as c,w as e,k as d,f as I,g as s,h as t,b as i,l as y,t as p,E as B,e as D,F as $,q as E}from"./index-5cc1bd9e.js";import{h as C,w as T,v as Z,D as g,S as L,T as q,f as J,A as M,i as P,n as R,E as j,o as F,_ as G}from"./RouteView.vue_vue_type_script_setup_true_lang-07b4cab0.js";import{a as H,A as K,S as U,b as W}from"./SubscriptionHeader-be0a5fe7.js";import{_ as Q}from"./CodeBlock.vue_vue_type_style_index_0_lang-c839ae76.js";import{_ as X}from"./TabsWidget.vue_vue_type_style_index_0_lang-02feb8ed.js";import{_ as Y}from"./WarningsWidget.vue_vue_type_script_setup_true_lang-0d60a429.js";import{f as ee}from"./dataplane-e7ae9fed.js";import{_ as te}from"./RouteTitle.vue_vue_type_script_setup_true_lang-9295e5a4.js";import"./WarningIcon.vue_vue_type_script_setup_true_lang-bebc6d7a.js";const se={class:"stack"},ne={class:"columns",style:{"--columns":"4"}},oe=S({__name:"ZoneDetails",props:{zoneOverview:{type:Object,required:!0}},setup(z){const r=z,{t:l}=C(),w=T(),m=[{hash:"#overview",title:l("zone-cps.routes.item.tabs.overview")},{hash:"#insights",title:l("zone-cps.routes.item.tabs.insights")}],v=_(()=>{var o;for(const n of((o=r.zoneOverview.zoneInsight)==null?void 0:o.subscriptions)??[])if(n.config)return JSON.parse(n.config).environment;return"kubernetes"}),h=_(()=>Z(r.zoneOverview)),f=_(()=>x(r.zoneOverview)),k=_(()=>{var u;const o=[],n=((u=r.zoneOverview.zoneInsight)==null?void 0:u.subscriptions)??[];if(n.length>0){const b=n[n.length-1],N=b.version.kumaCp.version||"-",{kumaCpGlobalCompatible:V=!0}=b.version.kumaCp;V||o.push({kind:ee,payload:{zoneCpVersion:N,globalCpVersion:w("KUMA_VERSION")}})}return o}),O=_(()=>{var n;const o=((n=r.zoneOverview.zoneInsight)==null?void 0:n.subscriptions)??[];if(o.length>0){const u=o[o.length-1];if(u.config)return JSON.stringify(JSON.parse(u.config),null,2)}return null}),A=_(()=>{var n;const o=((n=r.zoneOverview.zoneInsight)==null?void 0:n.subscriptions)??[];return Array.from(o).reverse()});return(o,n)=>(a(),c(X,{tabs:m},{overview:e(()=>[d("div",se,[k.value.length>0?(a(),c(Y,{key:0,warnings:k.value},null,8,["warnings"])):I("",!0),s(),t(i(y),null,{body:e(()=>[d("div",ne,[t(g,null,{title:e(()=>[s(p(i(l)("http.api.property.status")),1)]),body:e(()=>[t(L,{status:h.value},null,8,["status"])]),_:1}),s(),t(g,null,{title:e(()=>[s(p(i(l)("http.api.property.name")),1)]),body:e(()=>[t(q,{text:r.zoneOverview.name},null,8,["text"])]),_:1}),s(),t(g,null,{title:e(()=>[s(p(i(l)("http.api.property.type")),1)]),body:e(()=>[s(p(v.value),1)]),_:1}),s(),t(g,null,{title:e(()=>[s(p(i(l)("http.api.property.authenticationType")),1)]),body:e(()=>[s(p(f.value),1)]),_:1})])]),_:1}),s(),d("div",null,[d("h2",null,p(i(l)("zone-cps.detail.configuration_title")),1),s(),t(i(y),{class:"mt-4"},{body:e(()=>[O.value!==null?(a(),c(Q,{key:0,id:"code-block-zone-config",language:"json",code:O.value,"is-searchable":"","query-key":"zone-config"},null,8,["code"])):(a(),c(i(B),{key:1,class:"mt-4","data-testid":"warning-no-subscriptions",appearance:"warning"},{alertMessage:e(()=>[s(p(i(l)("zone-cps.detail.no_subscriptions")),1)]),_:1}))]),_:1})])])]),insights:e(()=>[t(i(y),null,{body:e(()=>[t(H,{"initially-open":0},{default:e(()=>[(a(!0),D($,null,E(A.value,(u,b)=>(a(),c(K,{key:b},{"accordion-header":e(()=>[t(U,{subscription:u},null,8,["subscription"])]),"accordion-content":e(()=>[t(W,{subscription:u},null,8,["subscription"])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}))}});const ie=J(oe,[["__scopeId","data-v-edd36e9c"]]),ve=S({__name:"ZoneDetailView",setup(z){const{t:r}=C();return(l,w)=>(a(),c(G,{name:"zone-cp-detail-view","data-testid":"zone-cp-detail-view"},{default:e(({route:m})=>[t(M,{breadcrumbs:[{to:{name:"zone-cp-list-view"},text:i(r)("zone-cps.routes.item.breadcrumbs")}]},{title:e(()=>[d("h1",null,[t(te,{title:i(r)("zone-cps.routes.item.title",{name:m.params.zone}),render:!0},null,8,["title"])])]),default:e(()=>[s(),t(P,{src:`/zone-cps/${m.params.zone}`},{default:e(({data:v,isLoading:h,error:f})=>[h?(a(),c(R,{key:0})):f!==void 0?(a(),c(j,{key:1,error:f},null,8,["error"])):v===void 0?(a(),c(F,{key:2})):(a(),c(ie,{key:3,"zone-overview":v,"data-testid":"detail-view-details"},null,8,["zone-overview"]))]),_:2},1032,["src"])]),_:2},1032,["breadcrumbs"])]),_:1}))}});export{ve as default};
