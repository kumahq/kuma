import{d as S,e as m,o as r,p as h,w as e,a as n,b as o,m as V,D,c as d,J as k,K as T,R as $,Q as b,t as u,T as B,q as v,l as j}from"./index-CPSLZmJP.js";import{_ as q}from"./ResourceCodeBlock.vue_vue_type_script_setup_true_lang-DWzDm1rQ.js";const F=["innerHTML"],J=["innerHTML"],Q=S({__name:"MeshDetailView",props:{mesh:{}},setup(L){const p=L;return(R,s)=>{const x=m("RouteTitle"),A=m("XTimespan"),H=m("XAction"),w=m("XBadge"),f=m("XLayout"),C=m("XCard"),M=m("DataSource"),N=m("AppView"),E=m("RouteView");return r(),h(E,{name:"mesh-detail-view",params:{mesh:""}},{default:e(({route:y,t:l,uri:X})=>[n(x,{title:l("meshes.routes.overview.title"),render:!1},null,8,["title"]),s[10]||(s[10]=o()),n(M,{src:X(V(D),"/mesh-insights/:name",{name:y.params.mesh})},{default:e(({data:t})=>[(r(!0),d(k,null,T([["MeshTrafficPermission","TrafficPermission"].reduce((_,a)=>{var i,c;return _+(((c=(i=t==null?void 0:t.policies)==null?void 0:i[a])==null?void 0:c.total)??0)},0)===0],_=>(r(),h(N,{key:_,docs:l("meshes.href.docs")},$({default:e(()=>[s[9]||(s[9]=o()),n(f,{type:"stack"},{default:e(()=>[n(C,null,{default:e(()=>[n(f,{type:"stack"},{default:e(()=>[n(A,{start:l("common.formats.datetime",{value:Date.parse(p.mesh.creationTime)}),end:l("common.formats.datetime",{value:Date.parse(p.mesh.modificationTime)})},null,8,["start","end"]),s[2]||(s[2]=o()),n(f,{type:"columns"},{default:e(()=>[(r(),d(k,null,T(["MeshTrafficPermission","MeshMetric","MeshAccessLog","MeshTrace"],a=>(r(),d(k,{key:a},[(r(!0),d(k,null,T([Object.entries((t==null?void 0:t.policies)??{}).find(([i,c])=>i===a)],i=>(r(),h(b,{key:i},{title:e(()=>[n(H,{to:{name:"policy-list-view",params:{mesh:y.params.mesh,policyPath:`${a.toLowerCase()}s`}}},{default:e(()=>[o(u(a),1)]),_:2},1032,["to"])]),body:e(()=>[n(w,{appearance:"neutral"},{default:e(()=>[o(u(l(i?"meshes.detail.enabled":"meshes.detail.disabled")),1)]),_:2},1024)]),_:2},1024))),128))],64))),64))]),_:2},1024)]),_:2},1024)]),_:2},1024),s[7]||(s[7]=o()),n(C,null,{default:e(()=>[n(f,{type:"stack"},{default:e(()=>[n(f,{type:"columns"},{default:e(()=>[n(B,{total:(t==null?void 0:t.services.total)??0,"data-testid":"services-status"},{title:e(()=>[o(u(l("meshes.detail.services")),1)]),_:2},1032,["total"]),s[4]||(s[4]=o()),n(B,{total:(t==null?void 0:t.dataplanesByType.standard.total)??0,online:(t==null?void 0:t.dataplanesByType.standard.online)??0,"data-testid":"data-plane-proxies-status"},{title:e(()=>[o(u(l("meshes.detail.data_plane_proxies")),1)]),_:2},1032,["total","online"]),s[5]||(s[5]=o()),n(B,{total:(t==null?void 0:t.totalPolicyCount)??0,"data-testid":"policies-status"},{title:e(()=>[o(u(l("meshes.detail.policies")),1)]),_:2},1032,["total"]),s[6]||(s[6]=o()),n(b,null,{title:e(()=>[o(u(l("http.api.property.mtls")),1)]),body:e(()=>[p.mesh.mtlsBackend?(r(),d(k,{key:1},[o(u(p.mesh.mtlsBackend.type)+" / "+u(p.mesh.mtlsBackend.name),1)],64)):(r(),h(w,{key:0,appearance:"neutral"},{default:e(()=>[o(u(l("meshes.detail.disabled")),1)]),_:2},1024))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),s[8]||(s[8]=o()),n(q,{resource:R.mesh.config},{default:e(({copy:a,copying:i})=>[i?(r(),h(M,{key:0,src:X(V(D),"/meshes/:name/as/kubernetes",{name:y.params.mesh},{cacheControl:"no-store"}),onChange:c=>{a(g=>g(c))},onError:c=>{a((g,P)=>P(c))}},null,8,["src","onChange","onError"])):v("",!0)]),_:2},1032,["resource"])]),_:2},1024)]),_:2},[!p.mesh.mtlsBackend||_?{name:"notifications",fn:e(()=>[j("ul",null,[p.mesh.mtlsBackend?v("",!0):(r(),d("li",{key:0,innerHTML:l("meshes.routes.item.mtls-warning")},null,8,F)),s[0]||(s[0]=o()),p.mesh.mtlsBackend&&_?(r(),d("li",{key:1,innerHTML:l("meshes.routes.item.mtp-warning")},null,8,J)):v("",!0)])]),key:"0"}:void 0]),1032,["docs"]))),128))]),_:2},1032,["src"])]),_:1})}}});export{Q as default};
