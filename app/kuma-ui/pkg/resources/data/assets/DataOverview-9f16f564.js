import{d as T,j as d,e as l,w as n,b as u,f as v,h as o,a3 as S,o as t,g as _,a4 as j,r as O,c as D,v as G,x as J,i as b,J as N,H as I,q as M,Y as E,F as g,t as r,p as V,m as X}from"./index-d371fbce.js";import{d as C,$ as x,a as Y}from"./kongponents.es-5e297d61.js";import{_ as P}from"./EmptyBlock.vue_vue_type_script_setup_true_lang-270ebc20.js";import{E as Q}from"./ErrorBlock-641a3dfd.js";import{_ as Z}from"./LoadingBlock.vue_vue_type_script_setup_true_lang-83214dd7.js";import{d as B}from"./datadogLogEvents-302eea7b.js";import{_ as L}from"./_plugin-vue_export-helper-c27b6911.js";import{T as ee}from"./TagList-ccdda463.js";import{S as te}from"./StatusBadge-297b4f7e.js";const ae=""+new URL("icon-empty-table-dbb0b754.svg",import.meta.url).href,se={class:"pagination"},ne=T({__name:"PaginationWidget",props:{hasPrevious:{type:Boolean,default:!1},hasNext:{type:Boolean,default:!1}},emits:["next","previous"],setup(a,{emit:c}){const s=a;function h(){c("next"),S.logger.info(B.PAGINATION_NEXT_BUTTON_CLICKED)}function p(){c("previous"),S.logger.info(B.PAGINATION_PREVIOUS_BUTTON_CLICKED)}return(k,w)=>(t(),d("div",se,[s.hasPrevious?(t(),l(u(x),{key:0,appearance:"primary","data-testid":"pagination-previous-button",onClick:p},{default:n(()=>[_(u(C),{icon:"chevronLeft",color:"currentColor",size:"16","hide-title":"","aria-hidden":"true"}),o(`

      Previous
    `)]),_:1})):v("",!0),o(),s.hasNext?(t(),l(u(x),{key:1,appearance:"primary","data-testid":"pagination-next-button",onClick:h},{default:n(()=>[o(`
      Next

      `),_(u(C),{icon:"chevronRight",color:"currentColor",size:"16","hide-title":"","aria-hidden":"true"})]),_:1})):v("",!0)]))}});const oe=L(ne,[["__scopeId","data-v-94d7b089"]]),ie=a=>(V("data-v-b13bb18a"),a=a(),X(),a),re={class:"data-overview","data-testid":"data-overview"},le={class:"data-table-controls mb-2"},de={key:3,class:"data-overview-content"},ue={key:0,class:"data-overview-table"},ce=ie(()=>b("img",{class:"mb-3",src:ae},null,-1)),fe={key:0},me={key:1},pe={key:2,class:"data-overview-content mt-6"},ve=T({__name:"DataOverview",props:{selectedEntityName:{type:String,required:!1,default:""},pageSize:{type:Number,required:!1,default:12},isLoading:{type:Boolean,required:!1,default:!1},error:{type:[Error,null],required:!1,default:null},isEmpty:{type:Boolean,required:!1,default:!1},emptyState:{type:Object,required:!1,default:null},tableData:{type:Object,required:!1,default:null},tableDataIsEmpty:{type:Boolean,required:!1,default:!1},showWarnings:{type:Boolean,required:!1,default:!1},next:{type:[String,Boolean,null],required:!1,default:!1},pageOffset:{type:Number,required:!1,default:0}},emits:["table-action","refresh","load-data"],setup(a,{emit:c}){const s=a,h=j(),p=O(s.pageOffset),k=O(0),w=D(()=>s.showWarnings?s.tableData.headers:s.tableData.headers.filter(i=>i.key!=="warnings")),R=D(()=>s.tableData.headers.map(i=>i.key).filter(i=>h[i])),q=D(()=>s.selectedEntityName!==""?s.selectedEntityName:s.tableData.data.length>0?s.tableData.data[0].name:"");G(()=>s.tableData,function(){k.value++});function z(){return{data:s.tableData.data,total:s.tableData.data.length}}function $(i,m){c("table-action",m.entity??m)}function A(){c("refresh"),c("load-data",p.value),S.logger.info(B.TABLE_REFRESH_BUTTON_CLICKED)}function U(){p.value=s.pageOffset-s.pageSize,c("load-data",s.pageOffset-s.pageSize)}function W(){p.value=s.pageOffset+s.pageSize,c("load-data",s.pageOffset+s.pageSize)}function K({headerKey:i}){return{class:["warnings"].includes(i)?"text-center":["details"].includes(i)?"text-right":""}}function F(i){var e;if(!i)return{};const m={};return(((e=i.entity)==null?void 0:e.name)??i.name)===q.value&&(m.class="is-selected"),m}return(i,m)=>{const y=J("router-link");return t(),d("div",re,[b("div",le,[N(i.$slots,"additionalControls",{},void 0,!0),o(),_(u(x),{class:"refresh-button",appearance:"primary",disabled:a.isLoading,icon:"redo","data-testid":"data-overview-refresh-button",onClick:A},{default:n(()=>[o(`
        Refresh
      `)]),_:1},8,["disabled"])]),o(),a.isLoading?(t(),l(Z,{key:0})):a.error!==null?(t(),l(Q,{key:1,error:a.error},null,8,["error"])):a.isEmpty?(t(),l(P,{key:2})):(t(),d("div",de,[!a.tableDataIsEmpty&&a.tableData?(t(),d("div",ue,[(t(),l(u(Y),{key:k.value,class:E(["data-overview-table",{"data-table-is-hidden":a.tableDataIsEmpty}]),fetcher:z,headers:u(w),"cell-attrs":K,"row-attrs":F,"disable-pagination":"","is-clickable":"","data-testid":"data-overview-table","onRow:click":$},I({status:n(({rowValue:e})=>[e?(t(),l(te,{key:0,status:e},null,8,["status"])):(t(),d(g,{key:1},[o(`
              â€”
            `)],64))]),tags:n(({rowValue:e})=>[_(ee,{tags:e},null,8,["tags"])]),entity:n(({rowValue:e,row:f})=>[f.detailViewRoute?(t(),l(y,{key:0,to:f.detailViewRoute},{default:n(()=>[o(r(e.name),1)]),_:2},1032,["to"])):(t(),d(g,{key:1},[o(r(e.name),1)],64))]),mesh:n(({rowValue:e})=>[e.route?(t(),l(y,{key:0,to:e.route},{default:n(()=>[o(r(e.title),1)]),_:2},1032,["to"])):(t(),d(g,{key:1},[o(r(e.title),1)],64))]),service:n(({rowValue:e})=>[e.route?(t(),l(y,{key:0,to:e.route},{default:n(()=>[o(r(e.title),1)]),_:2},1032,["to"])):(t(),d(g,{key:1},[o(r(e.title),1)],64))]),zone:n(({rowValue:e})=>[e.route?(t(),l(y,{key:0,to:e.route},{default:n(()=>[o(r(e.title),1)]),_:2},1032,["to"])):(t(),d(g,{key:1},[o(r(e.title),1)],64))]),totalUpdates:n(({row:e})=>[b("span",null,r(e.totalUpdates),1)]),dpVersion:n(({row:e,rowValue:f})=>[b("div",{class:E({"with-warnings":e.unsupportedEnvoyVersion||e.unsupportedKumaDPVersion||e.kumaDpAndKumaCpMismatch})},r(f),3)]),envoyVersion:n(({row:e,rowValue:f})=>[b("div",{class:E({"with-warnings":e.unsupportedEnvoyVersion})},r(f),3)]),_:2},[M(u(R),e=>({name:e,fn:n(({rowValue:f,row:H})=>[N(i.$slots,e,{rowValue:f,row:H},void 0,!0)])})),a.showWarnings?{name:"warnings",fn:n(({row:e})=>[e.withWarnings?(t(),l(u(C),{key:0,class:"mr-1",icon:"warning",color:"var(--black-500)","secondary-color":"var(--yellow-300)",size:"20"})):v("",!0)]),key:"0"}:void 0]),1032,["class","headers"])),o(),_(oe,{"has-previous":p.value>0,"has-next":!!a.next,onNext:W,onPrevious:U},null,8,["has-previous","has-next"])])):v("",!0),o(),a.tableDataIsEmpty&&a.tableData?(t(),l(P,{key:1},I({title:n(()=>[ce,o(),a.emptyState.title?(t(),d("p",fe,r(a.emptyState.title),1)):(t(),d("p",me,`
            No items found
          `))]),_:2},[a.emptyState.message?{name:"message",fn:n(()=>[o(r(a.emptyState.message),1)]),key:"0"}:void 0]),1024)):v("",!0),o(),i.$slots.content?(t(),d("div",pe,[N(i.$slots,"content",{},void 0,!0)])):v("",!0)]))])}}});const Se=L(ve,[["__scopeId","data-v-b13bb18a"]]);export{Se as D};
