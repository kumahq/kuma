import{d as I,r as s,o as a,g as p,w as e,h as o,m as T,l as c,E as x,Y as z,C as i,a1 as R,j as _,F as u,S as V,i as y,Z as B,K as D,k as E,q as L}from"./index-65a641bf.js";const N=I({__name:"ServiceListView",setup(A){return(O,P)=>{const w=s("RouteTitle"),k=s("RouterLink"),g=s("KIcon"),b=s("KButton"),h=s("KDropdownItem"),f=s("KDropdownMenu"),C=s("KCard"),S=s("AppView"),d=s("DataSource"),K=s("RouteView");return a(),p(d,{src:"/me"},{default:e(({data:v})=>[v?(a(),p(K,{key:0,name:"services-list-view",params:{page:1,size:v.pageSize,mesh:""}},{default:e(({route:n,t:r})=>[o(d,{src:`/meshes/${n.params.mesh}/service-insights?page=${n.params.page}&size=${n.params.size}`},{default:e(({data:l,error:m})=>[o(S,null,{title:e(()=>[T("h2",null,[o(w,{title:r("services.routes.items.title"),render:!0},null,8,["title"])])]),default:e(()=>[c(),o(C,null,{body:e(()=>[m!==void 0?(a(),p(x,{key:0,error:m},null,8,["error"])):(a(),p(z,{key:1,class:"service-collection","data-testid":"service-collection","empty-state-message":r("common.emptyState.message",{type:"Services"}),headers:[{label:"Name",key:"name"},{label:"Type",key:"serviceType"},{label:"Address",key:"addressPort"},{label:"DP proxies (online / total)",key:"online"},{label:"Status",key:"status"},{label:"Actions",key:"actions",hideLabel:!0}],"page-number":parseInt(n.params.page),"page-size":parseInt(n.params.size),total:l==null?void 0:l.total,items:l==null?void 0:l.items,error:m,onChange:n.update},{name:e(({row:t})=>[o(k,{to:{name:"service-detail-view",params:{service:t.name}}},{default:e(()=>[c(i(t.name),1)]),_:2},1032,["to"])]),serviceType:e(({rowValue:t})=>[c(i(t||"internal"),1)]),addressPort:e(({rowValue:t})=>[t?(a(),p(R,{key:0,text:t},null,8,["text"])):(a(),_(u,{key:1},[c(i(r("common.collection.none")),1)],64))]),online:e(({row:t})=>[t.dataplanes?(a(),_(u,{key:0},[c(i(t.dataplanes.online||0)+" / "+i(t.dataplanes.total||0),1)],64)):(a(),_(u,{key:1},[c(i(r("common.collection.none")),1)],64))]),status:e(({row:t})=>[o(V,{status:t.status||"not_available"},null,8,["status"])]),actions:e(({row:t})=>[o(f,{class:"actions-dropdown","kpop-attributes":{placement:"bottomEnd",popoverClasses:"mt-5 more-actions-popover"},width:"150"},{default:e(()=>[o(b,{class:"non-visual-button",appearance:"secondary",size:"small"},{icon:e(()=>[o(g,{color:y(B),icon:"more",size:y(D)},null,8,["color","size"])]),_:1})]),items:e(()=>[o(h,{item:{to:{name:"service-detail-view",params:{service:t.name}},label:r("common.collection.actions.view")}},null,8,["item"])]),_:2},1024)]),_:2},1032,["empty-state-message","headers","page-number","page-size","total","items","error","onChange"]))]),_:2},1024)]),_:2},1024)]),_:2},1032,["src"])]),_:2},1032,["params"])):E("",!0)]),_:1})}}});const $=L(N,[["__scopeId","data-v-e26f2d86"]]);export{$ as default};
