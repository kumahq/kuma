import{d as j,p as l,o as c,w as e,b as n,r as p,c as g,e as o,L as I,M as x,N as w,q as z,O as h,T as L,t as d,n as O,K as E,y as q,l as F,m as G,A as K}from"./index-8QMKyk4n.js";const H=j({__name:"ZoneDetailView",props:{data:{}},setup(X){const i=X;return(M,a)=>{const C=p("XAction"),m=p("XI18n"),V=p("XNotification"),v=p("XBadge"),k=p("XIcon"),f=p("XLayout"),T=p("XAboutCard"),D=p("XDrawer"),A=p("RouterView"),R=p("XCard"),S=p("AppView"),B=p("DataSource"),N=p("RouteView");return c(),l(N,{name:"zone-cp-detail-view",params:{zone:"",subscription:""}},{default:e(({t:s,uri:$,route:y,me:u})=>[n(B,{src:$(G(K),"/control-plane/outdated/:version",{version:i.data.zoneInsight.version?.kumaCp?.version??"-"})},{default:e(({data:_})=>[n(S,{docs:s("zones.href.docs.cta"),notifications:!0},{default:e(()=>[(c(!0),g(w,null,I([{bool:i.data.zoneInsight.store==="memory",key:"store-memory"},{bool:!i.data.zoneInsight.version?.kumaCp?.kumaCpGlobalCompatible,key:"global-cp-incompatible",params:{zoneCpVersion:i.data.zoneInsight.version?.kumaCp?.version??"-",globalCpVersion:_?.version??""}},{bool:(i.data.zoneInsight.connectedSubscription?.status.total.responsesRejected??0)>0,key:"global-nack-response"}],({bool:t,key:r,params:b})=>(c(),l(V,{key:r,notify:t,"data-testid":`warning-${r}`,uri:`zone-cps.notifications.${r}.${i.data.id}`},{default:e(()=>[n(m,{path:`zone-cps.notifications.${r}`,params:Object.fromEntries(Object.entries(b??{}))},x({_:2},[r==="global-nack-response"?{name:"link",fn:e(()=>[n(C,{"data-action":"",to:{name:"zone-cp-subscription-summary-view",params:{subscription:i.data.zoneInsight.connectedSubscription?.id}}},{default:e(()=>[...a[0]||(a[0]=[o(`
                  zone control plane summary
                `,-1)])]),_:1},8,["to"])]),key:"0"}:void 0]),1032,["path","params"])]),_:2},1032,["notify","data-testid","uri"]))),128)),a[18]||(a[18]=o()),n(f,{"data-testid":"detail-view-details",type:"stack"},{default:e(()=>[n(T,{title:s("zone-cps.detail.about.title"),created:i.data.creationTime,modified:i.data.modificationTime},{default:e(()=>[n(h,{layout:"horizontal"},{title:e(()=>[o(d(s("http.api.property.status")),1)]),body:e(()=>[n(L,{status:i.data.state},null,8,["status"])]),_:2},1024),a[6]||(a[6]=o()),n(h,{layout:"horizontal",class:O({version:!0,outdated:_?.outdated})},{title:e(()=>[o(d(s("zone-cps.routes.item.version")),1)]),body:e(()=>[n(f,{type:"separated"},{default:e(()=>[n(v,{appearance:_?.outdated===!0?"warning":"decorative"},{default:e(()=>[o(d(i.data.zoneInsight.version?.kumaCp?.version??"—"),1)]),_:2},1032,["appearance"]),a[2]||(a[2]=o()),_?.outdated===!0?(c(),l(k,{key:0,name:"info"},{default:e(()=>[n(m,{path:"zone-cps.routes.item.version_warning"})]),_:1})):z("",!0)]),_:2},1024)]),_:2},1032,["class"]),a[7]||(a[7]=o()),n(h,{layout:"horizontal"},{title:e(()=>[o(d(s("http.api.property.type")),1)]),body:e(()=>[n(v,{appearance:"decorative"},{default:e(()=>[o(d(s(`common.product.environment.${i.data.zoneInsight.environment||"unknown"}`)),1)]),_:2},1024)]),_:2},1024),a[8]||(a[8]=o()),n(h,{layout:"horizontal"},{title:e(()=>[o(d(s("zone-cps.routes.item.authentication_type")),1)]),body:e(()=>[n(v,{appearance:"decorative"},{default:e(()=>[o(d(i.data.zoneInsight.authenticationType||s("common.not_applicable")),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["title","created","modified"]),a[17]||(a[17]=o()),i.data.zoneInsight.subscriptions.length>0?(c(),l(R,{key:0},{title:e(()=>[F("h2",null,d(s("zone-cps.detail.subscriptions.title")),1)]),default:e(()=>[a[15]||(a[15]=o()),n(f,null,{default:e(()=>[n(m,{path:"zone-cps.detail.subscriptions.description"}),a[14]||(a[14]=o()),n(E,{headers:[{...u.get("headers.connection"),label:" ",key:"connection"},{...u.get("headers.zoneInstanceId"),label:s("zone-cps.routes.items.headers.zoneInstanceId"),key:"zoneInstanceId"},{...u.get("headers.version"),label:s("zone-cps.routes.items.headers.version"),key:"version"},{...u.get("headers.connected"),label:s("zone-cps.routes.items.headers.connected"),key:"connected"},{...u.get("headers.disconnected"),label:s("zone-cps.routes.items.headers.disconnected"),key:"disconnected"},{...u.get("headers.responses"),label:s("zone-cps.routes.items.headers.responses"),key:"responses"}],"is-selected-row":t=>t.id===y.params.subscription,items:i.data.zoneInsight.subscriptions.map((t,r,b)=>b[b.length-(r+1)]),onResize:u.set},{connection:e(({row:t})=>[(c(!0),g(w,null,I([t.connectTime&&!t.disconnectTime?"healthy":"unhealthy"],r=>(c(),l(k,{key:`${r}`,name:r},{default:e(()=>[o(d(s(`common.connection.${r}`)),1)]),_:2},1032,["name"]))),128))]),zoneInstanceId:e(({row:t})=>[n(C,{"data-action":"",to:{name:"zone-cp-subscription-summary-view",params:{subscription:t.id}}},{default:e(()=>[o(d(t.zoneInstanceId),1)]),_:2},1032,["to"])]),version:e(({row:t})=>[o(d(t.version?.kumaCp?.version??"-"),1)]),connected:e(({row:t})=>[o(d(s("common.formats.datetime",{value:Date.parse(t.connectTime??"")})),1)]),disconnected:e(({row:t})=>[t.disconnectTime?(c(),g(w,{key:0},[o(d(s("common.formats.datetime",{value:Date.parse(t.disconnectTime)})),1)],64)):z("",!0)]),responses:e(({row:t})=>[(c(!0),g(w,null,I([t.status?.total??{}],r=>(c(),l(f,{key:typeof r,type:"separated"},{default:e(()=>[o(d(r.responsesSent)+"/"+d(r.responsesAcknowledged)+" ",1),!t.disconnectTime&&t.status.total.responsesRejected>0?(c(),l(k,{key:0,name:"warning","data-testid":"warning"},{default:e(()=>[n(m,{path:"zone-cps.routes.items.rows.nacked",params:{nacked:String(t.status.total.responsesRejected)}},null,8,["params"])]),_:2},1024)):z("",!0)]),_:2},1024))),128))]),_:2},1032,["headers","is-selected-row","items","onResize"])]),_:2},1024),a[16]||(a[16]=o()),n(A,null,{default:e(({Component:t})=>[y.child()?(c(),l(D,{key:0,width:"670px",onClose:function(){y.replace({name:"zone-cp-detail-view",params:{zone:y.params.zone}})}},{default:e(()=>[(c(),l(q(t),{data:i.data.zoneInsight.subscriptions},{default:e(()=>[n(m,{path:"zone-cps.routes.item.subscription_intro"})]),_:1},8,["data"]))]),_:2},1032,["onClose"])):z("",!0)]),_:2},1024)]),_:2},1024)):z("",!0)]),_:2},1024)]),_:2},1032,["docs"])]),_:2},1032,["src"])]),_:1})}}});export{H as default};
