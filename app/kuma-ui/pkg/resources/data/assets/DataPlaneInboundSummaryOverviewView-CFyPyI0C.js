import{d as b,r as l,x as j,p as d,o,w as n,b as a,c as p,e as r,q as X,L as i,M as k,l as e,t as g,m as v,F as V,a8 as _,Y as q,z as E}from"./index-BkRXKYLT.js";import{A as G,a as H}from"./AccordionList-D55xHr5L.js";import{T as J}from"./TagList-B2WjM8ZG.js";const Q={key:0},U={key:1},W={colspan:"2"},ot=b({__name:"DataPlaneInboundSummaryOverviewView",props:{data:{},dataPlaneOverview:{},routeName:{}},setup(S){const m=S;return(Z,t)=>{const D=l("XBadge"),x=l("XCopyButton"),c=l("XTable"),$=l("XAction"),z=l("XCodeBlock"),w=l("XLayout"),O=l("XCard"),T=l("DataLoader"),A=l("DataSource"),F=l("AppView"),I=l("RouteView"),K=j("icon-start");return o(),d(I,{params:{mesh:"",proxy:"",connection:""},name:m.routeName},{default:n(({t:M,route:B,uri:C})=>[a(F,null,{default:n(()=>[a(w,{type:"stack"},{default:n(()=>[(o(!0),p(i,null,k([m.dataPlaneOverview.dataplane.networking.inbounds.find(s=>s.port===m.data.port)],s=>(o(),p(i,{key:typeof s},[s?(o(),d(c,{key:0,variant:"kv"},{default:n(()=>[e("tr",null,[t[0]||(t[0]=e("th",{scope:"row"},`
                Tags
              `,-1)),t[1]||(t[1]=r()),e("td",null,[a(J,{tags:s.tags,alignment:"right"},null,8,["tags"])])]),t[10]||(t[10]=r()),e("tr",null,[t[2]||(t[2]=e("th",{scope:"row"},`
                Protocol
              `,-1)),t[3]||(t[3]=r()),e("td",null,[a(D,{appearance:"info"},{default:n(()=>[r(g(M(`http.api.value.${s.protocol}`)),1)]),_:2},1024)])]),t[11]||(t[11]=r()),e("tr",null,[t[4]||(t[4]=e("th",{scope:"row"},`
                Address
              `,-1)),t[5]||(t[5]=r()),e("td",null,[a(x,{text:`${s.addressPort}`},null,8,["text"])])]),t[12]||(t[12]=r()),s.serviceAddressPort.length>0?(o(),p("tr",Q,[t[6]||(t[6]=e("th",{scope:"row"},`
                Service address
              `,-1)),t[7]||(t[7]=r()),e("td",null,[a(x,{text:`${s.serviceAddressPort}`},null,8,["text"])])])):X("",!0),t[13]||(t[13]=r()),s.portName.length>0?(o(),p("tr",U,[t[8]||(t[8]=e("th",{scope:"row"},`
                Name
              `,-1)),t[9]||(t[9]=r()),e("td",null,[a(x,{text:`${s.portName}`},null,8,["text"])])])):X("",!0)]),_:2},1024)):X("",!0)],64))),128)),t[22]||(t[22]=r()),m.data?(o(),d(w,{key:0,type:"stack",size:"small"},{default:n(()=>[t[20]||(t[20]=e("h3",null,"Policies",-1)),t[21]||(t[21]=r()),a(A,{src:C(v(V),"/policy-types",{})},{default:n(({data:s,error:R})=>[a(A,{src:C(v(V),"/meshes/:mesh/dataplanes/:name/policies/for/inbound/:kri",{mesh:B.params.mesh,name:B.params.proxy,kri:m.data.kri})},{default:n(({data:P,error:Y})=>[a(T,{data:[s,P],errors:[R,Y]},{default:n(()=>[(o(!0),p(i,null,k([Object.groupBy(s?.policyTypes??[],({name:f})=>f)],f=>(o(),d(G,{key:`${typeof f}`,"initially-open":0,"multiple-open":"",class:"stack","data-testid":"inbound-policies-rules"},{default:n(()=>[(o(!0),p(i,null,k(P?.policies||[],({rules:L,kind:y})=>(o(),d(O,{key:y},{default:n(()=>[a(H,null,{"accordion-header":n(()=>[E((o(),p("span",null,[r(g(y)+" ("+g(L.length)+`)
                            `,1)])),[[K,{name:y,size:"60",default:"policy"}]])]),"accordion-content":n(()=>[a(w,{variant:"y-stack"},{default:n(()=>[(o(!0),p(i,null,k(L,u=>(o(),d(c,{key:u.kri,variant:"kv"},{default:n(()=>[e("tr",null,[t[14]||(t[14]=e("th",{scope:"row"},`
                                    Policy origin
                                  `,-1)),t[15]||(t[15]=r()),e("td",null,[(o(!0),p(i,null,k([v(_).fromString(u.kri)],N=>(o(),p(i,{key:typeof N},[f[y]&&v(_).isKriString(u.kri)?(o(),d($,{key:0,to:{name:"policy-detail-view",params:{mesh:N.mesh,policyPath:f[y][0].path,policy:u.kri}}},{default:n(()=>[r(g(u.kri),1)]),_:2},1032,["to"])):(o(),p(i,{key:1},[r(g(u.kri),1)],64))],64))),128))])]),t[18]||(t[18]=r()),e("tr",null,[e("td",W,[a(w,{type:"stack",size:"small"},{default:n(()=>[t[16]||(t[16]=e("span",null,"Config",-1)),t[17]||(t[17]=r()),a(z,{code:v(q).stringify(u.conf),language:"yaml","show-copy-button":!1},null,8,["code"])]),_:2},1024)])])]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024))),128))]),_:2},1032,["data","errors"])]),_:2},1032,["src"])]),_:2},1032,["src"])]),_:2},1024)):X("",!0)]),_:2},1024)]),_:2},1024)]),_:1},8,["name"])}}});export{ot as default};
