import{d as w,l as V,m as b,a as p,o as a,c as n,e as t,q as v,f as m,w as o,b as c,F as E,I as F,t as P,aq as S,u as B,p as C}from"./index-19354c6c.js";import{_ as q}from"./EmptyBlock.vue_vue_type_script_setup_true_lang-ac8206e3.js";import{E as $}from"./ErrorBlock-f71f64d1.js";import{_ as R}from"./LoadingBlock.vue_vue_type_script_setup_true_lang-3651c4e8.js";import{_ as I}from"./ResourceCodeBlock.vue_vue_type_style_index_0_lang-1c6a19ef.js";import{T as K}from"./TextWithCopyButton-1c7354cf.js";import"./index-fce48c05.js";import"./WarningIcon.vue_vue_type_script_setup_true_lang-706de663.js";import"./CodeBlock.vue_vue_type_style_index_0_lang-a4faa3a1.js";import"./CopyButton-2ee425f1.js";import"./toYaml-4e00099e.js";const L={key:3,"data-testid":"affected-data-plane-proxies"},N=w({__name:"PolicyConnections",props:{mesh:{},policyPath:{},policyName:{}},setup(g){const{t:_}=V(),r=g,d=b("");return(x,h)=>{const y=p("KInput"),f=p("RouterLink");return a(),n("div",null,[t(y,{id:"dataplane-search",modelValue:d.value,"onUpdate:modelValue":h[0]||(h[0]=i=>d.value=i),type:"text",placeholder:v(_)("policies.detail.dataplane_input_placeholder"),required:"","data-testid":"dataplane-search-input"},null,8,["modelValue","placeholder"]),m(),t(S,{src:`/meshes/${r.mesh}/policy-path/${r.policyPath}/policy/${r.policyName}/dataplanes`},{default:o(({data:i,error:e})=>[e?(a(),c($,{key:0,error:e},null,8,["error"])):i===void 0?(a(),c(R,{key:1})):i.items.length===0?(a(),c(q,{key:2})):(a(),n("ul",L,[(a(!0),n(E,null,F(i.items.filter(s=>s.name.toLowerCase().includes(d.value.toLowerCase())),(s,u)=>(a(),n("li",{key:u,"data-testid":"dataplane-name"},[t(f,{to:{name:"data-plane-detail-view",params:{mesh:s.mesh,dataPlane:s.name}}},{default:o(()=>[m(P(s.name),1)]),_:2},1032,["to"])]))),128))]))]),_:1},8,["src"])])}}}),T={key:2,class:"stack","data-testid":"detail-view-details"},O=w({__name:"PolicyDetailView",setup(g){const _=B();return(r,d)=>{const x=p("RouteTitle"),h=p("KCard"),y=p("DataSource"),f=p("AppView"),i=p("RouteView");return a(),c(i,{name:"policy-detail-view",params:{mesh:"",policy:"",policyPath:"",codeSearch:"",codeFilter:!1,codeRegExp:!1}},{default:o(({route:e,t:s})=>[t(f,{breadcrumbs:[{to:{name:"mesh-detail-view",params:{mesh:e.params.mesh}},text:e.params.mesh},{to:{name:"policy-list-view",params:{mesh:e.params.mesh,policyPath:e.params.policyPath}},text:s("policies.routes.item.breadcrumbs")}]},{title:o(()=>[C("h1",null,[t(K,{text:e.params.policy},{default:o(()=>[t(x,{title:s("policies.routes.item.title",{name:e.params.policy})},null,8,["title"])]),_:2},1032,["text"])])]),default:o(()=>[m(),t(y,{src:`/meshes/${e.params.mesh}/policy-path/${e.params.policyPath}/policy/${e.params.policy}`},{default:o(({data:u,error:k})=>[k?(a(),c($,{key:0,error:k},null,8,["error"])):u===void 0?(a(),c(R,{key:1})):(a(),n("div",T,[t(h,null,{default:o(()=>[C("h2",null,P(s("policies.detail.affected_dpps")),1),m(),t(N,{class:"mt-4",mesh:e.params.mesh,"policy-name":e.params.policy,"policy-path":e.params.policyPath},null,8,["mesh","policy-name","policy-path"])]),_:2},1024),m(),t(I,{id:"code-block-policy",resource:u.config,"resource-fetcher":l=>v(_).getSinglePolicyEntity({name:e.params.policy,mesh:e.params.mesh,path:e.params.policyPath},l),"is-searchable":"",query:e.params.codeSearch,"is-filter-mode":e.params.codeFilter==="true","is-reg-exp-mode":e.params.codeRegExp==="true",onQueryChange:l=>e.update({codeSearch:l}),onFilterModeChange:l=>e.update({codeFilter:l}),onRegExpModeChange:l=>e.update({codeRegExp:l})},null,8,["resource","resource-fetcher","query","is-filter-mode","is-reg-exp-mode","onQueryChange","onFilterModeChange","onRegExpModeChange"])]))]),_:2},1032,["src"])]),_:2},1032,["breadcrumbs"])]),_:1})}}});export{O as default};
