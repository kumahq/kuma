import{d as B,e as r,o as l,k as d,w as e,a as n,i as u,b as a,P as m,t as c,l as _,c as x,F as C,G as z}from"./index-CUmbT3FY.js";import{_ as T}from"./ResourceCodeBlock.vue_vue_type_script_setup_true_lang-C9nDNYfa.js";const A={class:"stack"},M={class:"stack-with-borders"},N={class:"mt-4"},Q=B({__name:"MeshServiceSummaryView",props:{items:{}},setup(b){const k=b;return($,K)=>{const w=r("RouteTitle"),h=r("XAction"),g=r("XBadge"),S=r("KumaPort"),y=r("KTruncate"),P=r("DataSource"),R=r("AppView"),V=r("DataCollection"),E=r("RouteView");return l(),d(E,{name:"mesh-service-summary-view",params:{mesh:"",service:"",codeSearch:"",codeFilter:!1,codeRegExp:!1}},{default:e(({route:s,t:f,can:D})=>[n(V,{items:k.items,predicate:o=>o.id===s.params.service},{item:e(({item:o})=>[n(R,null,{title:e(()=>[u("h2",null,[n(h,{to:{name:"mesh-service-detail-view",params:{mesh:s.params.mesh,service:s.params.service}}},{default:e(()=>[n(w,{title:f("services.routes.item.title",{name:o.name})},null,8,["title"])]),_:2},1032,["to"])])]),default:e(()=>[a(),u("div",A,[u("div",M,[n(m,{layout:"horizontal"},{title:e(()=>[a(`
                  State
                `)]),body:e(()=>[n(g,{appearance:o.spec.state==="Available"?"success":"danger"},{default:e(()=>[a(c(o.spec.state),1)]),_:2},1032,["appearance"])]),_:2},1024),a(),n(m,{layout:"horizontal"},{title:e(()=>[a(`
                  Dataplane Proxies
                `)]),body:e(()=>{var t,i,p;return[a(c((t=o.status.dataplaneProxies)==null?void 0:t.connected)+" connected, "+c((i=o.status.dataplaneProxies)==null?void 0:i.healthy)+" healthy ("+c((p=o.status.dataplaneProxies)==null?void 0:p.total)+` total)
                `,1)]}),_:2},1024),a(),o.namespace?(l(),d(m,{key:0,layout:"horizontal"},{title:e(()=>[a(`
                  Namespace
                `)]),body:e(()=>[a(c(o.namespace),1)]),_:2},1024)):_("",!0),a(),D("use zones")&&o.zone?(l(),d(m,{key:1,layout:"horizontal"},{title:e(()=>[a(`
                  Zone
                `)]),body:e(()=>[n(h,{to:{name:"zone-cp-detail-view",params:{zone:o.zone}}},{default:e(()=>[a(c(o.zone),1)]),_:2},1032,["to"])]),_:2},1024)):_("",!0),a(),n(m,{layout:"horizontal"},{title:e(()=>[a(`
                  Ports
                `)]),body:e(()=>[n(y,null,{default:e(()=>[(l(!0),x(C,null,z(o.spec.ports,t=>(l(),d(S,{key:t.port,port:{...t,targetPort:void 0}},null,8,["port"]))),128))]),_:2},1024)]),_:2},1024),a(),n(m,{layout:"horizontal"},{title:e(()=>[a(`
                  Selector
                `)]),body:e(()=>[n(y,null,{default:e(()=>[(l(!0),x(C,null,z(o.spec.selector.dataplaneTags,(t,i)=>(l(),d(g,{key:`${i}:${t}`,appearance:"info"},{default:e(()=>[a(c(i)+":"+c(t),1)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)]),a(),u("div",null,[u("h3",null,c(f("services.routes.item.config")),1),a(),u("div",N,[n(T,{resource:o.config,"is-searchable":"",query:s.params.codeSearch,"is-filter-mode":s.params.codeFilter,"is-reg-exp-mode":s.params.codeRegExp,onQueryChange:t=>s.update({codeSearch:t}),onFilterModeChange:t=>s.update({codeFilter:t}),onRegExpModeChange:t=>s.update({codeRegExp:t})},{default:e(({copy:t,copying:i})=>[i?(l(),d(P,{key:0,src:`/meshes/${s.params.mesh}/mesh-service/${s.params.service}/as/kubernetes?no-store`,onChange:p=>{t(v=>v(p))},onError:p=>{t((v,F)=>F(p))}},null,8,["src","onChange","onError"])):_("",!0)]),_:2},1032,["resource","query","is-filter-mode","is-reg-exp-mode","onQueryChange","onFilterModeChange","onRegExpModeChange"])])])])]),_:2},1024)]),_:2},1032,["items","predicate"])]),_:1})}}});export{Q as default};
