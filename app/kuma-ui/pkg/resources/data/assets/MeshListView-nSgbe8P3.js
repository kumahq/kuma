import{d as S,P as x,r as a,p,o as d,w as e,b as t,m as h,H as B,e as l,q as f,l as u,I as M,K as N,t as c,_ as I}from"./index-BI7Ox0LO.js";const G=S({__name:"MeshListView",setup(q){const _=x();return(H,o)=>{const w=a("RouteTitle"),v=a("XI18n"),y=a("XTeleportTemplate"),C=a("XSearch"),g=a("XAction"),X=a("DataCollection"),V=a("DataLoader"),b=a("XLayout"),k=a("XCard"),T=a("AppView"),z=a("DataSource"),A=a("RouteView");return d(),p(A,{name:"mesh-list-view",params:{page:1,size:Number,mesh:"",s:""}},{default:e(({route:n,t:r,me:m,uri:D})=>[t(z,{src:D(h(B),"/mesh-insights",{},{page:n.params.page,size:n.params.size,search:n.params.s})},{default:e(({data:i,error:L,refresh:R})=>[t(T,{docs:i?.items.length?r("meshes.href.docs"):""},{title:e(()=>[u("h1",null,[t(w,{title:r("meshes.routes.items.title")},null,8,["title"])])]),default:e(()=>[o[5]||(o[5]=l()),i?.items.length?(d(),p(v,{key:0,path:"meshes.routes.items.intro","default-path":"common.i18n.ignore-error"})):f("",!0),o[6]||(o[6]=l()),(i?.items??[]).length>0?(d(),p(y,{key:1,to:{name:"mesh-list-view-actions"}},{default:e(()=>[t(h(_))]),_:1})):f("",!0),o[7]||(o[7]=l()),t(k,null,{default:e(()=>[t(b,null,{default:e(()=>[u("search",null,[u("form",{onSubmit:o[0]||(o[0]=M(()=>{},["prevent"]))},[t(C,{class:"search-field",keys:["name"],value:n.params.s,onChange:s=>n.update({page:1,s})},null,8,["value","onChange"])],32)]),o[4]||(o[4]=l()),t(V,{data:[i],errors:[L],variant:"list"},{default:e(()=>[t(X,{type:"meshes",items:i?.items??[void 0],page:n.params.page,"page-size":n.params.size,total:i?.total,onChange:n.update},{default:e(()=>[t(N,{class:"mesh-collection","data-testid":"mesh-collection",headers:[{...m.get("headers.name"),label:r("meshes.common.name"),key:"name"},{...m.get("headers.services"),label:r("meshes.routes.items.collection.services"),key:"services"},{...m.get("headers.dataplanes"),label:r("meshes.routes.items.collection.dataplanes"),key:"dataplanes"},{...m.get("headers.actions"),label:"Actions",key:"actions",hideLabel:!0}],items:i?.items,"is-selected-row":s=>s.name===n.params.mesh,onResize:m.set},{name:e(({row:s})=>[t(g,{"data-action":"",to:{name:"mesh-detail-view",params:{mesh:s.name}}},{default:e(()=>[l(c(s.name),1)]),_:2},1032,["to"])]),services:e(({row:s})=>[l(c(s.services.internal),1)]),dataplanes:e(({row:s})=>[l(c(s.dataplanesByType.standard.online)+" / "+c(s.dataplanesByType.standard.total),1)]),actions:e(({row:s})=>[t(h(_),{item:s,onChange:R},{default:e(()=>[t(g,{to:{name:"mesh-detail-view",params:{mesh:s.name}}},{default:e(()=>[l(c(r("common.collection.actions.view")),1)]),_:2},1032,["to"])]),_:2},1032,["item","onChange"])]),_:2},1032,["headers","items","is-selected-row","onResize"])]),_:2},1032,["items","page","page-size","total","onChange"])]),_:2},1032,["data","errors"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["docs"])]),_:2},1032,["src"])]),_:1})}}}),P=I(G,[["__scopeId","data-v-b8a4e7d4"]]);export{P as default};
