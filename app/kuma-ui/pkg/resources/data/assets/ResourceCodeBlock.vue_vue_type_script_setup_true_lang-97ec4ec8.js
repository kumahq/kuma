import{_ as g}from"./CodeBlock.vue_vue_type_style_index_0_lang-6e8e9dc8.js";import{C as b}from"./TextWithCopyButton-8657e9ac.js";import{_ as x}from"./StatusInfo.vue_vue_type_script_setup_true_lang-7ee762b4.js";import{k as _}from"./RouteView.vue_vue_type_script_setup_true_lang-ba73e96f.js";import{t as v}from"./toYaml-4e00099e.js";import{d as k,s as n,w as m,o as q,a as B,b as c,i as d,m as S,e as h,h as C,t as F}from"./index-a5529162.js";const Y=k({__name:"ResourceCodeBlock",props:{id:{type:String,required:!0},resourceFetcher:{type:Function,required:!0},resourceFetcherWatchKey:{type:[String,Number],required:!1,default:null},codeMaxHeight:{type:String,required:!1,default:null},isSearchable:{type:Boolean,required:!1,default:!1},showCopyAsKubernetesButton:{type:Boolean,required:!1,default:!0}},setup(r){const t=r,i=_(),u=n(""),o=n(!1),a=n(null);m(()=>t.resourceFetcherWatchKey,function(e,s){e!==s&&e!==null&&l()}),m(()=>t.resourceFetcher,function(){l()},{immediate:!0});async function l(){o.value=!0,a.value=null;try{const e=await t.resourceFetcher();u.value=f(e)}catch(e){e instanceof Error?a.value=e:console.error(e)}finally{o.value=!1}}async function y(){const e=await t.resourceFetcher({format:"kubernetes"});return f(e)}function f(e){const{creationTime:s,modificationTime:K,...p}=e;return v(p)}return(e,s)=>(q(),B(x,{"is-loading":o.value,error:a.value},{default:c(()=>[d(g,{id:r.id,language:"yaml",code:u.value,"is-searchable":t.isSearchable,"query-key":t.id,"code-max-height":t.codeMaxHeight},S({_:2},[r.showCopyAsKubernetesButton?{name:"secondary-actions",fn:c(()=>[d(b,{"get-text":y,"copy-text":h(i).t("common.copyKubernetesText")},{default:c(()=>[C(F(h(i).t("common.copyKubernetesShortText")),1)]),_:1},8,["copy-text"])]),key:"0"}:void 0]),1032,["id","code","is-searchable","query-key","code-max-height"])]),_:1},8,["is-loading","error"]))}});export{Y as _};
