import{d as F,v as J,r as n,p as x,o as p,w as a,b as t,N as k,e as o,M as B,t as f,y as G,q as V,l as _,I as H,c as b,L as N,m as K,$ as Q,_ as W}from"./index-CJOY8Jaq.js";const Y=["onSubmit"],Z=["disabled"],ee={key:0},ae={key:0},te=F({__name:"DataPlaneDetailTabsView",props:{data:{},mesh:{}},setup(C){const s=C,l=J({eds:!1,xds:!0,clusters:!0,stats:!0,proxy:!0,policies:!0});return(ne,e)=>{const S=n("RouteTitle"),$=n("XCopyButton"),A=n("XBadge"),h=n("XLayout"),w=n("XI18n"),L=n("XNotification"),X=n("XAction"),g=n("XCheckbox"),R=n("XAlert"),I=n("DataLoader"),M=n("XDownload"),E=n("XModal"),D=n("XDisclosure"),U=n("XTeleportTemplate"),O=n("XTabs"),P=n("RouterView"),j=n("AppView"),q=n("RouteView");return p(),x(q,{name:"data-plane-detail-tabs-view",params:{mesh:"",proxy:""}},{default:a(({route:i,t:d,uri:z})=>[t(j,{breadcrumbs:[{to:{name:"mesh-detail-view",params:{mesh:i.params.mesh}},text:i.params.mesh},{to:{name:"data-plane-list-view",params:{mesh:i.params.mesh}},text:d("data-planes.routes.item.breadcrumbs")}]},k({actions:a(()=>[t(D,null,{default:a(({expanded:r,toggle:v})=>[t(X,{appearance:"primary",onClick:v},{default:a(()=>[...e[3]||(e[3]=[o(`
            Download bundle
          `,-1)])]),_:1},8,["onClick"]),e[8]||(e[8]=o()),r?(p(),x(U,{key:0,to:{name:"modal-layer"}},{default:a(()=>[t(D,null,{default:a(({expanded:y,toggle:T})=>[_("form",{onSubmit:H(T,["prevent"])},[t(E,{title:d("data-planes.routes.item.download.title"),onCancel:v},{"footer-actions":a(()=>[t(h,{type:"separated"},{default:a(()=>[t(M,{onStart:v},{default:a(({download:m})=>[t(I,{variant:"spinner",src:y?z(K(Q),"/meshes/:mesh/dataplanes/:name/as/tarball/:spec",{mesh:i.params.mesh,name:i.params.proxy,spec:JSON.stringify(l.value)},{cacheControl:"no-cache"}):"",onChange:m,onError:T},{error:a(()=>[t(R,{appearance:"warning","show-icon":""},{default:a(()=>[t(w,{t:"data-planes.routes.item.download.error"})]),_:1})]),_:1},8,["src","onChange","onError"])]),_:2},1032,["onStart"]),e[6]||(e[6]=o()),t(X,{appearance:"primary",type:"submit",disabled:y||Object.values(l.value).every(m=>!m)},{default:a(()=>[o(f(d("data-planes.routes.item.download.action")),1)]),_:2},1032,["disabled"])]),_:2},1024)]),default:a(()=>[_("fieldset",{disabled:y},[t(w,{path:"data-planes.routes.item.download.description"}),e[5]||(e[5]=o()),_("ul",null,[(p(!0),b(N,null,B(l.value,(m,u)=>(p(),b(N,{key:typeof m},[u!=="eds"?(p(),b("li",ee,[t(g,{modelValue:l.value[u],"onUpdate:modelValue":c=>l.value[u]=c,onChange:c=>{u==="xds"&&!c&&(l.value.eds=!1)}},{default:a(()=>[o(f(d(`data-planes.routes.item.download.options.${u}`)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"]),e[4]||(e[4]=o()),u==="xds"?(p(),b("ul",ae,[_("li",null,[t(g,{modelValue:l.value.eds,"onUpdate:modelValue":e[0]||(e[0]=c=>l.value.eds=c),disabled:!l.value.xds},{default:a(()=>[o(f(d("data-planes.routes.item.download.options.eds")),1)]),_:2},1032,["modelValue","disabled"])])])):V("",!0)])):V("",!0)],64))),128))])],8,Z),e[7]||(e[7]=o())]),_:2},1032,["title","onCancel"])],40,Y)]),_:2},1024)]),_:2},1024)):V("",!0)]),_:2},1024)]),default:a(()=>[e[9]||(e[9]=o()),e[10]||(e[10]=o()),t(O,{selected:i.child()?.name},k({_:2},[B(i.children,({name:r})=>({name:`${r}-tab`,fn:a(()=>[t(X,{to:{name:r}},{default:a(()=>[o(f(d(`data-planes.routes.item.navigation.${r}`)),1)]),_:2},1032,["to"])])}))]),1032,["selected"]),e[11]||(e[11]=o()),t(P,null,{default:a(({Component:r})=>[(p(),x(G(r),{data:s.data,networking:s.data.dataplane.networking,mesh:s.mesh,subscriptions:s.data.dataplaneInsight.subscriptions},null,8,["data","networking","mesh","subscriptions"]))]),_:1})]),_:2},[C.data?{name:"title",fn:a(()=>[t(h,{size:"small"},{default:a(()=>[_("h1",null,[t($,{text:s.data.name},{default:a(()=>[t(S,{title:d("data-planes.routes.item.title",{name:s.data.name})},null,8,["title"])]),_:2},1032,["text"])]),e[1]||(e[1]=o()),t(A,{appearance:d(`common.status.appearance.${s.data.status}`,void 0,{defaultMessage:"neutral"})},{default:a(()=>[o(f(d(`http.api.value.${s.data.status}`)),1)]),_:2},1032,["appearance"])]),_:2},1024),e[2]||(e[2]=o()),t(L,{notify:s.data.status==="offline","data-testid":"warning-dataplane-offline",uri:`data-planes.notifications.dataplane-offline.${s.data.id}`},{default:a(()=>[t(w,{path:"data-planes.notifications.dataplane-offline"})]),_:1},8,["notify","uri"])]),key:"0"}:void 0]),1032,["breadcrumbs"])]),_:1})}}}),se=W(te,[["__scopeId","data-v-181b238c"]]);export{se as default};
