import{d as _,q as A,r as t,f as h,k as D,o as x,c as P}from"./index.e014f0d3.js";import{p as G}from"./patchQueryParam.ab52bc5a.js";import{D as E}from"./DataPlaneList.4a3608ab.js";import"./EmptyBlock.vue_vue_type_script_setup_true_lang.fd846880.js";import"./ErrorBlock.7519bcde.js";import"./LoadingBlock.vue_vue_type_script_setup_true_lang.7375bfec.js";import"./StatusBadge.78da3de2.js";import"./TagList.fa890f23.js";import"./ContentWrapper.e9eeaf9d.js";import"./YamlView.vue_vue_type_script_setup_true_lang.534560f7.js";import"./index.58caa11d.js";import"./CodeBlock.vue_vue_type_style_index_0_lang.e945f8ce.js";import"./_commonjsHelpers.f037b798.js";const I=_({__name:"DataPlaneListView",props:{name:{type:String,required:!1,default:null},offset:{type:Number,required:!1,default:0},isGatewayView:{type:Boolean,required:!1,default:!1}},setup(c){const l=c,w=50,d={All:!0,Builtin:"builtin",Delegated:"delegated"},r=A(),s=t([]),u=t(!0),m=t(null),n=t(null),v=t(l.offset);h(()=>r.params.mesh,function(){r.name!=="data-plane-list-view"&&r.name!=="gateway-list-view"||o(0)}),o(l.offset);async function o(e,i="All"){v.value=e,G("offset",e>0?e:null),u.value=!0;const p=r.params.mesh,y=w;try{const a=l.isGatewayView?d[i]:!1,{items:f,next:g}=await D.getAllDataplaneOverviewsFromMesh({mesh:p},{size:y,offset:e,gateway:a});Array.isArray(f)&&f.length>0?(s.value=f,n.value=g):(s.value=[],n.value=null)}catch(a){a instanceof Error?m.value=a:console.error(a),s.value=[],n.value=null}finally{u.value=!1}}return(e,i)=>(x(),P(E,{"data-plane-overviews":s.value,"is-loading":u.value,error:m.value,"next-url":n.value,"page-offset":v.value,"is-gateway-view":l.isGatewayView,onGatewayTypeChange:i[0]||(i[0]=p=>o(0,p)),onLoadData:o},null,8,["data-plane-overviews","is-loading","error","next-url","page-offset","is-gateway-view"]))}});export{I as default};
