import{d as x,L as R,M as V,f as _,aa as B,o,j as h,g as d,k,l as a,h as l,w as t,m as p,ab as u,D as n,i as e,X as S,ac as L,H as z,K,F as N,a2 as w,ad as $,q as j,A as F,_ as U}from"./index-dd2240de.js";import{_ as Z}from"./SubscriptionList.vue_vue_type_script_setup_true_lang-1625c634.js";import{T as A}from"./TagList-87986658.js";import{_ as q}from"./WarningsWidget.vue_vue_type_script_setup_true_lang-a332d87b.js";import{a as G,d as P,b as W,p as H,c as J,C as X,I as Q,e as Y}from"./dataplane-30467516.js";import"./AccordionList-9b2440b0.js";const aa={class:"stack"},ea={class:"columns",style:{"--columns":"3"}},ta={class:"status-with-reason"},sa=["href"],na={class:"columns",style:{"--columns":"3"}},la={key:1},ia=x({__name:"DataPlaneDetails",props:{dataplaneOverview:{type:Object,required:!0}},setup(y){const i=y,{t:s,formatIsoDate:D}=R(),E=V(),b=_(()=>G(i.dataplaneOverview.dataplane,i.dataplaneOverview.dataplaneInsight)),O=_(()=>P(i.dataplaneOverview.dataplane)),C=_(()=>W(i.dataplaneOverview.dataplaneInsight)),m=_(()=>H(i.dataplaneOverview,D)),I=_(()=>{var T;const v=((T=i.dataplaneOverview.dataplaneInsight)==null?void 0:T.subscriptions)??[];if(v.length===0)return[];const g=v[v.length-1];if(!("version"in g)||!g.version)return[];const c=[],r=g.version;if(r.kumaDp&&r.envoy){const f=J(r);f.kind!==X&&f.kind!==Q&&c.push(f)}return E("use zones")&&P(i.dataplaneOverview.dataplane).find(M=>M.label===B)&&typeof r.kumaDp.kumaCpCompatible=="boolean"&&!r.kumaDp.kumaCpCompatible&&c.push({kind:Y,payload:{kumaDp:r.kumaDp.version}}),c});return(v,g)=>{var c;return o(),h("div",aa,[I.value.length>0?(o(),d(q,{key:0,warnings:I.value,"data-testid":"data-plane-warnings"},null,8,["warnings"])):k("",!0),a(),l(e(w),null,{body:t(()=>[p("div",ea,[l(u,null,{title:t(()=>[a(n(e(s)("http.api.property.status")),1)]),body:t(()=>[p("div",ta,[l(S,{status:b.value.status},null,8,["status"]),a(),b.value.reason.length>0?(o(),d(e(L),{key:0,label:b.value.reason.join(", "),class:"reason-tooltip"},{default:t(()=>[l(e(z),{icon:"info",size:e(K),"hide-title":""},null,8,["size"])]),_:1},8,["label"])):k("",!0)])]),_:1}),a(),l(u,null,{title:t(()=>[a(n(e(s)("http.api.property.tags")),1)]),body:t(()=>[O.value.length>0?(o(),d(A,{key:0,tags:O.value},null,8,["tags"])):(o(),h(N,{key:1},[a(n(e(s)("common.detail.none")),1)],64))]),_:1}),a(),l(u,null,{title:t(()=>[a(n(e(s)("http.api.property.dependencies")),1)]),body:t(()=>[C.value!==null?(o(),d(A,{key:0,tags:C.value},null,8,["tags"])):(o(),h(N,{key:1},[a(n(e(s)("common.detail.none")),1)],64))]),_:1})])]),_:1}),a(),p("div",null,[p("h2",null,n(e(s)("data-planes.detail.mtls")),1),a(),m.value===null?(o(),d(e($),{key:0,class:"mt-4",appearance:"warning"},{alertMessage:t(()=>[a(n(e(s)("data-planes.detail.no_mtls"))+` â€”
          `,1),p("a",{href:e(s)("data-planes.href.docs.mutual-tls"),class:"external-link",target:"_blank"},n(e(s)("data-planes.detail.no_mtls_learn_more",{product:e(s)("common.product.name")})),9,sa)]),_:1})):(o(),d(e(w),{key:1,class:"mt-4"},{body:t(()=>[p("div",na,[l(u,null,{title:t(()=>[a(n(e(s)("http.api.property.certificateExpirationTime")),1)]),body:t(()=>[a(n(m.value.certificateExpirationTime),1)]),_:1}),a(),l(u,null,{title:t(()=>[a(n(e(s)("http.api.property.lastCertificateRegeneration")),1)]),body:t(()=>[a(n(m.value.lastCertificateRegeneration),1)]),_:1}),a(),l(u,null,{title:t(()=>[a(n(e(s)("http.api.property.certificateRegenerations")),1)]),body:t(()=>[a(n(m.value.certificateRegenerations),1)]),_:1})])]),_:1}))]),a(),(((c=i.dataplaneOverview.dataplaneInsight)==null?void 0:c.subscriptions)??[]).length>0?(o(),h("div",la,[p("h2",null,n(e(s)("data-planes.detail.subscriptions")),1),a(),l(e(w),{class:"mt-4"},{body:t(()=>{var r;return[l(Z,{subscriptions:((r=i.dataplaneOverview.dataplaneInsight)==null?void 0:r.subscriptions)??[]},null,8,["subscriptions"])]}),_:1})])):k("",!0)])}}});const oa=j(ia,[["__scopeId","data-v-e0adad19"]]),va=x({__name:"DataPlaneDetailView",props:{data:{}},setup(y){const i=y;return(s,D)=>(o(),d(U,{name:"data-plane-detail-view","data-testid":"data-plane-detail-view"},{default:t(()=>[l(F,null,{default:t(()=>[l(oa,{"dataplane-overview":i.data,"data-testid":"detail-view-details"},null,8,["dataplane-overview"])]),_:1})]),_:1}))}});export{va as default};
