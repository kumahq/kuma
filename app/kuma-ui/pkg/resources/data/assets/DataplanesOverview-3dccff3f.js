import{t as A}from"./kongponents.es-8a0bef3e.js";import{e as B}from"./production-e492eaa8.js";import{L as S}from"./LoadingBox-d2ae0f7a.js";import{S as T}from"./StatusBadge-90038e37.js";import{O as F,a as N,b as E}from"./OnboardingPage-d1a88343.js";import{u as I}from"./index-26866c00.js";import{d as L,r as b,c as w,P as C,a as y,w as t,o as s,e as n,a4 as H,u as o,g as l,t as u,h as d,f as x,F as M}from"./runtime-dom.esm-bundler-60661421.js";import{_ as R}from"./_plugin-vue_export-helper-c27b6911.js";import"./store-2f0e7180.js";const V={key:0,class:"status-loading-box mb-4"},z={key:1},K={class:"mb-4"},U=L({__name:"DataplanesOverview",setup(W){const m=I(),k=[{label:"Mesh",key:"mesh"},{label:"Name",key:"name"},{label:"Status",key:"status"}],e=b({total:0,data:[]}),i=b(null),D=w(()=>e.value.data.length>0?"Success":"Waiting for DPPs"),p=w(()=>e.value.data.length>0?"The following data plane proxies (DPPs) are connected to the control plane:":null);C(function(){f()}),v();function f(){i.value!==null&&window.clearTimeout(i.value)}async function v(){let r=!1;const c=[];try{const{items:a}=await m.getAllDataplanes({size:10});if(Array.isArray(a))for(const P of a){const{name:_,mesh:g}=P,O=await m.getDataplaneOverviewFromMesh({mesh:g,name:_}),h=B(O.dataplaneInsight);h==="offline"&&(r=!0),c.push({status:h,name:_,mesh:g})}}catch(a){console.error(a)}e.value.data=c,e.value.total=e.value.data.length,r&&(f(),i.value=window.setTimeout(v,1e3))}return(r,c)=>(s(),y(F,null,{header:t(()=>[n(N,null,H({title:t(()=>[l("p",null,u(o(D)),1)]),_:2},[o(p)!==null?{name:"description",fn:t(()=>[l("p",null,u(o(p)),1)]),key:"0"}:void 0]),1024)]),content:t(()=>[e.value.data.length===0?(s(),d("div",V,[n(S)])):(s(),d("div",z,[l("p",K,[l("b",null,"Found "+u(e.value.data.length)+" DPPs:",1)]),x(),n(o(A),{class:"mb-4",fetcher:()=>e.value,headers:k,"disable-pagination":""},{status:t(({rowValue:a})=>[a?(s(),y(T,{key:0,status:a},null,8,["status"])):(s(),d(M,{key:1},[x(`
              â€”
            `)],64))]),_:1},8,["fetcher"])]))]),navigation:t(()=>[n(E,{"next-step":"onboarding-completed","previous-step":"onboarding-add-services-code","should-allow-next":e.value.data.length>0},null,8,["should-allow-next"])]),_:1}))}});const ee=R(U,[["__scopeId","data-v-b3dc16b9"]]);export{ee as default};
