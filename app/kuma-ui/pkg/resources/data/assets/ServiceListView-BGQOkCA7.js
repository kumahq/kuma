import{d as x,r as o,o as i,m as r,w as s,b as n,e as c,l as D,aB as R,A as B,U as f,t as l,c as p,F as _,S as P,E as T,p as w}from"./index-BRBWbknO.js";import{S as L}from"./SummaryView-CK1e_JHQ.js";const G=x({__name:"ServiceListView",setup(N){return(X,q)=>{const g=o("RouteTitle"),u=o("XAction"),y=o("XActionGroup"),h=o("RouterView"),C=o("DataCollection"),k=o("DataLoader"),z=o("KCard"),V=o("AppView"),b=o("RouteView"),A=o("DataSource");return i(),r(A,{src:"/me"},{default:s(({data:d})=>[d?(i(),r(b,{key:0,name:"service-list-view",params:{page:1,size:d.pageSize,mesh:"",service:""}},{default:s(({route:a,t:m,uri:S})=>[n(g,{render:!1,title:m("services.routes.items.title")},null,8,["title"]),c(),n(V,null,{default:s(()=>[n(z,null,{default:s(()=>[n(k,{src:S(D(R),"/meshes/:mesh/service-insights/of/:serviceType",{mesh:a.params.mesh,serviceType:"internal"},{page:a.params.page,size:a.params.size})},{loadable:s(({data:t})=>[n(C,{type:"services",items:(t==null?void 0:t.items)??[void 0]},{default:s(()=>[n(B,{class:"service-collection","data-testid":"service-collection",headers:[{label:"Name",key:"name"},{label:"Address",key:"addressPort"},{label:"DP proxies (online / total)",key:"online"},{label:"Status",key:"status"},{label:"Actions",key:"actions",hideLabel:!0}],"page-number":a.params.page,"page-size":a.params.size,total:t==null?void 0:t.total,items:t==null?void 0:t.items,"is-selected-row":e=>e.name===a.params.service,onChange:a.update},{name:s(({row:e})=>[n(f,{text:e.name},{default:s(()=>[n(u,{"data-action":"",to:{name:"service-detail-view",params:{mesh:e.mesh,service:e.name},query:{page:a.params.page,size:a.params.size}}},{default:s(()=>[c(l(e.name),1)]),_:2},1032,["to"])]),_:2},1032,["text"])]),addressPort:s(({row:e})=>[e.addressPort?(i(),r(f,{key:0,text:e.addressPort},null,8,["text"])):(i(),p(_,{key:1},[c(l(m("common.collection.none")),1)],64))]),online:s(({row:e})=>[e.dataplanes?(i(),p(_,{key:0},[c(l(e.dataplanes.online||0)+" / "+l(e.dataplanes.total||0),1)],64)):(i(),p(_,{key:1},[c(l(m("common.collection.none")),1)],64))]),status:s(({row:e})=>[n(P,{status:e.status},null,8,["status"])]),actions:s(({row:e})=>[n(y,null,{default:s(()=>[n(u,{to:{name:"service-detail-view",params:{mesh:e.mesh,service:e.name}}},{default:s(()=>[c(l(m("common.collection.actions.view")),1)]),_:2},1032,["to"])]),_:2},1024)]),_:2},1032,["page-number","page-size","total","items","is-selected-row","onChange"]),c(),a.params.service?(i(),r(h,{key:0},{default:s(e=>[n(L,{onClose:v=>a.replace({name:"service-list-view",params:{mesh:a.params.mesh},query:{page:a.params.page,size:a.params.size}})},{default:s(()=>[(i(),r(T(e.Component),{name:a.params.service,service:t==null?void 0:t.items.find(v=>v.name===a.params.service)},null,8,["name","service"]))]),_:2},1032,["onClose"])]),_:2},1024)):w("",!0)]),_:2},1032,["items"])]),_:2},1032,["src"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["params"])):w("",!0)]),_:1})}}});export{G as default};
