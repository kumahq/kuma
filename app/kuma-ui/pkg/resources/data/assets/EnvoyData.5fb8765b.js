import{C as f}from"./CodeBlock.83ca39be.js";import{d as u,N as p,e as r,c as a,A as h,o as t,_ as l,K as o,w as m,a as g,r as i}from"./index.dbfc69fe.js";import{_ as y}from"./EmptyBlock.vue_vue_type_script_setup_true_lang.5dc5cc90.js";import{E}from"./ErrorBlock.f52010c3.js";import{_ as v}from"./LoadingBlock.vue_vue_type_script_setup_true_lang.f2781028.js";const N={class:"status-info"},I={key:3},S=u({__name:"StatusInfo",props:{isLoading:{type:Boolean,default:!1},hasError:{type:Boolean,default:!1},isEmpty:{type:Boolean,default:!1},error:{type:[Error,p],required:!1,default:null}},setup(e){return(n,d)=>(t(),r("div",N,[e.isLoading?(t(),a(v,{key:0})):e.hasError?(t(),a(E,{key:1,error:e.error},null,8,["error"])):e.isEmpty?(t(),a(y,{key:2})):(t(),r("div",I,[h(n.$slots,"default",{},void 0,!0)]))]))}});const k=l(S,[["__scopeId","data-v-3029b7cf"]]);const C={name:"EnvoyData",components:{CodeBlock:f,StatusInfo:k},props:{dataPath:{type:String,required:!0},mesh:{type:String,required:!1,default:""},dppName:{type:String,required:!1,default:""},zoneIngressName:{type:String,required:!1,default:""},zoneEgressName:{type:String,required:!1,default:""}},data(){return{isLoading:!0,error:null}},watch:{dppName(){this.fetchContent()},zoneIngressName(){this.fetchContent()},zoneEgressName(){this.fetchContent()}},mounted(){this.fetchContent()},methods:{async fetchContent(){this.error=null,this.isLoading=!0;try{let e="";this.mesh!==""&&this.dppName!==""?e=await o.getDataplaneData({dataPath:this.dataPath,mesh:this.mesh,dppName:this.dppName}):this.zoneIngressName!==""?e=await o.getZoneIngressData({dataPath:this.dataPath,zoneIngressName:this.zoneIngressName}):this.zoneEgressName!==""&&(e=await o.getZoneEgressData({dataPath:this.dataPath,zoneEgressName:this.zoneEgressName})),this.content=typeof e=="string"?e:JSON.stringify(e,null,2)}catch(e){this.error=e}finally{this.isLoading=!1}}}};function z(e,n,d,B,s,D){const c=i("CodeBlock"),_=i("StatusInfo");return t(),a(_,{class:"envoy-data","has-error":s.error!==null,"is-loading":s.isLoading,error:s.error},{default:m(()=>[g(c,{class:"panel-code-block",language:"json",code:e.content},null,8,["code"])]),_:1},8,["has-error","is-loading","error"])}const $=l(C,[["render",z],["__scopeId","data-v-6c43e747"]]);export{$ as E,k as S};
