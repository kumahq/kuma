import{_ as N,q as C,u as k,x as w,r as _,o as s,f as c,b as d,w as n,n as g,e as u,y as L,z as A,A as z,h as o,B as b,d as v,p as m,C as E,j as W,t as r,F as D,D as H,E as q}from"./index.2f6d90b0.js";import{_ as F,E as U}from"./ErrorBlock.65239dfd.js";import{_ as V}from"./CodeBlock.45d0fc63.js";const j={name:"PaginationWidget",components:{KButton:C},props:{hasPrevious:{type:Boolean,default:!1},hasNext:{type:Boolean,default:!1}},emits:["next","previous"],methods:{onNextButtonClick(){this.$emit("next"),k.logger.info(w.PAGINATION_NEXT_BUTTON_CLICKED)},onPreviousButtonClick(){this.$emit("previous"),k.logger.info(w.PAGINATION_PREVIOUS_BUTTON_CLICKED)}}},M={class:"pagination"},G=u(" \u2039 Previous "),X=u(" Next \u203A ");function J(t,h,a,P,y,i){const f=_("KButton");return s(),c("div",M,[a.hasPrevious?(s(),d(f,{key:0,ref:"paginatePrev",appearance:"primary",onClick:i.onPreviousButtonClick},{default:n(()=>[G]),_:1},8,["onClick"])):g("",!0),a.hasNext?(s(),d(f,{key:1,ref:"paginateNext",appearance:"primary",onClick:i.onNextButtonClick},{default:n(()=>[X]),_:1},8,["onClick"])):g("",!0)])}const Q=N(j,[["render",J],["__scopeId","data-v-bb9c78f2"]]),Y="/assets/icon-empty-table.dbb0b754.svg";const Z={name:"DataOverview",components:{PaginationWidget:Q,EmptyBlock:F,ErrorBlock:U,LoadingBlock:V,KButton:C,KEmptyState:L,KIcon:A,KTable:z},props:{selectedEntityName:{type:String,required:!1,default:""},pageSize:{type:Number,default:12},isLoading:{type:Boolean,default:!1},hasError:{type:Boolean,default:!1},error:{type:Object,required:!1,default:null},isEmpty:{type:Boolean,default:!1},emptyState:{type:Object,default:null},tableData:{type:Object,default:null},tableDataIsEmpty:{type:Boolean,default:!1},showWarnings:{type:Boolean,required:!1,default:!1},showDetails:{type:Boolean,required:!1,default:!1},next:{type:Boolean,default:!1},pageOffset:{type:Number,required:!1,default:0}},emits:["table-action","refresh","load-data"],data(){return{selectedRow:"",internalPageOffset:0}},computed:{customSlots(){return this.tableData.headers.map(({key:t})=>t).filter(t=>this.$slots[t])},tableHeaders(){return this.showWarnings?this.tableData.headers:this.tableData.headers.filter(({key:t})=>t!=="warnings")},tableRecompuationKey(){return`${this.tableData.data.length}-${this.tableHeaders.length}`}},watch:{isLoading(t){!t&&this.tableData.data.length>0&&(this.selectedRow=this.selectedEntityName||this.tableData.data[0].name)}},created(){this.internalPageOffset=this.pageOffset},methods:{tableDataFetcher(){return{data:this.tableData.data,total:this.tableData.data.length}},tableRowHandler(t,h){this.selectedRow=h.name,this.$emit("table-action",h)},onRefreshButtonClick(){this.$emit("refresh"),this.$emit("load-data",this.internalPageOffset),k.logger.info(w.TABLE_REFRESH_BUTTON_CLICKED)},goToPreviousPage(){this.internalPageOffset=this.pageOffset-this.pageSize,this.$emit("load-data",this.pageOffset-this.pageSize)},goToNextPage(){this.internalPageOffset=this.pageOffset+this.pageSize,this.$emit("load-data",this.pageOffset+this.pageSize)},getCellAttributes({headerKey:t}){return{class:["warnings"].includes(t)?"text-center":["details"].includes(t)?"text-right":""}},getRowAttributes({name:t}){const h=this.selectedEntityName||this.tableData.data[0].name;return{class:t===h?"is-selected":""}}}},p=t=>(H("data-v-faad566d"),t=t(),q(),t),$={class:"data-overview","data-testid":"data-overview"},ee={class:"data-table-controls mb-2"},te=p(()=>o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 36 36"},[o("g",{fill:"#fff","fill-rule":"nonzero"},[o("path",{d:"M18 5.5a12.465 12.465 0 00-8.118 2.995 1.5 1.5 0 001.847 2.363l.115-.095A9.437 9.437 0 0118 8.5l.272.004a9.487 9.487 0 019.07 7.75l.04.246H25a.5.5 0 00-.416.777l4 6a.5.5 0 00.832 0l4-6 .04-.072A.5.5 0 0033 16.5h-2.601l-.017-.15C29.567 10.2 24.294 5.5 18 5.5zM2.584 18.723l-.04.072A.5.5 0 003 19.5h2.6l.018.15C6.433 25.8 11.706 30.5 18 30.5c3.013 0 5.873-1.076 8.118-2.995a1.5 1.5 0 00-1.847-2.363l-.115.095A9.437 9.437 0 0118 27.5l-.272-.004a9.487 9.487 0 01-9.07-7.75l-.041-.246H11a.5.5 0 00.416-.777l-4-6a.5.5 0 00-.832 0l-4 6z"})])],-1)),ae=[te],se=p(()=>o("span",null,"Refresh",-1)),ne={key:3,class:"data-overview-content"},oe={key:0,class:"data-overview-table"},ie=p(()=>o("span",{class:"entity-status__dot"},null,-1)),le={class:"entity-status__label"},ce={key:0,class:"action-link__active-state"},re=u(" \u2713 "),de=p(()=>o("span",{class:"sr-only"},"Selected",-1)),_e=[re,de],ue={key:1,class:"action-link__normal-state"},he=u(" Details "),fe=p(()=>o("div",{class:"card-icon mb-3"},[o("img",{src:Y})],-1)),me={key:0},ge={key:1},pe={key:2,class:"data-overview-content mt-6"};function ye(t,h,a,P,y,i){const f=_("KButton"),S=_("LoadingBlock"),x=_("ErrorBlock"),O=_("EmptyBlock"),B=_("KIcon"),R=_("KTable"),I=_("PaginationWidget"),K=_("KEmptyState");return s(),c("div",$,[o("div",ee,[b(t.$slots,"additionalControls",{},void 0,!0),v(f,{class:"refresh-button",appearance:"primary",disabled:a.isLoading,onClick:i.onRefreshButtonClick},{default:n(()=>[o("span",{class:m(["refresh-icon custom-control-icon",{"is-spinning":a.isLoading}])},ae,2),se]),_:1},8,["disabled","onClick"])]),a.isLoading?(s(),d(S,{key:0})):a.hasError?(s(),d(x,{key:1,error:a.error},null,8,["error"])):a.isEmpty?(s(),d(O,{key:2})):(s(),c("div",ne,[!a.tableDataIsEmpty&&a.tableData?(s(),c("div",oe,[(s(),d(R,{key:i.tableRecompuationKey,class:m({"data-table-is-hidden":a.tableDataIsEmpty}),fetcher:i.tableDataFetcher,headers:i.tableHeaders,"cell-attrs":i.getCellAttributes,"row-attrs":i.getRowAttributes,"disable-pagination":"","is-clickable":"","data-testid":"data-overview-table","onRow:click":i.tableRowHandler},E({status:n(({rowValue:e})=>[o("div",{class:m(["entity-status",{"is-offline":e.toString().toLowerCase()==="offline"||e===!1,"is-degraded":e.toString().toLowerCase()==="partially degraded"||e===!1}])},[ie,o("span",le,r(e),1)],2)]),name:n(({row:e,rowValue:l})=>[e.nameRoute?(s(),d(f,{key:0,appearance:"btn-link",to:e.nameRoute},{default:n(()=>[u(r(l),1)]),_:2},1032,["to"])):(s(),c(D,{key:1},[u(r(l),1)],64))]),mesh:n(({row:e,rowValue:l})=>[e.meshRoute?(s(),d(f,{key:0,appearance:"btn-link",to:e.meshRoute},{default:n(()=>[u(r(l),1)]),_:2},1032,["to"])):(s(),c(D,{key:1},[u(r(l),1)],64))]),totalUpdates:n(({row:e})=>[o("span",null,r(e.totalUpdates),1)]),selected:n(({row:e})=>[o("a",{class:m(["data-table-action-link",{"is-active":y.selectedRow===e.name}])},[y.selectedRow===e.name?(s(),c("span",ce,_e)):(s(),c("span",ue," View "))],2)]),dpVersion:n(({row:e,rowValue:l})=>[o("div",{class:m({"with-warnings":e.unsupportedEnvoyVersion||e.unsupportedKumaDPVersion||e.kumaDpAndKumaCpMismatch})},r(l),3)]),envoyVersion:n(({row:e,rowValue:l})=>[o("div",{class:m({"with-warnings":e.unsupportedEnvoyVersion})},r(l),3)]),_:2},[W(i.customSlots,e=>({name:e,fn:n(({rowValue:l,row:T})=>[b(t.$slots,e,{rowValue:l,row:T},void 0,!0)])})),a.showWarnings?{name:"warnings",fn:n(({row:e})=>[e.withWarnings?(s(),d(B,{key:0,class:"mr-1",icon:"warning",color:"var(--black-75)","secondary-color":"var(--yellow-300)",size:"20"})):g("",!0)]),key:"0"}:void 0,a.showDetails?{name:"details",fn:n(({row:e})=>[v(f,{class:"detail-link",appearance:"btn-link",to:e.nameRoute},{icon:n(()=>[v(B,{icon:e.warnings.length>0?"warning":"info",color:e.warnings.length>0?"var(--black-75)":"var(--blue-500)","secondary-color":e.warnings.length>0?"var(--yellow-300)":null,size:"20"},null,8,["icon","color","secondary-color"])]),default:n(()=>[he]),_:2},1032,["to"])]),key:"1"}:void 0]),1032,["class","fetcher","headers","cell-attrs","row-attrs","onRow:click"])),v(I,{"has-previous":y.internalPageOffset>0,"has-next":a.next,onNext:i.goToNextPage,onPrevious:i.goToPreviousPage},null,8,["has-previous","has-next","onNext","onPrevious"])])):g("",!0),a.tableDataIsEmpty&&a.tableData?(s(),d(K,{key:1,"cta-is-hidden":""},E({title:n(()=>[fe,a.emptyState.title?(s(),c("span",me,r(a.emptyState.title),1)):(s(),c("span",ge," No Items Found "))]),_:2},[a.emptyState.message?{name:"message",fn:n(()=>[u(r(a.emptyState.message),1)]),key:"0"}:void 0]),1024)):g("",!0),t.$slots.content?(s(),c("div",pe,[b(t.$slots,"content",{},void 0,!0)])):g("",!0)]))])}const we=N(Z,[["render",ye],["__scopeId","data-v-faad566d"]]);export{we as D};
