import{d as g,j as C,r as S,o as e,e as h,g as _,O as V,P as A,q as P,h as n,w as r,a,F as k,s as q,t as B,b as y,G as x}from"./index-0105b00b.js";import{p as v,E as w,q as b,o as $,m as L,g as N,A as E,_ as F}from"./RouteView.vue_vue_type_script_setup_true_lang-fff04e01.js";import{_ as O}from"./ResourceCodeBlock.vue_vue_type_script_setup_true_lang-1775c75b.js";import{T as j}from"./TabsWidget-4ad2445c.js";import{_ as I}from"./RouteTitle.vue_vue_type_script_setup_true_lang-d728f45f.js";import"./CodeBlock.vue_vue_type_style_index_0_lang-83b0dbdd.js";import"./CopyButton-12953f35.js";const R=P("h2",null,"Dataplanes",-1),D=g({__name:"PolicyConnections",props:{mesh:{type:String,required:!0},policyPath:{type:String,required:!0},policyName:{type:String,required:!0}},setup(d){const t=d,m=C("");return(f,s)=>{const o=S("RouterLink");return e(),h(k,null,[R,_(),V(P("input",{id:"dataplane-search","onUpdate:modelValue":s[0]||(s[0]=i=>m.value=i),type:"text",class:"k-input mt-4",placeholder:"Filter by name",required:"","data-testid":"dataplane-search-input"},null,512),[[A,m.value]]),_(),n($,{src:`/meshes/${t.mesh}/policy-path/${t.policyPath}/policy/${t.policyName}/dataplanes`},{default:r(({data:i,isLoading:l,error:p})=>[l?(e(),a(v,{key:0})):p?(e(),a(w,{key:1,error:p},null,8,["error"])):i===void 0||i.items.length===0?(e(),a(b,{key:2})):(e(!0),h(k,{key:3},q(i.items.filter(c=>c.dataplane.name.toLowerCase().includes(m.value.toLowerCase())),(c,u)=>(e(),h("p",{key:u,class:"mt-2","data-testid":"dataplane-name"},[n(o,{to:{name:"data-plane-detail-view",params:{mesh:c.dataplane.mesh,dataPlane:c.dataplane.name}}},{default:r(()=>[_(B(c.dataplane.name),1)]),_:2},1032,["to"])]))),128))]),_:1},8,["src"])],64)}}}),G=g({__name:"PolicyDetails",props:{policy:{type:Object,required:!0},path:{type:String,required:!0}},setup(d){const t=d,m=L(),f=[{hash:"#overview",title:"Overview"},{hash:"#affected-dpps",title:"Affected DPPs"}];async function s(o){const{name:i,mesh:l}=t.policy,p=t.path;return await m.getSinglePolicyEntity({name:i,mesh:l,path:p},o)}return(o,i)=>(e(),a(j,{tabs:f},{overview:r(()=>[n(y(x),null,{body:r(()=>[n(O,{id:"code-block-policy",resource:t.policy,"resource-fetcher":s,"is-searchable":""},null,8,["resource"])]),_:1})]),"affected-dpps":r(()=>[n(y(x),null,{body:r(()=>[n(D,{mesh:t.policy.mesh,"policy-name":t.policy.name,"policy-path":t.path},null,8,["mesh","policy-name","policy-path"])]),_:1})]),_:1}))}}),Q=g({__name:"PolicyDetailView",setup(d){const{t}=N();return(m,f)=>(e(),a(F,{name:"policy-detail-view","data-testid":"policy-detail-view"},{default:r(({route:s})=>[n($,{src:"/*/policy-types"},{default:r(({data:o,error:i})=>[i?(e(),a(w,{key:0,error:i},null,8,["error"])):o===void 0?(e(),a(v,{key:1})):o.policies.length===0?(e(),a(b,{key:2})):(e(!0),h(k,{key:3},q([o.policies.find(l=>l.path===s.params.policyPath)??o.policies[0]],l=>(e(),a(E,{key:l.name,breadcrumbs:[{to:{name:"policies-list-view",params:{mesh:s.params.mesh,policyPath:s.params.policyPath}},text:y(t)("policies.routes.item.breadcrumbs")}]},{title:r(()=>[P("h2",null,[n(I,{title:y(t)("policies.routes.item.title",{name:s.params.policy,type:l.name}),render:!0},null,8,["title"])])]),default:r(()=>[_(),n($,{src:`/meshes/${s.params.mesh}/policy-path/${l.path}/policy/${s.params.policy}`},{default:r(({data:p,isLoading:c,error:u})=>[c?(e(),a(v,{key:0})):u?(e(),a(w,{key:1,error:u},null,8,["error"])):p===void 0?(e(),a(b,{key:2})):(e(),a(G,{key:3,policy:p,path:l.path,"data-testid":"detail-view-details"},null,8,["policy","path"]))]),_:2},1032,["src"])]),_:2},1032,["breadcrumbs"]))),128))]),_:2},1024)]),_:1}))}});export{Q as default};
