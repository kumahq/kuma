import{d as N,r as _,p as b,o as a,w as e,b as i,e as t,l as g,c as p,N as u,L as f,M as T,t as n,q as C,O as m,m as v,an as B,a as D,Y as E}from"./index-DGSbEvIm.js";const F={class:"stack-with-borders"},M={class:"stack-with-borders"},L={class:"stack-with-borders"},j=N({__name:"SubscriptionSummaryView",props:{data:{},routeName:{}},setup(z){const w=z;return(x,o)=>{const X=_("XSelect"),k=_("XLayout"),R=_("XI18n"),I=_("XAlert"),S=_("DataCollection"),V=_("XCodeBlock"),$=_("AppView"),A=_("RouteView");return a(),b(A,{name:w.routeName,params:{subscription:"",codeSearch:"",codeFilter:!1,codeRegExp:!1,output:String}},{default:e(({route:c,t:r})=>[i(S,{items:w.data,predicate:l=>l.id===c.params.subscription},{item:e(({item:l})=>[i($,null,{title:e(()=>[g("h2",null,n(l.zoneInstanceId??l.globalInstanceId??l.controlPlaneInstanceId),1)]),default:e(()=>[o[23]||(o[23]=t()),i(k,{type:"stack"},{default:e(()=>[g("header",null,[i(k,{type:"separated",justify:"end"},{default:e(()=>[(a(),p(u,null,f([["structured","yaml"]],s=>i(X,{key:typeof s,label:r("subscriptions.routes.item.format"),selected:c.params.output,onChange:d=>{c.update({output:d})}},T({_:2},[f(s,d=>({name:`${d}-option`,fn:e(()=>[t(n(r(`subscriptions.routes.item.formats.${d}`)),1)])}))]),1032,["label","selected","onChange"])),64))]),_:2},1024)]),o[22]||(o[22]=t()),c.params.output==="structured"?(a(),b(k,{key:0,type:"stack","data-testid":"structured-view"},{default:e(()=>[g("div",F,[i(m,{layout:"horizontal"},{title:e(()=>[t(n(r("http.api.property.version")),1)]),body:e(()=>{var s,d;return[(a(!0),p(u,null,f([(d=(s=l.version)==null?void 0:s.kumaCp)==null?void 0:d.version],y=>(a(),p(u,null,[t(n(y??"-"),1)],64))),256))]}),_:2,__:[0]},1024),o[6]||(o[6]=t()),i(m,{layout:"horizontal"},{title:e(()=>[t(n(r("http.api.property.connectTime")),1)]),body:e(()=>[t(n(r("common.formats.datetime",{value:Date.parse(l.connectTime??"")})),1)]),_:2,__:[1]},1024),o[7]||(o[7]=t()),l.disconnectTime?(a(),b(m,{key:0,layout:"horizontal"},{title:e(()=>[t(n(r("http.api.property.disconnectTime")),1)]),body:e(()=>[t(n(r("common.formats.datetime",{value:Date.parse(l.disconnectTime)})),1)]),_:2,__:[2]},1024)):C("",!0),o[8]||(o[8]=t()),i(m,{layout:"horizontal"},{title:e(()=>[t(n(r("subscriptions.routes.item.headers.responses")),1)]),body:e(()=>{var s;return[(a(!0),p(u,null,f([((s=l.status)==null?void 0:s.total)??{}],d=>(a(),p(u,null,[t(n(d.responsesSent)+"/"+n(d.responsesAcknowledged),1)],64))),256))]}),_:2,__:[3]},1024),o[9]||(o[9]=t()),(a(),p(u,null,f(["zoneInstanceId","globalInstanceId","controlPlaneInstanceId"],s=>(a(),p(u,{key:typeof s},[l[s]?(a(),b(m,{key:0,layout:"horizontal"},{title:e(()=>[t(n(r(`http.api.property.${s}`)),1)]),body:e(()=>[t(n(l[s]),1)]),_:2,__:[4]},1024)):C("",!0)],64))),64)),o[10]||(o[10]=t()),i(m,{layout:"horizontal"},{title:e(()=>[t(n(r("http.api.property.id")),1)]),body:e(()=>[t(n(l.id),1)]),_:2,__:[5]},1024)]),o[21]||(o[21]=t()),i(S,{items:Object.entries(l.status.acknowledgements??{})},{default:e(({items:s})=>[i(k,{type:"stack"},{default:e(()=>[D(x.$slots,"default"),o[19]||(o[19]=t()),(a(!0),p(u,null,f([s.filter(([d,y])=>y.responsesRejected>0)],d=>(a(),p(u,{key:typeof d},[d.length>0?(a(),p(u,{key:0},[i(I,{variant:l.disconnectTime?"info":"warning"},{default:e(()=>[i(R,{path:"subscriptions.notifications.with-nacks"})]),_:2},1032,["variant"]),o[14]||(o[14]=t()),g("div",M,[i(m,{layout:"horizontal"},{title:e(()=>[g("strong",null,n(r("subscriptions.routes.item.headers.type")),1)]),body:e(()=>[t(n(r("subscriptions.routes.item.headers.nacked")),1)]),_:2,__:[11]},1024),o[13]||(o[13]=t()),(a(!0),p(u,null,f(d,([y,h])=>(a(),b(m,{key:y,layout:"horizontal"},{title:e(()=>[t(n(r(`http.api.property.${y}`)),1)]),body:e(()=>[t(n(h.responsesRejected),1)]),_:2,__:[12]},1024))),128))])],64)):C("",!0),o[18]||(o[18]=t()),g("div",L,[i(m,{layout:"horizontal"},{title:e(()=>[g("strong",null,n(r("subscriptions.routes.item.headers.type")),1)]),body:e(()=>[t(n(r("subscriptions.routes.item.headers.stat")),1)]),_:2,__:[15]},1024),o[17]||(o[17]=t()),(a(!0),p(u,null,f(s,([y,h])=>(a(),b(m,{key:y,layout:"horizontal"},{title:e(()=>[t(n(r(`http.api.property.${y}`)),1)]),body:e(()=>[t(n(h.responsesSent)+"/"+n(h.responsesAcknowledged),1)]),_:2,__:[16]},1024))),128))])],64))),128))]),_:2,__:[19]},1024)]),empty:e(()=>[i(I,{variant:"info"},{icon:e(()=>[i(v(B))]),default:e(()=>[t(" "+n(r("common.detail.subscriptions.no_stats",{id:l.id})),1)]),_:2},1024)]),_:2,__:[20]},1032,["items"])]),_:2,__:[21]},1024)):(a(),b(V,{key:1,language:"yaml",code:v(E).stringify(l.$raw),"is-searchable":"",query:c.params.codeSearch,"is-filter-mode":c.params.codeFilter,"is-reg-exp-mode":c.params.codeRegExp,onQueryChange:s=>c.update({codeSearch:s}),onFilterModeChange:s=>c.update({codeFilter:s}),onRegExpModeChange:s=>c.update({codeRegExp:s})},null,8,["code","query","is-filter-mode","is-reg-exp-mode","onQueryChange","onFilterModeChange","onRegExpModeChange"]))]),_:2,__:[22]},1024)]),_:2,__:[23]},1024)]),_:2},1032,["items","predicate"])]),_:3},8,["name"])}}});export{j as default};
