import{d as k,p as E,f as p,x as T,o as a,k as v,l as e,a as g,w as B,b as x,t as o,u as n,c as h,y as f,j as C,A as q,B as V,C as $,cB as L,z as N,F as w,r as S,g as b,i as D}from"./index.ea0d4a24.js";import{T as P}from"./TagList.c44546f8.js";import{_ as j}from"./EntityURLControl.vue_vue_type_script_setup_true_lang.3f293302.js";import{Y as A}from"./YamlView.a58d7ecd.js";import{_ as O}from"./EmptyBlock.vue_vue_type_script_setup_true_lang.b7d1d2f8.js";import{E as R}from"./ErrorBlock.6da0472d.js";import{_ as z}from"./LoadingBlock.vue_vue_type_script_setup_true_lang.c9f72cfb.js";const y=s=>(q("data-v-85c46957"),s=s(),V(),s),F={class:"entity-summary entity-section-list"},M={class:"entity-title"},Y=y(()=>e("span",{class:"kutil-sr-only"},"Service:",-1)),K={class:"definition"},U=y(()=>e("span",null,"Mesh:",-1)),G={class:"definition"},H=y(()=>e("span",null,"Address:",-1)),J={class:"definition"},Q=y(()=>e("span",null,"TLS:",-1)),W={key:0},X=y(()=>e("h4",null,"Tags",-1)),Z=k({__name:"ExternalServiceDetails",props:{externalService:{type:Object,required:!0}},setup(s){const t=s,u=E(),i=p(()=>({name:"external-service-detail-view",params:{service:t.externalService.name,mesh:t.externalService.mesh}})),r=p(()=>Object.entries(t.externalService.tags).map(([d,c])=>({label:d,value:c}))),l=p(()=>T(t.externalService));return(d,c)=>{var _;const m=C("router-link");return a(),v("div",F,[e("h3",M,[Y,g(m,{to:n(i)},{default:B(()=>[x(o(s.externalService.name),1)]),_:1},8,["to"]),n(u).name!==n(i).name?(a(),h(j,{key:0,route:n(i)},null,8,["route"])):f("",!0)]),e("section",null,[e("div",K,[U,e("span",null,o(s.externalService.mesh),1)]),e("div",G,[H,e("span",null,o(t.externalService.networking.address),1)]),e("div",J,[Q,e("span",null,o((_=t.externalService.networking.tls)!=null&&_.enabled?"Enabled":"Disabled"),1)])]),n(r).length>0?(a(),v("section",W,[X,g(P,{tags:n(r)},null,8,["tags"])])):f("",!0),g(A,{id:"code-block-external-service",content:n(l),"is-searchable":""},null,8,["content"])])}}});const ee=$(Z,[["__scopeId","data-v-85c46957"]]),I=s=>(q("data-v-f79dddf0"),s=s(),V(),s),te={class:"entity-summary entity-section-list"},se={class:"entity-title"},ne=I(()=>e("span",{class:"kutil-sr-only"},"Service:",-1)),ae={class:"definition"},ie=I(()=>e("span",null,"Mesh:",-1)),re={class:"definition"},ce=I(()=>e("span",null,"Address:",-1)),le={key:0,class:"definition"},oe=I(()=>e("span",null,"DP proxies (online / total):",-1)),ue=k({__name:"ServiceInsightDetails",props:{serviceInsight:{type:Object,required:!0}},setup(s){const t=s,u=E(),i=p(()=>({name:t.serviceInsight.serviceType==="external"?"external-service-detail-view":"service-insight-detail-view",params:{service:t.serviceInsight.name,mesh:t.serviceInsight.mesh}})),r=p(()=>t.serviceInsight.status?L[t.serviceInsight.status]:null),l=p(()=>{var c;return t.serviceInsight.dataplanes?`${(c=t.serviceInsight.dataplanes.online)!=null?c:0} / ${t.serviceInsight.dataplanes.total}`:null}),d=p(()=>T(t.serviceInsight));return(c,m)=>{const _=C("router-link");return a(),v("div",te,[e("h3",se,[ne,g(_,{to:n(i)},{default:B(()=>[x(o(s.serviceInsight.name),1)]),_:1},8,["to"]),n(r)!==null?(a(),v("div",{key:0,class:N(`status status--${n(r).appearance}`),"data-testid":"data-plane-status-badge"},o(n(r).title.toLowerCase()),3)):f("",!0),n(u).name!==n(i).name?(a(),h(j,{key:1,route:n(i)},null,8,["route"])):f("",!0)]),e("section",null,[e("div",ae,[ie,e("span",null,o(s.serviceInsight.mesh),1)]),e("div",re,[ce,e("span",null,[s.serviceInsight.addressPort?(a(),v(w,{key:0},[x(o(s.serviceInsight.addressPort),1)],64)):(a(),v(w,{key:1},[x("\u2014")],64))])]),n(l)!==null?(a(),v("div",le,[oe,e("span",null,o(n(l)),1)])):f("",!0)]),g(A,{id:"code-block-service-insight",content:n(d),"is-searchable":""},null,8,["content"])])}}});const de=$(ue,[["__scopeId","data-v-f79dddf0"]]),_e={class:"service-details"},ve=k({__name:"ServiceDetails",props:{serviceType:{type:String,required:!1,default:"internal"},name:{type:String,required:!0},mesh:{type:String,required:!0}},setup(s){const t=s,u=S(null),i=S(null),r=S(!0),l=S(null);b(()=>t.mesh,function(){d()}),b(()=>t.name,function(){d()}),d();async function d(){r.value=!0,l.value=null,u.value=null,i.value=null;const c=t.mesh,m=t.name;try{t.serviceType==="external"?i.value=await D.getExternalService({mesh:c,name:m}):u.value=await D.getServiceInsight({mesh:c,name:m})}catch(_){_ instanceof Error?l.value=_:console.error(_)}finally{r.value=!1}}return(c,m)=>(a(),v("div",_e,[r.value?(a(),h(z,{key:0})):l.value!==null?(a(),h(R,{key:1,error:l.value},null,8,["error"])):u.value!==null?(a(),h(de,{key:2,"service-insight":u.value},null,8,["service-insight"])):i.value!==null?(a(),h(ee,{key:3,"external-service":i.value},null,8,["external-service"])):(a(),h(O,{key:4}))]))}});const xe=$(ve,[["__scopeId","data-v-bdacee39"]]);export{xe as S};
