import{d as R,r as p,o as l,q as y,w as e,b as s,p as x,y as M,Q as E,e as n,R as f,t as i,S as H,n as O,m as w,s as b,c as _,A as $,K as g,L as V,G}from"./index-CKQWVGYP.js";import{S as P}from"./SummaryView-DHZPnesw.js";const Z=["data-testid","innerHTML"],q=["innerHTML"],F={key:0},J=R({__name:"ZoneDetailView",props:{data:{}},setup(v){const d=v;return(K,a)=>{const k=p("XBadge"),A=p("XIcon"),h=p("XLayout"),S=p("XAboutCard"),T=p("XAction"),L=p("RouterView"),X=p("AppView"),B=p("DataSource"),D=p("RouteView");return l(),y(D,{name:"zone-cp-detail-view",params:{zone:"",subscription:""}},{default:e(({t:o,uri:N,route:z,me:m})=>{var I,C;return[s(B,{src:N(x(M),"/control-plane/outdated/:version",{version:((C=(I=d.data.zoneInsight.version)==null?void 0:I.kumaCp)==null?void 0:C.version)??"-"})},{default:e(({data:r})=>[s(X,{docs:o("zones.href.docs.cta")},E({default:e(()=>[a[15]||(a[15]=n()),s(h,{"data-testid":"detail-view-details",type:"stack"},{default:e(()=>[s(S,{title:o("zone-cps.detail.about.title"),created:d.data.creationTime,modified:d.data.modificationTime},{default:e(()=>[s(f,{layout:"horizontal"},{title:e(()=>[n(i(o("http.api.property.status")),1)]),body:e(()=>[s(H,{status:d.data.state},null,8,["status"])]),_:2},1024),a[5]||(a[5]=n()),s(f,{layout:"horizontal",class:O({version:!0,outdated:r==null?void 0:r.outdated})},{title:e(()=>[n(i(o("zone-cps.routes.item.version")),1)]),body:e(()=>[s(h,{type:"separated"},{default:e(()=>[s(k,{appearance:(r==null?void 0:r.outdated)===!0?"warning":"decorative"},{default:e(()=>{var t,c;return[n(i(((c=(t=d.data.zoneInsight.version)==null?void 0:t.kumaCp)==null?void 0:c.version)??"â€”"),1)]}),_:2},1032,["appearance"]),a[1]||(a[1]=n()),(r==null?void 0:r.outdated)===!0?(l(),y(A,{key:0,name:"info"},{default:e(()=>[w("div",{innerHTML:o("zone-cps.routes.item.version_warning")},null,8,q)]),_:2},1024)):b("",!0)]),_:2},1024)]),_:2},1032,["class"]),a[6]||(a[6]=n()),s(f,{layout:"horizontal"},{title:e(()=>[n(i(o("http.api.property.type")),1)]),body:e(()=>[s(k,{appearance:"decorative"},{default:e(()=>[n(i(o(`common.product.environment.${d.data.zoneInsight.environment||"unknown"}`)),1)]),_:2},1024)]),_:2},1024),a[7]||(a[7]=n()),s(f,{layout:"horizontal"},{title:e(()=>[n(i(o("zone-cps.routes.item.authentication_type")),1)]),body:e(()=>[s(k,{appearance:"decorative"},{default:e(()=>[n(i(d.data.zoneInsight.authenticationType||o("common.not_applicable")),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["title","created","modified"]),a[14]||(a[14]=n()),d.data.zoneInsight.subscriptions.length>0?(l(),_("div",F,[w("h2",null,i(o("zone-cps.detail.subscriptions")),1),a[12]||(a[12]=n()),s($,{headers:[{...m.get("headers.zoneInstanceId"),label:o("zone-cps.routes.items.headers.zoneInstanceId"),key:"zoneInstanceId"},{...m.get("headers.version"),label:o("zone-cps.routes.items.headers.version"),key:"version"},{...m.get("headers.connected"),label:o("zone-cps.routes.items.headers.connected"),key:"connected"},{...m.get("headers.disconnected"),label:o("zone-cps.routes.items.headers.disconnected"),key:"disconnected"},{...m.get("headers.responses"),label:o("zone-cps.routes.items.headers.responses"),key:"responses"}],"is-selected-row":t=>t.id===z.params.subscription,items:d.data.zoneInsight.subscriptions.map((t,c,u)=>u[u.length-(c+1)]),onResize:m.set},{zoneInstanceId:e(({row:t})=>[s(T,{"data-action":"",to:{name:"zone-cp-subscription-summary-view",params:{subscription:t.id}}},{default:e(()=>[n(i(t.zoneInstanceId),1)]),_:2},1032,["to"])]),version:e(({row:t})=>{var c,u;return[n(i(((u=(c=t.version)==null?void 0:c.kumaCp)==null?void 0:u.version)??"-"),1)]}),connected:e(({row:t})=>[n(i(o("common.formats.datetime",{value:Date.parse(t.connectTime??"")})),1)]),disconnected:e(({row:t})=>[t.disconnectTime?(l(),_(g,{key:0},[n(i(o("common.formats.datetime",{value:Date.parse(t.disconnectTime)})),1)],64)):b("",!0)]),responses:e(({row:t})=>{var c;return[(l(!0),_(g,null,V([((c=t.status)==null?void 0:c.total)??{}],u=>(l(),_(g,null,[n(i(u.responsesSent)+"/"+i(u.responsesAcknowledged),1)],64))),256))]}),_:2},1032,["headers","is-selected-row","items","onResize"]),a[13]||(a[13]=n()),s(L,null,{default:e(({Component:t})=>[z.child()?(l(),y(P,{key:0,width:"670px",onClose:function(){z.replace({name:"zone-cp-detail-view",params:{zone:z.params.zone}})}},{default:e(()=>[(l(),y(G(t),{data:d.data.zoneInsight.subscriptions},{default:e(()=>[w("p",null,i(o("zone-cps.routes.item.subscription_intro")),1)]),_:2},1032,["data"]))]),_:2},1032,["onClose"])):b("",!0)]),_:2},1024)])):b("",!0)]),_:2},1024)]),_:2},[d.data.warnings.length>0?{name:"notifications",fn:e(()=>[w("ul",null,[(l(!0),_(g,null,V(d.data.warnings,t=>(l(),_("li",{key:t.kind,"data-testid":`warning-${t.kind}`,innerHTML:o(`common.warnings.${t.kind}`,{...t.payload,...t.kind==="INCOMPATIBLE_ZONE_AND_GLOBAL_CPS_VERSIONS"?{globalCpVersion:(r==null?void 0:r.version)??""}:{}})},null,8,Z))),128))])]),key:"0"}:void 0]),1032,["docs"])]),_:2},1032,["src"])]}),_:1})}}});export{J as default};
