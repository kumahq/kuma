import{_ as P}from"./PolicySummary.vue_vue_type_script_setup_true_lang-BQUdtlUn.js";import{d as q,r as s,p as i,o as p,w as t,b as r,c as C,N as x,L as f,e as d,q as k,m as D,F as N,l as m,t as u,M as A,_ as Q}from"./index-CTYmXyGO.js";import{_ as R}from"./ResourceCodeBlock.vue_vue_type_script_setup_true_lang-BgdyrpJo.js";const z=q({__name:"PolicySummaryView",props:{items:{},policyType:{}},setup(S){const y=S;return(I,l)=>{const w=s("XEmptyState"),E=s("RouteTitle"),V=s("XAction"),F=s("XSelect"),M=s("XLayout"),b=s("DataLoader"),T=s("AppView"),X=s("DataCollection"),B=s("RouteView");return p(),i(B,{name:"policy-summary-view",params:{mesh:"",policyPath:"",policy:"",codeSearch:"",codeFilter:!1,codeRegExp:!1,format:String}},{default:t(({uri:L,route:e,t:n})=>[r(X,{items:y.items,predicate:_=>_.id===e.params.policy,find:!0},{empty:t(()=>[r(w,null,{title:t(()=>[m("h2",null,u(n("common.collection.summary.empty_title",{type:y.policyType.name})),1)]),default:t(()=>[l[0]||(l[0]=d()),m("p",null,u(n("common.collection.summary.empty_message",{type:y.policyType.name})),1)]),_:2,__:[0]},1024)]),default:t(({items:_})=>[(p(!0),C(x,null,f([_[0]],c=>(p(),i(T,{key:c.id},{title:t(()=>[m("h2",null,[r(V,{to:{name:"policy-detail-view",params:{mesh:e.params.mesh,policyPath:e.params.policyPath,policy:e.params.policy}}},{default:t(()=>[r(E,{title:n("policies.routes.item.title",{name:c.name})},null,8,["title"])]),_:2},1032,["to"])])]),default:t(()=>{var g;return[l[3]||(l[3]=d()),c?(p(),i(P,{key:0,policy:c,format:e.params.format,legacy:!((g=y.policyType.policy)!=null&&g.isTargetRef)},{header:t(()=>[m("header",null,[r(M,{type:"separated",size:"max"},{default:t(()=>[m("h3",null,u(n("policies.routes.item.config")),1),l[1]||(l[1]=d()),(p(),C(x,null,f([["structured","universal","k8s"]],o=>m("div",{key:typeof o},[r(F,{label:n("policies.routes.item.format"),selected:o.includes(e.params.format)?e.params.format:o[0],onChange:a=>{e.update({format:a})},onVnodeBeforeMount:a=>{var h;return((h=a==null?void 0:a.props)==null?void 0:h.selected)&&o.includes(a.props.selected)&&a.props.selected!==e.params.format&&e.update({format:a.props.selected})}},A({_:2},[f(o,a=>({name:`${a}-option`,fn:t(()=>[d(u(n(`policies.routes.item.formats.${a}`)),1)])}))]),1032,["label","selected","onChange","onVnodeBeforeMount"])])),64))]),_:2,__:[1]},1024)])]),default:t(()=>[l[2]||(l[2]=d()),e.params.format==="universal"?(p(),i(R,{key:0,"data-testid":"codeblock-yaml-universal",language:"yaml",resource:c.config,"is-searchable":"","show-k8s-copy-button":!1,query:e.params.codeSearch,"is-filter-mode":e.params.codeFilter,"is-reg-exp-mode":e.params.codeRegExp,onQueryChange:o=>e.update({codeSearch:o}),onFilterModeChange:o=>e.update({codeFilter:o}),onRegExpModeChange:o=>e.update({codeRegExp:o})},null,8,["resource","query","is-filter-mode","is-reg-exp-mode","onQueryChange","onFilterModeChange","onRegExpModeChange"])):e.params.format==="k8s"?(p(),i(b,{key:1,src:L(D(N),"/meshes/:mesh/policy-path/:path/policy/:name/as/kubernetes",{mesh:e.params.mesh,path:e.params.policyPath,name:e.params.policy})},{default:t(({data:o})=>[r(R,{"data-testid":"codeblock-yaml-k8s",language:"yaml",resource:o,"is-searchable":"","show-k8s-copy-button":!1,query:e.params.codeSearch,"is-filter-mode":e.params.codeFilter,"is-reg-exp-mode":e.params.codeRegExp,onQueryChange:a=>e.update({codeSearch:a}),onFilterModeChange:a=>e.update({codeFilter:a}),onRegExpModeChange:a=>e.update({codeRegExp:a})},null,8,["resource","query","is-filter-mode","is-reg-exp-mode","onQueryChange","onFilterModeChange","onRegExpModeChange"])]),_:2},1032,["src"])):k("",!0)]),_:2,__:[2]},1032,["policy","format","legacy"])):k("",!0)]}),_:2,__:[3]},1024))),128))]),_:2,__:[4]},1032,["items","predicate"])]),_:1})}}}),H=Q(z,[["__scopeId","data-v-21a36356"]]);export{H as default};
