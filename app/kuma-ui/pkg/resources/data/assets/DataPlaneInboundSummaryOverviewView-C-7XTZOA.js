import{d as Y,r as l,p as w,o as r,w as s,b as n,e,c as a,q as f,l as o,t as g,m as x,F as q,a6 as z,N as y,L as v,Y as E}from"./index-8QMKyk4n.js";import{A as G,a as H}from"./AccordionList-Bl2pJiqC.js";import{P as J}from"./PolicyTypeTag-C9VhaDTd.js";import{T as K}from"./TagList-Cbn4OqC_.js";import{R as Q}from"./RuleMatchers-B1De_S9q.js";const U={key:0},W={key:1},Z={key:0},h={class:"mt-4"},tt={key:0},ot={key:1},et={colspan:"2"},dt=Y({__name:"DataPlaneInboundSummaryOverviewView",props:{data:{},routeName:{}},setup(V){const u=V;return(nt,t)=>{const P=l("XBadge"),X=l("XCopyButton"),A=l("XTable"),$=l("XAction"),R=l("XCodeBlock"),N=l("XLayout"),T=l("XCard"),D=l("DataCollection"),S=l("DataLoader"),_=l("DataSource"),F=l("AppView"),O=l("RouteView");return r(),w(O,{params:{mesh:"",proxy:"",connection:""},name:u.routeName},{default:s(({t:j,route:B,uri:c})=>[n(F,null,{default:s(()=>[n(N,{type:"stack"},{default:s(()=>[n(A,{variant:"kv"},{default:s(()=>[o("tr",null,[t[0]||(t[0]=o("th",{scope:"row"},`
              Tags
            `,-1)),t[1]||(t[1]=e()),o("td",null,[n(K,{tags:u.data.tags,alignment:"right"},null,8,["tags"])])]),t[10]||(t[10]=e()),o("tr",null,[t[2]||(t[2]=o("th",{scope:"row"},`
              Protocol
            `,-1)),t[3]||(t[3]=e()),o("td",null,[n(P,{appearance:"info"},{default:s(()=>[e(g(j(`http.api.value.${u.data.protocol}`)),1)]),_:2},1024)])]),t[11]||(t[11]=e()),o("tr",null,[t[4]||(t[4]=o("th",{scope:"row"},`
              Address
            `,-1)),t[5]||(t[5]=e()),o("td",null,[n(X,{text:`${u.data.addressPort}`},null,8,["text"])])]),t[12]||(t[12]=e()),u.data.serviceAddressPort.length>0?(r(),a("tr",U,[t[6]||(t[6]=o("th",{scope:"row"},`
              Service address
            `,-1)),t[7]||(t[7]=e()),o("td",null,[n(X,{text:`${u.data.serviceAddressPort}`},null,8,["text"])])])):f("",!0),t[13]||(t[13]=e()),u.data.portName.length>0?(r(),a("tr",W,[t[8]||(t[8]=o("th",{scope:"row"},`
              Name
            `,-1)),t[9]||(t[9]=e()),o("td",null,[n(X,{text:`${u.data.portName}`},null,8,["text"])])])):f("",!0)]),_:2},1024),t[25]||(t[25]=e()),u.data?(r(),a("div",Z,[t[23]||(t[23]=o("h3",null,"Rules",-1)),t[24]||(t[24]=e()),n(_,{src:c(x(q),"/policy-types",{})},{default:s(({data:L,error:I})=>[n(_,{src:c(x(z),"/meshes/:mesh/rules/for/:dataplane",{mesh:B.params.mesh,dataplane:B.params.proxy})},{default:s(({data:C,error:M})=>[n(S,{data:[L,C],errors:[I,M]},{default:s(()=>[(r(!0),a(y,null,v([Object.groupBy(L?.policyTypes??[],({name:p})=>p)],p=>(r(),w(D,{key:`${typeof p}`,predicate:m=>(m.ruleType==="inbound"||m.ruleType==="from"&&!p[m.type]?.[0]?.policy.isFromAsRules)&&Number(m.inbound.port)===Number(B.params.connection.split("_")[1]),items:[...C.rules,...C.inboundRules]},{default:s(({items:m})=>[o("div",h,[n(G,{"initially-open":0,"multiple-open":"",class:"stack"},{default:s(()=>[(r(!0),a(y,null,v(Object.groupBy(m,k=>k.type),(k,b)=>(r(),w(T,{key:b},{default:s(()=>[n(H,null,{"accordion-header":s(()=>[n(J,{"policy-type":b},{default:s(()=>[e(g(b)+" ("+g(k.length)+`)
                                `,1)]),_:2},1032,["policy-type"])]),"accordion-content":s(()=>[n(A,{variant:"kv"},{default:s(()=>[(r(!0),a(y,null,v(k,i=>(r(),a(y,{key:i},[i.matchers.length>0?(r(),a("tr",tt,[t[14]||(t[14]=o("th",{scope:"row"},`
                                        From
                                      `,-1)),t[15]||(t[15]=e()),o("td",null,[o("p",null,[n(Q,{items:i.matchers},null,8,["items"])])])])):f("",!0),t[20]||(t[20]=e()),i.origins.length>0?(r(),a("tr",ot,[t[16]||(t[16]=o("th",{scope:"row"},`
                                        Origin policies
                                      `,-1)),t[17]||(t[17]=e()),o("td",null,[o("ul",null,[(r(!0),a(y,null,v(i.origins,d=>(r(),a("li",{key:`${d.mesh}-${d.name}`},[p[d.type]?(r(),w($,{key:0,to:{name:"policy-detail-view",params:{mesh:d.mesh,policyPath:p[d.type][0].path,policy:d.name}}},{default:s(()=>[e(g(d.name),1)]),_:2},1032,["to"])):(r(),a(y,{key:1},[e(g(d.name),1)],64))]))),128))])])])):f("",!0),t[21]||(t[21]=e()),o("tr",null,[o("td",et,[n(N,{type:"stack",size:"small"},{default:s(()=>[t[18]||(t[18]=o("span",null,"Config",-1)),t[19]||(t[19]=e()),n(R,{code:x(E).stringify(i.raw),language:"yaml","show-copy-button":!1},null,8,["code"])]),_:2},1024)])])],64))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)])]),_:2},1032,["predicate","items"]))),128))]),_:2},1032,["data","errors"])]),_:2},1032,["src"])]),_:2},1032,["src"])])):f("",!0)]),_:2},1024)]),_:2},1024)]),_:1},8,["name"])}}});export{dt as default};
