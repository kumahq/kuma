import{C as k}from"./CodeBlock-5115e1e1.js";import{C as B}from"./CopyButton-19f871c3.js";import{d as T,k as K,H as M,z as w,a as g,o as q,b as R,w as l,e as m,l as p,f as x,t as S,r as E}from"./index-a842a987.js";import{t as F}from"./toYaml-4e00099e.js";const z=T({__name:"ResourceCodeBlock",props:{resource:{},codeMaxHeight:{default:void 0},isSearchable:{type:Boolean,default:!1},query:{default:""},isFilterMode:{type:Boolean,default:!1},isRegExpMode:{type:Boolean,default:!1}},emits:["query-change","filter-mode-change","reg-exp-mode-change"],setup(h,{emit:b}){const{t:i}=K(),t=h,c=b,_=M(()=>f(t.resource)),u=w(()=>{});let d=new Promise((a,e)=>{u.value=n=>n(a,e)});const C=async a=>{let e;try{e=await d}finally{d=new Promise((n,s)=>{u.value=r=>r(n,s)})}return e};async function v(){return f(await C())}function f(a){const{creationTime:e,modificationTime:n,...s}=a;return F(s)}return(a,e)=>{const n=g("KTooltip"),s=g("KToggle");return q(),R(s,{toggled:!1},{default:l(({isToggled:r,toggle:y})=>[m(k,{language:"yaml",code:_.value,"is-searchable":t.isSearchable,"code-max-height":t.codeMaxHeight,query:t.query,"is-filter-mode":t.isFilterMode,"is-reg-exp-mode":t.isRegExpMode,onQueryChange:e[0]||(e[0]=o=>c("query-change",o)),onFilterModeChange:e[1]||(e[1]=o=>c("filter-mode-change",o)),onRegExpModeChange:e[2]||(e[2]=o=>c("reg-exp-mode-change",o))},{"secondary-actions":l(()=>[m(n,{class:"kubernetes-copy-button-tooltip",label:p(i)("common.copyKubernetesText"),placement:"bottomEnd","max-width":"200","position-fixed":""},{default:l(()=>[m(B,{class:"kubernetes-copy-button","get-text":v,"copy-text":p(i)("common.copyKubernetesText"),"has-border":"","hide-title":"","icon-color":"currentColor",onClick:()=>{r.value===!1&&y()}},{default:l(()=>[x(S(p(i)("common.copyKubernetesShortText")),1)]),_:2},1032,["copy-text","onClick"])]),_:2},1032,["label"])]),_:2},1032,["code","is-searchable","code-max-height","query","is-filter-mode","is-reg-exp-mode"]),x(),E(a.$slots,"default",{copy:o=>{r.value!==!1&&y(),u.value(o)},copying:r.value})]),_:3})}}});export{z as _};
