import{d as $,r as t,p as m,o as l,w as o,b as s,e as y,m as D,H as z,F as E,l as f,c as d,N as u,L as w,n as H,t as R,y as j,_ as q}from"./index-BQCKYSWR.js";const G={class:"policy-list-content"},J={class:"policy-count"},K={class:"policy-list"},M=$({__name:"PolicyTypeListView",setup(O){return(Q,c)=>{const L=t("RouteTitle"),P=t("XAction"),T=t("DataCollection"),x=t("DataLoader"),A=t("XCard"),B=t("RouterView"),v=t("DataSource"),N=t("AppView"),X=t("RouteView");return l(),m(X,{name:"policy-list-view",params:{mesh:"",policyPath:"",policy:""}},{default:o(({uri:V,route:_,t:S})=>[s(L,{render:!1,title:S("policies.routes.types.title")},null,8,["title"]),c[2]||(c[2]=y()),s(N,null,{default:o(()=>[s(v,{src:V(D(z),"/mesh-insights/:name",{name:_.params.mesh},{})},{default:o(({data:e})=>[s(v,{src:V(D(E),"/policy-types",{})},{default:o(({data:p,error:b})=>[f("div",G,[s(A,{class:"policy-type-list","data-testid":"policy-type-list"},{default:o(()=>[s(x,{data:[p],errors:[b]},{default:o(()=>[(l(!0),d(u,null,w([typeof(e==null?void 0:e.policies)>"u"?p.policyTypes:p.policyTypes.filter(i=>{var n,a;return!i.policy.isTargetRef&&(((a=(n=e.policies)==null?void 0:n[i.name])==null?void 0:a.total)??0)>0})],i=>(l(),m(T,{key:i,predicate:typeof(e==null?void 0:e.policies)>"u"?void 0:n=>i.length>0||n.policy.isTargetRef,items:p.policyTypes},{default:o(({items:n})=>[(l(!0),d(u,null,w([n.find(a=>a.path===_.params.policyPath)],a=>(l(),d(u,{key:a},[(l(!0),d(u,null,w(n,(r,F)=>{var k,C;return l(),d("div",{key:r.path,class:H(["policy-type-link-wrapper",{"policy-type-link-wrapper--is-active":a&&a.path===r.path}])},[s(P,{class:"policy-type-link",to:{name:"policy-list-view",params:{mesh:_.params.mesh,policyPath:r.path}},mount:_.params.policyPath.length===0&&F===0?_.replace:void 0,"data-testid":`policy-type-link-${r.name}`},{default:o(()=>[y(R(r.name),1)]),_:2},1032,["to","mount","data-testid"]),c[0]||(c[0]=y()),f("div",J,R(((C=(k=e==null?void 0:e.policies)==null?void 0:k[r.name])==null?void 0:C.total)??0),1)],2)}),128))],64))),128))]),_:2},1032,["predicate","items"]))),128))]),_:2},1032,["data","errors"])]),_:2},1024),c[1]||(c[1]=y()),f("div",K,[s(B,null,{default:o(({Component:i})=>[(l(),m(j(i),{"policy-types":p==null?void 0:p.policyTypes},null,8,["policy-types"]))]),_:2},1024)])])]),_:2},1032,["src"])]),_:2},1032,["src"])]),_:2},1024)]),_:1,__:[2]})}}}),W=q(M,[["__scopeId","data-v-850520bd"]]);export{W as default};
