import{d as A,r as y,p as _,o as r,w as t,b as d,e,l as b,c as u,N as c,L as g,M as N,t as n,q as h,O as m,m as C,aj as R,a as B,$ as D}from"./index-fotWGtG0.js";const E={class:"stack-with-borders"},F={key:1,class:"mt-8 stack-with-borders"},T=A({__name:"SubscriptionSummaryView",props:{data:{},routeName:{}},setup(w){const k=w;return(S,s)=>{const I=y("XSelect"),f=y("XLayout"),v=y("XAlert"),x=y("XCodeBlock"),z=y("AppView"),V=y("DataCollection"),X=y("RouteView");return r(),_(X,{name:k.routeName,params:{subscription:"",codeSearch:"",codeFilter:!1,codeRegExp:!1,output:String}},{default:t(({route:p,t:l})=>[d(V,{items:k.data,predicate:a=>a.id===p.params.subscription},{item:t(({item:a})=>[d(z,null,{title:t(()=>[b("h2",null,n(a.zoneInstanceId??a.globalInstanceId??a.controlPlaneInstanceId),1)]),default:t(()=>[s[17]||(s[17]=e()),d(f,{type:"stack"},{default:t(()=>[b("header",null,[d(f,{type:"separated",justify:"end"},{default:t(()=>[(r(),u(c,null,g([["structured","yaml"]],o=>d(I,{key:typeof o,label:l("subscriptions.routes.item.format"),selected:p.params.output,onChange:i=>{p.update({output:i})}},N({_:2},[g(o,i=>({name:`${i}-option`,fn:t(()=>[e(n(l(`subscriptions.routes.item.formats.${i}`)),1)])}))]),1032,["label","selected","onChange"])),64))]),_:2},1024)]),s[16]||(s[16]=e()),p.params.output==="structured"?(r(),_(f,{key:0,type:"stack","data-testid":"structured-view"},{default:t(()=>[b("div",E,[d(m,{layout:"horizontal"},{title:t(()=>[e(n(l("http.api.property.version")),1)]),body:t(()=>{var o,i;return[(r(!0),u(c,null,g([(i=(o=a.version)==null?void 0:o.kumaCp)==null?void 0:i.version],$=>(r(),u(c,null,[e(n($??"-"),1)],64))),256))]}),_:2,__:[0]},1024),s[6]||(s[6]=e()),d(m,{layout:"horizontal"},{title:t(()=>[e(n(l("http.api.property.connectTime")),1)]),body:t(()=>[e(n(l("common.formats.datetime",{value:Date.parse(a.connectTime??"")})),1)]),_:2,__:[1]},1024),s[7]||(s[7]=e()),a.disconnectTime?(r(),_(m,{key:0,layout:"horizontal"},{title:t(()=>[e(n(l("http.api.property.disconnectTime")),1)]),body:t(()=>[e(n(l("common.formats.datetime",{value:Date.parse(a.disconnectTime)})),1)]),_:2,__:[2]},1024)):h("",!0),s[8]||(s[8]=e()),d(m,{layout:"horizontal"},{title:t(()=>[e(n(l("subscriptions.routes.item.headers.responses")),1)]),body:t(()=>{var o;return[(r(!0),u(c,null,g([((o=a.status)==null?void 0:o.total)??{}],i=>(r(),u(c,null,[e(n(i.responsesSent)+"/"+n(i.responsesAcknowledged),1)],64))),256))]}),_:2,__:[3]},1024),s[9]||(s[9]=e()),(r(),u(c,null,g(["zoneInstanceId","globalInstanceId","controlPlaneInstanceId"],o=>(r(),u(c,{key:typeof o},[a[o]?(r(),_(m,{key:0,layout:"horizontal"},{title:t(()=>[e(n(l(`http.api.property.${o}`)),1)]),body:t(()=>[e(n(a[o]),1)]),_:2,__:[4]},1024)):h("",!0)],64))),64)),s[10]||(s[10]=e()),d(m,{layout:"horizontal"},{title:t(()=>[e(n(l("http.api.property.id")),1)]),body:t(()=>[e(n(a.id),1)]),_:2,__:[5]},1024)]),s[15]||(s[15]=e()),Object.keys(a.status.acknowledgements).length===0?(r(),_(v,{key:0,variant:"info"},{icon:t(()=>[d(C(R))]),default:t(()=>[e(" "+n(l("common.detail.subscriptions.no_stats",{id:a.id})),1)]),_:2},1024)):(r(),u("div",F,[b("div",null,[B(S.$slots,"default")]),s[13]||(s[13]=e()),d(m,{class:"mt-4",layout:"horizontal"},{title:t(()=>[b("strong",null,n(l("subscriptions.routes.item.headers.type")),1)]),body:t(()=>[e(n(l("subscriptions.routes.item.headers.stat")),1)]),_:2,__:[11]},1024),s[14]||(s[14]=e()),(r(!0),u(c,null,g(Object.entries(a.status.acknowledgements??{}),([o,i])=>(r(),_(m,{key:o,layout:"horizontal"},{title:t(()=>[e(n(l(`http.api.property.${o}`)),1)]),body:t(()=>[e(n(i.responsesSent)+"/"+n(i.responsesAcknowledged),1)]),_:2,__:[12]},1024))),128))]))]),_:2,__:[15]},1024)):(r(),_(x,{key:1,language:"yaml",code:C(D).stringify(a.$raw),"is-searchable":"",query:p.params.codeSearch,"is-filter-mode":p.params.codeFilter,"is-reg-exp-mode":p.params.codeRegExp,onQueryChange:o=>p.update({codeSearch:o}),onFilterModeChange:o=>p.update({codeFilter:o}),onRegExpModeChange:o=>p.update({codeRegExp:o})},null,8,["code","query","is-filter-mode","is-reg-exp-mode","onQueryChange","onFilterModeChange","onRegExpModeChange"]))]),_:2,__:[16]},1024)]),_:2,__:[17]},1024)]),_:2},1032,["items","predicate"])]),_:3},8,["name"])}}});export{T as default};
