import{L as g}from"./kongponents.es-8abed680.js";import{k as l}from"./kumaApi-de9fdcba.js";import{_ as h}from"./CodeBlock.vue_vue_type_style_index_0_lang-be31e96b.js";import{_ as v}from"./EmptyBlock.vue_vue_type_script_setup_true_lang-c8983716.js";import{E}from"./ErrorBlock-31dfb839.js";import{_ as N}from"./LoadingBlock.vue_vue_type_script_setup_true_lang-55d18240.js";import{d as _,o as r,h as f,a as i,O as k,r as d,s as u,k as q,g as z,e as c,w as p,f as y,u as P}from"./runtime-dom.esm-bundler-a6f4ece5.js";import{_ as S}from"./_plugin-vue_export-helper-c27b6911.js";const B={key:3},I=_({__name:"StatusInfo",props:{isLoading:{type:Boolean,default:!1},hasError:{type:Boolean,default:!1},isEmpty:{type:Boolean,default:!1},error:{type:[Error,null],required:!1,default:null}},setup(t){return(e,s)=>(r(),f("div",null,[t.isLoading?(r(),i(N,{key:0})):t.hasError?(r(),i(E,{key:1,error:t.error},null,8,["error"])):t.isEmpty?(r(),i(v,{key:2})):(r(),f("div",B,[k(e.$slots,"default")]))]))}}),$={class:"envoy-data"},D={class:"envoy-data-actions"},b=_({__name:"EnvoyData",props:{dataPath:{type:String,required:!0},queryKey:{type:String,required:!1,default:null},mesh:{type:String,required:!1,default:""},dppName:{type:String,required:!1,default:""},zoneIngressName:{type:String,required:!1,default:""},zoneEgressName:{type:String,required:!1,default:""}},setup(t){const e=t,s=d(!0),n=d(null),m=d("");u(()=>e.dppName,function(){o()}),u(()=>e.zoneIngressName,function(){o()}),u(()=>e.zoneEgressName,function(){o()}),q(function(){o()});async function o(){n.value=null,s.value=!0;try{let a="";e.mesh!==""&&e.dppName!==""?a=await l.getDataplaneData({dataPath:e.dataPath,mesh:e.mesh,dppName:e.dppName}):e.zoneIngressName!==""?a=await l.getZoneIngressData({dataPath:e.dataPath,zoneIngressName:e.zoneIngressName}):e.zoneEgressName!==""&&(a=await l.getZoneEgressData({dataPath:e.dataPath,zoneEgressName:e.zoneEgressName})),m.value=typeof a=="string"?a:JSON.stringify(a,null,2)}catch(a){a instanceof Error?n.value=a:console.error(a)}finally{s.value=!1}}return(a,w)=>(r(),f("div",$,[z("div",D,[c(P(g),{disabled:s.value,appearance:"primary",icon:"redo","data-testid":"envoy-data-refresh-button",onClick:o},{default:p(()=>[y(`
        Refresh
      `)]),_:1},8,["disabled"])]),y(),c(I,{"has-error":n.value!==null,"is-loading":s.value,error:n.value},{default:p(()=>[c(h,{id:`code-block-${e.dataPath}`,language:"json",code:m.value,"is-searchable":"","query-key":e.queryKey??`code-block-${e.dataPath}`},null,8,["id","code","query-key"])]),_:1},8,["has-error","is-loading","error"])]))}});const A=S(b,[["__scopeId","data-v-de6c5066"]]);export{A as E,I as _};
