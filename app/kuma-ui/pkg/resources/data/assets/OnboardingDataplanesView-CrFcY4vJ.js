import{L as x}from"./LoadingBox-CTaWeX5v.js";import{O as y,a as V,b as D}from"./OnboardingPage-CjkxA17Y.js";import{S as N}from"./StatusBadge-cZhZhGXg.js";import{d as O,a as o,o as s,b as d,w as t,e as n,f as i,c as u,F as _,G as m,t as p,m as l,q as S,_ as B}from"./index-BvBYCJa7.js";const L={class:"status-loading-box mb-4"},T={key:0},C=O({__name:"OnboardingDataplanesView",setup(R){return(F,P)=>{const g=o("RouteTitle"),b=o("KTable"),h=o("DataLoader"),f=o("DataSource"),w=o("AppView"),v=o("RouteView");return s(),d(v,{name:"onboarding-dataplanes-view"},{default:t(({t:c})=>[n(g,{title:c("onboarding.routes.dataplanes-overview.title"),render:!1},null,8,["title"]),i(),n(w,null,{default:t(()=>[n(f,{src:"/dataplanes/poll?page=1&size=10"},{default:t(({data:e,error:k})=>[(s(!0),u(_,null,m([((e==null?void 0:e.items)??[]).some(r=>r.status!=="online")],r=>(s(),d(y,{key:r},{header:t(()=>[(s(!0),u(_,null,m([r?"waiting":"success"],a=>(s(),d(V,{key:a,"data-testid":`state-${a}`},{title:t(()=>[i(p(c(`onboarding.routes.dataplanes-overview.header.${a}.title`)),1)]),description:t(()=>[l("p",null,p(c(`onboarding.routes.dataplanes-overview.header.${a}.description`)),1)]),_:2},1032,["data-testid"]))),128))]),content:t(()=>[n(h,{data:[e],errors:[k]},{connecting:t(()=>[l("div",L,[n(x)])]),default:t(()=>[i(),e?(s(),u("div",T,[l("p",null,[l("strong",null,`
                      Found `+p(e.items.length)+` DPPs:
                    `,1)]),i(),n(b,{class:"mb-4","data-testid":"dataplanes-table","fetcher-cache-key":JSON.stringify(e),fetcher:(a=>()=>({data:a.items,total:a.items.length}))(e),headers:[{label:"Mesh",key:"mesh"},{label:"Name",key:"name"},{label:"Status",key:"status"}],"disable-pagination":""},{status:t(({row:a})=>[n(N,{status:a.status},null,8,["status"])]),_:2},1032,["fetcher-cache-key","fetcher"])])):S("",!0)]),_:2},1032,["data","errors"])]),navigation:t(()=>[n(D,{"next-step":"onboarding-completed-view","previous-step":"onboarding-add-new-services-code-view","should-allow-next":((e==null?void 0:e.items)??[]).length>0},null,8,["should-allow-next"])]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)]),_:1})}}}),z=B(C,[["__scopeId","data-v-35e1f0a0"]]);export{z as default};
