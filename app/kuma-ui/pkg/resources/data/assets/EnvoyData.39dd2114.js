import{C as f}from"./CodeBlock.58f32651.js";import{d as h,N as m,e as l,c as s,E as p,o as t,_ as c,K as r,w as y,a as g,r as d}from"./index.04875eef.js";import{_ as E}from"./EmptyBlock.vue_vue_type_script_setup_true_lang.0fcd7b43.js";import{E as v}from"./ErrorBlock.08062bd2.js";import{_ as N}from"./LoadingBlock.vue_vue_type_script_setup_true_lang.4361c91d.js";const k={class:"status-info"},S={key:3},I=h({__name:"StatusInfo",props:{isLoading:{type:Boolean,default:!1},hasError:{type:Boolean,default:!1},isEmpty:{type:Boolean,default:!1},error:{type:[Error,m],required:!1,default:null}},setup(e){return(n,a)=>(t(),l("div",k,[e.isLoading?(t(),s(N,{key:0})):e.hasError?(t(),s(v,{key:1,error:e.error},null,8,["error"])):e.isEmpty?(t(),s(E,{key:2})):(t(),l("div",S,[p(n.$slots,"default",{},void 0,!0)]))]))}});const C=c(I,[["__scopeId","data-v-3029b7cf"]]);const q={name:"EnvoyData",components:{CodeBlock:f,StatusInfo:C},props:{dataPath:{type:String,required:!0},queryKey:{type:String,required:!1,default:null},mesh:{type:String,required:!1,default:""},dppName:{type:String,required:!1,default:""},zoneIngressName:{type:String,required:!1,default:""},zoneEgressName:{type:String,required:!1,default:""}},data(){return{isLoading:!0,error:null}},watch:{dppName(){this.fetchContent()},zoneIngressName(){this.fetchContent()},zoneEgressName(){this.fetchContent()}},mounted(){this.fetchContent()},methods:{async fetchContent(){this.error=null,this.isLoading=!0;try{let e="";this.mesh!==""&&this.dppName!==""?e=await r.getDataplaneData({dataPath:this.dataPath,mesh:this.mesh,dppName:this.dppName}):this.zoneIngressName!==""?e=await r.getZoneIngressData({dataPath:this.dataPath,zoneIngressName:this.zoneIngressName}):this.zoneEgressName!==""&&(e=await r.getZoneEgressData({dataPath:this.dataPath,zoneEgressName:this.zoneEgressName})),this.content=typeof e=="string"?e:JSON.stringify(e,null,2)}catch(e){this.error=e}finally{this.isLoading=!1}}}};function z(e,n,a,B,o,P){const u=d("CodeBlock"),_=d("StatusInfo");return t(),s(_,{class:"envoy-data","has-error":o.error!==null,"is-loading":o.isLoading,error:o.error},{default:y(()=>{var i;return[g(u,{id:`code-block-${a.dataPath}`,language:"json",code:e.content,"is-searchable":"","query-key":(i=a.queryKey)!=null?i:`code-block-${a.dataPath}`},null,8,["id","code","query-key"])]}),_:1},8,["has-error","is-loading","error"])}const K=c(q,[["render",z],["__scopeId","data-v-355e11c9"]]);export{K as E,C as S};
