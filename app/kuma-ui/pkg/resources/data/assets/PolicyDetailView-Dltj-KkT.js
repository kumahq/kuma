import{d as B,r as m,o as r,q as d,w as e,b as n,R as z,e as a,t as s,s as u,c as w,m as g,p as N,am as x,A as G,K as L,G as S}from"./index-CKQWVGYP.js";import{S as T}from"./SummaryView-DHZPnesw.js";const q={key:0},$=B({__name:"PolicyDetailView",props:{data:{}},setup(k){const p=k;return(E,t)=>{const y=m("XBadge"),_=m("XAction"),C=m("XAboutCard"),b=m("XActionGroup"),v=m("RouterView"),A=m("DataCollection"),R=m("DataLoader"),V=m("XCard"),X=m("AppView"),D=m("RouteView");return r(),d(D,{name:"policy-detail-view",params:{page:1,size:50,s:"",mesh:"",policy:"",policyPath:"",dataPlane:""}},{default:e(({route:o,t:c,uri:P,can:h,me:f})=>[n(X,null,{default:e(()=>[n(C,{title:c("policies.detail.about.title"),created:p.data.creationTime,modified:p.data.modificationTime},{default:e(()=>[n(z,{layout:"horizontal"},{title:e(()=>[a(s(c("http.api.property.type")),1)]),body:e(()=>[n(y,{appearance:"decorative"},{default:e(()=>[a(s(p.data.type),1)]),_:1})]),_:2},1024),t[5]||(t[5]=a()),p.data.namespace.length>0?(r(),d(z,{key:0,layout:"horizontal"},{title:e(()=>[a(s(c("http.api.property.namespace")),1)]),body:e(()=>[n(y,{appearance:"decorative"},{default:e(()=>[a(s(p.data.namespace),1)]),_:1})]),_:2},1024)):u("",!0),t[6]||(t[6]=a()),h("use zones")&&p.data.zone?(r(),d(z,{key:1,layout:"horizontal"},{title:e(()=>[a(s(c("http.api.property.zone")),1)]),body:e(()=>[n(y,{appearance:"decorative"},{default:e(()=>[n(_,{to:{name:"zone-cp-detail-view",params:{zone:p.data.zone}}},{default:e(()=>[a(s(p.data.zone),1)]),_:1},8,["to"])]),_:1})]),_:2},1024)):u("",!0),t[7]||(t[7]=a()),p.data.spec?(r(),d(z,{key:2,layout:"horizontal"},{title:e(()=>[a(s(c("http.api.property.targetRef")),1)]),body:e(()=>[p.data.spec.targetRef?(r(),d(y,{key:0,appearance:"neutral"},{default:e(()=>[a(s(p.data.spec.targetRef.kind),1),p.data.spec.targetRef.name?(r(),w("span",q,[t[3]||(t[3]=a(":")),g("b",null,s(p.data.spec.targetRef.name),1)])):u("",!0)]),_:1})):(r(),d(y,{key:1,appearance:"neutral"},{default:e(()=>[a(s(c("http.api.property.mesh")),1)]),_:2},1024))]),_:2},1024)):u("",!0)]),_:2},1032,["title","created","modified"]),t[14]||(t[14]=a()),g("div",null,[t[12]||(t[12]=g("h3",null,`
          Affected Data Plane Proxies
        `,-1)),t[13]||(t[13]=a()),n(V,{class:"mt-4"},{default:e(()=>[n(R,{src:P(N(x),"/meshes/:mesh/policy-path/:path/policy/:name/dataplanes",{mesh:o.params.mesh,path:o.params.policyPath,name:o.params.policy},{page:o.params.page,size:o.params.size})},{loadable:e(({data:l})=>[n(A,{type:"data-planes",items:(l==null?void 0:l.items)??[void 0],page:o.params.page,"page-size":o.params.size,total:l==null?void 0:l.total,onChange:o.update},{default:e(()=>[n(G,{headers:[{...f.get("headers.name"),label:"Name",key:"name"},{...f.get("headers.namespace"),label:"Namespace",key:"namespace"},...h("use zones")?[{...f.get("headers.zone"),label:"Zone",key:"zone"}]:[],{...f.get("headers.actions"),label:"Actions",key:"actions",hideLabel:!0}],items:l==null?void 0:l.items,"is-selected-row":i=>i.id===o.params.dataPlane,onResize:f.set},{name:e(({row:i})=>[n(_,{"data-action":"",to:{name:"data-plane-detail-view",params:{dataPlane:i.id}}},{default:e(()=>[a(s(i.name),1)]),_:2},1032,["to"])]),namespace:e(({row:i})=>[a(s(i.namespace),1)]),zone:e(({row:i})=>[i.zone?(r(),d(_,{key:0,to:{name:"zone-cp-detail-view",params:{zone:i.zone}}},{default:e(()=>[a(s(i.zone),1)]),_:2},1032,["to"])):(r(),w(L,{key:1},[a(s(c("common.collection.none")),1)],64))]),actions:e(({row:i})=>[n(b,null,{default:e(()=>[n(_,{to:{name:"data-plane-detail-view",params:{dataPlane:i.id}}},{default:e(()=>[a(s(c("common.collection.actions.view")),1)]),_:2},1032,["to"])]),_:2},1024)]),_:2},1032,["headers","items","is-selected-row","onResize"]),t[11]||(t[11]=a()),n(v,null,{default:e(({Component:i})=>[o.child()?(r(),d(T,{key:0,onClose:F=>o.replace({params:{mesh:o.params.mesh},query:{page:o.params.page,size:o.params.size,s:o.params.s}})},{default:e(()=>[typeof l<"u"?(r(),d(S(i),{key:0,items:l.items},null,8,["items"])):u("",!0)]),_:2},1032,["onClose"])):u("",!0)]),_:2},1024)]),_:2},1032,["items","page","page-size","total","onChange"])]),_:2},1032,["src"])]),_:2},1024)])]),_:2},1024)]),_:1})}}});export{$ as default};
