import{C as M}from"./CodeBlock-Lphgg1S3.js";import{d as T,ae as E,a as g,o as B,b as S,w as u,e as p,af as F,p as x,ag as R,f as h,r as v,m as q,t as K,_ as A,l as P,J as H,B as L,c as N}from"./index-C0P2XlBb.js";import{t as $}from"./toYaml-DB9FPXFY.js";const I={class:"visually-hidden"},U={inheritAttrs:!1},V=T({...U,__name:"CopyButton",props:{text:{default:""},getText:{type:[Function,null],default:null},copyText:{default:"Copy"},tooltipSuccessText:{default:"Copied code!"},tooltipFailText:{default:"Failed to copy!"},hasBorder:{type:Boolean,default:!1},iconColor:{default:E}},setup(_){const o=_;async function d(t,r){const n=t.currentTarget;let s=!1;try{const a=o.getText?await o.getText():o.text;s=await r(a)}catch{s=!1}finally{const a=s?o.tooltipSuccessText:o.tooltipFailText;n instanceof HTMLButtonElement&&(n.setAttribute("data-tooltip-copy-success",String(s)),n.setAttribute("data-tooltip-text",a),window.setTimeout(function(){n instanceof HTMLButtonElement&&n.removeAttribute("data-tooltip-text")},1500))}}return(t,r)=>{const n=g("KButton"),s=g("KClipboardProvider");return B(),S(s,null,{default:u(({copyToClipboard:a})=>[p(n,F(t.$attrs,{appearance:"tertiary",class:["copy-button",{"non-visual-button":!o.hasBorder}],"data-testid":"copy-button",type:"button",onClick:y=>d(y,a)}),{default:u(()=>[p(x(R),{color:o.iconColor},null,8,["color"]),h(),v(t.$slots,"default",{},()=>[q("span",I,K(o.copyText),1)],!0)]),_:2},1040,["class","onClick"])]),_:3})}}}),Y=A(V,[["__scopeId","data-v-20ae87cf"]]),Q=T({__name:"ResourceCodeBlock",props:{resource:{},codeMaxHeight:{default:void 0},isSearchable:{type:Boolean,default:!1},query:{default:""},isFilterMode:{type:Boolean,default:!1},isRegExpMode:{type:Boolean,default:!1}},emits:["query-change","filter-mode-change","reg-exp-mode-change"],setup(_,{emit:o}){const{t:d}=P(),t=_,r=o,n=H(()=>b(t.resource)),a=L(()=>{});let y=new Promise((c,e)=>{a.value=i=>i(c,e)});const k=async c=>{let e;try{e=await y}finally{y=new Promise((i,f)=>{a.value=m=>m(i,f)})}return e};async function w(){return b(await k())}function b(c){const{creationTime:e,modificationTime:i,...f}=c;return $(f)}return(c,e)=>{const i=g("KTooltip"),f=g("KToggle");return B(),N("div",null,[p(f,{toggled:!1},{default:u(({isToggled:m,toggle:C})=>[p(M,{language:"yaml",code:n.value,"is-searchable":t.isSearchable,"code-max-height":t.codeMaxHeight,query:t.query,"is-filter-mode":t.isFilterMode,"is-reg-exp-mode":t.isRegExpMode,onQueryChange:e[0]||(e[0]=l=>r("query-change",l)),onFilterModeChange:e[1]||(e[1]=l=>r("filter-mode-change",l)),onRegExpModeChange:e[2]||(e[2]=l=>r("reg-exp-mode-change",l))},{"secondary-actions":u(()=>[p(i,{class:"kubernetes-copy-button-tooltip",text:x(d)("common.copyKubernetesText"),placement:"bottomEnd","max-width":"200"},{default:u(()=>[p(Y,{class:"kubernetes-copy-button","get-text":w,"copy-text":x(d)("common.copyKubernetesText"),"has-border":"","icon-color":"currentColor",onClick:()=>{m.value===!1&&C()}},{default:u(()=>[h(K(x(d)("common.copyKubernetesShortText")),1)]),_:2},1032,["copy-text","onClick"])]),_:2},1032,["text"])]),_:2},1032,["code","is-searchable","code-max-height","query","is-filter-mode","is-reg-exp-mode"]),h(),v(c.$slots,"default",{copy:l=>{m.value!==!1&&C(),a.value(l)},copying:m.value})]),_:3})])}}});export{Q as _};
