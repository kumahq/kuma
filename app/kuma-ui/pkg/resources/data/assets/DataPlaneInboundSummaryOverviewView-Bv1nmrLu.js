import{d as q,r as p,p as d,o,w as n,b as l,c as a,e as r,q as g,N as u,L as i,l as e,t as w,m as v,F as T,ab as E,Y as K}from"./index-BRjpzT8y.js";import{A as M,a as G}from"./AccordionList-DK7iHE21.js";import{P as H}from"./PolicyTypeTag-BC5WNB7e.js";import{T as J}from"./TagList-BVh3s4pw.js";const Q={key:0},U={key:1},W={colspan:"2"},rt=q({__name:"DataPlaneInboundSummaryOverviewView",props:{data:{},dataPlaneOverview:{},routeName:{}},setup(_){const m=_;return(Z,t)=>{const O=p("XBadge"),X=p("XCopyButton"),A=p("XTable"),$=p("XAction"),D=p("XCodeBlock"),x=p("XLayout"),b=p("XCard"),z=p("DataLoader"),B=p("DataSource"),F=p("AppView"),I=p("RouteView");return o(),d(I,{params:{mesh:"",proxy:"",connection:""},name:m.routeName},{default:n(({t:R,route:C,uri:P})=>[l(F,null,{default:n(()=>[l(x,{type:"stack"},{default:n(()=>[(o(!0),a(u,null,i([m.dataPlaneOverview.dataplane.networking.inbounds.find(s=>s.port===m.data.port)],s=>(o(),a(u,{key:typeof s},[s?(o(),d(A,{key:0,variant:"kv"},{default:n(()=>[e("tr",null,[t[0]||(t[0]=e("th",{scope:"row"},`
                Tags
              `,-1)),t[1]||(t[1]=r()),e("td",null,[l(J,{tags:s.tags,alignment:"right"},null,8,["tags"])])]),t[10]||(t[10]=r()),e("tr",null,[t[2]||(t[2]=e("th",{scope:"row"},`
                Protocol
              `,-1)),t[3]||(t[3]=r()),e("td",null,[l(O,{appearance:"info"},{default:n(()=>[r(w(R(`http.api.value.${s.protocol}`)),1)]),_:2},1024)])]),t[11]||(t[11]=r()),e("tr",null,[t[4]||(t[4]=e("th",{scope:"row"},`
                Address
              `,-1)),t[5]||(t[5]=r()),e("td",null,[l(X,{text:`${s.addressPort}`},null,8,["text"])])]),t[12]||(t[12]=r()),s.serviceAddressPort.length>0?(o(),a("tr",Q,[t[6]||(t[6]=e("th",{scope:"row"},`
                Service address
              `,-1)),t[7]||(t[7]=r()),e("td",null,[l(X,{text:`${s.serviceAddressPort}`},null,8,["text"])])])):g("",!0),t[13]||(t[13]=r()),s.portName.length>0?(o(),a("tr",U,[t[8]||(t[8]=e("th",{scope:"row"},`
                Name
              `,-1)),t[9]||(t[9]=r()),e("td",null,[l(X,{text:`${s.portName}`},null,8,["text"])])])):g("",!0)]),_:2},1024)):g("",!0)],64))),128)),t[22]||(t[22]=r()),m.data?(o(),d(x,{key:0,type:"stack",size:"small"},{default:n(()=>[t[20]||(t[20]=e("h3",null,"Policies",-1)),t[21]||(t[21]=r()),l(B,{src:P(v(T),"/policy-types",{})},{default:n(({data:s,error:Y})=>[l(B,{src:P(v(T),"/meshes/:mesh/dataplanes/:name/policies/for/inbound/:kri",{mesh:C.params.mesh,name:C.params.proxy,kri:m.data.kri})},{default:n(({data:N,error:j})=>[l(z,{data:[s,N],errors:[Y,j]},{default:n(()=>[(o(!0),a(u,null,i([Object.groupBy(s?.policyTypes??[],({name:y})=>y)],y=>(o(),d(M,{key:`${typeof y}`,"initially-open":0,"multiple-open":"",class:"stack","data-testid":"inbound-policies-rules"},{default:n(()=>[(o(!0),a(u,null,i(N?.policies||[],({rules:L,kind:f,origins:V})=>(o(),d(b,{key:f},{default:n(()=>[l(G,null,{"accordion-header":n(()=>[l(H,{"policy-type":f},{default:n(()=>[r(w(f)+" ("+w(L.length)+`)
                            `,1)]),_:2},1032,["policy-type"])]),"accordion-content":n(()=>[l(A,{variant:"kv"},{default:n(()=>[(o(!0),a(u,null,i(L,c=>(o(),a(u,{key:c},[V.length>0?(o(),a(u,{key:0},[e("tr",null,[t[14]||(t[14]=e("th",{scope:"row"},`
                                      Origin policies
                                    `,-1)),t[15]||(t[15]=r()),e("td",null,[e("ul",null,[(o(!0),a(u,null,i(V,k=>(o(),a("li",{key:k.kri},[(o(!0),a(u,null,i([v(E).fromString(k.kri)],S=>(o(),a(u,{key:typeof S},[y[f]?(o(),d($,{key:0,to:{name:"policy-detail-view",params:{mesh:S.mesh,policyPath:y[f][0].path,policy:k.kri}}},{default:n(()=>[r(w(k.kri),1)]),_:2},1032,["to"])):(o(),a(u,{key:1},[r(w(k.kri),1)],64))],64))),128))]))),128))])])]),t[18]||(t[18]=r()),e("tr",null,[e("td",W,[l(x,{type:"stack",size:"small"},{default:n(()=>[t[16]||(t[16]=e("span",null,"Config",-1)),t[17]||(t[17]=r()),l(D,{code:v(K).stringify(c.conf),language:"yaml","show-copy-button":!1},null,8,["code"])]),_:2},1024)])])],64)):g("",!0)],64))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024))),128))]),_:2},1032,["data","errors"])]),_:2},1032,["src"])]),_:2},1032,["src"])]),_:2},1024)):g("",!0)]),_:2},1024)]),_:2},1024)]),_:1},8,["name"])}}});export{rt as default};
