import{d as j,r as l,p as u,o as a,w as e,b as r,e as n,q as A,l as o,t as c,m as f,F as L,c as s,N as p,L as k,ab as q,Y as E}from"./index-B6dw6ELq.js";import{A as I,a as K}from"./AccordionList-CXKxf3La.js";import{P as M}from"./PolicyTypeTag-Dep4S4PS.js";const G={colspan:"2"},W=j({__name:"DataPlaneOutboundSummaryOverviewView",props:{data:{},routeName:{}},setup(N){const d=N;return(H,t)=>{const P=l("XBadge"),X=l("XTable"),x=l("XAction"),S=l("XCodeBlock"),_=l("XLayout"),D=l("XCard"),O=l("DataLoader"),b=l("DataSource"),T=l("AppView"),z=l("RouteView");return a(),u(z,{params:{mesh:"",proxy:"",connection:""},name:d.routeName},{default:e(({t:F,route:g,uri:v})=>[r(T,null,{default:e(()=>[r(_,{type:"stack"},{default:e(()=>[r(X,{variant:"kv"},{default:e(()=>[o("tr",null,[t[0]||(t[0]=o("th",{scope:"row"},`
              Protocol
            `,-1)),t[1]||(t[1]=n()),o("td",null,[r(P,{appearance:"info"},{default:e(()=>[n(c(F(`http.api.value.${d.data.protocol}`)),1)]),_:2},1024)])]),t[4]||(t[4]=n()),o("tr",null,[t[2]||(t[2]=o("th",{scope:"row"},`
              Port
            `,-1)),t[3]||(t[3]=n()),o("td",null,c(d.data.port),1)])]),_:2},1024),t[13]||(t[13]=n()),d.data?(a(),u(_,{key:0,type:"stack",size:"small"},{default:e(()=>[t[11]||(t[11]=o("h3",null,"Policies",-1)),t[12]||(t[12]=n()),r(b,{src:v(f(L),"/policy-types",{})},{default:e(({data:B,error:R})=>[r(b,{src:v(f(L),"/meshes/:mesh/dataplanes/:name/policies/for/outbound/:kri",{mesh:g.params.mesh,name:g.params.proxy,kri:d.data.kri})},{default:e(({data:C,error:Y})=>[r(O,{data:[B,C],errors:[R,Y]},{default:e(()=>[(a(!0),s(p,null,k([Object.groupBy(B?.policyTypes??[],({name:m})=>m)],m=>(a(),u(I,{key:`${typeof m}`,"initially-open":0,"multiple-open":"",class:"stack","data-testid":"outbound-policies-rules"},{default:e(()=>[(a(!0),s(p,null,k(C?.policies||[],({conf:$,kind:i,origins:V})=>(a(),u(D,{key:i},{default:e(()=>[r(K,null,{"accordion-header":e(()=>[r(M,{"policy-type":i},{default:e(()=>[n(c(i),1)]),_:2},1032,["policy-type"])]),"accordion-content":e(()=>[V.length>0?(a(),u(X,{key:0,variant:"kv"},{default:e(()=>[o("tr",null,[t[5]||(t[5]=o("th",{scope:"row"},`
                                  Origin policies
                                `,-1)),t[6]||(t[6]=n()),o("td",null,[o("ul",null,[(a(!0),s(p,null,k(V,y=>(a(),s("li",{key:y.kri},[(a(!0),s(p,null,k([f(q).fromString(y.kri)],w=>(a(),s(p,{key:typeof w},[m[i]?(a(),u(x,{key:0,to:{name:"policy-detail-view",params:{mesh:w.mesh,policyPath:m[i][0].path,policy:w.name}}},{default:e(()=>[n(c(y.kri),1)]),_:2},1032,["to"])):(a(),s(p,{key:1},[n(c(y.kri),1)],64))],64))),128))]))),128))])])]),t[9]||(t[9]=n()),o("tr",null,[o("td",G,[r(_,{type:"stack",size:"small"},{default:e(()=>[t[7]||(t[7]=o("span",null,"Config",-1)),t[8]||(t[8]=n()),r(S,{code:f(E).stringify($),language:"yaml","show-copy-button":!1},null,8,["code"])]),_:2},1024)])])]),_:2},1024)):A("",!0)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024))),128))]),_:2},1032,["data","errors"])]),_:2},1032,["src"])]),_:2},1032,["src"])]),_:2},1024)):A("",!0)]),_:2},1024)]),_:2},1024)]),_:1},8,["name"])}}});export{W as default};
