import{d as Y,r as a,x as q,p as k,o as n,w as r,b as s,e as o,c as l,q as f,l as e,t as w,m as C,F as E,a5 as G,N as y,L as v,Y as H,z as J}from"./index-TRKi7niM.js";import{A as K,a as Q}from"./AccordionList-DqNam2rR.js";import{T as U}from"./TagList-DpZkRytB.js";import{R as W}from"./RuleMatchers-DjL4XZ5Y.js";const Z={key:0},h={key:1},tt={key:0},et={class:"mt-4"},ot={key:0},nt={key:1},st={colspan:"2"},pt=Y({__name:"DataPlaneInboundSummaryOverviewView",props:{data:{},routeName:{}},setup(V){const u=V;return(rt,t)=>{const $=a("XBadge"),X=a("XCopyButton"),_=a("XTable"),D=a("XAction"),R=a("XCodeBlock"),b=a("XLayout"),P=a("XCard"),S=a("DataCollection"),T=a("DataLoader"),A=a("DataSource"),F=a("AppView"),O=a("RouteView"),z=q("icon-start");return n(),k(O,{params:{mesh:"",proxy:"",connection:""},name:u.routeName},{default:r(({t:j,route:c,uri:N})=>[s(F,null,{default:r(()=>[s(b,{type:"stack"},{default:r(()=>[s(_,{variant:"kv"},{default:r(()=>[e("tr",null,[t[0]||(t[0]=e("th",{scope:"row"},`
              Tags
            `,-1)),t[1]||(t[1]=o()),e("td",null,[s(U,{tags:u.data.tags,alignment:"right"},null,8,["tags"])])]),t[10]||(t[10]=o()),e("tr",null,[t[2]||(t[2]=e("th",{scope:"row"},`
              Protocol
            `,-1)),t[3]||(t[3]=o()),e("td",null,[s($,{appearance:"info"},{default:r(()=>[o(w(j(`http.api.value.${u.data.protocol}`)),1)]),_:2},1024)])]),t[11]||(t[11]=o()),e("tr",null,[t[4]||(t[4]=e("th",{scope:"row"},`
              Address
            `,-1)),t[5]||(t[5]=o()),e("td",null,[s(X,{text:`${u.data.addressPort}`},null,8,["text"])])]),t[12]||(t[12]=o()),u.data.serviceAddressPort.length>0?(n(),l("tr",Z,[t[6]||(t[6]=e("th",{scope:"row"},`
              Service address
            `,-1)),t[7]||(t[7]=o()),e("td",null,[s(X,{text:`${u.data.serviceAddressPort}`},null,8,["text"])])])):f("",!0),t[13]||(t[13]=o()),u.data.portName.length>0?(n(),l("tr",h,[t[8]||(t[8]=e("th",{scope:"row"},`
              Name
            `,-1)),t[9]||(t[9]=o()),e("td",null,[s(X,{text:`${u.data.portName}`},null,8,["text"])])])):f("",!0)]),_:2},1024),t[25]||(t[25]=o()),u.data?(n(),l("div",tt,[t[23]||(t[23]=e("h3",null,"Rules",-1)),t[24]||(t[24]=o()),s(A,{src:N(C(E),"/policy-types",{})},{default:r(({data:L,error:I})=>[s(A,{src:N(C(G),"/meshes/:mesh/rules/for/:dataplane",{mesh:c.params.mesh,dataplane:c.params.proxy})},{default:r(({data:x,error:M})=>[s(T,{data:[L,x],errors:[I,M]},{default:r(()=>[(n(!0),l(y,null,v([Object.groupBy(L?.policyTypes??[],({name:p})=>p)],p=>(n(),k(S,{key:`${typeof p}`,predicate:i=>(i.ruleType==="inbound"||i.ruleType==="from"&&!p[i.type]?.[0]?.policy.isFromAsRules)&&Number(i.inbound.port)===Number(c.params.connection.split("_")[1]),items:[...x.rules,...x.inboundRules]},{default:r(({items:i})=>[e("div",et,[s(K,{"initially-open":0,"multiple-open":"",class:"stack"},{default:r(()=>[(n(!0),l(y,null,v(Object.groupBy(i,g=>g.type),(g,B)=>(n(),k(P,{key:B},{default:r(()=>[s(Q,null,{"accordion-header":r(()=>[J((n(),l("span",null,[o(w(B)+" ("+w(g.length)+`)
                                `,1)])),[[z,{name:B,size:"60",default:"policy"}]])]),"accordion-content":r(()=>[s(_,{variant:"kv"},{default:r(()=>[(n(!0),l(y,null,v(g,m=>(n(),l(y,{key:m},[m.matchers.length>0?(n(),l("tr",ot,[t[14]||(t[14]=e("th",{scope:"row"},`
                                        From
                                      `,-1)),t[15]||(t[15]=o()),e("td",null,[e("p",null,[s(W,{items:m.matchers},null,8,["items"])])])])):f("",!0),t[20]||(t[20]=o()),m.origins.length>0?(n(),l("tr",nt,[t[16]||(t[16]=e("th",{scope:"row"},`
                                        Origin policies
                                      `,-1)),t[17]||(t[17]=o()),e("td",null,[e("ul",null,[(n(!0),l(y,null,v(m.origins,d=>(n(),l("li",{key:`${d.mesh}-${d.name}`},[p[d.type]?(n(),k(D,{key:0,to:{name:"policy-detail-view",params:{mesh:d.mesh,policyPath:p[d.type][0].path,policy:d.name}}},{default:r(()=>[o(w(d.name),1)]),_:2},1032,["to"])):(n(),l(y,{key:1},[o(w(d.name),1)],64))]))),128))])])])):f("",!0),t[21]||(t[21]=o()),e("tr",null,[e("td",st,[s(b,{type:"stack",size:"small"},{default:r(()=>[t[18]||(t[18]=e("span",null,"Config",-1)),t[19]||(t[19]=o()),s(R,{code:C(H).stringify(m.raw),language:"yaml","show-copy-button":!1},null,8,["code"])]),_:2},1024)])])],64))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)])]),_:2},1032,["predicate","items"]))),128))]),_:2},1032,["data","errors"])]),_:2},1032,["src"])]),_:2},1032,["src"])])):f("",!0)]),_:2},1024)]),_:2},1024)]),_:1},8,["name"])}}});export{pt as default};
