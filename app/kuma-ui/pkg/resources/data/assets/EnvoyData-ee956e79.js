import{E as p}from"./kongponents.es-53a4347c.js";import{_ as m}from"./CodeBlock.vue_vue_type_style_index_0_lang-53c4f049.js";import{_ as g}from"./StatusInfo.vue_vue_type_script_setup_true_lang-ff20f7d8.js";import{u as _}from"./index-db71a729.js";import{d as y,r as o,v as i,k as h,o as v,j as N,i as E,g as l,w as u,h as c,e as q}from"./index-fa1a400c.js";import{_ as z}from"./_plugin-vue_export-helper-c27b6911.js";const k={class:"envoy-data-actions"},P=y({__name:"EnvoyData",props:{dataPath:{type:String,required:!0},queryKey:{type:String,required:!1,default:null},mesh:{type:String,required:!1,default:""},dppName:{type:String,required:!1,default:""},zoneIngressName:{type:String,required:!1,default:""},zoneEgressName:{type:String,required:!1,default:""}},setup(f){const e=f,n=_(),r=o(!0),s=o(null),d=o("");i(()=>e.dppName,function(){t()}),i(()=>e.zoneIngressName,function(){t()}),i(()=>e.zoneEgressName,function(){t()}),h(function(){t()});async function t(){s.value=null,r.value=!0;try{let a="";e.mesh!==""&&e.dppName!==""?a=await n.getDataplaneData({dataPath:e.dataPath,mesh:e.mesh,dppName:e.dppName}):e.zoneIngressName!==""?a=await n.getZoneIngressData({dataPath:e.dataPath,zoneIngressName:e.zoneIngressName}):e.zoneEgressName!==""&&(a=await n.getZoneEgressData({dataPath:e.dataPath,zoneEgressName:e.zoneEgressName})),d.value=typeof a=="string"?a:JSON.stringify(a,null,2)}catch(a){a instanceof Error?s.value=a:console.error(a)}finally{r.value=!1}}return(a,D)=>(v(),N("div",null,[E("div",k,[l(q(p),{disabled:r.value,appearance:"primary",icon:"redo","data-testid":"envoy-data-refresh-button",onClick:t},{default:u(()=>[c(`
        Refresh
      `)]),_:1},8,["disabled"])]),c(),l(g,{"has-error":s.value!==null,"is-loading":r.value,error:s.value},{default:u(()=>[l(m,{id:`code-block-${e.dataPath}`,language:"json",code:d.value,"is-searchable":"","query-key":e.queryKey??`code-block-${e.dataPath}`},null,8,["id","code","query-key"])]),_:1},8,["has-error","is-loading","error"])]))}});const $=z(P,[["__scopeId","data-v-36ea5f4c"]]);export{$ as E};
