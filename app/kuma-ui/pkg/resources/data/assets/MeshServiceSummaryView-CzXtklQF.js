import{d as D,r as p,p as m,o as d,w as a,b as l,e as r,l as _,c as g,t as i,N as x,L as h,M as L,q as v,O as y,m as N,af as q}from"./index-fotWGtG0.js";import{_ as b}from"./ResourceCodeBlock.vue_vue_type_script_setup_true_lang-Cv4xe_5S.js";const A={key:0,class:"stack-with-borders","data-testid":"structured-view"},O=D({__name:"MeshServiceSummaryView",props:{items:{}},setup(w){const z=w;return(Q,e)=>{const M=p("RouteTitle"),C=p("XAction"),k=p("XBadge"),c=p("XLayout"),R=p("XSelect"),S=p("KumaPort"),V=p("DataLoader"),E=p("AppView"),F=p("DataCollection"),B=p("RouteView");return d(),m(B,{name:"mesh-service-summary-view",params:{mesh:"",service:"",codeSearch:"",codeFilter:!1,codeRegExp:!1,format:String}},{default:a(({route:t,t:u,can:P,uri:X})=>[l(F,{items:z.items,predicate:n=>n.id===t.params.service},{item:a(({item:n})=>[l(E,null,{title:a(()=>[l(c,{size:"small"},{default:a(()=>[_("h2",null,[l(C,{to:{name:"mesh-service-detail-view",params:{mesh:t.params.mesh,service:t.params.service}}},{default:a(()=>[l(M,{title:u("services.routes.item.title",{name:n.name})},null,8,["title"])]),_:2},1032,["to"])]),e[0]||(e[0]=r()),l(k,{appearance:u(`common.status.appearance.${n.spec.state}`,void 0,{defaultMessage:"neutral"})},{default:a(()=>[r(i(u(`http.api.value.${n.spec.state}`)),1)]),_:2},1032,["appearance"])]),_:2,__:[0]},1024)]),default:a(()=>[e[17]||(e[17]=r()),l(c,{type:"stack"},{default:a(()=>[_("header",null,[l(c,{type:"separated",size:"max"},{default:a(()=>[_("h3",null,i(u("services.routes.item.config")),1),e[1]||(e[1]=r()),(d(),g(x,null,h([["structured","universal","k8s"]],s=>_("div",{key:typeof s},[l(R,{label:u("services.routes.item.format"),selected:t.params.format,onChange:o=>{t.update({format:o})},onVnodeBeforeMount:o=>{var f;return((f=o==null?void 0:o.props)==null?void 0:f.selected)&&s.includes(o.props.selected)&&o.props.selected!==t.params.format&&t.update({format:o.props.selected})}},L({_:2},[h(s,o=>({name:`${o}-option`,fn:a(()=>[r(i(u(`services.routes.item.formats.${o}`)),1)])}))]),1032,["label","selected","onChange","onVnodeBeforeMount"])])),64))]),_:2,__:[1]},1024)]),e[16]||(e[16]=r()),t.params.format==="structured"?(d(),g("div",A,[l(y,{layout:"horizontal"},{title:a(()=>e[2]||(e[2]=[r(`
                    Dataplane Proxies
                  `)])),body:a(()=>{var s,o,f;return[r(i((s=n.status.dataplaneProxies)==null?void 0:s.connected)+" connected, "+i((o=n.status.dataplaneProxies)==null?void 0:o.healthy)+" healthy ("+i((f=n.status.dataplaneProxies)==null?void 0:f.total)+` total)
                  `,1)]}),_:2,__:[3]},1024),e[12]||(e[12]=r()),n.namespace?(d(),m(y,{key:0,layout:"horizontal"},{title:a(()=>e[4]||(e[4]=[r(`
                    Namespace
                  `)])),body:a(()=>[r(i(n.namespace),1)]),_:2,__:[5]},1024)):v("",!0),e[13]||(e[13]=r()),P("use zones")&&n.zone?(d(),m(y,{key:1,layout:"horizontal"},{title:a(()=>e[6]||(e[6]=[r(`
                    Zone
                  `)])),body:a(()=>[l(C,{to:{name:"zone-cp-detail-view",params:{zone:n.zone}}},{default:a(()=>[r(i(n.zone),1)]),_:2},1032,["to"])]),_:2,__:[7]},1024)):v("",!0),e[14]||(e[14]=r()),l(y,{layout:"horizontal"},{title:a(()=>e[8]||(e[8]=[r(`
                    Ports
                  `)])),body:a(()=>[l(c,{type:"separated",truncate:""},{default:a(()=>[(d(!0),g(x,null,h(n.spec.ports,s=>(d(),m(S,{key:s.port,port:{...s,targetPort:void 0}},null,8,["port"]))),128))]),_:2},1024)]),_:2,__:[9]},1024),e[15]||(e[15]=r()),l(y,{layout:"horizontal"},{title:a(()=>e[10]||(e[10]=[r(`
                    Selector
                  `)])),body:a(()=>[l(c,{type:"separated",truncate:""},{default:a(()=>[(d(!0),g(x,null,h(n.spec.selector.dataplaneTags,(s,o)=>(d(),m(k,{key:`${o}:${s}`,appearance:"info"},{default:a(()=>[r(i(o)+":"+i(s),1)]),_:2},1024))),128))]),_:2},1024)]),_:2,__:[11]},1024)])):t.params.format==="universal"?(d(),m(b,{key:1,"data-testid":"codeblock-yaml-universal",language:"yaml",resource:n.config,"show-k8s-copy-button":!1,"is-searchable":"",query:t.params.codeSearch,"is-filter-mode":t.params.codeFilter,"is-reg-exp-mode":t.params.codeRegExp,onQueryChange:s=>t.update({codeSearch:s}),onFilterModeChange:s=>t.update({codeFilter:s}),onRegExpModeChange:s=>t.update({codeRegExp:s})},null,8,["resource","query","is-filter-mode","is-reg-exp-mode","onQueryChange","onFilterModeChange","onRegExpModeChange"])):(d(),m(V,{key:2,src:X(N(q),"/meshes/:mesh/mesh-service/:name/as/kubernetes",{mesh:t.params.mesh,name:t.params.service})},{default:a(({data:s})=>[l(b,{"data-testid":"codeblock-yaml-k8s",language:"yaml",resource:s,"show-k8s-copy-button":!1,"is-searchable":"",query:t.params.codeSearch,"is-filter-mode":t.params.codeFilter,"is-reg-exp-mode":t.params.codeRegExp,onQueryChange:o=>t.update({codeSearch:o}),onFilterModeChange:o=>t.update({codeFilter:o}),onRegExpModeChange:o=>t.update({codeRegExp:o})},null,8,["resource","query","is-filter-mode","is-reg-exp-mode","onQueryChange","onFilterModeChange","onRegExpModeChange"])]),_:2},1032,["src"]))]),_:2,__:[16]},1024)]),_:2,__:[17]},1024)]),_:2},1032,["items","predicate"])]),_:1})}}});export{O as default};
