import{u as x,T as $,J as w,j as V,y as S,D as A,a as B}from"./kongponents.es-44d50ffe.js";import{_ as h,A as D}from"./DataSource.vue_vue_type_script_setup_true_lang-8c8fc211.js";import{i as I,h as N,A as T,_ as E,f as j}from"./RouteView.vue_vue_type_script_setup_true_lang-5211ad2b.js";import{_ as q}from"./RouteTitle.vue_vue_type_script_setup_true_lang-4c670f7a.js";import{d as z,o as n,a as p,w as e,h as a,b as o,g as i,r as F,e as J,j as R,k as m,f as M,x as g,t as f,F as W,p as G,m as H}from"./index-9404de83.js";import{_ as K}from"./EmptyBlock.vue_vue_type_script_setup_true_lang-82eae69e.js";import{E as O}from"./ErrorBlock-a1e01761.js";const Q=z({__name:"DocumentationLink",props:{href:{type:String,required:!0}},setup(r){const _=r;return(y,C)=>(n(),p(o($),{class:"docs-link",appearance:"outline",target:"_blank",to:_.href},{default:e(()=>[a(o(x),{icon:"externalLink",color:"currentColor",size:"16","hide-title":""}),i(`

    Documentation
  `)]),_:1},8,["to"]))}}),U=r=>(G("data-v-27cc2d91"),r=r(),H(),r),X={class:"stack"},Y=U(()=>m("p",null,[m("strong",null,"Warning"),i(` This policy is experimental. If you encountered any problem please open an
                            `),m("a",{href:"https://github.com/kumahq/kuma/issues/new/choose",target:"_blank",rel:"noopener noreferrer"},"issue")],-1)),Z=z({__name:"PolicyListView",props:{page:{},size:{}},setup(r){const _=r,{t:y}=I();return(C,ee)=>{const L=F("RouterLink");return n(),p(E,{name:"policies-list-view"},{default:e(({route:c})=>[a(h,{src:"/*/policy-types"},{default:e(({data:d,error:b})=>[b?(n(),p(O,{key:0,error:b},null,8,["error"])):d===void 0?(n(),p(N,{key:1})):d.policies.length===0?(n(),p(K,{key:2})):(n(!0),J(W,{key:3},R([d.policies.find(s=>s.path===c.params.policyPath)??d.policies[0]],s=>(n(),p(h,{key:s.path,src:`/${c.params.mesh}/policy-type/${s.path}?page=${_.page}&size=${_.size}`},{default:e(({data:u,error:P})=>[a(T,null,{title:e(()=>[m("h2",null,[i(`
                  Policies: `),a(q,{title:o(y)("policies.routes.items.title",{name:s.name}),render:!0},null,8,["title"])])]),default:e(()=>[i(),m("div",{class:g(["relative",s.path])},[m("div",X,[s.isExperimental?(n(),p(o(w),{key:0,"border-variant":"noBorder",class:"mb-4"},{body:e(()=>[a(o(V),{appearance:"warning"},{alertMessage:e(()=>[Y]),_:1})]),_:1})):M("",!0),i(),a(o(w),null,{body:e(()=>[a(D,{class:"policy-collection","data-testid":"policy-collection","empty-state-title":"No Data","empty-state-message":`There are no ${s.name} policies present.`,headers:[{label:"Name",key:"name"},{label:"Type",key:"type"},{label:"Actions",key:"actions",hideLabel:!0}],"page-number":_.page,"page-size":_.size,total:u==null?void 0:u.total,items:u==null?void 0:u.items,error:P,onChange:c.update},{toolbar:e(()=>[a(h,{src:`/${c.params.mesh}/insights`},{default:e(({data:t})=>[a(o(S),{label:"Policies",items:d.policies.map(l=>({label:l.name,value:l.path,selected:l.path===c.params.policyPath})),"label-attributes":{class:"visually-hidden"},appearance:"select","enable-filtering":!0,onSelected:l=>c.replace({name:"policies-list-view",params:{...c.params,policyPath:l.value}})},{"item-template":e(({item:l})=>{var k,v;return[m("span",{class:g({"policy-type-empty":!((k=t==null?void 0:t.policies[l.label])!=null&&k.total)})},f(l.label)+" ("+f(((v=t==null?void 0:t.policies[l.label])==null?void 0:v.total)||"0")+`)
                                `,3)]}),_:2},1032,["items","onSelected"])]),_:2},1032,["src"]),i(),a(Q,{href:o(y)("policies.href.docs",{name:s.name}),"data-testid":"policy-documentation-link"},null,8,["href"])]),name:e(({row:t})=>[a(L,{to:{name:"policy-detail-view",params:{policy:t.name}}},{default:e(()=>[i(f(t.name),1)]),_:2},1032,["to"])]),type:e(({row:t})=>[i(f(t.type),1)]),actions:e(({row:t})=>[a(o(A),{class:"actions-dropdown","kpop-attributes":{placement:"bottomEnd",popoverClasses:"mt-5 more-actions-popover"},width:"150"},{default:e(()=>[a(o($),{class:"non-visual-button",appearance:"secondary",size:"small"},{icon:e(()=>[a(o(x),{color:"var(--black-400)",icon:"more",size:"16"})]),_:1})]),items:e(()=>[a(o(B),{item:{to:{name:"policy-detail-view",params:{policy:t.name}},label:o(y)("common.collection.actions.view")}},null,8,["item"])]),_:2},1024)]),_:2},1032,["empty-state-message","page-number","page-size","total","items","error","onChange"])]),_:2},1024)])],2)]),_:2},1024)]),_:2},1032,["src"]))),128))]),_:2},1024)]),_:1})}}});const re=j(Z,[["__scopeId","data-v-27cc2d91"]]);export{re as default};
