import{i as k,h as D,f as T,_ as A}from"./RouteView.vue_vue_type_script_setup_true_lang-19528cd9.js";import{_ as E}from"./RouteTitle.vue_vue_type_script_setup_true_lang-2f1aad7c.js";import{D as N}from"./DataOverview-670536d0.js";import{d as V,q as s,o as M,a as S,w as _,h as i,b as m,g as L,k as v,P as h}from"./index-bec4d193.js";import{Q as P}from"./QueryParameter-70743f73.js";import"./kongponents.es-b2b550a8.js";import"./EmptyBlock.vue_vue_type_script_setup_true_lang-ab21e287.js";import"./ErrorBlock-828beaca.js";import"./LoadingBlock.vue_vue_type_script_setup_true_lang-91d5cd68.js";import"./TagList-6c1147f3.js";import"./StatusBadge-eb9ad2b5.js";const q={class:"kcard-stack"},z={class:"kcard-border"},Y=V({__name:"MeshListView",props:{selectedMeshName:{type:[String,null],required:!1,default:null},offset:{type:Number,required:!1,default:0}},setup(b){const u=b,{t:r}=k(),g=D(),y={title:r("common.emptyState.title"),message:r("common.emptyState.message",{type:"Meshes"})},l=s(!0),n=s(null),o=s({headers:[{label:"Name",key:"entity"}],data:[]}),c=s(null),d=s(u.offset);w();function w(){f(u.offset)}async function f(e){d.value=e,P.set("offset",e>0?e:null),l.value=!0,n.value=null;const a=h;try{const{items:t,next:p}=await g.getAllMeshes({size:a,offset:e});c.value=p,o.value.data=x(t??[])}catch(t){o.value.data=[],t instanceof Error?n.value=t:console.error(t)}finally{l.value=!1}}function x(e){return e.map(a=>{const{name:t}=a;return{entity:a,detailViewRoute:{name:"mesh-detail-view",params:{mesh:t}}}})}return(e,a)=>(M(),S(A,null,{default:_(()=>[i(E,{title:m(r)("meshes.routes.items.title")},null,8,["title"]),L(),i(T,{breadcrumbs:[{to:{name:"mesh-list-view"},text:m(r)("meshes.routes.items.breadcrumbs")}]},{default:_(()=>[v("div",q,[v("div",z,[i(N,{"page-size":m(h),"is-loading":l.value,error:n.value,"empty-state":y,"table-data":o.value,"table-data-is-empty":o.value.data.length===0,next:c.value,"page-offset":d.value,onLoadData:f},null,8,["page-size","is-loading","error","table-data","table-data-is-empty","next","page-offset"])])])]),_:1},8,["breadcrumbs"])]),_:1}))}});export{Y as default};
