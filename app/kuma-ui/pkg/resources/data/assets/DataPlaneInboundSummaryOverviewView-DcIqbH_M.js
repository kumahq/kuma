import{d as q,r as p,p as d,o,w as n,b as a,c as s,e as r,q as k,N as u,L as i,m as g,ap as E,l as e,t as w,F as T,a8 as M,Y as G}from"./index-CHUyLuna.js";import{A as H,a as J}from"./AccordionList-BWQdXgNH.js";import{P as Q}from"./PolicyTypeTag-DxTN8QRp.js";import{T as U}from"./TagList-m8GBpf7x.js";const W={key:0},Z={key:1},h={colspan:"2"},lt=q({__name:"DataPlaneInboundSummaryOverviewView",props:{data:{},dataPlaneOverview:{},routeName:{}},setup(_){const m=_;return(tt,t)=>{const O=p("XBadge"),X=p("XCopyButton"),N=p("XTable"),D=p("XAction"),z=p("XCodeBlock"),x=p("XLayout"),F=p("XCard"),I=p("DataLoader"),A=p("DataSource"),K=p("AppView"),R=p("RouteView");return o(),d(R,{params:{mesh:"",proxy:"",connection:""},name:m.routeName},{default:n(({t:Y,route:C,uri:B})=>[a(K,null,{default:n(()=>[a(x,{type:"stack"},{default:n(()=>[(o(!0),s(u,null,i([m.dataPlaneOverview.dataplane.networking.inbounds.find(l=>l.portName===g(E).fromString(C.params.connection).sectionName&&l.port===m.data.port)],l=>(o(),s(u,{key:typeof l},[l?(o(),d(N,{key:0,variant:"kv"},{default:n(()=>[e("tr",null,[t[0]||(t[0]=e("th",{scope:"row"},`
                Tags
              `,-1)),t[1]||(t[1]=r()),e("td",null,[a(U,{tags:l.tags,alignment:"right"},null,8,["tags"])])]),t[10]||(t[10]=r()),e("tr",null,[t[2]||(t[2]=e("th",{scope:"row"},`
                Protocol
              `,-1)),t[3]||(t[3]=r()),e("td",null,[a(O,{appearance:"info"},{default:n(()=>[r(w(Y(`http.api.value.${l.protocol}`)),1)]),_:2},1024)])]),t[11]||(t[11]=r()),e("tr",null,[t[4]||(t[4]=e("th",{scope:"row"},`
                Address
              `,-1)),t[5]||(t[5]=r()),e("td",null,[a(X,{text:`${l.addressPort}`},null,8,["text"])])]),t[12]||(t[12]=r()),l.serviceAddressPort.length>0?(o(),s("tr",W,[t[6]||(t[6]=e("th",{scope:"row"},`
                Service address
              `,-1)),t[7]||(t[7]=r()),e("td",null,[a(X,{text:`${l.serviceAddressPort}`},null,8,["text"])])])):k("",!0),t[13]||(t[13]=r()),l.portName.length>0?(o(),s("tr",Z,[t[8]||(t[8]=e("th",{scope:"row"},`
                Name
              `,-1)),t[9]||(t[9]=r()),e("td",null,[a(X,{text:`${l.portName}`},null,8,["text"])])])):k("",!0)]),_:2},1024)):k("",!0)],64))),128)),t[22]||(t[22]=r()),m.data?(o(),d(x,{key:0,type:"stack",size:"small"},{default:n(()=>[t[20]||(t[20]=e("h3",null,"Policies",-1)),t[21]||(t[21]=r()),a(A,{src:B(g(T),"/policy-types",{})},{default:n(({data:l,error:b})=>[a(A,{src:B(g(T),"/meshes/:mesh/dataplanes/:name/policies/for/inbound/:kri",{mesh:C.params.mesh,name:C.params.proxy,kri:m.data.kri})},{default:n(({data:P,error:j})=>[a(I,{data:[l,P],errors:[b,j]},{default:n(()=>[(o(!0),s(u,null,i([Object.groupBy(l?.policyTypes??[],({name:y})=>y)],y=>(o(),d(H,{key:`${typeof y}`,"initially-open":0,"multiple-open":"",class:"stack","data-testid":"inbound-policies-rules"},{default:n(()=>[(o(!0),s(u,null,i(P?.policies||[],({rules:c,kind:f,origins:L})=>(o(),d(F,{key:f},{default:n(()=>[a(J,null,{"accordion-header":n(()=>[a(Q,{"policy-type":f},{default:n(()=>[r(w(f)+" ("+w(c.length)+`)
                            `,1)]),_:2},1032,["policy-type"])]),"accordion-content":n(()=>[a(N,{variant:"kv"},{default:n(()=>[(o(!0),s(u,null,i(c,V=>(o(),s(u,{key:V},[L.length>0?(o(),s(u,{key:0},[e("tr",null,[t[14]||(t[14]=e("th",{scope:"row"},`
                                      Origin policies
                                    `,-1)),t[15]||(t[15]=r()),e("td",null,[e("ul",null,[(o(!0),s(u,null,i(L,v=>(o(),s("li",{key:v.kri},[(o(!0),s(u,null,i([g(M).fromString(v.kri)],({mesh:S,name:$})=>(o(),s(u,{key:`${S}-${$}`},[y[f]?(o(),d(D,{key:0,to:{name:"policy-detail-view",params:{mesh:S,policyPath:y[f][0].path,policy:$}}},{default:n(()=>[r(w(v.kri),1)]),_:2},1032,["to"])):(o(),s(u,{key:1},[r(w(v.kri),1)],64))],64))),128))]))),128))])])]),t[18]||(t[18]=r()),e("tr",null,[e("td",h,[a(x,{type:"stack",size:"small"},{default:n(()=>[t[16]||(t[16]=e("span",null,"Config",-1)),t[17]||(t[17]=r()),a(z,{code:g(G).stringify(V.conf),language:"yaml","show-copy-button":!1},null,8,["code"])]),_:2},1024)])])],64)):k("",!0)],64))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024))),128))]),_:2},1032,["data","errors"])]),_:2},1032,["src"])]),_:2},1032,["src"])]),_:2},1024)):k("",!0)]),_:2},1024)]),_:2},1024)]),_:1},8,["name"])}}});export{lt as default};
