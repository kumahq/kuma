import{l as x,T as $,q as w,j as V,y as S,J as A,a as B}from"./kongponents.es-21ce59a5.js";import{_ as h,A as I}from"./DataSource.vue_vue_type_script_setup_true_lang-c75e9562.js";import{i as N,h as T,A as q,_ as D,f as E}from"./RouteView.vue_vue_type_script_setup_true_lang-9e62d24f.js";import{_ as j}from"./RouteTitle.vue_vue_type_script_setup_true_lang-dcec85af.js";import{d as z,o as n,a as c,w as e,h as a,b as o,g as r,r as F,e as J,j as R,k as m,f as M,x as g,t as f,F as W,p as G,m as H}from"./index-bdbf5b57.js";import{_ as K}from"./EmptyBlock.vue_vue_type_script_setup_true_lang-ee434af6.js";import{E as O}from"./ErrorBlock-b1fa7c54.js";const Q=z({__name:"DocumentationLink",props:{href:{type:String,required:!0}},setup(i){const _=i;return(d,C)=>(n(),c(o($),{class:"docs-link",appearance:"outline",target:"_blank",to:_.href},{default:e(()=>[a(o(x),{icon:"externalLink",color:"currentColor",size:"16","hide-title":""}),r(`

    Documentation
  `)]),_:1},8,["to"]))}}),U=i=>(G("data-v-538a2c99"),i=i(),H(),i),X={class:"stack"},Y=U(()=>m("p",null,[m("strong",null,"Warning"),r(` This policy is experimental. If you encountered any problem please open an
                            `),m("a",{href:"https://github.com/kumahq/kuma/issues/new/choose",target:"_blank",rel:"noopener noreferrer"},"issue")],-1)),Z=z({__name:"PolicyListView",props:{page:{},size:{}},setup(i){const _=i,{t:d}=N();return(C,ee)=>{const L=F("RouterLink");return n(),c(D,{name:"policies-list-view"},{default:e(({route:p})=>[a(h,{src:"/*/policy-types"},{default:e(({data:y,error:b})=>[b?(n(),c(O,{key:0,error:b},null,8,["error"])):y===void 0?(n(),c(T,{key:1})):y.policies.length===0?(n(),c(K,{key:2})):(n(!0),J(W,{key:3},R([y.policies.find(s=>s.path===p.params.policyPath)??y.policies[0]],s=>(n(),c(h,{key:s.path,src:`/${p.params.mesh}/policy-type/${s.path}?page=${_.page}&size=${_.size}`},{default:e(({data:u,error:P})=>[a(q,null,{title:e(()=>[m("h2",null,[r(`
                  Policies: `),a(j,{title:o(d)("policies.routes.items.title",{name:s.name}),render:!0},null,8,["title"])])]),default:e(()=>[r(),m("div",{class:g(["relative",s.path])},[m("div",X,[s.isExperimental?(n(),c(o(w),{key:0,"border-variant":"noBorder",class:"mb-4"},{body:e(()=>[a(o(V),{appearance:"warning"},{alertMessage:e(()=>[Y]),_:1})]),_:1})):M("",!0),r(),a(o(w),null,{body:e(()=>[a(I,{"data-testid":"policy-collection","empty-state-title":"No Data","empty-state-message":`There are no ${s.name} policies present.`,headers:[{label:"Name",key:"name"},{label:"Type",key:"type"},{label:"Actions",key:"actions",hideLabel:!0}],"page-number":_.page,"page-size":_.size,total:u==null?void 0:u.total,items:u==null?void 0:u.items,error:P,onChange:p.update},{toolbar:e(()=>[a(h,{src:`/${p.params.mesh}/insights`},{default:e(({data:t})=>[a(o(S),{label:"Policies",items:y.policies.map(l=>({label:l.name,value:l.path,selected:l.path===p.params.policyPath})),"label-attributes":{class:"visually-hidden"},appearance:"select","enable-filtering":!0,onSelected:l=>p.replace({name:"policies-list-view",params:{...p.params,policyPath:l.value}})},{"item-template":e(({item:l})=>{var k,v;return[m("span",{class:g({"policy-type-empty":!((k=t==null?void 0:t.policies[l.label])!=null&&k.total)})},f(l.label)+" ("+f(((v=t==null?void 0:t.policies[l.label])==null?void 0:v.total)||"0")+`)
                                `,3)]}),_:2},1032,["items","onSelected"])]),_:2},1032,["src"]),r(),a(Q,{href:o(d)("policies.href.docs",{name:s.name}),"data-testid":"policy-documentation-link"},null,8,["href"])]),name:e(({row:t})=>[a(L,{to:{name:"policy-detail-view",params:{policy:t.name}}},{default:e(()=>[r(f(t.name),1)]),_:2},1032,["to"])]),type:e(({row:t})=>[r(f(t.type),1)]),actions:e(({row:t})=>[a(o(A),{class:"actions-dropdown","kpop-attributes":{placement:"bottomEnd",popoverClasses:"mt-5 more-actions-popover"},width:"150"},{default:e(()=>[a(o($),{class:"non-visual-button",appearance:"secondary",size:"small"},{icon:e(()=>[a(o(x),{color:"var(--black-400)",icon:"more",size:"16"})]),_:1})]),items:e(()=>[a(o(B),{item:{to:{name:"policy-detail-view",params:{policy:t.name}},label:o(d)("common.collection.actions.view")}},null,8,["item"])]),_:2},1024)]),_:2},1032,["empty-state-message","page-number","page-size","total","items","error","onChange"])]),_:2},1024)])],2)]),_:2},1024)]),_:2},1032,["src"]))),128))]),_:2},1024)]),_:1})}}});const ie=E(Z,[["__scopeId","data-v-538a2c99"]]);export{ie as default};
