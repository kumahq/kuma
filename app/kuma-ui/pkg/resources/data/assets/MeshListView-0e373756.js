import{d as D,q as T,r as s,s as A,o as E,c as N,w as v,a as u,u as m,b as V,e as h,J as b}from"./index-459c156d.js";import{g as M,u as S,f as L,e as q}from"./RouteView.vue_vue_type_script_setup_true_lang-71d22094.js";import{_ as z}from"./RouteTitle.vue_vue_type_script_setup_true_lang-c0639ae4.js";import{D as B}from"./DataOverview-9400fb06.js";import{Q as P}from"./QueryParameter-70743f73.js";import"./kongponents.es-008041a5.js";import"./EmptyBlock.vue_vue_type_script_setup_true_lang-91ce0294.js";import"./ErrorBlock-5e4d7b23.js";import"./LoadingBlock.vue_vue_type_script_setup_true_lang-c22a9022.js";import"./TagList-10d7e9ea.js";import"./StatusBadge-451834b5.js";const R={class:"kcard-stack"},$={class:"kcard-border"},j=D({__name:"MeshListView",props:{selectedMeshName:{type:[String,null],required:!1,default:null},offset:{type:Number,required:!1,default:0}},setup(g){const c=g,{t:r}=M(),y=S(),w={title:r("common.emptyState.title"),message:r("common.emptyState.message",{type:"Meshes"})},d=T(),l=s(!0),n=s(null),o=s({headers:[{label:"Name",key:"entity"}],data:[]}),f=s(null),p=s(c.offset);A(()=>d.params.mesh,function(){d.name==="mesh-list-view"&&i(0)}),x();function x(){i(c.offset)}async function i(e){p.value=e,P.set("offset",e>0?e:null),l.value=!0,n.value=null;const a=b;try{const{items:t,next:_}=await y.getAllMeshes({size:a,offset:e});f.value=_,o.value.data=k(t??[])}catch(t){o.value.data=[],t instanceof Error?n.value=t:console.error(t)}finally{l.value=!1}}function k(e){return e.map(a=>{const{name:t}=a;return{entity:a,detailViewRoute:{name:"mesh-detail-view",params:{mesh:t}}}})}return(e,a)=>(E(),N(q,null,{default:v(()=>[u(z,{title:m(r)("meshes.routes.items.title")},null,8,["title"]),V(),u(L,{breadcrumbs:[{to:{name:"mesh-list-view"},text:m(r)("meshes.routes.items.breadcrumbs")}]},{default:v(()=>[h("div",R,[h("div",$,[u(B,{"page-size":m(b),"is-loading":l.value,error:n.value,"empty-state":w,"table-data":o.value,"table-data-is-empty":o.value.data.length===0,next:f.value,"page-offset":p.value,onLoadData:i},null,8,["page-size","is-loading","error","table-data","table-data-is-empty","next","page-offset"])])])]),_:1},8,["breadcrumbs"])]),_:1}))}});export{j as default};
