var Fe=Object.defineProperty;var Ke=(t,o,a)=>o in t?Fe(t,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[o]=a;var ee=(t,o,a)=>(Ke(t,typeof o!="symbol"?o+"":o,a),a);import{d as ue,r as E,j as D,n as Q,o as p,c as h,g as s,e as l,a as x,u as f,b as te,R as Me,a7 as Ae,a8 as Re,y as T,a9 as Te,F as N,z as F,x as $,a5 as qe,aa as je,N as de,O as ce,H as pe,U as Ee,a6 as Ce,T as Oe,V as ze,L as Be,k as z,w as V,M as He,m as Qe,i as Ge,K as De,Y as Ye,Z as Ze,a3 as Je,a4 as We,a0 as Xe,a1 as et,ab as tt,ac as at,ad as nt,E as Pe,ae as Se,af as st,ag as lt}from"./index-1f1e085f.js";import{C as ot}from"./ContentWrapper-3fe7138e.js";import{D as it}from"./DataOverview-cf7b2dc3.js";import{_ as rt}from"./EmptyBlock.vue_vue_type_script_setup_true_lang-3ae2c0e5.js";import{S as ut}from"./StatusBadge-2e4cb4b7.js";import{T as dt}from"./TagList-96a8359a.js";import{_ as ct}from"./YamlView.vue_vue_type_script_setup_true_lang-69dc9dd7.js";import{Q as j}from"./QueryParameter-70743f73.js";const xe=[{key:"status",label:"Status"},{key:"name",label:"DPP"},{key:"type",label:"Type"},{key:"service",label:"Service"},{key:"protocol",label:"Protocol"},{key:"zone",label:"Zone"},{key:"lastConnected",label:"Last Connected"},{key:"lastUpdated",label:"Last Updated"},{key:"totalUpdates",label:"Total Updates"},{key:"dpVersion",label:"Kuma DP version"},{key:"envoyVersion",label:"Envoy version"},{key:"details",label:"Details",hideLabel:!0}],pt=["name","details"],ft=xe.filter(t=>!pt.includes(t.key)).map(t=>({tableHeaderKey:t.key,label:t.label,isChecked:!1})),Ie=["status","name","type","service","protocol","zone","lastUpdated","dpVersion","details"];function mt(t,o=Ie){return xe.filter(a=>o.includes(a.key)?t?!0:a.key!=="zone":!1)}function vt(t,o,a){return Math.max(o,Math.min(t,a))}const gt=["ControlLeft","ControlRight","ShiftLeft","ShiftRight","AltLeft"];class yt{constructor(o,a){ee(this,"commands");ee(this,"keyMap");ee(this,"boundTriggerShortcuts");this.commands=a,this.keyMap=Object.fromEntries(Object.entries(o).map(([w,d])=>[w.toLowerCase(),d])),this.boundTriggerShortcuts=this.triggerShortcuts.bind(this)}registerListener(){document.addEventListener("keydown",this.boundTriggerShortcuts)}unRegisterListener(){document.removeEventListener("keydown",this.boundTriggerShortcuts)}triggerShortcuts(o){ht(o,this.keyMap,this.commands)}}function ht(t,o,a){const w=_t(t.code),d=[t.ctrlKey?"ctrl":"",t.shiftKey?"shift":"",t.altKey?"alt":"",w].filter(k=>k!=="").join("+"),m=o[d];if(!m)return;const b=a[m];b.isAllowedContext&&!b.isAllowedContext(t)||(b.shouldPreventDefaultAction&&t.preventDefault(),!(b.isDisabled&&b.isDisabled())&&b.trigger(t))}function _t(t){return gt.includes(t)?"":t.replace(/^Key/,"").toLowerCase()}function bt(t,o){const a=" "+t,w=a.matchAll(/ ([-\s\w]+):\s*/g),d=[];for(const m of Array.from(w)){if(m.index===void 0)continue;const b=kt(m[1]);if(o.length>0&&!o.includes(b))throw new Error(`Unknown field “${b}”. Known fields: ${o.join(", ")}`);const k=m.index+m[0].length,i=a.substring(k);let v;if(/^\s*["']/.test(i)){const c=i.match(/['"](.*?)['"]/);if(c!==null)v=c[1];else throw new Error(`Quote mismatch for field “${b}”.`)}else{const c=i.indexOf(" "),y=c===-1?i.length:c;v=i.substring(0,y)}v!==""&&d.push([b,v])}return d}function kt(t){return t.trim().replace(/\s+/g,"-").replace(/-[a-z]/g,(o,a)=>a===0?o:o.substring(1).toUpperCase())}const $e=t=>(de("data-v-715248af"),t=t(),ce(),t),wt=$e(()=>s("span",{class:"visually-hidden"},"Focus filter",-1)),Tt=["for"],Ct=["id","placeholder"],Dt={key:0,class:"k-suggestion-box","data-testid":"k-filter-bar-suggestion-box"},Pt={class:"k-suggestion-list"},St={key:0,class:"k-filter-bar-error"},At={key:0},Et=["title","data-filter-field"],Ot={class:"visually-hidden"},xt=$e(()=>s("span",{class:"visually-hidden"},"Clear query",-1)),It=ue({__name:"KFilterBar",props:{id:{type:String,required:!0},fields:{type:Object,required:!0},placeholder:{type:String,required:!1,default:null},query:{type:String,required:!1,default:""}},emits:["fields-change"],setup(t,{emit:o}){const a=t,w=E(null),d=E(null),m=E(a.query),b=E([]),k=E(null),i=E(!1),v=E(-1),_=D(()=>Object.keys(a.fields)),c=D(()=>Object.entries(a.fields).slice(0,5).map(([e,u])=>({fieldName:e,...u}))),y=D(()=>_.value.length>0?`Filter by ${_.value.join(", ")}`:"Filter"),P=D(()=>a.placeholder??y.value);Q(()=>b.value,function(e,u){n(e,u)||(k.value=null,o("fields-change",{fields:e,query:m.value}))}),Q(()=>m.value,function(){m.value===""&&(k.value=null),i.value=!0});const S={Enter:"submitQuery",Escape:"closeSuggestionBox",ArrowDown:"jumpToNextSuggestion",ArrowUp:"jumpToPreviousSuggestion"},O={submitQuery:{trigger:Y,isAllowedContext(e){return d.value!==null&&e.composedPath().includes(d.value)},shouldPreventDefaultAction:!0},jumpToNextSuggestion:{trigger:ae,isAllowedContext(e){return d.value!==null&&e.composedPath().includes(d.value)},shouldPreventDefaultAction:!0},jumpToPreviousSuggestion:{trigger:ne,isAllowedContext(e){return d.value!==null&&e.composedPath().includes(d.value)},shouldPreventDefaultAction:!0},closeSuggestionBox:{trigger:H,isAllowedContext(e){return w.value!==null&&e.composedPath().includes(w.value)}}};function U(){const e=new yt(S,O);qe(function(){e.registerListener()}),je(function(){e.unRegisterListener()}),M(m.value)}U();function G(e){const u=e.target;M(u.value)}function Y(){if(d.value instanceof HTMLInputElement)if(v.value===-1)M(d.value.value),i.value=!1;else{const e=c.value[v.value].fieldName;e&&Z(d.value,e)}}function ae(){K(1)}function ne(){K(-1)}function K(e){v.value=vt(v.value+e,-1,c.value.length-1)}function se(){d.value instanceof HTMLInputElement&&d.value.focus()}function le(e){const r=e.currentTarget.getAttribute("data-filter-field");r&&d.value instanceof HTMLInputElement&&Z(d.value,r)}function Z(e,u){const r=m.value===""||m.value.endsWith(" ")?"":" ";m.value+=r+u+":",e.focus(),v.value=-1}function J(){m.value="",d.value instanceof HTMLInputElement&&(d.value.value="",d.value.focus(),M(""))}function B(e){e.relatedTarget===null&&H(),w.value instanceof HTMLElement&&e.relatedTarget instanceof Node&&!w.value.contains(e.relatedTarget)&&H()}function H(){i.value=!1}function M(e){k.value=null;try{const u=bt(e,_.value);u.sort((r,C)=>r[0].localeCompare(C[0])),b.value=u}catch(u){if(u instanceof Error)k.value=u,i.value=!0;else throw u}}function n(e,u){return JSON.stringify(e)===JSON.stringify(u)}return(e,u)=>(p(),h("div",{ref_key:"filterBar",ref:w,class:"k-filter-bar","data-testid":"k-filter-bar"},[s("button",{class:"k-focus-filter-input-button",title:"Focus filter",type:"button","data-testid":"k-filter-bar-focus-filter-input-button",onClick:se},[wt,l(),x(f(te),{"aria-hidden":"true",class:"k-filter-icon",color:"var(--grey-400)","data-testid":"k-filter-bar-filter-icon","hide-title":"",icon:"filter",size:"20"})]),l(),s("label",{for:`${a.id}-filter-bar-input`,class:"visually-hidden"},[Me(e.$slots,"default",{},()=>[l(T(f(y)),1)],!0)],8,Tt),l(),Ae(s("input",{id:`${a.id}-filter-bar-input`,ref_key:"filterInput",ref:d,"onUpdate:modelValue":u[0]||(u[0]=r=>m.value=r),class:"k-filter-bar-input",type:"text",placeholder:f(P),"data-testid":"k-filter-bar-filter-input",onFocus:u[1]||(u[1]=r=>i.value=!0),onBlur:B,onChange:G},null,40,Ct),[[Re,m.value]]),l(),i.value?(p(),h("div",Dt,[s("div",Pt,[k.value!==null?(p(),h("p",St,T(k.value.message),1)):(p(),h("button",{key:1,class:Te(["k-submit-query-button",{"k-submit-query-button-is-selected":v.value===-1}]),title:"Submit query",type:"button","data-testid":"k-filter-bar-submit-query-button",onClick:Y},`
          Submit `+T(m.value),3)),l(),(p(!0),h(N,null,F(f(c),(r,C)=>(p(),h("div",{key:`${a.id}-${C}`,class:Te(["k-suggestion-list-item",{"k-suggestion-list-item-is-selected":v.value===C}])},[s("b",null,T(r.fieldName),1),r.description!==""?(p(),h("span",At,": "+T(r.description),1)):$("",!0),l(),s("button",{class:"k-apply-suggestion-button",title:`Add ${r.fieldName}:`,type:"button","data-filter-field":r.fieldName,"data-testid":"k-filter-bar-apply-suggestion-button",onClick:le},[s("span",Ot,"Add "+T(r.fieldName)+":",1),l(),x(f(te),{"aria-hidden":"true",color:"currentColor","hide-title":"",icon:"chevronRight",size:"16"})],8,Et)],2))),128))])])):$("",!0),l(),m.value!==""?(p(),h("button",{key:1,class:"k-clear-query-button",title:"Clear query",type:"button","data-testid":"k-filter-bar-clear-query-button",onClick:J},[xt,l(),x(f(te),{"aria-hidden":"true",color:"currentColor",icon:"clear","hide-title":"",size:"20"})])):$("",!0)],512))}});const $t=pe(It,[["__scopeId","data-v-715248af"]]),L=t=>(de("data-v-eae8d31a"),t=t(),ce(),t),Ut={class:"entity-section-list"},Vt={class:"block-list"},Nt={class:"entity-title","data-testid":"data-plane-proxy-title"},Lt={class:"definition"},Ft=L(()=>s("span",null,"Mesh:",-1)),Kt={key:0},Mt=L(()=>s("h4",null,"Tags",-1)),Rt={key:1},qt=L(()=>s("h4",null,"Dependencies",-1)),jt={class:"mt-2 heading-with-icon"},zt={key:0},Bt=L(()=>s("h4",null,"Insights",-1)),Ht={class:"block-list"},Qt=["data-testid"],Gt=L(()=>s("span",null,"Connect time:",-1)),Yt=["data-testid"],Zt=L(()=>s("span",null,"Disconnect time:",-1)),Jt={class:"definition"},Wt=L(()=>s("span",null,"CP instance ID:",-1)),Xt={key:0},ea=L(()=>s("summary",null,`
                  Responses (acknowledged / sent)
                `,-1)),ta=["data-testid"],aa={class:"config-section"},na=ue({__name:"DataPlaneEntitySummary",props:{dataPlaneOverview:{type:Object,required:!0}},setup(t){const o=t,a=D(()=>{const{name:i,mesh:v,dataplane:_}=o.dataPlaneOverview;return{type:"Dataplane",name:i,mesh:v,networking:_.networking}}),w=D(()=>Ee(o.dataPlaneOverview.dataplane)),d=D(()=>{var v;const i=Array.from(((v=o.dataPlaneOverview.dataplaneInsight)==null?void 0:v.subscriptions)??[]);return i.reverse(),i.map(_=>{const c=_.connectTime!==void 0?Ce(_.connectTime):"—",y=_.disconnectTime!==void 0?Ce(_.disconnectTime):"—",P=Object.entries(_.status).filter(([S])=>!["total","lastUpdateTime"].includes(S)).map(([S,O])=>{const U=`${O.responsesAcknowledged??0} / ${O.responsesSent??0}`;return{type:S.toUpperCase(),ratio:U,responsesSent:O.responsesSent??0,responsesAcknowledged:O.responsesAcknowledged??0,responsesRejected:O.responsesRejected??0}});return{subscription:_,formattedConnectDate:c,formattedDisconnectDate:y,statuses:P}})}),m=D(()=>{const{status:i}=Oe(o.dataPlaneOverview.dataplane,o.dataPlaneOverview.dataplaneInsight);return i}),b=D(()=>{const i=ze(o.dataPlaneOverview.dataplaneInsight);return i!==null?Object.entries(i).map(([v,_])=>({name:v,version:_})):[]}),k=D(()=>{var O;const i=((O=o.dataPlaneOverview.dataplaneInsight)==null?void 0:O.subscriptions)??[];if(i.length===0)return[];const v=i[i.length-1];if(!v.version)return[];const _=[],c=v.version.envoy,y=v.version.kumaDp;if(!(c.kumaDpCompatible!==void 0?c.kumaDpCompatible:!0)){const U=`Envoy ${c.version} is not supported by Kuma DP ${y.version}.`;_.push(U)}if(!(y.kumaCpCompatible!==void 0?y.kumaCpCompatible:!0)){const U=`Kuma DP ${y.version} is not supported by this Kuma control plane.`;_.push(U)}return _});return(i,v)=>{const _=Be("router-link");return p(),z(f(He),null,{body:V(()=>[s("div",Ut,[s("section",null,[s("div",Vt,[s("div",null,[s("h3",Nt,[s("span",null,[l(`
                  DPP:

                  `),x(_,{to:{name:"data-plane-detail-view",params:{mesh:t.dataPlaneOverview.mesh,dataPlane:t.dataPlaneOverview.name}}},{default:V(()=>[l(T(t.dataPlaneOverview.name),1)]),_:1},8,["to"])]),l(),x(ut,{status:f(m)},null,8,["status"])]),l(),s("div",Lt,[Ft,l(),s("span",null,T(t.dataPlaneOverview.mesh),1)])]),l(),f(w).length>0?(p(),h("div",Kt,[Mt,l(),x(dt,{tags:f(w)},null,8,["tags"])])):$("",!0),l(),f(b).length>0?(p(),h("div",Rt,[qt,l(),(p(!0),h(N,null,F(f(b),(c,y)=>(p(),h("div",{key:y,class:"definition"},[s("span",null,T(c.name)+":",1),l(),s("span",null,T(c.version),1)]))),128)),l(),f(k).length>0?(p(),h(N,{key:0},[s("h5",jt,[l(`
                  Warnings

                  `),x(f(te),{class:"ml-1",icon:"warning",color:"var(--black-500)","secondary-color":"var(--yellow-300)",size:"20"})]),l(),(p(!0),h(N,null,F(f(k),(c,y)=>(p(),h("p",{key:y},T(c),1))),128))],64)):$("",!0)])):$("",!0)])]),l(),f(d).length>0?(p(),h("section",zt,[Bt,l(),s("div",Ht,[(p(!0),h(N,null,F(f(d),(c,y)=>(p(),h("div",{key:y},[s("div",{class:"definition","data-testid":`data-plane-connect-time-${y}`},[Gt,l(),s("span",null,T(c.formattedConnectDate),1)],8,Qt),l(),s("div",{class:"definition","data-testid":`data-plane-disconnect-time-${y}`},[Zt,l(),s("span",null,T(c.formattedDisconnectDate),1)],8,Yt),l(),s("div",Jt,[Wt,l(),s("span",null,T(c.subscription.controlPlaneInstanceId),1)]),l(),c.statuses.length>0?(p(),h("details",Xt,[ea,l(),(p(!0),h(N,null,F(c.statuses,(P,S)=>(p(),h("div",{key:`${y}-${S}`,class:"definition","data-testid":`data-plane-subscription-status-${y}-${S}`},[s("span",null,T(P.type)+":",1),l(),s("span",null,T(P.ratio),1)],8,ta))),128))])):$("",!0)]))),128))])])):$("",!0),l(),s("section",aa,[x(ct,{id:"code-block-data-plane-summary",content:f(a),"code-max-height":"250px"},null,8,["content"])])])]),_:1})}}});const sa=pe(na,[["__scopeId","data-v-eae8d31a"]]),la=["protocol","service","zone"];function oa(t){const o=new Map;for(const[a,w]of t){const d=la.includes(a),m=d?"tag":a;o.has(m)||o.set(m,[]);const b=o.get(m);let k;m==="tag"?k=(d?`kuma.io/${a}:${w}`:w).replace(/\s+/g,""):k=w,b.push(k.trim())}return o}const ia=t=>(de("data-v-dcc59ae1"),t=t(),ce(),t),ra={key:0},ua=ia(()=>s("label",{for:"data-planes-type-filter",class:"mr-2"},`
              Type:
            `,-1)),da=["value"],ca=["for"],pa=["id","checked","onChange"],fa=ue({__name:"DataPlaneList",props:{dataPlaneOverviews:{type:Array,required:!0},isLoading:{type:Boolean,required:!1,default:!1},error:{type:[Error,null],required:!1,default:null},nextUrl:{type:String,required:!1,default:null},pageOffset:{type:Number,required:!1,default:0},selectedDppName:{type:String,required:!1,default:null},isGatewayView:{type:Boolean,required:!1,default:!1},gatewayType:{type:String,required:!1,default:"true"},dppFilterFields:{type:Object,required:!0}},emits:["load-data"],setup(t,{emit:o}){const a=t,w=50,d={true:"All",builtin:"Builtin",delegated:"Delegated"},m={title:"No Data",message:"There are no data plane proxies present."},b=Qe(),k=Ge(),i=E(Ie),v=E({headers:[],data:[]}),_=E(j.get("filterQuery")??""),c=E(a.gatewayType),y=E({}),P=E(null),S=D(()=>k.getters["config/getMulticlusterStatus"]),O=D(()=>({name:k.getters["config/getEnvironment"]==="universal"?"universal-dataplane":"kubernetes-dataplane"})),U=D(()=>"tag"in a.dppFilterFields?'tag: "kuma.io/protocol: http"':"name"in a.dppFilterFields?"name: cluster":"field: value"),G=D(()=>{let n=mt(S.value,i.value);return a.isGatewayView?n=n.filter(e=>e.key!=="protocol"):n=n.filter(e=>e.key!=="type"),{data:v.value.data,headers:n}}),Y=D(()=>ft.filter(n=>a.isGatewayView?n.tableHeaderKey!=="protocol":n.tableHeaderKey!=="type").filter(n=>S.value?!0:n.tableHeaderKey!=="zone").map(n=>{const e=i.value.includes(n.tableHeaderKey);return{...n,isChecked:e}}));Q(c,function(){K(0)}),Q(y,function(){K(0)}),Q(()=>a.dataPlaneOverviews,function(){J()});function ae(){const n=Se.get("dpVisibleTableHeaderKeys");Array.isArray(n)&&(i.value=n),J()}ae();function ne(n){K(n)}function K(n){const e={...y.value};"gateway"in e||(e.gateway=c.value),o("load-data",n,e)}function se(n){n.stopPropagation()}function le(n,e){const u=n.target,r=i.value.findIndex(C=>C===e);u.checked&&r===-1?i.value.push(e):!u.checked&&r>-1&&i.value.splice(r,1),Se.set("dpVisibleTableHeaderKeys",Array.from(new Set(i.value)))}function Z(){st.logger.info(lt.CREATE_DATA_PLANE_PROXY_CLICKED)}async function J(){try{Array.isArray(a.dataPlaneOverviews)&&a.dataPlaneOverviews.length>0?(B(a.selectedDppName??a.dataPlaneOverviews[0].name),v.value.data=await Promise.all(a.dataPlaneOverviews.map(n=>H(n)))):(B(null),v.value.data=[])}catch(n){console.error(n)}}function B(n){n&&a.dataPlaneOverviews.length>0?(P.value=a.dataPlaneOverviews.find(e=>e.name===n)??a.dataPlaneOverviews[0],j.set(a.isGatewayView?"gateway":"dpp",P.value.name)):(P.value=null,j.set(a.isGatewayView?"gateway":"dpp",null))}async function H(n){var ve,ge,ye,he,_e;const e=n.mesh,u=n.name,r=((ve=n.dataplane.networking.gateway)==null?void 0:ve.type)||"STANDARD",C={name:r==="STANDARD"?"data-plane-detail-view":"gateway-detail-view",params:{mesh:e,dataPlane:u}},R={name:"mesh-detail-view",params:{mesh:e}},W=["kuma.io/protocol","kuma.io/service","kuma.io/zone"],X=Ee(n.dataplane).filter(g=>W.includes(g.label)),oe=(ge=X.find(g=>g.label==="kuma.io/service"))==null?void 0:ge.value,Ue=(ye=X.find(g=>g.label==="kuma.io/protocol"))==null?void 0:ye.value,ie=(he=X.find(g=>g.label==="kuma.io/zone"))==null?void 0:he.value;let fe;oe!==void 0&&(fe={name:"service-detail-view",params:{mesh:e,service:oe}});let me;ie!==void 0&&(me={name:"zones",query:{ns:ie}});const{status:Ve}=Oe(n.dataplane,n.dataplaneInsight),Ne=((_e=n.dataplaneInsight)==null?void 0:_e.subscriptions)??[],Le={totalUpdates:0,totalRejectedUpdates:0,dpVersion:null,envoyVersion:null,selectedTime:NaN,selectedUpdateTime:NaN,version:null},A=Ne.reduce((g,I)=>{var be,ke;if(I.connectTime){const we=Date.parse(I.connectTime);(!g.selectedTime||we>g.selectedTime)&&(g.selectedTime=we)}const re=Date.parse(I.status.lastUpdateTime);return re&&(!g.selectedUpdateTime||re>g.selectedUpdateTime)&&(g.selectedUpdateTime=re),{totalUpdates:g.totalUpdates+parseInt(I.status.total.responsesSent??"0",10),totalRejectedUpdates:g.totalRejectedUpdates+parseInt(I.status.total.responsesRejected??"0",10),dpVersion:((be=I.version)==null?void 0:be.kumaDp.version)||g.dpVersion,envoyVersion:((ke=I.version)==null?void 0:ke.envoy.version)||g.envoyVersion,selectedTime:g.selectedTime,selectedUpdateTime:g.selectedUpdateTime,version:I.version||g.version}},Le),q={name:u,nameRoute:C,mesh:e,meshRoute:R,type:r,zone:ie??"—",zoneRoute:me,service:oe??"—",serviceInsightRoute:fe,protocol:Ue??"—",status:Ve,totalUpdates:A.totalUpdates,totalRejectedUpdates:A.totalRejectedUpdates,dpVersion:A.dpVersion??"—",envoyVersion:A.envoyVersion??"—",warnings:[],unsupportedEnvoyVersion:!1,unsupportedKumaDPVersion:!1,kumaDpAndKumaCpMismatch:!1,lastUpdated:A.selectedUpdateTime?De(new Date(A.selectedUpdateTime).toUTCString()):"—",lastConnected:A.selectedTime?De(new Date(A.selectedTime).toUTCString()):"—",overview:n};if(A.version){const{kind:g}=Ye(A.version);switch(g!==Ze&&q.warnings.push(g),g){case We:q.unsupportedEnvoyVersion=!0;break;case Je:q.unsupportedKumaDPVersion=!0;break}}return S.value&&A.dpVersion&&X.find(I=>I.label===Xe)&&typeof A.version.kumaDp.kumaCpCompatible=="boolean"&&!A.version.kumaDp.kumaCpCompatible&&(q.warnings.push(et),q.kumaDpAndKumaCpMismatch=!0),q}function M({fields:n,query:e}){const u=j.get("filterFields"),r=u!==null?JSON.parse(u):{},C=JSON.stringify(r),R=Object.fromEntries(oa(n)),W=JSON.stringify(R);j.set("filterQuery",e||null),j.set("filterFields",W),C!==W&&(y.value=R)}return(n,e)=>(p(),z(ot,null,{content:V(()=>{var u;return[x(it,{"selected-entity-name":(u=P.value)==null?void 0:u.name,"page-size":w,"is-loading":a.isLoading,error:t.error,"empty-state":m,"table-data":f(G),"table-data-is-empty":f(G).data.length===0,"show-details":"",next:a.nextUrl!==null,"page-offset":a.pageOffset,onTableAction:e[1]||(e[1]=r=>B(r.name)),onLoadData:ne},{additionalControls:V(()=>[x($t,{id:"data-plane-proxy-filter",class:"data-plane-proxy-filter",placeholder:f(U),query:_.value,fields:a.dppFilterFields,onFieldsChange:M},null,8,["placeholder","query","fields"]),l(),a.isGatewayView?(p(),h("div",ra,[ua,l(),Ae(s("select",{id:"data-planes-type-filter","onUpdate:modelValue":e[0]||(e[0]=r=>c.value=r),"data-testid":"data-planes-type-filter"},[(p(!0),h(N,null,F(f(d),(r,C)=>(p(),h("option",{key:C,value:C},T(r),9,da))),128))],512),[[tt,c.value]])])):$("",!0),l(),x(f(at),{label:"Columns",icon:"cogwheel","button-appearance":"outline"},{items:V(()=>[s("div",{onClick:se},[(p(!0),h(N,null,F(f(Y),(r,C)=>(p(),z(f(nt),{key:C,class:"table-header-selector-item",item:r},{default:V(()=>[s("label",{for:`data-plane-table-header-checkbox-${C}`,class:"k-checkbox table-header-selector-item-checkbox"},[s("input",{id:`data-plane-table-header-checkbox-${C}`,checked:r.isChecked,type:"checkbox",class:"k-input",onChange:R=>le(R,r.tableHeaderKey)},null,40,pa),l(" "+T(r.label),1)],8,ca)]),_:2},1032,["item"]))),128))])]),_:1}),l(),x(f(Pe),{appearance:"creation",to:f(O),icon:"plus","data-testid":"data-plane-create-data-plane-button",onClick:Z},{default:V(()=>[l(`
            Create data plane proxy
          `)]),_:1},8,["to"]),l(),f(b).query.ns?(p(),z(f(Pe),{key:1,appearance:"primary",icon:"arrowLeft",to:{name:f(b).name},"data-testid":"data-plane-ns-back-button"},{default:V(()=>[l(`
            View All
          `)]),_:1},8,["to"])):$("",!0)]),_:1},8,["selected-entity-name","is-loading","error","table-data","table-data-is-empty","next","page-offset"])]}),sidebar:V(()=>[P.value!==null?(p(),z(sa,{key:0,"data-plane-overview":P.value},null,8,["data-plane-overview"])):(p(),z(rt,{key:1}))]),_:1}))}});const Ta=pe(fa,[["__scopeId","data-v-dcc59ae1"]]);export{Ta as D};
