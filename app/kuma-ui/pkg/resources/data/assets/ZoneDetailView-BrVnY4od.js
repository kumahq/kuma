import{d as B,e as u,o as l,m as k,w as t,a as i,l as y,B as K,R as O,b as n,k as _,Q as I,t as a,S as x,n as E,a1 as M,L as H,p as f,c as z,A as U,J as h,K as C,F as Z,q as $}from"./index-CKcsX_-l.js";import{q}from"./kong-icons.es678-uIuWh5JE.js";import{S as F}from"./SummaryView-BIwsKbzL.js";const G=["data-testid","innerHTML"],P={"data-testid":"detail-view-details",class:"stack"},X={class:"columns"},J=["innerHTML"],Q={key:0},j=B({__name:"ZoneDetailView",props:{data:{}},setup(v){const d=v;return(W,o)=>{const V=u("KTooltip"),S=u("KCard"),T=u("XAction"),A=u("RouterView"),D=u("AppView"),L=u("DataSource"),N=u("RouteView");return l(),k(N,{name:"zone-cp-detail-view",params:{zone:"",subscription:""}},{default:t(({t:s,uri:R,route:w,me:m})=>{var b,g;return[i(L,{src:R(y(K),"/control-plane/outdated/:version",{version:((g=(b=d.data.zoneInsight.version)==null?void 0:b.kumaCp)==null?void 0:g.version)??"-"})},{default:t(({data:c})=>[i(D,{docs:s("zones.href.docs.cta")},O({default:t(()=>[o[15]||(o[15]=n()),_("div",P,[i(S,null,{default:t(()=>[_("div",X,[i(I,null,{title:t(()=>[n(a(s("http.api.property.status")),1)]),body:t(()=>[i(x,{status:d.data.state},null,8,["status"])]),_:2},1024),o[5]||(o[5]=n()),i(I,{class:E({version:!0,outdated:c==null?void 0:c.outdated})},{title:t(()=>[n(a(s("zone-cps.routes.item.version"))+" ",1),(c==null?void 0:c.outdated)===!0?(l(),k(V,{key:0,"max-width":"300"},{content:t(()=>[_("div",{innerHTML:s("zone-cps.routes.item.version_warning")},null,8,J)]),default:t(()=>[i(y(q),{color:y(M),size:y(H)},null,8,["color","size"]),o[1]||(o[1]=n())]),_:2},1024)):f("",!0)]),body:t(()=>{var e,r;return[n(a(((r=(e=d.data.zoneInsight.version)==null?void 0:e.kumaCp)==null?void 0:r.version)??"â€”"),1)]}),_:2},1032,["class"]),o[6]||(o[6]=n()),i(I,null,{title:t(()=>[n(a(s("http.api.property.type")),1)]),body:t(()=>[n(a(s(`common.product.environment.${d.data.zoneInsight.environment||"unknown"}`)),1)]),_:2},1024),o[7]||(o[7]=n()),i(I,null,{title:t(()=>[n(a(s("zone-cps.routes.item.authentication_type")),1)]),body:t(()=>[n(a(d.data.zoneInsight.authenticationType||s("common.not_applicable")),1)]),_:2},1024)])]),_:2},1024),o[14]||(o[14]=n()),d.data.zoneInsight.subscriptions.length>0?(l(),z("div",Q,[_("h2",null,a(s("zone-cps.detail.subscriptions")),1),o[12]||(o[12]=n()),i(U,{headers:[{...m.get("headers.zoneInstanceId"),label:s("zone-cps.routes.items.headers.zoneInstanceId"),key:"zoneInstanceId"},{...m.get("headers.version"),label:s("zone-cps.routes.items.headers.version"),key:"version"},{...m.get("headers.connected"),label:s("zone-cps.routes.items.headers.connected"),key:"connected"},{...m.get("headers.disconnected"),label:s("zone-cps.routes.items.headers.disconnected"),key:"disconnected"},{...m.get("headers.responses"),label:s("zone-cps.routes.items.headers.responses"),key:"responses"}],"is-selected-row":e=>e.id===w.params.subscription,items:d.data.zoneInsight.subscriptions.map((e,r,p)=>p[p.length-(r+1)]),onResize:m.set},{zoneInstanceId:t(({row:e})=>[i(T,{"data-action":"",to:{name:"zone-cp-subscription-summary-view",params:{subscription:e.id}}},{default:t(()=>[n(a(e.zoneInstanceId),1)]),_:2},1032,["to"])]),version:t(({row:e})=>{var r,p;return[n(a(((p=(r=e.version)==null?void 0:r.kumaCp)==null?void 0:p.version)??"-"),1)]}),connected:t(({row:e})=>[n(a(s("common.formats.datetime",{value:Date.parse(e.connectTime??"")})),1)]),disconnected:t(({row:e})=>[e.disconnectTime?(l(),z(h,{key:0},[n(a(s("common.formats.datetime",{value:Date.parse(e.disconnectTime)})),1)],64)):f("",!0)]),responses:t(({row:e})=>{var r;return[(l(!0),z(h,null,C([((r=e.status)==null?void 0:r.total)??{}],p=>(l(),z(h,null,[n(a(p.responsesSent)+"/"+a(p.responsesAcknowledged),1)],64))),256))]}),_:2},1032,["headers","is-selected-row","items","onResize"]),o[13]||(o[13]=n()),i(A,null,{default:t(({Component:e})=>[w.child()?(l(),k(F,{key:0,width:"670px",onClose:function(){w.replace({name:"zone-cp-detail-view",params:{zone:w.params.zone}})}},{default:t(()=>[(l(),k(Z(e),{data:d.data.zoneInsight.subscriptions},{default:t(()=>[_("p",null,a(s("zone-cps.routes.item.subscription_intro")),1)]),_:2},1032,["data"]))]),_:2},1032,["onClose"])):f("",!0)]),_:2},1024)])):f("",!0)])]),_:2},[d.data.warnings.length>0?{name:"notifications",fn:t(()=>[_("ul",null,[(l(!0),z(h,null,C(d.data.warnings,e=>(l(),z("li",{key:e.kind,"data-testid":`warning-${e.kind}`,innerHTML:s(`common.warnings.${e.kind}`,{...e.payload,...e.kind==="INCOMPATIBLE_ZONE_AND_GLOBAL_CPS_VERSIONS"?{globalCpVersion:(c==null?void 0:c.version)??""}:{}})},null,8,G))),128))])]),key:"0"}:void 0]),1032,["docs"])]),_:2},1032,["src"])]}),_:1})}}}),ne=$(j,[["__scopeId","data-v-ec428780"]]);export{ne as default};
