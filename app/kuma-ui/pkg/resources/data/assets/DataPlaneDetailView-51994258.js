import{d as E,$ as M,I as S,f as m,o,j as y,g as d,k,l as a,h as l,w as t,m as p,a4 as u,C as n,i as e,S as B,a5 as K,a2 as z,K as L,F as A,a6 as D,a7 as $,q as j,r as P}from"./index-a63a3d32.js";import{_ as F}from"./SubscriptionList.vue_vue_type_script_setup_true_lang-b3999bf6.js";import{T as V}from"./TagList-a5cef513.js";import{_ as U}from"./WarningsWidget.vue_vue_type_script_setup_true_lang-174adb2e.js";import{K as Z}from"./constants-b84da159.js";import{a as q,d as x,b as G,p as W,c as J,C as H,I as Q,e as X}from"./dataplane-a974028d.js";import"./AccordionList-504ac940.js";const Y={class:"stack"},aa={class:"columns",style:{"--columns":"3"}},ea={class:"status-with-reason"},ta=["href"],sa={class:"columns",style:{"--columns":"3"}},na={key:1},la=E({__name:"DataPlaneDetails",props:{dataplaneOverview:{type:Object,required:!0}},setup(b){const i=b,{t:s,formatIsoDate:C}=M(),w=S(),_=m(()=>q(i.dataplaneOverview.dataplane,i.dataplaneOverview.dataplaneInsight)),O=m(()=>x(i.dataplaneOverview.dataplane)),I=m(()=>G(i.dataplaneOverview.dataplaneInsight)),v=m(()=>W(i.dataplaneOverview,C)),T=m(()=>{var N;const g=((N=i.dataplaneOverview.dataplaneInsight)==null?void 0:N.subscriptions)??[];if(g.length===0)return[];const f=g[g.length-1];if(!("version"in f)||!f.version)return[];const c=[],r=f.version;if(r.kumaDp&&r.envoy){const h=J(r);h.kind!==H&&h.kind!==Q&&c.push(h)}return w("use zones")&&x(i.dataplaneOverview.dataplane).find(R=>R.label===Z)&&typeof r.kumaDp.kumaCpCompatible=="boolean"&&!r.kumaDp.kumaCpCompatible&&c.push({kind:X,payload:{kumaDp:r.kumaDp.version}}),c});return(g,f)=>{var c;return o(),y("div",Y,[T.value.length>0?(o(),d(U,{key:0,warnings:T.value,"data-testid":"data-plane-warnings"},null,8,["warnings"])):k("",!0),a(),l(e(D),null,{body:t(()=>[p("div",aa,[l(u,null,{title:t(()=>[a(n(e(s)("http.api.property.status")),1)]),body:t(()=>[p("div",ea,[l(B,{status:_.value.status},null,8,["status"]),a(),_.value.reason.length>0?(o(),d(e(K),{key:0,label:_.value.reason.join(", "),class:"reason-tooltip"},{default:t(()=>[l(e(z),{icon:"info",size:e(L),"hide-title":""},null,8,["size"])]),_:1},8,["label"])):k("",!0)])]),_:1}),a(),l(u,null,{title:t(()=>[a(n(e(s)("http.api.property.tags")),1)]),body:t(()=>[O.value.length>0?(o(),d(V,{key:0,tags:O.value},null,8,["tags"])):(o(),y(A,{key:1},[a(n(e(s)("common.detail.none")),1)],64))]),_:1}),a(),l(u,null,{title:t(()=>[a(n(e(s)("http.api.property.dependencies")),1)]),body:t(()=>[I.value!==null?(o(),d(V,{key:0,tags:I.value},null,8,["tags"])):(o(),y(A,{key:1},[a(n(e(s)("common.detail.none")),1)],64))]),_:1})])]),_:1}),a(),p("div",null,[p("h2",null,n(e(s)("data-planes.detail.mtls")),1),a(),v.value===null?(o(),d(e($),{key:0,class:"mt-4",appearance:"warning"},{alertMessage:t(()=>[a(n(e(s)("data-planes.detail.no_mtls"))+` â€”
          `,1),p("a",{href:e(s)("data-planes.href.docs.mutual-tls"),class:"external-link",target:"_blank"},n(e(s)("data-planes.detail.no_mtls_learn_more",{product:e(s)("common.product.name")})),9,ta)]),_:1})):(o(),d(e(D),{key:1,class:"mt-4"},{body:t(()=>[p("div",sa,[l(u,null,{title:t(()=>[a(n(e(s)("http.api.property.certificateExpirationTime")),1)]),body:t(()=>[a(n(v.value.certificateExpirationTime),1)]),_:1}),a(),l(u,null,{title:t(()=>[a(n(e(s)("http.api.property.lastCertificateRegeneration")),1)]),body:t(()=>[a(n(v.value.lastCertificateRegeneration),1)]),_:1}),a(),l(u,null,{title:t(()=>[a(n(e(s)("http.api.property.certificateRegenerations")),1)]),body:t(()=>[a(n(v.value.certificateRegenerations),1)]),_:1})])]),_:1}))]),a(),(((c=i.dataplaneOverview.dataplaneInsight)==null?void 0:c.subscriptions)??[]).length>0?(o(),y("div",na,[p("h2",null,n(e(s)("data-planes.detail.subscriptions")),1),a(),l(e(D),{class:"mt-4"},{body:t(()=>{var r;return[l(F,{subscriptions:((r=i.dataplaneOverview.dataplaneInsight)==null?void 0:r.subscriptions)??[]},null,8,["subscriptions"])]}),_:1})])):k("",!0)])}}});const ia=j(la,[["__scopeId","data-v-e0adad19"]]),va=E({__name:"DataPlaneDetailView",props:{data:{}},setup(b){const i=b;return(s,C)=>{const w=P("AppView"),_=P("RouteView");return o(),d(_,{name:"data-plane-detail-view"},{default:t(()=>[l(w,null,{default:t(()=>[l(ia,{"dataplane-overview":i.data,"data-testid":"detail-view-details"},null,8,["dataplane-overview"])]),_:1})]),_:1})}}});export{va as default};
