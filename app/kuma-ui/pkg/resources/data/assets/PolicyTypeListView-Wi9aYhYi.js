import{d as S,r as t,p as y,o as a,w as e,b as o,e as f,m as D,H as z,F,l as m,c,L as _,M as w,n as N,t as L,y as $,_ as j}from"./index-DXTAqJSO.js";const E=S({__name:"PolicyTypeListView",setup(H){return(q,n)=>{const R=t("RouteTitle"),V=t("XLayout"),h=t("XAction"),x=t("DataCollection"),P=t("DataLoader"),T=t("XCard"),X=t("RouterView"),k=t("DataSource"),g=t("AppView"),A=t("RouteView");return a(),y(A,{name:"policy-list-view",params:{mesh:"",policyPath:"",policy:""}},{default:e(({uri:v,route:i,t:B})=>[o(R,{render:!1,title:B("policies.routes.types.title")},null,8,["title"]),n[2]||(n[2]=f()),o(g,null,{default:e(()=>[o(k,{src:v(D(z),"/mesh-insights/:name",{name:i.params.mesh},{})},{default:e(({data:u})=>[o(k,{src:v(D(F),"/policy-types",{})},{default:e(({data:p,error:b})=>[o(V,{variant:"x-stack",size:"large"},{default:e(()=>[o(T,{class:"policy-type-list","data-testid":"policy-type-list"},{default:e(()=>[o(P,{data:[p],errors:[b]},{default:e(()=>[(a(!0),c(_,null,w([typeof u?.policies>"u"?p.policyTypes:p.policyTypes.filter(s=>!s.policy.isTargetRef&&(u.policies?.[s.name]?.total??0)>0)],s=>(a(),y(x,{key:s,predicate:typeof u?.policies>"u"?void 0:d=>s.length>0||d.policy.isTargetRef,items:p.policyTypes},{default:e(({items:d})=>[m("ul",null,[(a(!0),c(_,null,w([d.find(r=>r.path===i.params.policyPath)],r=>(a(),c(_,{key:r},[(a(!0),c(_,null,w(d,(l,M)=>(a(),c("li",{key:l.path,class:N({active:r&&r.path===l.path})},[o(h,{to:{name:"policy-list-view",params:{mesh:i.params.mesh,policyPath:l.path}},"data-testid":`policy-type-link-${l.name}`,onVnodeMounted:C=>{i.params.policyPath.length===0&&M===0&&C.props?.to&&i.replace(C.props.to)}},{default:e(()=>[o(V,{variant:"x-stack",justify:"between"},{default:e(()=>[m("span",null,L(l.name),1),n[0]||(n[0]=f()),m("span",null,L(u?.policies?.[l.name]?.total??0),1)]),_:2},1024)]),_:2},1032,["to","data-testid","onVnodeMounted"])],2))),128))],64))),128))])]),_:2},1032,["predicate","items"]))),128))]),_:2},1032,["data","errors"])]),_:2},1024),n[1]||(n[1]=f()),m("div",null,[o(X,null,{default:e(({Component:s})=>[(a(),y($(s),{"policy-types":p?.policyTypes},null,8,["policy-types"]))]),_:2},1024)])]),_:2},1024)]),_:2},1032,["src"])]),_:2},1032,["src"])]),_:2},1024)]),_:1})}}}),J=j(E,[["__scopeId","data-v-d33b089d"]]);export{J as default};
