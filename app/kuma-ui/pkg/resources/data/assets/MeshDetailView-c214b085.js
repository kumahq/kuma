import{d as R,c as m,o as l,e as f,g as e,t as s,b as a,h as i,v as V,u as q,w as t,q as x,a as c,Y as D,F as $,G as j}from"./index-9be81fe6.js";import{g as I,f as C,m as O,D as b,R as A,A as B,o as M,p as F,E as L,q as Y,_ as E}from"./RouteView.vue_vue_type_script_setup_true_lang-4288a062.js";import{_ as G}from"./ResourceCodeBlock.vue_vue_type_script_setup_true_lang-7ee886cf.js";import{T as K}from"./TextWithCopyButton-fb130417.js";import{_ as P}from"./RouteTitle.vue_vue_type_script_setup_true_lang-5d91e627.js";import"./CodeBlock.vue_vue_type_style_index_0_lang-3e4e69e8.js";import"./CopyButton-9933fc20.js";const W={class:"date-status"},z=R({__name:"ResourceDateStatus",props:{creationTime:{},modificationTime:{}},setup(k){const o=k,{t:n,formatIsoDate:y}=I(),_=m(()=>y(o.creationTime)),d=m(()=>y(o.modificationTime));return(v,p)=>(l(),f("span",W,[e(s(a(n)("common.detail.created"))+": "+s(_.value)+" ",1),i(a(V),{icon:"arrowRight"}),e(" "+s(a(n)("common.detail.modified"))+": "+s(d.value),1)]))}});const H=C(z,[["__scopeId","data-v-76eb341b"]]),J={class:"stack"},Q={class:"stack"},U={class:"columns",style:{"--columns":"4"}},X={class:"columns",style:{"--columns":"4"}},Z={class:"date-status-wrapper"},ee=R({__name:"MeshDetails",props:{mesh:{type:Object,required:!0},meshInsight:{type:Object,required:!0}},setup(k){const o=k,{t:n}=I(),y=O(),_=q(),d=m(()=>u(o.mesh.mtls)),v=m(()=>u(o.mesh.logging)),p=m(()=>u(o.mesh.metrics)),g=m(()=>u(o.mesh.tracing)),w=m(()=>Object.values(o.meshInsight.policies??{}).reduce((r,h)=>r+h.total,0));function u(r){if(!r||!Array.isArray(r==null?void 0:r.backends)||r.backends.length===0)return"";const h=r.enabledBackend??r.defaultBackend??r.backends[0].name,T=r.backends.find(S=>S.name===h);return T===void 0?"":`${T.type} / ${T.name}`}async function N(r){const h=_.params.mesh;return await y.getMesh({name:h},r)}return(r,h)=>(l(),f("div",J,[i(a(j),null,{body:t(()=>[x("div",Q,[x("div",U,[i(b,null,{title:t(()=>[e(s(a(n)("http.api.property.name")),1)]),body:t(()=>[i(K,{text:o.mesh.name},null,8,["text"])]),_:1}),e(),i(A,{total:o.meshInsight.services.total??0,"data-testid":"services-status"},{title:t(()=>[e(s(a(n)("meshes.detail.services")),1)]),_:1},8,["total"]),e(),i(A,{total:o.meshInsight.dataplanesByType.standard.total??0,"data-testid":"data-plane-proxies-status"},{title:t(()=>[e(s(a(n)("meshes.detail.data_plane_proxies")),1)]),_:1},8,["total"]),e(),i(A,{total:w.value,"data-testid":"policies-status"},{title:t(()=>[e(s(a(n)("meshes.detail.policies")),1)]),_:1},8,["total"])]),e(),x("div",X,[i(b,null,{title:t(()=>[e(s(a(n)("http.api.property.mtls")),1)]),body:t(()=>[d.value===""?(l(),c(a(D),{key:0,appearance:"neutral"},{default:t(()=>[e(s(a(n)("meshes.detail.disabled")),1)]),_:1})):(l(),f($,{key:1},[e(s(d.value),1)],64))]),_:1}),e(),i(b,null,{title:t(()=>[e(s(a(n)("http.api.property.logging")),1)]),body:t(()=>[v.value===""?(l(),c(a(D),{key:0,appearance:"neutral"},{default:t(()=>[e(s(a(n)("meshes.detail.disabled")),1)]),_:1})):(l(),f($,{key:1},[e(s(v.value),1)],64))]),_:1}),e(),i(b,null,{title:t(()=>[e(s(a(n)("http.api.property.metrics")),1)]),body:t(()=>[p.value===""?(l(),c(a(D),{key:0,appearance:"neutral"},{default:t(()=>[e(s(a(n)("meshes.detail.disabled")),1)]),_:1})):(l(),f($,{key:1},[e(s(p.value),1)],64))]),_:1}),e(),i(b,null,{title:t(()=>[e(s(a(n)("http.api.property.tracing")),1)]),body:t(()=>[g.value===""?(l(),c(a(D),{key:0,appearance:"neutral"},{default:t(()=>[e(s(a(n)("meshes.detail.disabled")),1)]),_:1})):(l(),f($,{key:1},[e(s(g.value),1)],64))]),_:1})])])]),_:1}),e(),i(G,{id:"code-block-mesh",resource:o.mesh,"resource-fetcher":N},null,8,["resource"]),e(),x("div",Z,[i(H,{"creation-time":o.mesh.creationTime,"modification-time":o.mesh.modificationTime},null,8,["creation-time","modification-time"])])]))}});const te=C(ee,[["__scopeId","data-v-08df0331"]]),ce=R({__name:"MeshDetailView",setup(k){const{t:o}=I();return(n,y)=>(l(),c(E,{name:"mesh-overview-view"},{default:t(({route:_})=>[i(P,{title:a(o)("meshes.routes.overview.title")},null,8,["title"]),e(),i(B,null,{default:t(()=>[i(M,{src:`/meshes/${_.params.mesh}`},{default:t(({data:d,isLoading:v,error:p})=>[i(M,{src:`/mesh-insights/${_.params.mesh}`},{default:t(({data:g,isLoading:w,error:u})=>[v||w?(l(),c(F,{key:0})):p??u?(l(),c(L,{key:1,error:p??u},null,8,["error"])):d===void 0||g===void 0?(l(),c(Y,{key:2})):(l(),c(te,{key:3,mesh:d,"mesh-insight":g,"data-testid":"detail-view-details"},null,8,["mesh","mesh-insight"]))]),_:2},1032,["src"])]),_:2},1032,["src"])]),_:2},1024)]),_:1}))}});export{ce as default};
