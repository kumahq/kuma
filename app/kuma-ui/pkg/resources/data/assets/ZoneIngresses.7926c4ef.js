import{_ as F,P as Z,k as B,K as h,Q as K,H as M,l as N,o,f as g,b as m,w as e,d as a,n as b,h as l,t as _,F as f,j as v,e as O,r as s}from"./index.6180ff6f.js";import{S as R,a as H}from"./SubscriptionHeader.f3e62532.js";import{M as V}from"./MultizoneInfo.dfca5c53.js";import{g as U}from"./tableDataUtils.9642ba3f.js";import{F as q}from"./FrameSkeleton.9d8fd5de.js";import{D as W,L as G}from"./LabelList.33120ec9.js";import{E as P}from"./EntityURLControl.1c6f3e0f.js";import{T as j}from"./TabsWidget.6e628a3c.js";import{A as Q,a as X}from"./AccordionItem.ddeeebdc.js";import{E as J}from"./EnvoyData.6062ceda.js";import"./datadogEvents.f0c2b8e0.js";import"./CodeBlock.c76d2442.js";const Y={name:"ZoneIngresses",components:{EnvoyData:J,FrameSkeleton:q,DataOverview:W,TabsWidget:j,LabelList:G,AccordionList:Q,AccordionItem:X,SubscriptionDetails:R,SubscriptionHeader:H,MultizoneInfo:V,EntityURLControl:P},data(){return{isLoading:!0,isEmpty:!1,hasError:!1,empty_state:{title:"No Data",message:"There are no Zone Ingresses present."},tableData:{headers:[{key:"actions",hideLabel:!0},{label:"Status",key:"status"},{label:"Name",key:"name"}],data:[]},tabs:[{hash:"#overview",title:"Overview"},{hash:"#insights",title:"Zone Ingress Insights"},{hash:"#xds-configuration",title:"XDS Configuration"},{hash:"#envoy-stats",title:"Stats"},{hash:"#envoy-clusters",title:"Clusters"}],entity:{},rawData:[],pageSize:Z,next:null,subscriptionsReversed:[]}},computed:{...B({multicluster:"config/getMulticlusterStatus"})},watch:{$route(){this.isLoading=!0,this.isEmpty=!1,this.hasError=!1,this.init()}},beforeMount(){this.init()},methods:{init(){this.multicluster&&this.loadData()},tableAction(i){const r=i;this.getEntity(r)},async loadData(i="0"){this.isLoading=!0,this.isEmpty=!1;const r=this.$route.query.ns||null;try{const{data:n,next:u}=await U({getAllEntities:h.getAllZoneIngressOverviews.bind(h),getSingleEntity:h.getZoneIngressOverview.bind(h),size:this.pageSize,offset:i,query:r});this.next=u,n.length?(this.isEmpty=!1,this.rawData=n,this.getEntity({name:n[0].name}),this.tableData.data=n.map(t=>{const{zoneIngressInsight:p={}}=t;return{...t,...K(p)}})):(this.tableData.data=[],this.isEmpty=!0)}catch(n){this.hasError=!0,this.isEmpty=!0,console.error(n)}finally{this.isLoading=!1}},getEntity(i){const r=["type","name"],n=this.rawData.find(t=>t.name===i.name),u=M(n,"zoneIngressInsight.subscriptions",[]);this.subscriptionsReversed=Array.from(u).reverse(),this.entity=N(n,r)}}},$={class:"zoneingresses"},tt=l("span",{class:"custom-control-icon"}," \u2190 ",-1),et=O(" View All ");function st(i,r,n,u,t,p){const E=s("MultizoneInfo"),D=s("KButton"),L=s("DataOverview"),S=s("EntityURLControl"),I=s("LabelList"),z=s("SubscriptionHeader"),w=s("SubscriptionDetails"),A=s("AccordionItem"),k=s("AccordionList"),x=s("KCard"),y=s("EnvoyData"),C=s("TabsWidget"),T=s("FrameSkeleton");return o(),g("div",$,[i.multicluster===!1?(o(),m(E,{key:0})):(o(),m(T,{key:1},{default:e(()=>[a(L,{"page-size":t.pageSize,"has-error":t.hasError,"is-loading":t.isLoading,"empty-state":t.empty_state,"table-data":t.tableData,"table-data-is-empty":t.isEmpty,next:t.next,onTableAction:p.tableAction,onLoadData:r[0]||(r[0]=c=>p.loadData(c))},{additionalControls:e(()=>[i.$route.query.ns?(o(),m(D,{key:0,class:"back-button",appearance:"primary",size:"small",to:{name:"zoneingresses"}},{default:e(()=>[tt,et]),_:1})):b("",!0)]),_:1},8,["page-size","has-error","is-loading","empty-state","table-data","table-data-is-empty","next","onTableAction"]),t.isEmpty===!1?(o(),m(C,{key:0,"has-error":t.hasError,"is-loading":t.isLoading,tabs:t.tabs,"initial-tab-override":"overview"},{tabHeader:e(()=>[l("div",null,[l("h3",null," Zone Ingress: "+_(t.entity.name),1)]),l("div",null,[a(S,{name:t.entity.name},null,8,["name"])])]),overview:e(()=>[a(I,null,{default:e(()=>[l("div",null,[l("ul",null,[(o(!0),g(f,null,v(t.entity,(c,d)=>(o(),g("li",{key:d},[l("h4",null,_(d),1),l("p",null,_(c),1)]))),128))])])]),_:1})]),insights:e(()=>[a(x,{"border-variant":"noBorder"},{body:e(()=>[a(k,{"initially-open":0},{default:e(()=>[(o(!0),g(f,null,v(t.subscriptionsReversed,(c,d)=>(o(),m(A,{key:d},{"accordion-header":e(()=>[a(z,{details:c},null,8,["details"])]),"accordion-content":e(()=>[a(w,{details:c,"is-discovery-subscription":""},null,8,["details"])]),_:2},1024))),128))]),_:1})]),_:1})]),"xds-configuration":e(()=>[a(y,{"data-path":"xds","zone-ingress-name":t.entity.name},null,8,["zone-ingress-name"])]),"envoy-stats":e(()=>[a(y,{"data-path":"stats","zone-ingress-name":t.entity.name},null,8,["zone-ingress-name"])]),"envoy-clusters":e(()=>[a(y,{"data-path":"clusters","zone-ingress-name":t.entity.name},null,8,["zone-ingress-name"])]),_:1},8,["has-error","is-loading","tabs"])):b("",!0)]),_:1}))])}const gt=F(Y,[["render",st]]);export{gt as default};
