import{_ as B}from"./PolicySummary.vue_vue_type_script_setup_true_lang-Bfd78L9c.js";import{d as P,r as s,o as p,m as c,w as t,b as n,s as i,t as y,e as d,c as _,F as C,v as g,T as q,p as D,a1 as L,q as A,_ as N}from"./index-BrW-Ii1H.js";import{_ as x}from"./ResourceCodeBlock.vue_vue_type_script_setup_true_lang-DHQZf8wo.js";const Q=P({__name:"PolicySummaryView",props:{items:{},policyType:{}},setup(k){const u=k;return(v,l)=>{const S=s("XEmptyState"),R=s("RouteTitle"),w=s("XAction"),E=s("XSelect"),V=s("XLayout"),F=s("DataLoader"),b=s("AppView"),M=s("DataCollection"),X=s("RouteView");return p(),c(X,{name:"policy-summary-view",params:{mesh:"",policyPath:"",policy:"",codeSearch:"",codeFilter:!1,codeRegExp:!1,format:String}},{default:t(({uri:T,route:e,t:r})=>[n(M,{items:u.items,predicate:f=>f.id===e.params.policy,find:!0},{empty:t(()=>[n(S,null,{title:t(()=>[i("h2",null,y(r("common.collection.summary.empty_title",{type:u.policyType.name})),1)]),default:t(()=>[l[0]||(l[0]=d()),i("p",null,y(r("common.collection.summary.empty_message",{type:u.policyType.name})),1)]),_:2},1024)]),default:t(({items:f})=>[(p(!0),_(C,null,g([f[0]],m=>(p(),c(b,{key:m.id},{title:t(()=>[i("h2",null,[n(w,{to:{name:"policy-detail-view",params:{mesh:e.params.mesh,policyPath:e.params.policyPath,policy:e.params.policy}}},{default:t(()=>[n(R,{title:r("policies.routes.item.title",{name:m.name})},null,8,["title"])]),_:2},1032,["to"])])]),default:t(()=>[l[3]||(l[3]=d()),m?(p(),c(B,{key:0,policy:m,format:e.params.format},{header:t(()=>[i("header",null,[n(V,{type:"separated",size:"max"},{default:t(()=>[i("h3",null,y(r("policies.routes.item.config")),1),l[1]||(l[1]=d()),(p(!0),_(C,null,g([[...m.spec?["structured"]:[],"universal","k8s"]],o=>(p(),_("div",{key:typeof o},[n(E,{label:r("policies.routes.item.format"),selected:o.includes(e.params.format)?e.params.format:o[0],onChange:a=>{e.update({format:a})},onVnodeBeforeMount:a=>{var h;return((h=a==null?void 0:a.props)==null?void 0:h.selected)&&o.includes(a.props.selected)&&a.props.selected!==e.params.format&&e.update({format:a.props.selected})}},q({_:2},[g(o,a=>({name:`${a}-option`,fn:t(()=>[d(y(r(`policies.routes.item.formats.${a}`)),1)])}))]),1032,["label","selected","onChange","onVnodeBeforeMount"])]))),128))]),_:2},1024)])]),default:t(()=>[l[2]||(l[2]=d()),e.params.format==="universal"?(p(),c(x,{key:0,"data-testid":"codeblock-yaml-universal",language:"yaml",resource:m.config,"is-searchable":"","show-k8s-copy-button":!1,query:e.params.codeSearch,"is-filter-mode":e.params.codeFilter,"is-reg-exp-mode":e.params.codeRegExp,onQueryChange:o=>e.update({codeSearch:o}),onFilterModeChange:o=>e.update({codeFilter:o}),onRegExpModeChange:o=>e.update({codeRegExp:o})},null,8,["resource","query","is-filter-mode","is-reg-exp-mode","onQueryChange","onFilterModeChange","onRegExpModeChange"])):(p(),c(F,{key:1,src:T(D(L),"/meshes/:mesh/policy-path/:path/policy/:name/as/kubernetes",{mesh:e.params.mesh,path:e.params.policyPath,name:e.params.policy})},{default:t(({data:o})=>[n(x,{"data-testid":"codeblock-yaml-k8s",language:"yaml",resource:o,"is-searchable":"","show-k8s-copy-button":!1,query:e.params.codeSearch,"is-filter-mode":e.params.codeFilter,"is-reg-exp-mode":e.params.codeRegExp,onQueryChange:a=>e.update({codeSearch:a}),onFilterModeChange:a=>e.update({codeFilter:a}),onRegExpModeChange:a=>e.update({codeRegExp:a})},null,8,["resource","query","is-filter-mode","is-reg-exp-mode","onQueryChange","onFilterModeChange","onRegExpModeChange"])]),_:2},1032,["src"]))]),_:2},1032,["policy","format"])):A("",!0)]),_:2},1024))),128))]),_:2},1032,["items","predicate"])]),_:1})}}}),G=N(Q,[["__scopeId","data-v-e8d51321"]]);export{G as default};
