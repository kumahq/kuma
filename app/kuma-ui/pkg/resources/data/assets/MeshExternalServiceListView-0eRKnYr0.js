import{d as K,r as t,o as l,m as i,w as s,b as n,e as m,l as L,aB as R,A as T,U as N,t as c,c as p,F as u,p as _,s as f,E}from"./index-BRBWbknO.js";import{S as X}from"./SummaryView-CK1e_JHQ.js";const P=K({__name:"MeshExternalServiceListView",setup(q){return(F,G)=>{const k=t("RouteTitle"),d=t("XAction"),v=t("KBadge"),y=t("KTruncate"),b=t("XActionGroup"),z=t("RouterView"),g=t("DataCollection"),C=t("DataLoader"),x=t("KCard"),V=t("AppView"),A=t("RouteView"),D=t("DataSource");return l(),i(D,{src:"/me"},{default:s(({data:w})=>[w?(l(),i(A,{key:0,name:"mesh-external-service-list-view",params:{page:1,size:w.pageSize,mesh:"",service:""}},{default:s(({route:o,t:h,can:S,uri:B})=>[n(k,{render:!1,title:h("services.routes.mesh-external-service-list-view.title")},null,8,["title"]),m(),n(V,null,{default:s(()=>[n(x,null,{default:s(()=>[n(C,{src:B(L(R),"/meshes/:mesh/mesh-external-services",{mesh:o.params.mesh},{page:o.params.page,size:o.params.size})},{loadable:s(({data:a})=>[n(g,{type:"services",items:(a==null?void 0:a.items)??[void 0]},{default:s(()=>[n(T,{"data-testid":"service-collection",headers:[{label:"Name",key:"name"},{label:"Namespace",key:"namespace"},...S("use zones")?[{label:"Zone",key:"zone"}]:[],{label:"TLS",key:"tls"},{label:"Addresses",key:"addresses"},{label:"Port",key:"port"},{label:"Actions",key:"actions",hideLabel:!0}],"page-number":o.params.page,"page-size":o.params.size,total:a==null?void 0:a.total,items:a==null?void 0:a.items,"is-selected-row":e=>e.name===o.params.service,onChange:o.update},{name:s(({row:e})=>[n(N,{text:e.name},{default:s(()=>[n(d,{"data-action":"",to:{name:"mesh-external-service-summary-view",params:{mesh:e.mesh,service:e.id},query:{page:o.params.page,size:o.params.size}}},{default:s(()=>[m(c(e.name),1)]),_:2},1032,["to"])]),_:2},1032,["text"])]),namespace:s(({row:e})=>[m(c(e.namespace),1)]),zone:s(({row:e})=>[e.labels&&e.labels["kuma.io/origin"]==="zone"&&e.labels["kuma.io/zone"]?(l(),p(u,{key:0},[e.labels["kuma.io/zone"]?(l(),i(d,{key:0,to:{name:"zone-cp-detail-view",params:{zone:e.labels["kuma.io/zone"]}}},{default:s(()=>[m(c(e.labels["kuma.io/zone"]),1)]),_:2},1032,["to"])):_("",!0)],64)):(l(),p(u,{key:1},[m(c(h("common.detail.none")),1)],64))]),tls:s(({row:e})=>[n(v,{appearance:"neutral"},{default:s(()=>{var r;return[m(c((r=e.spec.tls)!=null&&r.enabled?"Enabled":"Disabled"),1)]}),_:2},1024)]),addresses:s(({row:e})=>[n(y,null,{default:s(()=>[(l(!0),p(u,null,f(e.status.addresses,r=>(l(),p("span",{key:r.hostname},c(r.hostname),1))),128))]),_:2},1024)]),port:s(({row:e})=>[e.spec.match?(l(!0),p(u,{key:0},f([e.spec.match],r=>(l(),i(v,{key:r.port,appearance:"info"},{default:s(()=>[m(c(r.port)+"/"+c(r.protocol),1)]),_:2},1024))),128)):_("",!0)]),actions:s(({row:e})=>[n(b,null,{default:s(()=>[n(d,{to:{name:"mesh-external-service-detail-view",params:{mesh:e.mesh,service:e.id}}},{default:s(()=>[m(c(h("common.collection.actions.view")),1)]),_:2},1032,["to"])]),_:2},1024)]),_:2},1032,["headers","page-number","page-size","total","items","is-selected-row","onChange"]),m(),a!=null&&a.items&&o.params.service?(l(),i(z,{key:0},{default:s(e=>[n(X,{onClose:r=>o.replace({name:"mesh-external-service-list-view",params:{mesh:o.params.mesh},query:{page:o.params.page,size:o.params.size}})},{default:s(()=>[(l(),i(E(e.Component),{items:a==null?void 0:a.items},null,8,["items"]))]),_:2},1032,["onClose"])]),_:2},1024)):_("",!0)]),_:2},1032,["items"])]),_:2},1032,["src"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["params"])):_("",!0)]),_:1})}}});export{P as default};
