import{d as S,c as _,Z as B,o as a,a as c,w as e,q as d,f as I,g as s,h as t,b as i,H as h,t as p,N as V,e as D,F as $,s as E}from"./index-b69407d3.js";import{g as C,B as T,F as Z,D as g,S as L,T as q,f as F,A as J,o as M,s as P,E as R,t as j,_ as G}from"./RouteView.vue_vue_type_script_setup_true_lang-b15b5899.js";import{a as H,A as K,S as U,b as W}from"./SubscriptionHeader-35bf4f4c.js";import{_ as Q}from"./CodeBlock.vue_vue_type_style_index_0_lang-2c5dcd04.js";import{_ as X}from"./TabsWidget.vue_vue_type_style_index_0_lang-39db7abc.js";import{_ as Y}from"./WarningsWidget.vue_vue_type_script_setup_true_lang-d0efb36e.js";import{f as ee}from"./dataplane-30467516.js";import{_ as te}from"./RouteTitle.vue_vue_type_script_setup_true_lang-efb039e3.js";import"./WarningIcon.vue_vue_type_script_setup_true_lang-c514038b.js";const se={class:"stack"},ne={class:"columns",style:{"--columns":"4"}},oe=S({__name:"ZoneDetails",props:{zoneOverview:{type:Object,required:!0}},setup(z){const r=z,{t:l}=C(),w=T(),m=[{hash:"#overview",title:l("zone-cps.routes.item.tabs.overview")},{hash:"#insights",title:l("zone-cps.routes.item.tabs.insights")}],v=_(()=>{var o;for(const n of((o=r.zoneOverview.zoneInsight)==null?void 0:o.subscriptions)??[])if(n.config)return JSON.parse(n.config).environment;return"kubernetes"}),y=_(()=>Z(r.zoneOverview)),f=_(()=>B(r.zoneOverview)),k=_(()=>{var u;const o=[],n=((u=r.zoneOverview.zoneInsight)==null?void 0:u.subscriptions)??[];if(n.length>0){const b=n[n.length-1],A=b.version.kumaCp.version||"-",{kumaCpGlobalCompatible:x=!0}=b.version.kumaCp;x||o.push({kind:ee,payload:{zoneCpVersion:A,globalCpVersion:w("KUMA_VERSION")}})}return o}),O=_(()=>{var n;const o=((n=r.zoneOverview.zoneInsight)==null?void 0:n.subscriptions)??[];if(o.length>0){const u=o[o.length-1];if(u.config)return JSON.stringify(JSON.parse(u.config),null,2)}return null}),N=_(()=>{var n;const o=((n=r.zoneOverview.zoneInsight)==null?void 0:n.subscriptions)??[];return Array.from(o).reverse()});return(o,n)=>(a(),c(X,{tabs:m},{overview:e(()=>[d("div",se,[k.value.length>0?(a(),c(Y,{key:0,warnings:k.value},null,8,["warnings"])):I("",!0),s(),t(i(h),null,{body:e(()=>[d("div",ne,[t(g,null,{title:e(()=>[s(p(i(l)("http.api.property.status")),1)]),body:e(()=>[t(L,{status:y.value},null,8,["status"])]),_:1}),s(),t(g,null,{title:e(()=>[s(p(i(l)("http.api.property.name")),1)]),body:e(()=>[t(q,{text:r.zoneOverview.name},null,8,["text"])]),_:1}),s(),t(g,null,{title:e(()=>[s(p(i(l)("http.api.property.type")),1)]),body:e(()=>[s(p(v.value),1)]),_:1}),s(),t(g,null,{title:e(()=>[s(p(i(l)("http.api.property.authenticationType")),1)]),body:e(()=>[s(p(f.value),1)]),_:1})])]),_:1}),s(),d("div",null,[d("h2",null,p(i(l)("zone-cps.detail.configuration_title")),1),s(),t(i(h),{class:"mt-4"},{body:e(()=>[O.value!==null?(a(),c(Q,{key:0,id:"code-block-zone-config",language:"json",code:O.value,"is-searchable":"","query-key":"zone-config"},null,8,["code"])):(a(),c(i(V),{key:1,class:"mt-4","data-testid":"warning-no-subscriptions",appearance:"warning"},{alertMessage:e(()=>[s(p(i(l)("zone-cps.detail.no_subscriptions")),1)]),_:1}))]),_:1})])])]),insights:e(()=>[t(i(h),null,{body:e(()=>[t(H,{"initially-open":0},{default:e(()=>[(a(!0),D($,null,E(N.value,(u,b)=>(a(),c(K,{key:b},{"accordion-header":e(()=>[t(U,{subscription:u},null,8,["subscription"])]),"accordion-content":e(()=>[t(W,{subscription:u},null,8,["subscription"])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}))}});const ie=F(oe,[["__scopeId","data-v-edd36e9c"]]),ve=S({__name:"ZoneDetailView",setup(z){const{t:r}=C();return(l,w)=>(a(),c(G,{name:"zone-cp-detail-view","data-testid":"zone-cp-detail-view"},{default:e(({route:m})=>[t(J,{breadcrumbs:[{to:{name:"zone-cp-list-view"},text:i(r)("zone-cps.routes.item.breadcrumbs")}]},{title:e(()=>[d("h1",null,[t(te,{title:i(r)("zone-cps.routes.item.title",{name:m.params.zone}),render:!0},null,8,["title"])])]),default:e(()=>[s(),t(M,{src:`/zone-cps/${m.params.zone}`},{default:e(({data:v,isLoading:y,error:f})=>[y?(a(),c(P,{key:0})):f!==void 0?(a(),c(R,{key:1,error:f},null,8,["error"])):v===void 0?(a(),c(j,{key:2})):(a(),c(ie,{key:3,"zone-overview":v,"data-testid":"detail-view-details"},null,8,["zone-overview"]))]),_:2},1032,["src"])]),_:2},1032,["breadcrumbs"])]),_:1}))}});export{ve as default};
