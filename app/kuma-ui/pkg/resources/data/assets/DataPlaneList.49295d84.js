var ze=Object.defineProperty;var He=(t,o,a)=>o in t?ze(t,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[o]=a;var le=(t,o,a)=>(He(t,typeof o!="symbol"?o+"":o,a),a);import{d as pe,g as C,cx as Ne,co as xe,cy as Le,cz as Qe,cc as Ge,o as p,c as y,e as i,b as l,a as x,w as K,bV as T,u as m,j as U,F as M,cd as B,m as ie,bX as fe,bY as me,k as ve,bP as A,h as ee,c0 as Ye,cA as Fe,cB as Je,ci as Ie,bQ as Ze,bR as We,cv as Xe,f as et,cm as $e,cC as tt,cD as at,cr as nt,cs as st,cE as lt,cq as it,i as X,cF as ot,cG as rt,cH as ut,O as Ve,bZ as Ue,ce as dt,cf as ct}from"./index.f9d2d6e1.js";import{Q as J,D as pt}from"./DataOverview.65b29a11.js";import{C as ft}from"./ContentWrapper.d6ef6353.js";import{T as mt}from"./TagList.0cfcc420.js";import{S as vt}from"./StatusBadge.d3b1a2a6.js";import{_ as gt}from"./YamlView.vue_vue_type_script_setup_true_lang.03379c2e.js";import{_ as yt}from"./EmptyBlock.vue_vue_type_script_setup_true_lang.d2009474.js";const Ke=[{key:"status",label:"Status"},{key:"name",label:"DPP"},{key:"type",label:"Type"},{key:"service",label:"Service"},{key:"protocol",label:"Protocol"},{key:"zone",label:"Zone"},{key:"lastConnected",label:"Last Connected"},{key:"lastUpdated",label:"Last Updated"},{key:"totalUpdates",label:"Total Updates"},{key:"dpVersion",label:"Kuma DP version"},{key:"envoyVersion",label:"Envoy version"},{key:"details",label:"Details",hideLabel:!0}],ht=["name","details"],_t=Ke.filter(t=>!ht.includes(t.key)).map(t=>({tableHeaderKey:t.key,label:t.label,isChecked:!1})),Me=["status","name","type","service","protocol","zone","lastUpdated","dpVersion","details"];function bt(t,o=Me){return Ke.filter(a=>o.includes(a.key)?t?!0:a.key!=="zone":!1)}const kt=["protocol","service","zone"];function wt(t){const o=new Map;for(const[a,k]of t){const u=kt.includes(a),f=u?"tag":a;o.has(f)||o.set(f,[]);const h=o.get(f);let _;f==="tag"?_=(u?`kuma.io/${a}:${k}`:k).replace(/\s+/g,""):_=k,h.push(_.trim())}return o}const R=t=>(fe("data-v-5b05c159"),t=t(),me(),t),Dt={class:"entity-summary entity-section-list"},Tt={class:"block-list"},Ct={class:"entity-title","data-testid":"data-plane-proxy-title"},Pt={class:"definition"},St=R(()=>i("span",null,"Mesh:",-1)),At={key:0},Et=R(()=>i("h4",null,"Tags",-1)),Ot={key:1},xt=R(()=>i("h4",null,"Dependencies",-1)),It={class:"mt-2 heading-with-icon"},$t={key:0},Vt=R(()=>i("h4",null,"Insights",-1)),Ut={class:"block-list"},Nt=["data-testid"],Lt=R(()=>i("span",null,"Connect time:",-1)),Ft=["data-testid"],Kt=R(()=>i("span",null,"Disconnect time:",-1)),Mt={class:"definition"},Rt=R(()=>i("span",null,"CP instance ID:",-1)),qt={key:0},jt=R(()=>i("summary",null,`
              Responses (acknowledged / sent)
            `,-1)),Bt=["data-testid"],zt={class:"config-section"},Ht=pe({__name:"DataPlaneEntitySummary",props:{dataPlaneOverview:{type:Object,required:!0}},setup(t){const o=t,a=C(()=>{const{name:c,mesh:d,dataplane:b}=o.dataPlaneOverview;return{type:"Dataplane",name:c,mesh:d,networking:b.networking}}),k=C(()=>Ne(o.dataPlaneOverview.dataplane)),u=C(()=>{var d,b;const c=Array.from((b=(d=o.dataPlaneOverview.dataplaneInsight)==null?void 0:d.subscriptions)!=null?b:[]);return c.reverse(),c.map(r=>{const v=r.connectTime!==void 0?xe(r.connectTime):"\u2014",I=r.disconnectTime!==void 0?xe(r.disconnectTime):"\u2014",P=Object.entries(r.status).filter(([E])=>!["total","lastUpdateTime"].includes(E)).map(([E,O])=>{var L,z,H,q,F;const N=`${(L=O.responsesAcknowledged)!=null?L:0} / ${(z=O.responsesSent)!=null?z:0}`;return{type:E.toUpperCase(),ratio:N,responsesSent:(H=O.responsesSent)!=null?H:0,responsesAcknowledged:(q=O.responsesAcknowledged)!=null?q:0,responsesRejected:(F=O.responsesRejected)!=null?F:0}});return{subscription:r,formattedConnectDate:v,formattedDisconnectDate:I,statuses:P}})}),f=C(()=>{const{status:c}=Le(o.dataPlaneOverview.dataplane,o.dataPlaneOverview.dataplaneInsight);return c}),h=C(()=>{const c=Qe(o.dataPlaneOverview.dataplaneInsight);return c!==null?Object.entries(c).map(([d,b])=>({name:d,version:b})):[]}),_=C(()=>{var E,O;const c=(O=(E=o.dataPlaneOverview.dataplaneInsight)==null?void 0:E.subscriptions)!=null?O:[];if(c.length===0)return[];const d=c[c.length-1];if(!d.version)return[];const b=[],r=d.version.envoy,v=d.version.kumaDp;if(!(r.kumaDpCompatible!==void 0?r.kumaDpCompatible:!0)){const N=`Envoy ${r.version} is not supported by Kuma DP ${v.version}.`;b.push(N)}if(!(v.kumaCpCompatible!==void 0?v.kumaCpCompatible:!0)){const N=`Kuma DP ${v.version} is not supported by this Kuma control plane.`;b.push(N)}return b});return(c,d)=>{const b=Ge("router-link");return p(),y("div",Dt,[i("section",null,[i("div",Tt,[i("div",null,[i("h3",Ct,[i("span",null,[l(`
              DPP:

              `),x(b,{to:{name:"data-plane-detail-view",params:{mesh:t.dataPlaneOverview.mesh,dataPlane:t.dataPlaneOverview.name}}},{default:K(()=>[l(T(t.dataPlaneOverview.name),1)]),_:1},8,["to"])]),l(),x(vt,{status:m(f)},null,8,["status"])]),l(),i("div",Pt,[St,l(),i("span",null,T(t.dataPlaneOverview.mesh),1)])]),l(),m(k).length>0?(p(),y("div",At,[Et,l(),x(mt,{tags:m(k)},null,8,["tags"])])):U("",!0),l(),m(h).length>0?(p(),y("div",Ot,[xt,l(),(p(!0),y(M,null,B(m(h),(r,v)=>(p(),y("div",{key:v,class:"definition"},[i("span",null,T(r.name)+":",1),l(),i("span",null,T(r.version),1)]))),128)),l(),m(_).length>0?(p(),y(M,{key:0},[i("h5",It,[l(`
              Warnings

              `),x(m(ie),{class:"ml-1",icon:"warning",color:"var(--black-75)","secondary-color":"var(--yellow-300)",size:"20"})]),l(),(p(!0),y(M,null,B(m(_),(r,v)=>(p(),y("p",{key:v},T(r),1))),128))],64)):U("",!0)])):U("",!0)])]),l(),m(u).length>0?(p(),y("section",$t,[Vt,l(),i("div",Ut,[(p(!0),y(M,null,B(m(u),(r,v)=>(p(),y("div",{key:v},[i("div",{class:"definition","data-testid":`data-plane-connect-time-${v}`},[Lt,l(),i("span",null,T(r.formattedConnectDate),1)],8,Nt),l(),i("div",{class:"definition","data-testid":`data-plane-disconnect-time-${v}`},[Kt,l(),i("span",null,T(r.formattedDisconnectDate),1)],8,Ft),l(),i("div",Mt,[Rt,l(),i("span",null,T(r.subscription.controlPlaneInstanceId),1)]),l(),r.statuses.length>0?(p(),y("details",qt,[jt,l(),(p(!0),y(M,null,B(r.statuses,(I,P)=>(p(),y("div",{key:`${v}-${P}`,class:"definition","data-testid":`data-plane-subscription-status-${v}-${P}`},[i("span",null,T(I.type)+":",1),l(),i("span",null,T(I.ratio),1)],8,Bt))),128))])):U("",!0)]))),128))])])):U("",!0),l(),i("section",zt,[x(gt,{id:"code-block-data-plane-summary",content:m(a),"code-max-height":"250px"},null,8,["content"])])])}}});const Qt=ve(Ht,[["__scopeId","data-v-5b05c159"]]);function Gt(t,o,a){return Math.max(o,Math.min(t,a))}const Yt=["ControlLeft","ControlRight","ShiftLeft","ShiftRight","AltLeft"];class Jt{constructor(o,a){le(this,"commands");le(this,"keyMap");le(this,"boundTriggerShortcuts");this.commands=a,this.keyMap=Object.fromEntries(Object.entries(o).map(([k,u])=>[k.toLowerCase(),u])),this.boundTriggerShortcuts=this.triggerShortcuts.bind(this)}registerListener(){document.addEventListener("keydown",this.boundTriggerShortcuts)}unRegisterListener(){document.removeEventListener("keydown",this.boundTriggerShortcuts)}triggerShortcuts(o){Zt(o,this.keyMap,this.commands)}}function Zt(t,o,a){const k=Wt(t.code),u=[t.ctrlKey?"ctrl":"",t.shiftKey?"shift":"",t.altKey?"alt":"",k].filter(_=>_!=="").join("+"),f=o[u];if(!f)return;const h=a[f];h.isAllowedContext&&!h.isAllowedContext(t)||(h.shouldPreventDefaultAction&&t.preventDefault(),!(h.isDisabled&&h.isDisabled())&&h.trigger(t))}function Wt(t){return Yt.includes(t)?"":t.replace(/^Key/,"").toLowerCase()}function Xt(t,o){const a=" "+t,k=a.matchAll(/ ([-\s\w]+):\s*/g),u=[];for(const f of Array.from(k)){if(f.index===void 0)continue;const h=ea(f[1]);if(o.length>0&&!o.includes(h))throw new Error(`Unknown field \u201C${h}\u201D. Known fields: ${o.join(", ")}`);const _=f.index+f[0].length,c=a.substring(_);let d;if(/^\s*["']/.test(c)){const r=c.match(/['"](.*?)['"]/);if(r!==null)d=r[1];else throw new Error(`Quote mismatch for field \u201C${h}\u201D.`)}else{const r=c.indexOf(" "),v=r===-1?c.length:r;d=c.substring(0,v)}d!==""&&u.push([h,d])}return u}function ea(t){return t.trim().replace(/\s+/g,"-").replace(/-[a-z]/g,(o,a)=>a===0?o:o.substring(1).toUpperCase())}const Re=t=>(fe("data-v-e4356188"),t=t(),me(),t),ta=Re(()=>i("span",{class:"visually-hidden"},"Focus filter",-1)),aa=["for"],na=["id","placeholder"],sa={key:0,class:"k-suggestion-box","data-testid":"k-filter-bar-suggestion-box"},la={class:"k-suggestion-list"},ia={key:0,class:"k-filter-bar-error"},oa={key:0},ra=["title","data-filter-field"],ua={class:"visually-hidden"},da=Re(()=>i("span",{class:"visually-hidden"},"Clear query",-1)),ca=pe({__name:"KFilterBar",props:{id:{type:String,required:!0},fields:{type:Object,required:!0},placeholder:{type:String,required:!1,default:null},query:{type:String,required:!1,default:""}},emits:["fields-change"],setup(t,{emit:o}){const a=t,k=A(null),u=A(null),f=A(a.query),h=A([]),_=A(null),c=A(!1),d=A(-1),b=C(()=>Object.keys(a.fields)),r=C(()=>Object.entries(a.fields).slice(0,5).map(([s,e])=>({fieldName:s,...e}))),v=C(()=>b.value.length>0?`Filter by ${b.value.join(", ")}`:"Filter"),I=C(()=>{var s;return(s=a.placeholder)!=null?s:v.value});ee(()=>h.value,function(s,e){ue(s,e)||(_.value=null,o("fields-change",{fields:s,query:f.value}))}),ee(()=>f.value,function(){f.value===""&&(_.value=null),c.value=!0});const P={Enter:"submitQuery",Escape:"closeSuggestionBox",ArrowDown:"jumpToNextSuggestion",ArrowUp:"jumpToPreviousSuggestion"},E={submitQuery:{trigger:L,isAllowedContext(s){return u.value!==null&&s.composedPath().includes(u.value)},shouldPreventDefaultAction:!0},jumpToNextSuggestion:{trigger:z,isAllowedContext(s){return u.value!==null&&s.composedPath().includes(u.value)},shouldPreventDefaultAction:!0},jumpToPreviousSuggestion:{trigger:H,isAllowedContext(s){return u.value!==null&&s.composedPath().includes(u.value)},shouldPreventDefaultAction:!0},closeSuggestionBox:{trigger:j,isAllowedContext(s){return k.value!==null&&s.composedPath().includes(k.value)}}};function O(){const s=new Jt(P,E);Ze(function(){s.registerListener()}),We(function(){s.unRegisterListener()}),Q(f.value)}O();function N(s){const e=s.target;Q(e.value)}function L(){if(u.value instanceof HTMLInputElement)if(d.value===-1)Q(u.value.value),c.value=!1;else{const s=r.value[d.value].fieldName;s&&te(u.value,s)}}function z(){q(1)}function H(){q(-1)}function q(s){d.value=Gt(d.value+s,-1,r.value.length-1)}function F(){u.value instanceof HTMLInputElement&&u.value.focus()}function oe(s){const n=s.currentTarget.getAttribute("data-filter-field");n&&u.value instanceof HTMLInputElement&&te(u.value,n)}function te(s,e){const n=f.value===""||f.value.endsWith(" ")?"":" ";f.value+=n+e+":",s.focus(),d.value=-1}function re(){f.value="",u.value instanceof HTMLInputElement&&(u.value.value="",u.value.focus(),Q(""))}function ae(s){s.relatedTarget===null&&j(),k.value instanceof HTMLElement&&s.relatedTarget instanceof Node&&!k.value.contains(s.relatedTarget)&&j()}function j(){c.value=!1}function Q(s){_.value=null;try{const e=Xt(s,b.value);e.sort((n,D)=>n[0].localeCompare(D[0])),h.value=e}catch(e){if(e instanceof Error)_.value=e,c.value=!0;else throw e}}function ue(s,e){return JSON.stringify(s)===JSON.stringify(e)}return(s,e)=>(p(),y("div",{ref_key:"filterBar",ref:k,class:"k-filter-bar","data-testid":"k-filter-bar"},[i("button",{class:"k-focus-filter-input-button",title:"Focus filter",type:"button","data-testid":"k-filter-bar-focus-filter-input-button",onClick:F},[ta,l(),x(m(ie),{"aria-hidden":"true",class:"k-filter-icon",color:"var(--grey-400)","data-testid":"k-filter-bar-filter-icon","hide-title":"",icon:"filter",size:"20"})]),l(),i("label",{for:`${a.id}-filter-bar-input`,class:"visually-hidden"},[Ye(s.$slots,"default",{},()=>[l(T(m(v)),1)],!0)],8,aa),l(),Fe(i("input",{id:`${a.id}-filter-bar-input`,ref_key:"filterInput",ref:u,"onUpdate:modelValue":e[0]||(e[0]=n=>f.value=n),class:"k-filter-bar-input",type:"text",placeholder:m(I),"data-testid":"k-filter-bar-filter-input",onFocus:e[1]||(e[1]=n=>c.value=!0),onBlur:ae,onChange:N},null,40,na),[[Je,f.value]]),l(),c.value?(p(),y("div",sa,[i("div",la,[_.value!==null?(p(),y("p",ia,T(_.value.message),1)):(p(),y("button",{key:1,class:Ie(["k-submit-query-button",{"k-submit-query-button-is-selected":d.value===-1}]),title:"Submit query",type:"button","data-testid":"k-filter-bar-submit-query-button",onClick:L},`
          Submit `+T(f.value),3)),l(),(p(!0),y(M,null,B(m(r),(n,D)=>(p(),y("div",{key:`${a.id}-${D}`,class:Ie(["k-suggestion-list-item",{"k-suggestion-list-item-is-selected":d.value===D}])},[i("b",null,T(n.fieldName),1),n.description!==""?(p(),y("span",oa,": "+T(n.description),1)):U("",!0),l(),i("button",{class:"k-apply-suggestion-button",title:`Add ${n.fieldName}:`,type:"button","data-filter-field":n.fieldName,"data-testid":"k-filter-bar-apply-suggestion-button",onClick:oe},[i("span",ua,"Add "+T(n.fieldName)+":",1),l(),x(m(ie),{"aria-hidden":"true",color:"currentColor","hide-title":"",icon:"chevronRight",size:"16"})],8,ra)],2))),128))])])):U("",!0),l(),f.value!==""?(p(),y("button",{key:1,class:"k-clear-query-button",title:"Clear query",type:"button","data-testid":"k-filter-bar-clear-query-button",onClick:re},[da,l(),x(m(ie),{"aria-hidden":"true",color:"currentColor",icon:"clear","hide-title":"",size:"20"})])):U("",!0)],512))}});const pa=ve(ca,[["__scopeId","data-v-e4356188"]]),fa=t=>(fe("data-v-3f7c3086"),t=t(),me(),t),ma={key:0},va=fa(()=>i("label",{for:"data-planes-type-filter",class:"mr-2"},`
              Type:
            `,-1)),ga=["value"],ya=["for"],ha=["id","checked","onChange"],_a=pe({__name:"DataPlaneList",props:{dataPlaneOverviews:{type:Array,required:!0},isLoading:{type:Boolean,required:!1,default:!1},error:{type:Error,required:!1,default:null},nextUrl:{type:String,required:!1,default:null},pageOffset:{type:Number,required:!1,default:0},selectedDppName:{type:String,required:!1,default:null},isGatewayView:{type:Boolean,required:!1,default:!1},dppFilterFields:{type:Object,required:!0}},emits:["load-data"],setup(t,{emit:o}){var s;const a=t,k=50,u={All:"true",Builtin:"builtin",Delegated:"delegated"},f=["All","Builtin","Delegated"],h={title:"No Data",message:"There are no data plane proxies present."},_=Xe(),c=et(),d=A(Me),b=A({headers:[],data:[]}),r=A((s=J.get("filterQuery"))!=null?s:""),v=A("All"),I=A({}),P=A(null),E=C(()=>c.getters["config/getMulticlusterStatus"]),O=C(()=>({name:c.getters["config/getEnvironment"]==="universal"?"universal-dataplane":"kubernetes-dataplane"})),N=C(()=>"tag"in a.dppFilterFields?'tag: "kuma.io/protocol: http"':"name"in a.dppFilterFields?"name: cluster":"field: value"),L=C(()=>{let e=bt(E.value,d.value);return a.isGatewayView?e=e.filter(n=>n.key!=="protocol"):e=e.filter(n=>n.key!=="type"),{data:b.value.data,headers:e}}),z=C(()=>_t.filter(e=>a.isGatewayView?e.tableHeaderKey!=="protocol":e.tableHeaderKey!=="type").filter(e=>E.value?!0:e.tableHeaderKey!=="zone").map(e=>{const n=d.value.includes(e.tableHeaderKey);return{...e,isChecked:n}}));ee(v,function(){F(0)}),ee(I,function(){F(0)}),ee(()=>a.dataPlaneOverviews,function(){ae()});function H(){const e=Ue.get("dpVisibleTableHeaderKeys");Array.isArray(e)&&(d.value=e),ae()}H();function q(e){F(e)}function F(e){const n={...I.value};"gateway"in n||(n.gateway=u[v.value]),o("load-data",e,n)}function oe(e){e.stopPropagation()}function te(e,n){const D=e.target,w=d.value.findIndex($=>$===n);D.checked&&w===-1?d.value.push(n):!D.checked&&w>-1&&d.value.splice(w,1),Ue.set("dpVisibleTableHeaderKeys",Array.from(new Set(d.value)))}function re(){dt.logger.info(ct.CREATE_DATA_PLANE_PROXY_CLICKED)}async function ae(){var e;try{Array.isArray(a.dataPlaneOverviews)&&a.dataPlaneOverviews.length>0?(j((e=a.selectedDppName)!=null?e:a.dataPlaneOverviews[0].name),b.value.data=await Promise.all(a.dataPlaneOverviews.map(n=>Q(n)))):(j(null),b.value.data=[])}catch(n){console.error(n)}}function j(e){var n;e&&a.dataPlaneOverviews.length>0?(P.value=(n=a.dataPlaneOverviews.find(D=>D.name===e))!=null?n:a.dataPlaneOverviews[0],J.set(a.isGatewayView?"gateway":"dpp",P.value.name)):(P.value=null,J.set(a.isGatewayView?"gateway":"dpp",null))}async function Q(e){var he,_e,be,ke,we,De,Te,Ce;const n=e.mesh,D=e.name,w=((he=e.dataplane.networking.gateway)==null?void 0:he.type)||"STANDARD",$={name:w==="STANDARD"?"data-plane-detail-view":"gateway-detail-view",params:{mesh:n,dataPlane:D}},G={name:"mesh-detail-view",params:{mesh:n}},ne=["kuma.io/protocol","kuma.io/service","kuma.io/zone"],se=Ne(e.dataplane).filter(g=>ne.includes(g.label)),Z=(_e=se.find(g=>g.label==="kuma.io/service"))==null?void 0:_e.value,de=(be=se.find(g=>g.label==="kuma.io/protocol"))==null?void 0:be.value,W=(ke=se.find(g=>g.label==="kuma.io/zone"))==null?void 0:ke.value;let ge;Z!==void 0&&(ge={name:"service-detail-view",params:{mesh:n,service:Z}});let ye;W!==void 0&&(ye={name:"zones",query:{ns:W}});const{status:qe}=Le(e.dataplane,e.dataplaneInsight),je=(De=(we=e.dataplaneInsight)==null?void 0:we.subscriptions)!=null?De:[],Be={totalUpdates:0,totalRejectedUpdates:0,dpVersion:null,envoyVersion:null,selectedTime:NaN,selectedUpdateTime:NaN,version:null},S=je.reduce((g,V)=>{var Pe,Se,Ae,Ee;if(V.connectTime){const Oe=Date.parse(V.connectTime);(!g.selectedTime||Oe>g.selectedTime)&&(g.selectedTime=Oe)}const ce=Date.parse(V.status.lastUpdateTime);return ce&&(!g.selectedUpdateTime||ce>g.selectedUpdateTime)&&(g.selectedUpdateTime=ce),{totalUpdates:g.totalUpdates+parseInt((Pe=V.status.total.responsesSent)!=null?Pe:"0",10),totalRejectedUpdates:g.totalRejectedUpdates+parseInt((Se=V.status.total.responsesRejected)!=null?Se:"0",10),dpVersion:((Ae=V.version)==null?void 0:Ae.kumaDp.version)||g.dpVersion,envoyVersion:((Ee=V.version)==null?void 0:Ee.envoy.version)||g.envoyVersion,selectedTime:g.selectedTime,selectedUpdateTime:g.selectedUpdateTime,version:V.version||g.version}},Be),Y={name:D,nameRoute:$,mesh:n,meshRoute:G,type:w,zone:W!=null?W:"\u2014",zoneRoute:ye,service:Z!=null?Z:"\u2014",serviceInsightRoute:ge,protocol:de!=null?de:"\u2014",status:qe,totalUpdates:S.totalUpdates,totalRejectedUpdates:S.totalRejectedUpdates,dpVersion:(Te=S.dpVersion)!=null?Te:"\u2014",envoyVersion:(Ce=S.envoyVersion)!=null?Ce:"\u2014",warnings:[],unsupportedEnvoyVersion:!1,unsupportedKumaDPVersion:!1,kumaDpAndKumaCpMismatch:!1,lastUpdated:S.selectedUpdateTime?$e(new Date(S.selectedUpdateTime).toUTCString()):"\u2014",lastConnected:S.selectedTime?$e(new Date(S.selectedTime).toUTCString()):"\u2014",overview:e};if(S.version){const{kind:g}=tt(S.version);switch(g!==at&&Y.warnings.push(g),g){case st:Y.unsupportedEnvoyVersion=!0;break;case nt:Y.unsupportedKumaDPVersion=!0;break}}return E.value&&S.dpVersion&&se.find(V=>V.label===lt)&&typeof S.version.kumaDp.kumaCpCompatible=="boolean"&&!S.version.kumaDp.kumaCpCompatible&&(Y.warnings.push(it),Y.kumaDpAndKumaCpMismatch=!0),Y}function ue({fields:e,query:n}){const D=J.get("filterFields"),w=D!==null?JSON.parse(D):{},$=JSON.stringify(w),G=Object.fromEntries(wt(e)),ne=JSON.stringify(G);J.set("filterQuery",n||null),J.set("filterFields",ne),$!==ne&&(I.value=G)}return(e,n)=>(p(),X(ft,null,{content:K(()=>{var D;return[x(pt,{"selected-entity-name":(D=P.value)==null?void 0:D.name,"page-size":k,"is-loading":a.isLoading,error:t.error,"empty-state":h,"table-data":m(L),"table-data-is-empty":m(L).data.length===0,"show-details":"",next:a.nextUrl!==null,"page-offset":a.pageOffset,onTableAction:n[1]||(n[1]=w=>j(w.name)),onLoadData:q},{additionalControls:K(()=>[x(pa,{id:"data-plane-proxy-filter",class:"data-plane-proxy-filter",placeholder:m(N),query:r.value,fields:a.dppFilterFields,onFieldsChange:ue},null,8,["placeholder","query","fields"]),l(),a.isGatewayView?(p(),y("div",ma,[va,l(),Fe(i("select",{id:"data-planes-type-filter","onUpdate:modelValue":n[0]||(n[0]=w=>v.value=w),"data-testid":"data-planes-type-filter"},[(p(!0),y(M,null,B(m(f),(w,$)=>(p(),y("option",{key:$,value:w},T(w),9,ga))),128))],512),[[ot,v.value]])])):U("",!0),l(),x(m(rt),{label:"Columns",icon:"cogwheel","button-appearance":"outline"},{items:K(()=>[i("div",{onClick:oe},[(p(!0),y(M,null,B(m(z),(w,$)=>(p(),X(m(ut),{key:$,class:"table-header-selector-item",item:w},{default:K(()=>[i("label",{for:`data-plane-table-header-checkbox-${$}`,class:"k-checkbox table-header-selector-item-checkbox"},[i("input",{id:`data-plane-table-header-checkbox-${$}`,checked:w.isChecked,type:"checkbox",class:"k-input",onChange:G=>te(G,w.tableHeaderKey)},null,40,ha),l(" "+T(w.label),1)],8,ya)]),_:2},1032,["item"]))),128))])]),_:1}),l(),x(m(Ve),{appearance:"creation",to:m(O),icon:"plus","data-testid":"data-plane-create-data-plane-button",onClick:re},{default:K(()=>[l(`
            Create data plane proxy
          `)]),_:1},8,["to"]),l(),m(_).query.ns?(p(),X(m(Ve),{key:1,appearance:"primary",icon:"arrowLeft",to:{name:m(_).name},"data-testid":"data-plane-ns-back-button"},{default:K(()=>[l(`
            View All
          `)]),_:1},8,["to"])):U("",!0)]),_:1},8,["selected-entity-name","is-loading","error","table-data","table-data-is-empty","next","page-offset"])]}),sidebar:K(()=>[P.value!==null?(p(),X(Qt,{key:0,"data-plane-overview":P.value},null,8,["data-plane-overview"])):(p(),X(yt,{key:1}))]),_:1}))}});const Aa=ve(_a,[["__scopeId","data-v-3f7c3086"]]);export{Aa as D};
