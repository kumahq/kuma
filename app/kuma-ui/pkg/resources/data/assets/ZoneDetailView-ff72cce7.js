import{d as S,c as u,a5 as V,r as B,o as n,a,w as e,q as D,g as p,h as o,t as g,e as h,F as b,s as C,b as m,R as N,X as T}from"./index-752f8547.js";import{a as E,A as L,_ as Z,S as R}from"./SubscriptionHeader.vue_vue_type_script_setup_true_lang-fa0a8307.js";import{_ as q}from"./CodeBlock.vue_vue_type_style_index_0_lang-81e465b8.js";import{D as F,a as M}from"./DefinitionListItem-e2c7b774.js";import{T as P}from"./TabsWidget-4d85c766.js";import{T as I}from"./TextWithCopyButton-5b416952.js";import{_ as W}from"./WarningsWidget.vue_vue_type_script_setup_true_lang-1f830978.js";import{g as A,B as j,n as G,D as J,A as X,p as H,r as K,E as U,s as Q,_ as Y}from"./RouteView.vue_vue_type_script_setup_true_lang-8b3edb98.js";import{_ as ee}from"./RouteTitle.vue_vue_type_script_setup_true_lang-397fac77.js";const ne={class:"entity-heading"},te=S({__name:"ZoneDetails",props:{zoneOverview:{type:Object,required:!0}},setup(z){const i=z,{t:w}=A(),k=j(),_=[{hash:"#overview",title:"Overview"},{hash:"#insights",title:"Zone Insights"},{hash:"#config",title:"Config"},{hash:"#warnings",title:"Warnings"}],f=u(()=>({name:"zone-cp-detail-view",params:{zone:i.zoneOverview.name}})),d=u(()=>{const{type:t,name:s}=i.zoneOverview,c=G(i.zoneOverview.zoneInsight);return{type:t,name:s,status:c,"Authentication Type":V(i.zoneOverview)}}),v=u(()=>{var s;const t=((s=i.zoneOverview.zoneInsight)==null?void 0:s.subscriptions)??[];return Array.from(t).reverse()}),y=u(()=>{var c;const t=[],s=((c=i.zoneOverview.zoneInsight)==null?void 0:c.subscriptions)??[];if(s.length>0){const r=s[s.length-1],l=r.version.kumaCp.version||"-",{kumaCpGlobalCompatible:x=!0}=r.version.kumaCp;x||t.push({kind:J,payload:{zoneCpVersion:l,globalCpVersion:k("KUMA_VERSION")}})}return t}),O=u(()=>{var s;const t=((s=i.zoneOverview.zoneInsight)==null?void 0:s.subscriptions)??[];if(t.length>0){const c=t[t.length-1];if(c.config)return JSON.stringify(JSON.parse(c.config),null,2)}return null}),$=u(()=>y.value.length===0?_.filter(t=>t.hash!=="#warnings"):_);return(t,s)=>{const c=B("router-link");return n(),a(P,{tabs:$.value},{tabHeader:e(()=>[D("h1",ne,[p(`
        Zone Control Plane:

        `),o(I,{text:d.value.name},{default:e(()=>[o(c,{to:f.value},{default:e(()=>[p(g(d.value.name),1)]),_:1},8,["to"])]),_:1},8,["text"])])]),overview:e(()=>[o(F,null,{default:e(()=>[(n(!0),h(b,null,C(d.value,(r,l)=>(n(),a(M,{key:l,term:m(w)(`http.api.property.${l}`)},{default:e(()=>[l==="status"?(n(),a(m(N),{key:0,appearance:r==="offline"?"danger":"success"},{default:e(()=>[p(g(r),1)]),_:2},1032,["appearance"])):l==="name"?(n(),a(I,{key:1,text:r},null,8,["text"])):(n(),h(b,{key:2},[p(g(r),1)],64))]),_:2},1032,["term"]))),128))]),_:1})]),insights:e(()=>[o(E,{"initially-open":0},{default:e(()=>[(n(!0),h(b,null,C(v.value,(r,l)=>(n(),a(L,{key:l},{"accordion-header":e(()=>[o(Z,{details:r},null,8,["details"])]),"accordion-content":e(()=>[o(R,{details:r},null,8,["details"])]),_:2},1024))),128))]),_:1})]),config:e(()=>[O.value!==null?(n(),a(q,{key:0,id:"code-block-zone-config",language:"json",code:O.value,"is-searchable":"","query-key":"zone-config"},null,8,["code"])):(n(),a(m(T),{key:1,"data-testid":"warning-no-subscriptions",appearance:"warning"},{alertMessage:e(()=>[p(g(m(w)("zone-cps.routes.item.config.no-subscriptions")),1)]),_:1}))]),warnings:e(()=>[o(W,{warnings:y.value},null,8,["warnings"])]),_:1},8,["tabs"])}}}),se={key:3,class:"kcard-border","data-testid":"detail-view-details"},_e=S({__name:"ZoneDetailView",setup(z){const{t:i}=A();return(w,k)=>(n(),a(Y,{name:"zone-cp-detail-view"},{default:e(({route:_})=>[o(ee,{title:m(i)("zone-cps.routes.item.title",{name:_.params.zone})},null,8,["title"]),p(),o(X,{breadcrumbs:[{to:{name:"zone-cp-list-view"},text:m(i)("zone-cps.routes.item.breadcrumbs")}]},{default:e(()=>[o(H,{src:`/zone-cps/${_.params.zone}`},{default:e(({data:f,isLoading:d,error:v})=>[d?(n(),a(K,{key:0})):v!==void 0?(n(),a(U,{key:1,error:v},null,8,["error"])):f===void 0?(n(),a(Q,{key:2})):(n(),h("div",se,[o(te,{"zone-overview":f},null,8,["zone-overview"])]))]),_:2},1032,["src"])]),_:2},1032,["breadcrumbs"])]),_:1}))}});export{_e as default};
