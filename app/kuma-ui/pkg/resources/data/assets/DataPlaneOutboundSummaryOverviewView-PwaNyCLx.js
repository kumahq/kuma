import{d as I,r as l,p as u,o as n,w as e,b as a,e as r,q as L,l as o,t as f,m as _,F as N,c as s,N as d,L as w,a8 as K,Y as M}from"./index-Cs0e6f_4.js";import{A as G,a as H}from"./AccordionList-BflzTyZF.js";import{P as J}from"./PolicyTypeTag-BxxMI8Xa.js";const Q={colspan:"2"},D=I({__name:"DataPlaneOutboundSummaryOverviewView",props:{data:{},routeName:{}},setup(P){const p=P;return(U,t)=>{const x=l("XBadge"),g=l("XTable"),S=l("XAction"),O=l("XCodeBlock"),X=l("XLayout"),$=l("XCard"),z=l("DataLoader"),v=l("DataSource"),F=l("AppView"),R=l("RouteView");return n(),u(R,{params:{mesh:"",proxy:"",connection:""},name:p.routeName},{default:e(({t:Y,route:B,uri:C})=>[a(F,null,{default:e(()=>[a(X,{type:"stack"},{default:e(()=>[a(g,{variant:"kv"},{default:e(()=>[o("tr",null,[t[0]||(t[0]=o("th",{scope:"row"},`
              Protocol
            `,-1)),t[1]||(t[1]=r()),o("td",null,[a(x,{appearance:"info"},{default:e(()=>[r(f(Y(`http.api.value.${p.data.protocol}`)),1)]),_:2},1024)])]),t[4]||(t[4]=r()),o("tr",null,[t[2]||(t[2]=o("th",{scope:"row"},`
              Port
            `,-1)),t[3]||(t[3]=r()),o("td",null,f(p.data.port),1)])]),_:2},1024),t[13]||(t[13]=r()),p.data?(n(),u(X,{key:0,type:"stack",size:"small"},{default:e(()=>[t[11]||(t[11]=o("h3",null,"Policies",-1)),t[12]||(t[12]=r()),a(v,{src:C(_(N),"/policy-types",{})},{default:e(({data:c,error:j})=>[a(v,{src:C(_(N),"/meshes/:mesh/dataplanes/:name/policies/for/outbound/:kri",{mesh:B.params.mesh,name:B.params.proxy,kri:p.data.kri})},{default:e(({data:k,error:q})=>[a(z,{data:[c,k],errors:[j,q]},{default:e(()=>[(n(!0),s(d,null,w([Object.groupBy((c==null?void 0:c.policyTypes)??[],({name:m})=>m)],m=>(n(),u(G,{key:`${typeof m}`,"initially-open":0,"multiple-open":"",class:"stack","data-testid":"outbound-policies-rules"},{default:e(()=>[(n(!0),s(d,null,w((k==null?void 0:k.policies)||[],({conf:E,kind:i,origins:V})=>(n(),u($,{key:i},{default:e(()=>[a(H,null,{"accordion-header":e(()=>[a(J,{"policy-type":i},{default:e(()=>[r(f(i),1)]),_:2},1032,["policy-type"])]),"accordion-content":e(()=>[V.length>0?(n(),u(g,{key:0,variant:"kv"},{default:e(()=>[o("tr",null,[t[5]||(t[5]=o("th",{scope:"row"},`
                                  Origin policies
                                `,-1)),t[6]||(t[6]=r()),o("td",null,[o("ul",null,[(n(!0),s(d,null,w(V,y=>(n(),s("li",{key:y.kri},[(n(!0),s(d,null,w([_(K).fromString(y.kri)],({mesh:b,name:A})=>(n(),s(d,{key:`${b}-${A}`},[m[i]?(n(),u(S,{key:0,to:{name:"policy-detail-view",params:{mesh:b,policyPath:m[i][0].path,policy:A}}},{default:e(()=>[r(f(y.kri),1)]),_:2},1032,["to"])):(n(),s(d,{key:1},[r(f(y.kri),1)],64))],64))),128))]))),128))])])]),t[9]||(t[9]=r()),o("tr",null,[o("td",Q,[a(X,{type:"stack",size:"small"},{default:e(()=>[t[7]||(t[7]=o("span",null,"Config",-1)),t[8]||(t[8]=r()),a(O,{code:_(M).stringify(E),language:"yaml","show-copy-button":!1},null,8,["code"])]),_:2},1024)])])]),_:2},1024)):L("",!0)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024))),128))]),_:2},1032,["data","errors"])]),_:2},1032,["src"])]),_:2},1032,["src"])]),_:2},1024)):L("",!0)]),_:2},1024)]),_:2},1024)]),_:1},8,["name"])}}});export{D as default};
