import{A as x,a as B}from"./AccordionList-d737e5dc.js";import{d as k,g as A,h as b,o,l,i as g,w as v,j as S,k as r,al as P,n as t,H as e,am as R,S as T,m as y,p as n,F as I,I as D,t as j,D as H,G as N}from"./index-86e7dfd3.js";const U={class:"stack"},V={key:1},C={key:0,class:"intro"},O={class:"row"},q={class:"header"},F={class:"header"},E=["data-testid"],G={class:"type"},M=k({__name:"SubscriptionDetails",props:{subscription:{type:Object,required:!0},isDiscoverySubscription:{type:Boolean,default:!1}},setup(d){const{t:c}=A(),p=d,s=b(()=>{var u;let i;if("controlPlaneInstanceId"in p.subscription){const{lastUpdateTime:a,total:_,...m}=p.subscription.status;i=m}else i=((u=p.subscription.status)==null?void 0:u.stat)??{};return i?Object.entries(i).map(([a,_])=>{const{responsesSent:m="0",responsesAcknowledged:h="0",responsesRejected:f="0"}=_;return{type:a,responsesSent:m,responsesAcknowledged:h,responsesRejected:f}}):[]});return(i,u)=>(o(),l("div",U,[s.value.length===0?(o(),g(r(R),{key:0,appearance:"info"},{alertIcon:v(()=>[S(r(P))]),alertMessage:v(()=>[t(e(r(c)("common.detail.subscriptions.no_stats",{id:p.subscription.id})),1)]),_:1})):(o(),l("div",V,[i.$slots.default?(o(),l("div",C,[T(i.$slots,"default",{},void 0,!0)])):y("",!0),t(),n("div",O,[n("div",q,e(r(c)("common.detail.subscriptions.type")),1),t(),n("div",F,e(r(c)("common.detail.subscriptions.responses_sent_acknowledged")),1)]),t(),(o(!0),l(I,null,D(s.value,(a,_)=>(o(),l("div",{key:_,class:"row","data-testid":`subscription-status-${a.type}`},[n("div",G,e(r(c)(`http.api.property.${a.type}`)),1),t(),n("div",null,e(a.responsesSent)+"/"+e(a.responsesAcknowledged),1)],8,E))),128))]))]))}});const z=j(M,[["__scopeId","data-v-9167fa3c"]]),J=""+new URL("icon-deployed-code-e3c999ba.svg",import.meta.url).href,K=""+new URL("icon-connected-037e001a.svg",import.meta.url).href,Q=""+new URL("icon-disconnected-ba3c2624.svg",import.meta.url).href,$=d=>(H("data-v-0cbdfb03"),d=d(),N(),d),W={class:"subscription-header"},X={class:"instance-id"},Y=$(()=>n("img",{src:J},null,-1)),Z=$(()=>n("img",{src:K},null,-1)),ss={key:0},es=$(()=>n("img",{src:Q},null,-1)),ts={class:"responses-sent-acknowledged"},ns=k({__name:"SubscriptionHeader",props:{subscription:{type:Object,required:!0}},setup(d){const{t:c,formatIsoDate:p}=A(),s=d,i=b(()=>"globalInstanceId"in s.subscription?s.subscription.globalInstanceId:null),u=b(()=>"controlPlaneInstanceId"in s.subscription?s.subscription.controlPlaneInstanceId:null),a=b(()=>s.subscription.connectTime?p(s.subscription.connectTime):null),_=b(()=>s.subscription.disconnectTime?p(s.subscription.disconnectTime):null),m=b(()=>{var w;const{responsesSent:h=0,responsesAcknowledged:f=0,responsesRejected:L=0}=((w=s.subscription.status)==null?void 0:w.total)??{};return{responsesSent:h,responsesAcknowledged:f,responsesRejected:L}});return(h,f)=>(o(),l("header",W,[n("span",X,[Y,t(),i.value?(o(),l(I,{key:0},[n("b",null,e(r(c)("http.api.property.globalInstanceId")),1),t(": "+e(i.value),1)],64)):u.value?(o(),l(I,{key:1},[n("b",null,e(r(c)("http.api.property.controlPlaneInstanceId")),1),t(": "+e(u.value),1)],64)):y("",!0)]),t(),n("span",null,[Z,t(),n("b",null,e(r(c)("common.detail.subscriptions.connect_time")),1),t(": "+e(a.value),1)]),t(),_.value?(o(),l("span",ss,[es,t(),n("b",null,e(r(c)("common.detail.subscriptions.disconnect_time")),1),t(": "+e(_.value),1)])):y("",!0),t(),n("span",ts,e(r(c)("common.detail.subscriptions.responses_sent_acknowledged"))+`:

      `+e(m.value.responsesSent)+"/"+e(m.value.responsesAcknowledged),1)]))}});const os=j(ns,[["__scopeId","data-v-0cbdfb03"]]),as=k({__name:"SubscriptionList",props:{subscriptions:{}},setup(d){const c=d,p=b(()=>{const s=Array.from(c.subscriptions);return s.reverse(),s});return(s,i)=>(o(),g(B,null,{default:v(()=>[(o(!0),l(I,null,D(p.value,(u,a)=>(o(),g(x,{key:a},{"accordion-header":v(()=>[S(os,{subscription:u},null,8,["subscription"])]),"accordion-content":v(()=>[S(z,{subscription:u},{default:v(()=>[s.$slots.default?T(s.$slots,"default",{key:0}):y("",!0)]),_:2},1032,["subscription"])]),_:2},1024))),128))]),_:3}))}});export{as as _};
