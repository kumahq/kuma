import{d as B,r as t,p as c,o as m,w as a,b as o,l as g,e as l,I as x,m as L,a6 as N,q as d,K as D,t as r,c as R,N as S,y as G,_ as q}from"./index-Cj2OFF4l.js";import{S as I}from"./SummaryView-FNQJnkM_.js";const E=B({__name:"BuiltinGatewayListView",setup(F){return(K,i)=>{const w=t("XSearch"),_=t("XAction"),f=t("XCopyButton"),h=t("XActionGroup"),z=t("DataCollection"),b=t("RouterView"),C=t("DataLoader"),k=t("XLayout"),v=t("XCard"),V=t("AppView"),X=t("RouteView");return m(),c(X,{name:"builtin-gateway-list-view",params:{page:1,size:Number,mesh:"",gateway:"",s:""}},{default:a(({route:e,t:u,can:y,me:p,uri:A})=>[o(V,{docs:u("builtin-gateways.href.docs")},{default:a(()=>[o(v,null,{default:a(()=>[o(k,null,{default:a(()=>[g("search",null,[g("form",{onSubmit:i[0]||(i[0]=x(()=>{},["prevent"]))},[o(w,{class:"search-field",keys:["name",...y("use zones")?["zone"]:[],"label"],value:e.params.s,onChange:n=>e.update({page:1,s:n})},null,8,["keys","value","onChange"])],32)]),i[4]||(i[4]=l()),o(C,{src:A(L(N),"/meshes/:mesh/mesh-gateways",{mesh:e.params.mesh},{page:e.params.page,size:e.params.size,search:e.params.s})},{loadable:a(({data:n})=>[o(z,{type:"gateways",items:(n==null?void 0:n.items)??[void 0],page:e.params.page,"page-size":e.params.size,total:n==null?void 0:n.total,onChange:e.update},{default:a(()=>[o(D,{class:"builtin-gateway-collection","data-testid":"builtin-gateway-collection",headers:[{...p.get("headers.name"),label:"Name",key:"name"},...y("use zones")?[{...p.get("headers.zone"),label:"Zone",key:"zone"}]:[],{...p.get("headers.actions"),label:"Actions",key:"actions",hideLabel:!0}],items:n==null?void 0:n.items,onResize:p.set},{name:a(({row:s})=>[o(f,{text:s.name},{default:a(()=>[o(_,{"data-action":"",to:{name:"builtin-gateway-summary-view",query:{size:e.params.size,page:e.params.page,s:e.params.s},params:{mesh:s.mesh,gateway:s.id}}},{default:a(()=>[l(r(s.name),1)]),_:2},1032,["to"])]),_:2},1032,["text"])]),zone:a(({row:s})=>[s.labels&&s.labels["kuma.io/origin"]==="zone"&&s.labels["kuma.io/zone"]?(m(),c(_,{key:0,to:{name:"zone-cp-detail-view",params:{zone:s.labels["kuma.io/zone"]}}},{default:a(()=>[l(r(s.labels["kuma.io/zone"]),1)]),_:2},1032,["to"])):(m(),R(S,{key:1},[l(r(u("common.detail.none")),1)],64))]),actions:a(({row:s})=>[o(h,null,{default:a(()=>[o(_,{to:{name:"builtin-gateway-detail-view",params:{mesh:s.mesh,gateway:s.name}}},{default:a(()=>[l(r(u("common.collection.actions.view")),1)]),_:2},1032,["to"])]),_:2},1024)]),_:2,__:[1,2]},1032,["headers","items","onResize"])]),_:2},1032,["items","page","page-size","total","onChange"]),i[3]||(i[3]=l()),e.child()?(m(),c(b,{key:0},{default:a(({Component:s})=>[o(I,{onClose:M=>e.replace({name:"builtin-gateway-list-view",params:{mesh:e.params.mesh},query:{page:e.params.page,size:e.params.size,s:e.params.s}})},{default:a(()=>[typeof n<"u"?(m(),c(G(s),{key:0,items:n.items},null,8,["items"])):d("",!0)]),_:2},1032,["onClose"])]),_:2},1024)):d("",!0)]),_:2},1032,["src"])]),_:2,__:[4]},1024)]),_:2},1024)]),_:2},1032,["docs"])]),_:1})}}}),$=q(E,[["__scopeId","data-v-efef388b"]]);export{$ as default};
