import{d as q,r as l,o as r,q as f,w as e,b as n,R as X,e as t,t as i,S as G,s as C,c as u,K as y,p as F,$ as K,L as w,m as P,A as Z,G as H}from"./index-l3jNaB4C.js";import{S as J}from"./SummaryView-CH9ZqjAL.js";import{C as V,b as D,a as M}from"./ConnectionTraffic-B_b_9kfH.js";import"./TagList-DpuGZijL.js";const Q={key:0},se=q({__name:"ZoneEgressDetailView",props:{data:{}},setup(I){const p=I;return(U,s)=>{const x=l("XBadge"),B=l("XCopyButton"),S=l("XAboutCard"),A=l("DataCollection"),v=l("XLayout"),R=l("XInputSwitch"),E=l("XAction"),T=l("XCard"),L=l("DataLoader"),$=l("RouterView"),N=l("AppView"),O=l("RouteView");return r(),f(O,{name:"zone-egress-detail-view",params:{subscription:"",zoneEgress:"",inactive:!1}},{default:e(({t:d,route:m,me:_,uri:j})=>[n(N,null,{default:e(()=>[n(v,{type:"stack"},{default:e(()=>[n(S,{title:d("zone-egresses.routes.item.about.title"),created:p.data.creationTime,modified:p.data.modificationTime},{default:e(()=>[n(X,{layout:"horizontal"},{title:e(()=>[t(i(d("http.api.property.status")),1)]),body:e(()=>[n(G,{status:p.data.state},null,8,["status"])]),_:2},1024),s[3]||(s[3]=t()),p.data.namespace.length>0?(r(),f(X,{key:0,layout:"horizontal"},{title:e(()=>[t(i(d("http.api.property.namespace")),1)]),body:e(()=>[n(x,{appearance:"decorative"},{default:e(()=>[t(i(p.data.namespace),1)]),_:1})]),_:2},1024)):C("",!0),s[4]||(s[4]=t()),n(X,{layout:"horizontal"},{title:e(()=>[t(i(d("http.api.property.address")),1)]),body:e(()=>[p.data.zoneEgress.socketAddress.length>0?(r(),f(B,{key:0,variant:"badge",format:"default",text:p.data.zoneEgress.socketAddress},null,8,["text"])):(r(),u(y,{key:1},[t(i(d("common.detail.none")),1)],64))]),_:2},1024)]),_:2},1032,["title","created","modified"]),s[16]||(s[16]=t()),n(L,{src:j(F(K),"/connections/stats/for/zone-egress/:name/:socketAddress",{name:m.params.zoneEgress,socketAddress:p.data.zoneEgress.socketAddress})},{default:e(({data:o,refresh:c})=>[n(T,null,{default:e(()=>[n(v,{type:"columns"},{default:e(()=>[n(V,null,{default:e(()=>[n(v,{type:"stack",size:"small"},{default:e(()=>[n(A,{type:"inbounds",items:Object.entries(o.inbounds)},{default:e(({items:a})=>[(r(!0),u(y,null,w(a,([z,g])=>(r(),f(D,{key:`${z}`,protocol:"",traffic:g},{default:e(()=>[t(`
                        :`+i(z.split("_").at(-1)),1)]),_:2},1032,["traffic"]))),128))]),_:2},1032,["items"])]),_:2},1024)]),_:2},1024),s[9]||(s[9]=t()),n(V,null,{actions:e(()=>[n(R,{checked:m.params.inactive,"data-testid":"dataplane-outbounds-inactive-toggle",onChange:a=>m.update({inactive:a})},{label:e(()=>s[5]||(s[5]=[t(`
                      Show inactive
                    `)])),_:2},1032,["checked","onChange"]),s[7]||(s[7]=t()),n(E,{action:"refresh",appearance:"primary",onClick:c},{default:e(()=>s[6]||(s[6]=[t(`
                    Refresh
                  `)])),_:2},1032,["onClick"])]),default:e(()=>[s[8]||(s[8]=t()),(r(),u(y,null,w(["upstream"],a=>n(A,{key:a,type:"outbounds",items:Object.entries(o.outbounds)},{default:e(({items:z})=>[n(A,{type:"activeOutbounds",predicate:m.params.inactive?void 0:([g,k])=>{var b,h;return((typeof k.tcp<"u"?(b=k.tcp)==null?void 0:b[`${a}_cx_rx_bytes_total`]:(h=k.http)==null?void 0:h[`${a}_rq_total`])??0)>0},items:z},{default:e(({items:g})=>[g.length>0?(r(),f(M,{key:0,type:"outbound"},{default:e(()=>[(r(),u(y,null,w([/-([a-f0-9]){16}$/],k=>n(v,{key:k,type:"stack",size:"small"},{default:e(()=>[(r(!0),u(y,null,w(g,([b,h])=>(r(),f(D,{key:`${b}`,"data-testid":"dataplane-outbound",protocol:"",traffic:h,direction:a},{default:e(()=>[t(i(b),1)]),_:2},1032,["traffic","direction"]))),128))]),_:2},1024)),64))]),_:2},1024)):C("",!0)]),_:2},1032,["predicate","items"])]),_:2},1032,["items"])),64))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["src"]),s[17]||(s[17]=t()),p.data.zoneEgressInsight.subscriptions.length>0?(r(),u("div",Q,[P("h2",null,i(d("zone-egresses.routes.item.subscriptions.title")),1),s[14]||(s[14]=t()),n(Z,{headers:[{..._.get("headers.instanceId"),label:d("http.api.property.instanceId"),key:"instanceId"},{..._.get("headers.version"),label:d("http.api.property.version"),key:"version"},{..._.get("headers.connected"),label:d("http.api.property.connected"),key:"connected"},{..._.get("headers.disconnected"),label:d("http.api.property.disconnected"),key:"disconnected"},{..._.get("headers.responses"),label:d("http.api.property.responses"),key:"responses"}],"is-selected-row":o=>o.id===m.params.subscription,items:p.data.zoneEgressInsight.subscriptions.map((o,c,a)=>a[a.length-(c+1)]),onResize:_.set},{instanceId:e(({row:o})=>[n(E,{"data-action":"",to:{name:"zone-egress-subscription-summary-view",params:{subscription:o.id}}},{default:e(()=>[t(i(o.controlPlaneInstanceId),1)]),_:2},1032,["to"])]),version:e(({row:o})=>{var c,a;return[t(i(((a=(c=o.version)==null?void 0:c.kumaDp)==null?void 0:a.version)??"-"),1)]}),connected:e(({row:o})=>[t(i(d("common.formats.datetime",{value:Date.parse(o.connectTime??"")})),1)]),disconnected:e(({row:o})=>[o.disconnectTime?(r(),u(y,{key:0},[t(i(d("common.formats.datetime",{value:Date.parse(o.disconnectTime)})),1)],64)):C("",!0)]),responses:e(({row:o})=>{var c;return[(r(!0),u(y,null,w([((c=o.status)==null?void 0:c.total)??{}],a=>(r(),u(y,null,[t(i(a.responsesSent)+"/"+i(a.responsesAcknowledged),1)],64))),256))]}),_:2},1032,["headers","is-selected-row","items","onResize"]),s[15]||(s[15]=t()),n($,null,{default:e(({Component:o})=>[m.child()?(r(),f(J,{key:0,width:"670px",onClose:function(){m.replace({name:"zone-egress-detail-view",params:{zoneEgress:m.params.zoneEgress}})}},{default:e(()=>[(r(),f(H(o),{data:p.data.zoneEgressInsight.subscriptions},null,8,["data"]))]),_:2},1032,["onClose"])):C("",!0)]),_:2},1024)])):C("",!0)]),_:2},1024)]),_:2},1024)]),_:1})}}});export{se as default};
