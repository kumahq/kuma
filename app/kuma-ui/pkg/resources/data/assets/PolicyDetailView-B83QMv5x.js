import{d as N,r,p as d,o as l,w as e,b as n,e as a,q as c,O as z,t as s,c as h,l as w,m as B,F as P,K as L,N as S,y as T}from"./index-CMmpZv7D.js";import{S as q}from"./SummaryView-cF1iW5nn.js";const F={key:0},Z=N({__name:"PolicyDetailView",props:{data:{}},setup(k){const i=k;return(G,t)=>{const _=r("XBadge"),f=r("XAction"),C=r("XAboutCard"),b=r("XActionGroup"),v=r("RouterView"),V=r("DataCollection"),A=r("DataLoader"),R=r("XCard"),X=r("AppView"),x=r("RouteView");return l(),d(x,{name:"policy-detail-view",params:{page:1,size:Number,s:"",mesh:"",policy:"",policyPath:"",proxy:""}},{default:e(({route:o,t:m,uri:D,can:g,me:y})=>[n(X,null,{default:e(()=>[n(C,{title:m("policies.detail.about.title"),created:i.data.creationTime,modified:i.data.modificationTime},{default:e(()=>[n(z,{layout:"horizontal"},{title:e(()=>[a(s(m("http.api.property.type")),1)]),body:e(()=>[n(_,{appearance:"decorative"},{default:e(()=>[a(s(i.data.type),1)]),_:1})]),_:2,__:[0]},1024),t[5]||(t[5]=a()),i.data.namespace.length>0?(l(),d(z,{key:0,layout:"horizontal"},{title:e(()=>[a(s(m("http.api.property.namespace")),1)]),body:e(()=>[n(_,{appearance:"decorative"},{default:e(()=>[a(s(i.data.namespace),1)]),_:1})]),_:2,__:[1]},1024)):c("",!0),t[6]||(t[6]=a()),g("use zones")&&i.data.zone?(l(),d(z,{key:1,layout:"horizontal"},{title:e(()=>[a(s(m("http.api.property.zone")),1)]),body:e(()=>[n(_,{appearance:"decorative"},{default:e(()=>[n(f,{to:{name:"zone-cp-detail-view",params:{zone:i.data.zone}}},{default:e(()=>[a(s(i.data.zone),1)]),_:1},8,["to"])]),_:1})]),_:2,__:[2]},1024)):c("",!0),t[7]||(t[7]=a()),i.data.spec?(l(),d(z,{key:2,layout:"horizontal"},{title:e(()=>[a(s(m("http.api.property.targetRef")),1)]),body:e(()=>[i.data.spec.targetRef?(l(),d(_,{key:0,appearance:"neutral"},{default:e(()=>[a(s(i.data.spec.targetRef.kind),1),i.data.spec.targetRef.name?(l(),h("span",F,[t[3]||(t[3]=a(":")),w("b",null,s(i.data.spec.targetRef.name),1)])):c("",!0)]),_:1})):(l(),d(_,{key:1,appearance:"neutral"},{default:e(()=>[a(s(m("http.api.property.mesh")),1)]),_:2},1024))]),_:2,__:[4]},1024)):c("",!0)]),_:2,__:[5,6,7]},1032,["title","created","modified"]),t[14]||(t[14]=a()),n(R,null,{title:e(()=>t[8]||(t[8]=[w("h3",null,"Affected Data Plane Proxies",-1)])),default:e(()=>[t[13]||(t[13]=a()),n(A,{src:D(B(P),"/meshes/:mesh/policy-path/:path/policy/:name/dataplanes",{mesh:o.params.mesh,path:o.params.policyPath,name:o.params.policy},{page:o.params.page,size:o.params.size}),variant:"list"},{default:e(({data:u})=>[n(V,{type:"data-planes",items:u.items,page:o.params.page,"page-size":o.params.size,total:u.total,onChange:o.update},{default:e(()=>[n(L,{headers:[{...y.get("headers.name"),label:"Name",key:"name"},{...y.get("headers.namespace"),label:"Namespace",key:"namespace"},...g("use zones")?[{...y.get("headers.zone"),label:"Zone",key:"zone"}]:[],{...y.get("headers.actions"),label:"Actions",key:"actions",hideLabel:!0}],items:u.items,"is-selected-row":p=>p.id===o.params.proxy,onResize:y.set},{name:e(({row:p})=>[n(f,{"data-action":"",to:{name:"data-plane-detail-view",params:{proxy:p.id}}},{default:e(()=>[a(s(p.name),1)]),_:2},1032,["to"])]),namespace:e(({row:p})=>[a(s(p.namespace),1)]),zone:e(({row:p})=>[p.zone?(l(),d(f,{key:0,to:{name:"zone-cp-detail-view",params:{zone:p.zone}}},{default:e(()=>[a(s(p.zone),1)]),_:2},1032,["to"])):(l(),h(S,{key:1},[a(s(m("common.collection.none")),1)],64))]),actions:e(({row:p})=>[n(b,null,{default:e(()=>[n(f,{to:{name:"data-plane-detail-view",params:{proxy:p.id}}},{default:e(()=>[a(s(m("common.collection.actions.view")),1)]),_:2},1032,["to"])]),_:2},1024)]),_:2,__:[9,10,11]},1032,["headers","items","is-selected-row","onResize"]),t[12]||(t[12]=a()),n(v,null,{default:e(({Component:p})=>[o.child()?(l(),d(q,{key:0,onClose:E=>o.replace({params:{mesh:o.params.mesh},query:{page:o.params.page,size:o.params.size,s:o.params.s}})},{default:e(()=>[typeof u<"u"?(l(),d(T(p),{key:0,items:u.items},null,8,["items"])):c("",!0)]),_:2},1032,["onClose"])):c("",!0)]),_:2},1024)]),_:2,__:[12]},1032,["items","page","page-size","total","onChange"])]),_:2},1032,["src"])]),_:2,__:[13]},1024)]),_:2,__:[14]},1024)]),_:1})}}});export{Z as default};
