import{d as E,r as u,x as K,p as d,o as e,w as r,b as a,c as s,e as n,q as v,N as p,L as i,l as o,t as w,m as g,F as D,a9 as M,Y as G,z as H}from"./index-TRKi7niM.js";import{A as J,a as Q}from"./AccordionList-DqNam2rR.js";import{T as U}from"./TagList-DpZkRytB.js";const W={key:0},Z={key:1},h={colspan:"2"},rt=E({__name:"DataPlaneInboundSummaryOverviewView",props:{data:{},dataPlaneOverview:{},routeName:{}},setup(S){const m=S;return(tt,t)=>{const O=u("XBadge"),X=u("XCopyButton"),c=u("XTable"),$=u("XAction"),z=u("XCodeBlock"),x=u("XLayout"),T=u("XCard"),F=u("DataLoader"),A=u("DataSource"),I=u("AppView"),R=u("RouteView"),Y=K("icon-start");return e(),d(R,{params:{mesh:"",proxy:"",connection:""},name:m.routeName},{default:r(({t:b,route:B,uri:C})=>[a(I,null,{default:r(()=>[a(x,{type:"stack"},{default:r(()=>[(e(!0),s(p,null,i([m.dataPlaneOverview.dataplane.networking.inbounds.find(l=>l.port===m.data.port)],l=>(e(),s(p,{key:typeof l},[l?(e(),d(c,{key:0,variant:"kv"},{default:r(()=>[o("tr",null,[t[0]||(t[0]=o("th",{scope:"row"},`
                Tags
              `,-1)),t[1]||(t[1]=n()),o("td",null,[a(U,{tags:l.tags,alignment:"right"},null,8,["tags"])])]),t[10]||(t[10]=n()),o("tr",null,[t[2]||(t[2]=o("th",{scope:"row"},`
                Protocol
              `,-1)),t[3]||(t[3]=n()),o("td",null,[a(O,{appearance:"info"},{default:r(()=>[n(w(b(`http.api.value.${l.protocol}`)),1)]),_:2},1024)])]),t[11]||(t[11]=n()),o("tr",null,[t[4]||(t[4]=o("th",{scope:"row"},`
                Address
              `,-1)),t[5]||(t[5]=n()),o("td",null,[a(X,{text:`${l.addressPort}`},null,8,["text"])])]),t[12]||(t[12]=n()),l.serviceAddressPort.length>0?(e(),s("tr",W,[t[6]||(t[6]=o("th",{scope:"row"},`
                Service address
              `,-1)),t[7]||(t[7]=n()),o("td",null,[a(X,{text:`${l.serviceAddressPort}`},null,8,["text"])])])):v("",!0),t[13]||(t[13]=n()),l.portName.length>0?(e(),s("tr",Z,[t[8]||(t[8]=o("th",{scope:"row"},`
                Name
              `,-1)),t[9]||(t[9]=n()),o("td",null,[a(X,{text:`${l.portName}`},null,8,["text"])])])):v("",!0)]),_:2},1024)):v("",!0)],64))),128)),t[22]||(t[22]=n()),m.data?(e(),d(x,{key:0,type:"stack",size:"small"},{default:r(()=>[t[20]||(t[20]=o("h3",null,"Policies",-1)),t[21]||(t[21]=n()),a(A,{src:C(g(D),"/policy-types",{})},{default:r(({data:l,error:j})=>[a(A,{src:C(g(D),"/meshes/:mesh/dataplanes/:name/policies/for/inbound/:kri",{mesh:B.params.mesh,name:B.params.proxy,kri:m.data.kri})},{default:r(({data:N,error:q})=>[a(F,{data:[l,N],errors:[j,q]},{default:r(()=>[(e(!0),s(p,null,i([Object.groupBy(l?.policyTypes??[],({name:y})=>y)],y=>(e(),d(J,{key:`${typeof y}`,"initially-open":0,"multiple-open":"",class:"stack","data-testid":"inbound-policies-rules"},{default:r(()=>[(e(!0),s(p,null,i(N?.policies||[],({rules:L,kind:f,origins:P})=>(e(),d(T,{key:f},{default:r(()=>[a(Q,null,{"accordion-header":r(()=>[H((e(),s("span",null,[n(w(f)+" ("+w(L.length)+`)
                            `,1)])),[[Y,{name:f,size:"60",default:"policy"}]])]),"accordion-content":r(()=>[a(c,{variant:"kv"},{default:r(()=>[(e(!0),s(p,null,i(L,V=>(e(),s(p,{key:V},[P.length>0?(e(),s(p,{key:0},[o("tr",null,[t[14]||(t[14]=o("th",{scope:"row"},`
                                      Origin policies
                                    `,-1)),t[15]||(t[15]=n()),o("td",null,[o("ul",null,[(e(!0),s(p,null,i(P,k=>(e(),s("li",{key:k.kri},[(e(!0),s(p,null,i([g(M).fromString(k.kri)],_=>(e(),s(p,{key:typeof _},[y[f]?(e(),d($,{key:0,to:{name:"policy-detail-view",params:{mesh:_.mesh,policyPath:y[f][0].path,policy:k.kri}}},{default:r(()=>[n(w(k.kri),1)]),_:2},1032,["to"])):(e(),s(p,{key:1},[n(w(k.kri),1)],64))],64))),128))]))),128))])])]),t[18]||(t[18]=n()),o("tr",null,[o("td",h,[a(x,{type:"stack",size:"small"},{default:r(()=>[t[16]||(t[16]=o("span",null,"Config",-1)),t[17]||(t[17]=n()),a(z,{code:g(G).stringify(V.conf),language:"yaml","show-copy-button":!1},null,8,["code"])]),_:2},1024)])])],64)):v("",!0)],64))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024))),128))]),_:2},1032,["data","errors"])]),_:2},1032,["src"])]),_:2},1032,["src"])]),_:2},1024)):v("",!0)]),_:2},1024)]),_:2},1024)]),_:1},8,["name"])}}});export{rt as default};
