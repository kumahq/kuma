import{C as T}from"./CodeBlock-C9phNG5x.js";import{C as _}from"./CopyButton-kVKRf5qh.js";import{d as k,l as K,I as M,B as q,a as g,o as w,b as R,w as l,q as m,t as S,f as x,e as p,r as E}from"./index-2_Lv9Q_w.js";import{t as F}from"./toYaml-sPaYOD3i.js";const V=k({__name:"ResourceCodeBlock",props:{resource:{},codeMaxHeight:{default:void 0},isSearchable:{type:Boolean,default:!1},query:{default:""},isFilterMode:{type:Boolean,default:!1},isRegExpMode:{type:Boolean,default:!1}},emits:["query-change","filter-mode-change","reg-exp-mode-change"],setup(h,{emit:b}){const{t:i}=K(),t=h,c=b,C=M(()=>f(t.resource)),u=q(()=>{});let d=new Promise((a,e)=>{u.value=n=>n(a,e)});const v=async a=>{let e;try{e=await d}finally{d=new Promise((n,r)=>{u.value=s=>s(n,r)})}return e};async function B(){return f(await v())}function f(a){const{creationTime:e,modificationTime:n,...r}=a;return F(r)}return(a,e)=>{const n=g("KTooltip"),r=g("KToggle");return w(),R(r,{toggled:!1},{default:l(({isToggled:s,toggle:y})=>[p(T,{language:"yaml",code:C.value,"is-searchable":t.isSearchable,"code-max-height":t.codeMaxHeight,query:t.query,"is-filter-mode":t.isFilterMode,"is-reg-exp-mode":t.isRegExpMode,onQueryChange:e[0]||(e[0]=o=>c("query-change",o)),onFilterModeChange:e[1]||(e[1]=o=>c("filter-mode-change",o)),onRegExpModeChange:e[2]||(e[2]=o=>c("reg-exp-mode-change",o))},{"secondary-actions":l(()=>[p(n,{class:"kubernetes-copy-button-tooltip",text:m(i)("common.copyKubernetesText"),placement:"bottomEnd","max-width":"200"},{default:l(()=>[p(_,{class:"kubernetes-copy-button","get-text":B,"copy-text":m(i)("common.copyKubernetesText"),"has-border":"","hide-title":"","icon-color":"currentColor",onClick:()=>{s.value===!1&&y()}},{default:l(()=>[x(S(m(i)("common.copyKubernetesShortText")),1)]),_:2},1032,["copy-text","onClick"])]),_:2},1032,["text"])]),_:2},1032,["code","is-searchable","code-max-height","query","is-filter-mode","is-reg-exp-mode"]),x(),E(a.$slots,"default",{copy:o=>{s.value!==!1&&y(),u.value(o)},copying:s.value})]),_:3})}}});export{V as _};
