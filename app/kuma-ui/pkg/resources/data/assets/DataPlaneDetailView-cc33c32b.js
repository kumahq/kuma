import{a as L,K as U}from"./index-52545d1d.js";import{d as M,l as P,x as H,N as C,a as g,o as i,b as h,w as e,e as s,$ as O,f as t,p as r,a0 as p,t as n,q as a,a1 as z,v,c as u,F as _,J as y,_ as S}from"./index-d015481a.js";import{g as W,a as F,b as j,c as q}from"./index-3d038f44.js";import{S as G}from"./StatusBadge-ed77f93c.js";import{T as B}from"./TagList-3ac304f7.js";import{T as w}from"./TextWithCopyButton-b83bb297.js";import{_ as J}from"./SubscriptionList.vue_vue_type_script_setup_true_lang-faa926a7.js";import"./CopyButton-7634543f.js";import"./AccordionList-cad8a61c.js";const X={"data-testid":"dataplane-warnings"},Z=["data-testid","innerHTML"],Q={class:"stack","data-testid":"dataplane-details"},Y={class:"columns"},tt={class:"status-with-reason"},et={key:0,"data-testid":"dataplane-inbounds"},at={class:"inbound-list"},st={class:"mt-4 columns"},nt={"data-testid":"dataplane-mtls"},lt={class:"columns"},ot=["innerHTML"],it={key:0,"data-testid":"dataplane-subscriptions"},dt=M({__name:"DataPlaneDetailView",props:{data:{}},setup(D){const{t:l,formatIsoDate:b}=P(),R=H(),d=D,x=C(()=>W(d.data)),V=C(()=>{const m=F(d.data);return m!==void 0?b(m):l("common.detail.none")}),T=C(()=>{const m=j(d.data,R("use zones"));return q(d.data)&&m.push({kind:"CERT_EXPIRED"}),m});return(m,rt)=>{const A=g("KTooltip"),k=g("KCard"),I=g("KBadge"),$=g("KAlert"),E=g("AppView"),N=g("RouteView");return i(),h(N,{name:"data-plane-detail-view"},{default:e(()=>[s(E,null,O({default:e(()=>{var c,K;return[t(),r("div",Q,[s(k,null,{default:e(()=>[r("div",Y,[s(p,null,{title:e(()=>[t(n(a(l)("http.api.property.status")),1)]),body:e(()=>[r("div",tt,[s(G,{status:x.value.status},null,8,["status"]),t(),x.value.reason.length>0?(i(),h(A,{key:0,label:x.value.reason.join(", "),class:"reason-tooltip"},{default:e(()=>[s(a(z),{color:a(L),size:a(U),"hide-title":""},null,8,["color","size"])]),_:1},8,["label"])):v("",!0)])]),_:1}),t(),s(p,null,{title:e(()=>[t(n(a(l)("data-planes.routes.item.last_updated")),1)]),body:e(()=>[t(n(V.value),1)]),_:1}),t(),d.data.dataplane.networking.gateway?(i(),u(_,{key:0},[s(p,null,{title:e(()=>[t(n(a(l)("http.api.property.tags")),1)]),body:e(()=>[s(B,{tags:d.data.dataplane.networking.gateway.tags},null,8,["tags"])]),_:1}),t(),s(p,null,{title:e(()=>[t(n(a(l)("http.api.property.address")),1)]),body:e(()=>[s(w,{text:`${d.data.dataplane.networking.address}`},null,8,["text"])]),_:1})],64)):v("",!0)])]),_:1}),t(),d.data.dataplane.networking.inbound&&d.data.dataplane.networking.inbound.length>0?(i(),u("div",et,[r("h2",null,n(a(l)("data-planes.routes.item.inbounds")),1),t(),s(k,{class:"mt-4"},{default:e(()=>[r("div",at,[(i(!0),u(_,null,y(d.data.dataplane.networking.inbound,(o,f)=>(i(),u("div",{key:f,class:"inbound"},[r("h4",null,[s(w,{text:o.tags["kuma.io/service"]},{default:e(()=>[t(n(a(l)("data-planes.routes.item.inbound_name",{service:o.tags["kuma.io/service"]})),1)]),_:2},1032,["text"])]),t(),r("div",st,[s(p,null,{title:e(()=>[t(n(a(l)("http.api.property.status")),1)]),body:e(()=>[!o.health||o.health.ready?(i(),h(I,{key:0,appearance:"success"},{default:e(()=>[t(n(a(l)("data-planes.routes.item.health.ready")),1)]),_:1})):(i(),h(I,{key:1,appearance:"danger"},{default:e(()=>[t(n(a(l)("data-planes.routes.item.health.not_ready")),1)]),_:1}))]),_:2},1024),t(),s(p,null,{title:e(()=>[t(n(a(l)("http.api.property.tags")),1)]),body:e(()=>[s(B,{tags:o.tags},null,8,["tags"])]),_:2},1024),t(),s(p,null,{title:e(()=>[t(n(a(l)("http.api.property.address")),1)]),body:e(()=>[s(w,{text:`${o.address??d.data.dataplane.networking.advertisedAddress??d.data.dataplane.networking.address}:${o.port}`},null,8,["text"])]),_:2},1024),t(),s(p,null,{title:e(()=>[t(n(a(l)("http.api.property.serviceAddress")),1)]),body:e(()=>[s(w,{text:`${o.serviceAddress??o.address??d.data.dataplane.networking.address}:${o.servicePort??o.port}`},null,8,["text"])]),_:2},1024)])]))),128))])]),_:1})])):v("",!0),t(),r("div",nt,[r("h2",null,n(a(l)("data-planes.routes.item.mtls.title")),1),t(),(c=d.data.dataplaneInsight)!=null&&c.mTLS?(i(!0),u(_,{key:0},y([d.data.dataplaneInsight.mTLS],o=>(i(),h(k,{key:o,class:"mt-4"},{default:e(()=>[r("div",lt,[s(p,null,{title:e(()=>[t(n(a(l)("data-planes.routes.item.mtls.expiration_time.title")),1)]),body:e(()=>[t(n(a(b)(o.certificateExpirationTime)),1)]),_:2},1024),t(),s(p,null,{title:e(()=>[t(n(a(l)("data-planes.routes.item.mtls.generation_time.title")),1)]),body:e(()=>[t(n(a(b)(o.lastCertificateRegeneration)),1)]),_:2},1024),t(),s(p,null,{title:e(()=>[t(n(a(l)("data-planes.routes.item.mtls.regenerations.title")),1)]),body:e(()=>[t(n(a(l)("common.formats.integer",{value:o.certificateRegenerations})),1)]),_:2},1024),t(),s(p,null,{title:e(()=>[t(n(a(l)("data-planes.routes.item.mtls.issued_backend.title")),1)]),body:e(()=>[t(n(o.issuedBackend),1)]),_:2},1024),t(),s(p,null,{title:e(()=>[t(n(a(l)("data-planes.routes.item.mtls.supported_backends.title")),1)]),body:e(()=>[r("ul",null,[(i(!0),u(_,null,y(o.supportedBackends,f=>(i(),u("li",{key:f},n(f),1))),128))])]),_:2},1024)])]),_:2},1024))),128)):(i(),h($,{key:1,class:"mt-4",appearance:"warning"},{alertMessage:e(()=>[r("div",{innerHTML:a(l)("data-planes.routes.item.mtls.disabled")},null,8,ot)]),_:1}))]),t(),(i(!0),u(_,null,y([((K=d.data.dataplaneInsight)==null?void 0:K.subscriptions)??[]],o=>(i(),u(_,{key:o},[o.length>0?(i(),u("div",it,[r("h2",null,n(a(l)("data-planes.routes.item.subscriptions.title")),1),t(),s(k,{class:"mt-4"},{default:e(()=>[s(J,{subscriptions:o},null,8,["subscriptions"])]),_:2},1024)])):v("",!0)],64))),128))])]}),_:2},[T.value.length>0?{name:"notifications",fn:e(()=>[r("ul",X,[(i(!0),u(_,null,y(T.value,c=>(i(),u("li",{key:c.kind,"data-testid":`warning-${c.kind}`,innerHTML:a(l)(`common.warnings.${c.kind}`,c.payload)},null,8,Z))),128)),t()])]),key:"0"}:void 0]),1024)]),_:1})}}});const ft=S(dt,[["__scopeId","data-v-76de0a40"]]);export{ft as default};
