import{d as N,l as R,u as S,Z as E,m as T,o as r,c as D,e as c,w as n,q as e,aF as Z,aG as B,f as _,t as C,aH as M,b as d,p as h,v as I,a as b,a0 as $,H as L}from"./index-784d2bbf.js";import{_ as G}from"./DeleteResourceModal.vue_vue_type_script_setup_true_lang-f5222818.js";import{E as P}from"./ErrorBlock-d38c2168.js";import{_ as j}from"./LoadingBlock.vue_vue_type_script_setup_true_lang-8f5d9bcc.js";import{N as q}from"./NavTabs-4b9646fa.js";import{T as H}from"./TextWithCopyButton-7ef74197.js";import"./index-9dd3e7d3.js";import"./WarningIcon.vue_vue_type_script_setup_true_lang-9960c4c9.js";import"./CopyButton-9c00109a.js";const Y=N({__name:"ZoneActionMenu",props:{zoneOverview:{type:Object,required:!0},kpopAttributes:{type:Object,default:()=>({placement:"bottomEnd"})}},setup(g){const{t}=R(),x=S(),O=E(),l=g,u=T(!1);function v(){u.value=!u.value}async function w(){await x.deleteZone({name:l.zoneOverview.name})}function o(){O.push({name:"zone-cp-list-view"})}return(i,a)=>(r(),D("div",null,[c(e(M),{"button-appearance":"creation","kpop-attributes":l.kpopAttributes,label:e(t)("zones.action_menu.toggle_button"),"show-caret":"",width:"280"},{items:n(()=>[c(e(Z),{"is-dangerous":"","data-testid":"delete-button",onClick:B(v,["prevent"])},{default:n(()=>[_(C(e(t)("zones.action_menu.delete_button")),1)]),_:1},8,["onClick"])]),_:1},8,["kpop-attributes","label"]),_(),u.value?(r(),d(G,{key:0,"confirmation-text":l.zoneOverview.name,"delete-function":w,"is-visible":"","action-button-text":e(t)("common.delete_modal.proceed_button"),title:e(t)("common.delete_modal.title",{type:"Zone"}),"data-testid":"delete-zone-modal",onCancel:v,onDelete:o},{"body-content":n(()=>[h("p",null,C(e(t)("common.delete_modal.text1",{type:"Zone",name:l.zoneOverview.name})),1),_(),h("p",null,C(e(t)("common.delete_modal.text2")),1)]),_:1},8,["confirmation-text","action-button-text","title"])):I("",!0)]))}}),oe=N({__name:"ZoneDetailTabsView",setup(g){var w;const{t}=R(),l=(((w=E().getRoutes().find(o=>o.name==="zone-cp-detail-tabs-view"))==null?void 0:w.children)??[]).map(o=>{var s,p;const i=typeof o.name>"u"?(s=o.children)==null?void 0:s[0]:o,a=i.name,m=((p=i.meta)==null?void 0:p.module)??"";return{title:t(`zone-cps.routes.item.navigation.${a}`),routeName:a,module:m}}),u=T([]),v=o=>{var m,f;const i=[],a=((m=o.zoneInsight)==null?void 0:m.subscriptions)??[];if(a.length>0){const s=a[a.length-1],p=s.version.kumaCp.version||"-",{kumaCpGlobalCompatible:z=!0}=s.version.kumaCp;s.config&&((f=JSON.parse(s.config))==null?void 0:f.store.type)==="memory"&&i.push({kind:"ZONE_STORE_TYPE_MEMORY",payload:{}}),z||i.push({kind:"INCOMPATIBLE_ZONE_AND_GLOBAL_CPS_VERSIONS",payload:{zoneCpVersion:p}})}u.value=i};return(o,i)=>{const a=b("RouteTitle"),m=b("RouterView"),f=b("AppView"),s=b("DataSource"),p=b("RouteView");return r(),d(p,{name:"zone-cp-detail-tabs-view",params:{zone:""}},{default:n(({can:z,route:k})=>[c(s,{src:`/zone-cps/${k.params.zone}`,onChange:v},{default:n(({data:y,error:V})=>[V!==void 0?(r(),d(P,{key:0,error:V},null,8,["error"])):y===void 0?(r(),d(j,{key:1})):(r(),d(f,{key:2,breadcrumbs:[{to:{name:"zone-cp-list-view"},text:e(t)("zone-cps.routes.item.breadcrumbs")}]},$({title:n(()=>[h("h1",null,[c(H,{text:k.params.zone},{default:n(()=>[c(a,{title:e(t)("zone-cps.routes.item.title",{name:k.params.zone})},null,8,["title"])]),_:2},1032,["text"])])]),default:n(()=>[_(),_(),c(q,{class:"route-zone-detail-view-tabs",tabs:e(l)},null,8,["tabs"]),_(),c(m,null,{default:n(A=>[(r(),d(L(A.Component),{data:y,notifications:u.value},null,8,["data","notifications"]))]),_:2},1024)]),_:2},[z("create zones")?{name:"actions",fn:n(()=>[c(Y,{"zone-overview":y},null,8,["zone-overview"])]),key:"0"}:void 0]),1032,["breadcrumbs"]))]),_:2},1032,["src"])]),_:1})}}});export{oe as default};
