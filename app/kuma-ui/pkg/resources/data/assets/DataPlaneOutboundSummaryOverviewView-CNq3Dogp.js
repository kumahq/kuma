import{d as q,r as l,p as u,o as a,w as e,b as r,e as n,q as L,l as o,t as c,m as f,F as N,c as s,N as p,L as k,a4 as E,Y as I}from"./index-BVCeEt6h.js";import{A as K,a as M}from"./AccordionList-IWxHVIrG.js";import{P as G}from"./PolicyTypeTag-Bgig-0fJ.js";const H={colspan:"2"},Z=q({__name:"DataPlaneOutboundSummaryOverviewView",props:{data:{},routeName:{}},setup(P){const d=P;return(J,t)=>{const x=l("XBadge"),w=l("XTable"),S=l("XAction"),D=l("XCodeBlock"),_=l("XLayout"),O=l("XCard"),$=l("DataLoader"),X=l("DataSource"),T=l("AppView"),z=l("RouteView");return a(),u(z,{params:{mesh:"",proxy:"",connection:""},name:d.routeName},{default:e(({t:F,route:g,uri:v})=>[r(T,null,{default:e(()=>[r(_,{type:"stack"},{default:e(()=>[r(w,{variant:"kv"},{default:e(()=>[o("tr",null,[t[0]||(t[0]=o("th",{scope:"row"},`
              Protocol
            `,-1)),t[1]||(t[1]=n()),o("td",null,[r(x,{appearance:"info"},{default:e(()=>[n(c(F(`http.api.value.${d.data.protocol}`)),1)]),_:2},1024)])]),t[4]||(t[4]=n()),o("tr",null,[t[2]||(t[2]=o("th",{scope:"row"},`
              Port
            `,-1)),t[3]||(t[3]=n()),o("td",null,c(d.data.port),1)])]),_:2},1024),t[13]||(t[13]=n()),d.data?(a(),u(_,{key:0,type:"stack",size:"small"},{default:e(()=>[t[11]||(t[11]=o("h3",null,"Policies",-1)),t[12]||(t[12]=n()),r(X,{src:v(f(N),"/policy-types",{})},{default:e(({data:B,error:R})=>[r(X,{src:v(f(N),"/meshes/:mesh/dataplanes/:name/policies/for/outbound/:kri",{mesh:g.params.mesh,name:g.params.proxy,kri:d.data.kri})},{default:e(({data:C,error:Y})=>[r($,{data:[B,C],errors:[R,Y]},{default:e(()=>[(a(!0),s(p,null,k([Object.groupBy(B?.policyTypes??[],({name:i})=>i)],i=>(a(),u(K,{key:`${typeof i}`,"initially-open":0,"multiple-open":"",class:"stack","data-testid":"outbound-policies-rules"},{default:e(()=>[(a(!0),s(p,null,k(C?.policies||[],({conf:j,kind:m,origins:V})=>(a(),u(O,{key:m},{default:e(()=>[r(M,null,{"accordion-header":e(()=>[r(G,{"policy-type":m},{default:e(()=>[n(c(m),1)]),_:2},1032,["policy-type"])]),"accordion-content":e(()=>[V.length>0?(a(),u(w,{key:0,variant:"kv"},{default:e(()=>[o("tr",null,[t[5]||(t[5]=o("th",{scope:"row"},`
                                  Origin policies
                                `,-1)),t[6]||(t[6]=n()),o("td",null,[o("ul",null,[(a(!0),s(p,null,k(V,y=>(a(),s("li",{key:y.kri},[(a(!0),s(p,null,k([f(E).fromString(y.kri)],({mesh:b,name:A})=>(a(),s(p,{key:`${b}-${A}`},[i[m]?(a(),u(S,{key:0,to:{name:"policy-detail-view",params:{mesh:b,policyPath:i[m][0].path,policy:A}}},{default:e(()=>[n(c(y.kri),1)]),_:2},1032,["to"])):(a(),s(p,{key:1},[n(c(y.kri),1)],64))],64))),128))]))),128))])])]),t[9]||(t[9]=n()),o("tr",null,[o("td",H,[r(_,{type:"stack",size:"small"},{default:e(()=>[t[7]||(t[7]=o("span",null,"Config",-1)),t[8]||(t[8]=n()),r(D,{code:f(I).stringify(j),language:"yaml","show-copy-button":!1},null,8,["code"])]),_:2},1024)])])]),_:2},1024)):L("",!0)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024))),128))]),_:2},1032,["data","errors"])]),_:2},1032,["src"])]),_:2},1032,["src"])]),_:2},1024)):L("",!0)]),_:2},1024)]),_:2},1024)]),_:1},8,["name"])}}});export{Z as default};
