import{d as E,r,x as I,p as u,o,w as e,b as s,e as n,q as L,l as a,t as f,m as y,F as g,c as l,N as p,L as k,a9 as K,Y as M,z as T}from"./index-DIsQPtUy.js";import{A as G,a as H}from"./AccordionList-BWJeYYnD.js";const J={colspan:"2"},Z=E({__name:"DataPlaneOutboundSummaryOverviewView",props:{data:{},routeName:{}},setup(x){const i=x;return(Q,t)=>{const N=r("XBadge"),w=r("XTable"),D=r("XAction"),P=r("XCodeBlock"),_=r("XLayout"),S=r("XCard"),z=r("DataLoader"),v=r("DataSource"),O=r("AppView"),F=r("RouteView"),R=I("icon-start");return o(),u(F,{params:{mesh:"",proxy:"",connection:""},name:i.routeName},{default:e(({t:Y,route:X,uri:B})=>[s(O,null,{default:e(()=>[s(_,{type:"stack"},{default:e(()=>[s(w,{variant:"kv"},{default:e(()=>[a("tr",null,[t[0]||(t[0]=a("th",{scope:"row"},`
              Protocol
            `,-1)),t[1]||(t[1]=n()),a("td",null,[s(N,{appearance:"info"},{default:e(()=>[n(f(Y(`http.api.value.${i.data.protocol}`)),1)]),_:2},1024)])]),t[4]||(t[4]=n()),a("tr",null,[t[2]||(t[2]=a("th",{scope:"row"},`
              Port
            `,-1)),t[3]||(t[3]=n()),a("td",null,f(i.data.port),1)])]),_:2},1024),t[13]||(t[13]=n()),i.data?(o(),u(_,{key:0,type:"stack",size:"small"},{default:e(()=>[t[11]||(t[11]=a("h3",null,"Policies",-1)),t[12]||(t[12]=n()),s(v,{src:B(y(g),"/policy-types",{})},{default:e(({data:C,error:$})=>[s(v,{src:B(y(g),"/meshes/:mesh/dataplanes/:name/policies/for/outbound/:kri",{mesh:X.params.mesh,name:X.params.proxy,kri:i.data.kri})},{default:e(({data:V,error:j})=>[s(z,{data:[C,V],errors:[$,j]},{default:e(()=>[(o(!0),l(p,null,k([Object.groupBy(C?.policyTypes??[],({name:d})=>d)],d=>(o(),u(G,{key:`${typeof d}`,"initially-open":0,"multiple-open":"",class:"stack","data-testid":"outbound-policies-rules"},{default:e(()=>[(o(!0),l(p,null,k(V?.policies||[],({conf:q,kind:m,origins:b})=>(o(),u(S,{key:m},{default:e(()=>[s(H,null,{"accordion-header":e(()=>[T((o(),l("span",null,[n(f(m),1)])),[[R,{name:m,size:"60",default:"policy"}]])]),"accordion-content":e(()=>[b.length>0?(o(),u(w,{key:0,variant:"kv"},{default:e(()=>[a("tr",null,[t[5]||(t[5]=a("th",{scope:"row"},`
                                  Origin policies
                                `,-1)),t[6]||(t[6]=n()),a("td",null,[a("ul",null,[(o(!0),l(p,null,k(b,c=>(o(),l("li",{key:c.kri},[(o(!0),l(p,null,k([y(K).fromString(c.kri)],A=>(o(),l(p,{key:typeof A},[d[m]?(o(),u(D,{key:0,to:{name:"policy-detail-view",params:{mesh:A.mesh,policyPath:d[m][0].path,policy:c.kri}}},{default:e(()=>[n(f(c.kri),1)]),_:2},1032,["to"])):(o(),l(p,{key:1},[n(f(c.kri),1)],64))],64))),128))]))),128))])])]),t[9]||(t[9]=n()),a("tr",null,[a("td",J,[s(_,{type:"stack",size:"small"},{default:e(()=>[t[7]||(t[7]=a("span",null,"Config",-1)),t[8]||(t[8]=n()),s(P,{code:y(M).stringify(q),language:"yaml","show-copy-button":!1},null,8,["code"])]),_:2},1024)])])]),_:2},1024)):L("",!0)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024))),128))]),_:2},1032,["data","errors"])]),_:2},1032,["src"])]),_:2},1032,["src"])]),_:2},1024)):L("",!0)]),_:2},1024)]),_:2},1024)]),_:1},8,["name"])}}});export{Z as default};
