import{_ as D}from"./PolicySummary.vue_vue_type_script_setup_true_lang-DwzFyPnf.js";import{d as B,r as t,m,o as c,w as s,b as r,e as i,p as h,s as T,V as X,q as d,c as q,t as g,F as L,v as _,M as A,_ as N}from"./index-De9sDLbp.js";import{_ as x}from"./ResourceCodeBlock.vue_vue_type_script_setup_true_lang-M7wvvkVJ.js";const Q=B({__name:"DataPlanePolicySummaryView",props:{policyTypes:{}},setup(C){const k=C;return(v,l)=>{const R=t("RouteTitle"),S=t("XAction"),V=t("XSelect"),w=t("XLayout"),y=t("DataLoader"),F=t("AppView"),M=t("DataSource"),b=t("RouteView");return c(),m(b,{name:"data-plane-policy-summary-view",params:{mesh:"",policyPath:"",policy:"",codeSearch:"",codeFilter:!1,codeRegExp:!1,format:String}},{default:s(({route:e,t:n,uri:E})=>[r(M,{src:`/meshes/${e.params.mesh}/policy-path/${e.params.policyPath}/policy/${e.params.policy}`},{default:s(({data:p,error:P})=>[r(F,null,{title:s(()=>[d("h2",null,[r(S,{to:{name:"policy-detail-view",params:{mesh:e.params.mesh,policyPath:e.params.policyPath,policy:e.params.policy}}},{default:s(()=>[r(R,{title:n("policies.routes.item.title",{name:e.params.policy})},null,8,["title"])]),_:2},1032,["to"])])]),default:s(()=>[l[2]||(l[2]=i()),r(y,{data:[p],errors:[P]},{default:s(()=>{var f;return[p?(c(),m(D,{key:0,policy:p,format:e.params.format,legacy:!((f=k.policyTypes.find(({name:o})=>o===(p==null?void 0:p.type)))!=null&&f.policy.isTargetRef)},{header:s(()=>[d("header",null,[r(w,{type:"separated",size:"max"},{default:s(()=>[d("h3",null,g(n("policies.routes.item.config")),1),l[0]||(l[0]=i()),(c(),q(L,null,_([["structured","universal","k8s"]],o=>d("div",{key:typeof o},[r(V,{label:n("policies.routes.item.format"),selected:o.includes(e.params.format)?e.params.format:o[0],onChange:a=>{e.update({format:a})},onVnodeBeforeMount:a=>{var u;return((u=a==null?void 0:a.props)==null?void 0:u.selected)&&o.includes(a.props.selected)&&a.props.selected!==e.params.format&&e.update({format:a.props.selected})}},A({_:2},[_(o,a=>({name:`${a}-option`,fn:s(()=>[i(g(n(`policies.routes.item.formats.${a}`)),1)])}))]),1032,["label","selected","onChange","onVnodeBeforeMount"])])),64))]),_:2},1024)])]),default:s(()=>[l[1]||(l[1]=i()),e.params.format==="universal"?(c(),m(x,{key:0,"data-testid":"codeblock-yaml-universal",language:"yaml",resource:p.config,"is-searchable":"","show-k8s-copy-button":!1,query:e.params.codeSearch,"is-filter-mode":e.params.codeFilter,"is-reg-exp-mode":e.params.codeRegExp,onQueryChange:o=>e.update({codeSearch:o}),onFilterModeChange:o=>e.update({codeFilter:o}),onRegExpModeChange:o=>e.update({codeRegExp:o})},null,8,["resource","query","is-filter-mode","is-reg-exp-mode","onQueryChange","onFilterModeChange","onRegExpModeChange"])):e.params.format==="k8s"?(c(),m(y,{key:1,src:E(T(X),"/meshes/:mesh/policy-path/:path/policy/:name/as/kubernetes",{mesh:e.params.mesh,path:e.params.policyPath,name:e.params.policy})},{default:s(({data:o})=>[r(x,{"data-testid":"codeblock-yaml-k8s",language:"yaml",resource:o,"show-k8s-copy-button":!1,"is-searchable":"",query:e.params.codeSearch,"is-filter-mode":e.params.codeFilter,"is-reg-exp-mode":e.params.codeRegExp,onQueryChange:a=>e.update({codeSearch:a}),onFilterModeChange:a=>e.update({codeFilter:a}),onRegExpModeChange:a=>e.update({codeRegExp:a})},null,8,["resource","query","is-filter-mode","is-reg-exp-mode","onQueryChange","onFilterModeChange","onRegExpModeChange"])]),_:2},1032,["src"])):h("",!0)]),_:2},1032,["policy","format","legacy"])):h("",!0)]}),_:2},1032,["data","errors"])]),_:2},1024)]),_:2},1032,["src"])]),_:1})}}}),G=N(Q,[["__scopeId","data-v-31f9d775"]]);export{G as default};
