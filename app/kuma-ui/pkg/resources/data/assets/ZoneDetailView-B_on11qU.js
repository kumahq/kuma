import{d as K,e as p,o as l,p as y,w as t,a as i,m as w,x as O,R as E,b as n,l as _,Q as k,t as a,S as X,n as M,W as H,L as U,q as I,c as z,A as Z,J as b,K as h,F as $,_ as F}from"./index-B7AksOXy.js";import{B as G}from"./kong-icons.es678-DvNfSiLU.js";import{S as P}from"./SummaryView-0Uo9v5NI.js";const q=["data-testid","innerHTML"],J={"data-testid":"detail-view-details",class:"stack"},Q={class:"columns"},W=["innerHTML"],j={key:0},Y=K({__name:"ZoneDetailView",props:{data:{}},setup(v){const d=v;return(ee,s)=>{const T=p("XTimespan"),V=p("KTooltip"),D=p("XLayout"),L=p("KCard"),S=p("XAction"),A=p("RouterView"),N=p("AppView"),R=p("DataSource"),B=p("RouteView");return l(),y(B,{name:"zone-cp-detail-view",params:{zone:"",subscription:""}},{default:t(({t:o,uri:x,route:f,me:m})=>{var g,C;return[i(R,{src:x(w(O),"/control-plane/outdated/:version",{version:((C=(g=d.data.zoneInsight.version)==null?void 0:g.kumaCp)==null?void 0:C.version)??"-"})},{default:t(({data:c})=>[i(N,{docs:o("zones.href.docs.cta")},E({default:t(()=>[s[16]||(s[16]=n()),_("div",J,[i(L,null,{default:t(()=>[i(D,{type:"stack"},{default:t(()=>[i(T,{start:o("common.formats.datetime",{value:Date.parse(d.data.creationTime)}),end:o("common.formats.datetime",{value:Date.parse(d.data.modificationTime)})},null,8,["start","end"]),s[8]||(s[8]=n()),_("div",Q,[i(k,null,{title:t(()=>[n(a(o("http.api.property.status")),1)]),body:t(()=>[i(X,{status:d.data.state},null,8,["status"])]),_:2},1024),s[5]||(s[5]=n()),i(k,{class:M({version:!0,outdated:c==null?void 0:c.outdated})},{title:t(()=>[n(a(o("zone-cps.routes.item.version"))+" ",1),(c==null?void 0:c.outdated)===!0?(l(),y(V,{key:0,"max-width":"300"},{content:t(()=>[_("div",{innerHTML:o("zone-cps.routes.item.version_warning")},null,8,W)]),default:t(()=>[i(w(G),{color:w(H),size:w(U)},null,8,["color","size"]),s[1]||(s[1]=n())]),_:2},1024)):I("",!0)]),body:t(()=>{var e,r;return[n(a(((r=(e=d.data.zoneInsight.version)==null?void 0:e.kumaCp)==null?void 0:r.version)??"â€”"),1)]}),_:2},1032,["class"]),s[6]||(s[6]=n()),i(k,null,{title:t(()=>[n(a(o("http.api.property.type")),1)]),body:t(()=>[n(a(o(`common.product.environment.${d.data.zoneInsight.environment||"unknown"}`)),1)]),_:2},1024),s[7]||(s[7]=n()),i(k,null,{title:t(()=>[n(a(o("zone-cps.routes.item.authentication_type")),1)]),body:t(()=>[n(a(d.data.zoneInsight.authenticationType||o("common.not_applicable")),1)]),_:2},1024)])]),_:2},1024)]),_:2},1024),s[15]||(s[15]=n()),d.data.zoneInsight.subscriptions.length>0?(l(),z("div",j,[_("h2",null,a(o("zone-cps.detail.subscriptions")),1),s[13]||(s[13]=n()),i(Z,{headers:[{...m.get("headers.zoneInstanceId"),label:o("zone-cps.routes.items.headers.zoneInstanceId"),key:"zoneInstanceId"},{...m.get("headers.version"),label:o("zone-cps.routes.items.headers.version"),key:"version"},{...m.get("headers.connected"),label:o("zone-cps.routes.items.headers.connected"),key:"connected"},{...m.get("headers.disconnected"),label:o("zone-cps.routes.items.headers.disconnected"),key:"disconnected"},{...m.get("headers.responses"),label:o("zone-cps.routes.items.headers.responses"),key:"responses"}],"is-selected-row":e=>e.id===f.params.subscription,items:d.data.zoneInsight.subscriptions.map((e,r,u)=>u[u.length-(r+1)]),onResize:m.set},{zoneInstanceId:t(({row:e})=>[i(S,{"data-action":"",to:{name:"zone-cp-subscription-summary-view",params:{subscription:e.id}}},{default:t(()=>[n(a(e.zoneInstanceId),1)]),_:2},1032,["to"])]),version:t(({row:e})=>{var r,u;return[n(a(((u=(r=e.version)==null?void 0:r.kumaCp)==null?void 0:u.version)??"-"),1)]}),connected:t(({row:e})=>[n(a(o("common.formats.datetime",{value:Date.parse(e.connectTime??"")})),1)]),disconnected:t(({row:e})=>[e.disconnectTime?(l(),z(b,{key:0},[n(a(o("common.formats.datetime",{value:Date.parse(e.disconnectTime)})),1)],64)):I("",!0)]),responses:t(({row:e})=>{var r;return[(l(!0),z(b,null,h([((r=e.status)==null?void 0:r.total)??{}],u=>(l(),z(b,null,[n(a(u.responsesSent)+"/"+a(u.responsesAcknowledged),1)],64))),256))]}),_:2},1032,["headers","is-selected-row","items","onResize"]),s[14]||(s[14]=n()),i(A,null,{default:t(({Component:e})=>[f.child()?(l(),y(P,{key:0,width:"670px",onClose:function(){f.replace({name:"zone-cp-detail-view",params:{zone:f.params.zone}})}},{default:t(()=>[(l(),y($(e),{data:d.data.zoneInsight.subscriptions},{default:t(()=>[_("p",null,a(o("zone-cps.routes.item.subscription_intro")),1)]),_:2},1032,["data"]))]),_:2},1032,["onClose"])):I("",!0)]),_:2},1024)])):I("",!0)])]),_:2},[d.data.warnings.length>0?{name:"notifications",fn:t(()=>[_("ul",null,[(l(!0),z(b,null,h(d.data.warnings,e=>(l(),z("li",{key:e.kind,"data-testid":`warning-${e.kind}`,innerHTML:o(`common.warnings.${e.kind}`,{...e.payload,...e.kind==="INCOMPATIBLE_ZONE_AND_GLOBAL_CPS_VERSIONS"?{globalCpVersion:(c==null?void 0:c.version)??""}:{}})},null,8,q))),128))])]),key:"0"}:void 0]),1032,["docs"])]),_:2},1032,["src"])]}),_:1})}}}),se=F(Y,[["__scopeId","data-v-67fa6795"]]);export{se as default};
