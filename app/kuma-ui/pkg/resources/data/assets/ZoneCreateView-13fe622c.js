import{V as F,l as O,T as $,c as M,b as R,n as D,d as L}from"./kongponents.es-7e228e6a.js";import{d as Z,q as B,m as y,o as z,f as C,e as t,t as o,u as n,b as e,a as l,p as W,j,w as r,y as N,r as f,c as I,g as T,F as H,R as G}from"./index-2aa994fe.js";import{_ as m}from"./CodeBlock.vue_vue_type_style_index_0_lang-55ca759f.js";import{a as J,g as q,b as x,_ as V,u as Q,f as X,e as Y}from"./RouteView.vue_vue_type_script_setup_true_lang-49cffe7a.js";import{_ as ee}from"./RouteTitle.vue_vue_type_script_setup_true_lang-994a27b4.js";import{E as ne}from"./ErrorBlock-9a3c452b.js";import{_ as te}from"./EntityScanner.vue_vue_type_script_setup_true_lang-483ddcea.js";const oe=p=>(W("data-v-88fad0e9"),p=p(),j(),p),se={href:"https://helm.sh/docs/intro/install/"},ae=oe(()=>t("p",null,"On your local machine, create a namespace in your Kubernetes cluster and pull down the kong Helm repo.",-1)),le={class:"k-input-label mt-4"},re={class:"mt-4"},ue=Z({__name:"ZoneCreateKubernetesInstructions",props:{zoneName:{type:String,required:!0},zoneIngressEnabled:{type:Boolean,required:!0},zoneEgressEnabled:{type:Boolean,required:!0},token:{type:String,required:!0},base64EncodedToken:{type:String,required:!0}},setup(p){const a=p,u=J(),s=q(),_=B(),g=x(),b=y(()=>s.t("zones.form.kubernetes.secret.createSecretCommand",{token:a.base64EncodedToken}).trim()),h=y(()=>{const c={zoneName:a.zoneName,globalKdsAddress:g.state.globalKdsAddress,zoneIngressEnabled:String(a.zoneIngressEnabled),zoneEgressEnabled:String(a.zoneEgressEnabled)};return typeof _.params.virtualControlPlaneId=="string"&&(c.controlPlaneId=_.params.virtualControlPlaneId),s.t("zones.form.kubernetes.connectZone.config",c).trim()});return(c,k)=>(z(),C("div",null,[t("h3",null,"1. "+o(n(s).t("zones.form.kubernetes.prerequisites.title")),1),e(),t("ul",null,[t("li",null,[t("b",null,o(n(s).t("zones.form.kubernetes.prerequisites.step1Label"))+o(a.zoneIngressEnabled?" "+n(s).t("zones.form.kubernetes.prerequisites.step1LabelAddendum"):""),1),e(`:
        `+o(n(s).t("zones.form.kubernetes.prerequisites.step1Description",{productName:n(u)("KUMA_PRODUCT_NAME")})),1)]),e(),t("li",null,[t("b",null,o(n(s).t("zones.form.kubernetes.prerequisites.step2Label")),1),e(`:
        `+o(n(s).t("zones.form.kubernetes.prerequisites.step2Description")),1)]),e(),t("li",null,[t("a",se,o(n(s).t("zones.form.kubernetes.prerequisites.step3LinkTitle")),1),e(" "+o(n(s).t("zones.form.kubernetes.prerequisites.step3Tail")),1)])]),e(),t("h3",null,"2. "+o(n(s).t("zones.form.kubernetes.helm.title")),1),e(),ae,e(),t("ol",null,[t("li",null,[e(o(n(s).t("zones.form.kubernetes.helm.step1Description"))+" ",1),l(m,{id:"zone-kubernetes-create-namespace",class:"mt-4",code:n(s).t("zones.form.kubernetes.helm.step1Command"),language:"bash"},null,8,["code"])]),e(),t("li",null,[e(o(n(s).t("zones.form.kubernetes.helm.step2Description"))+" ",1),l(m,{id:"zone-kubernetes-add-charts-repo",class:"mt-4",code:n(s).t("zones.form.kubernetes.helm.step2Command"),language:"bash"},null,8,["code"])]),e(),t("li",null,[e(o(n(s).t("zones.form.kubernetes.helm.step3Description"))+" ",1),l(m,{id:"zone-kubernetes-repo-update",class:"mt-4",code:n(s).t("zones.form.kubernetes.helm.step3Command"),language:"bash"},null,8,["code"])])]),e(),t("h3",null,"3. "+o(n(s).t("zones.form.kubernetes.secret.title")),1),e(),t("p",null,o(n(s).t("zones.form.kubernetes.secret.tokenDescription")),1),e(),l(m,{id:"zone-kubernetes-token",class:"mt-4",code:a.token,language:"bash"},null,8,["code"]),e(),t("p",null,o(n(s).t("zones.form.kubernetes.secret.createSecretDescription")),1),e(),l(m,{id:"zone-kubernetes-create-secret",class:"mt-4",code:b.value,language:"bash"},null,8,["code"]),e(),t("h3",null,"4. "+o(n(s).t("zones.form.kubernetes.connectZone.title")),1),e(),t("p",null,o(n(s).t("zones.form.kubernetes.connectZone.configDescription")),1),e(),t("span",le,o(n(s).t("zones.form.kubernetes.connectZone.configFileName")),1),e(),l(m,{id:"zone-kubernetes-config-code-block",code:h.value,language:"yaml"},null,8,["code"]),e(),t("p",re,o(n(s).t("zones.form.kubernetes.connectZone.connectDescription")),1),e(),l(m,{id:"zone-kubernetes-command-code-block",class:"mt-4",code:n(s).t("zones.form.kubernetes.connectZone.connectCommand").trim(),language:"bash"},null,8,["code"])]))}});const ce=V(ue,[["__scopeId","data-v-88fad0e9"]]),ie={class:"k-input-label mt-4"},de={class:"mt-4"},me=Z({__name:"ZoneCreateUniversalInstructions",props:{zoneName:{type:String,required:!0},token:{type:String,required:!0}},setup(p){const a=p,u=q(),s=B(),_=x(),g=y(()=>{const b={zoneName:a.zoneName,globalKdsAddress:_.state.globalKdsAddress,token:a.token};return typeof s.params.virtualControlPlaneId=="string"&&(b.controlPlaneId=s.params.virtualControlPlaneId),u.t("zones.form.universal.connectZone.config",b).trim()});return(b,h)=>(z(),C("div",null,[t("h3",null,"1. "+o(n(u).t("zones.form.universal.copySaveToken.title")),1),e(),l(n(F),{class:"mt-4",appearance:"info"},{alertMessage:r(()=>[e(o(n(u).t("zones.form.universal.copySaveToken.alertMessage")),1)]),_:1}),e(),l(m,{id:"zone-kubernetes-token",class:"mt-4",code:a.token,language:"bash"},null,8,["code"]),e(),t("h3",null,"2. "+o(n(u).t("zones.form.universal.connectZone.title")),1),e(),t("p",null,o(n(u).t("zones.form.universal.connectZone.configDescription")),1),e(),t("span",ie,o(n(u).t("zones.form.universal.connectZone.configFileName")),1),e(),l(m,{id:"zone-universal-config-code-block",class:"mt-4",code:g.value,language:"yaml"},null,8,["code"]),e(),t("p",de,o(n(u).t("zones.form.universal.connectZone.connectDescription")),1),e(),l(m,{id:"zone-universal-connect-command-code-block",class:"mt-4",code:n(u).t("zones.form.universal.connectZone.connectCommand").trim(),language:"bash"},null,8,["code"])]))}});const pe=V(me,[["__scopeId","data-v-0c51bd8d"]]),_e={class:"app-title-bar"},be={class:"title-wrapper"},ve={class:"title"},fe={class:"action-list"},ze=Z({__name:"WizardTitleBar",setup(p){return(a,u)=>(z(),C("div",_e,[t("div",be,[l(n(O),{icon:"kong"}),e(),t("span",ve,[N(a.$slots,"title",{},void 0,!0)])]),e(),t("div",fe,[N(a.$slots,"actions",{},void 0,!0)])]))}});const ge=V(ze,[["__scopeId","data-v-f0a75c34"]]),ke={class:"form-content"},he={class:"form-wrapper mt-4"},ye={key:1,class:"form-wrapper mt-4"},Ce={class:"k-input-label"},Ee={class:"radio-button-group"},Ie={class:"k-input-label"},Ze={class:"radio-button-group"},Ve={class:"k-input-label"},we={class:"radio-button-group"},Se={class:"mt-6"},$e={class:"mt-2"},Te=Z({__name:"ZoneCreateView",setup(p){const{t:a}=q(),u=Q(),s=f(null),_=f(!1),g=f(null),b=f(!1),h=f(null),c=f(""),k=f("kubernetes"),w=f(!0),S=f(!0),E=y(()=>s.value!==null&&s.value.token?s.value.token:""),K=y(()=>E.value!==""?window.btoa(E.value):""),U=y(()=>c.value!=="");async function A(){_.value=!0,g.value=null;try{s.value=await u.createZone({name:c.value})}catch(d){d instanceof Error?g.value=d:console.error(d)}finally{_.value=!1}}async function P(){b.value=!1,h.value=null;try{const d=await u.getZoneOverview({name:c.value}),i=G(d.zoneInsight);b.value=i==="online"}catch(d){d instanceof Error?h.value=d:console.error(d)}}return(d,i)=>(z(),I(Y,null,{default:r(()=>[l(ee,{title:n(a)("zones.routes.create.title")},null,8,["title"]),e(),l(X,{breadcrumbs:[]},{default:r(()=>[l(ge,{class:"mb-6"},{title:r(()=>[e(o(n(a)("zones.routes.create.title")),1)]),actions:r(()=>[l(n($),{appearance:"outline",to:{name:"zone-cp-list-view"}},{default:r(()=>[e(o(n(a)("zones.form.exit")),1)]),_:1})]),_:1}),e(),t("div",ke,[t("h1",null,o(n(a)("zones.routes.create.title")),1),e(),t("div",he,[t("div",null,[l(n(M),{for:"zone-name"},{default:r(()=>[e(o(n(a)("zones.form.nameLabel"))+` *
            `,1)]),_:1}),e(),l(n(R),{id:"zone-name",modelValue:c.value,"onUpdate:modelValue":i[0]||(i[0]=v=>c.value=v),type:"text",name:"zone-name","data-testid":"name-input",disabled:s.value!==null},null,8,["modelValue","disabled"])]),e(),l(n($),{appearance:"creation",icon:_.value?"spinner":"plus",disabled:!U.value||_.value||s.value!==null,"data-testid":"create-zone-button",onClick:A},{default:r(()=>[e(o(n(a)("zones.form.createZoneButtonLabel")),1)]),_:1},8,["icon","disabled"])]),e(),g.value!==null?(z(),I(ne,{key:0,class:"mt-4",error:g.value},{default:r(()=>[e(o(n(a)("zones.create.errorTitle")),1)]),_:1},8,["error"])):T("",!0),e(),s.value!==null?(z(),C("div",ye,[t("div",null,[t("span",Ce,o(n(a)("zones.form.environmentLabel"))+` *
            `,1),e(),t("div",Ee,[l(n(D),{id:"zone-environment-universal",modelValue:k.value,"onUpdate:modelValue":i[1]||(i[1]=v=>k.value=v),"selected-value":"universal",name:"zone-environment","data-testid":"environment-universal-radio-button"},{default:r(()=>[e(o(n(a)("zones.form.universalLabel")),1)]),_:1},8,["modelValue"]),e(),l(n(D),{id:"zone-environment-kubernetes",modelValue:k.value,"onUpdate:modelValue":i[2]||(i[2]=v=>k.value=v),"selected-value":"kubernetes",name:"zone-environment","data-testid":"environment-kubernetes-radio-button"},{default:r(()=>[e(o(n(a)("zones.form.kubernetesLabel")),1)]),_:1},8,["modelValue"])])]),e(),k.value==="kubernetes"?(z(),C(H,{key:0},[t("div",null,[t("span",Ie,o(n(a)("zones.form.zoneIngressLabel"))+` *
              `,1),e(),t("div",Ze,[l(n(L),{id:"zone-ingress-enabled",modelValue:w.value,"onUpdate:modelValue":i[3]||(i[3]=v=>w.value=v),"data-testid":"ingress-input-switch"},{label:r(()=>[e(o(n(a)("zones.form.zoneIngressEnabledLabel")),1)]),_:1},8,["modelValue"])])]),e(),t("div",null,[t("span",Ve,o(n(a)("zones.form.zoneEgressLabel"))+` *
              `,1),e(),t("div",we,[l(n(L),{id:"zone-egress-enabled",modelValue:S.value,"onUpdate:modelValue":i[4]||(i[4]=v=>S.value=v),"data-testid":"egress-input-switch"},{label:r(()=>[e(o(n(a)("zones.form.zoneEgressEnabledLabel")),1)]),_:1},8,["modelValue"])])])],64)):T("",!0),e(),t("h2",Se,o(n(a)("zones.form.connectZone")),1),e(),k.value==="universal"?(z(),I(pe,{key:1,"zone-name":c.value,token:E.value},null,8,["zone-name","token"])):(z(),I(ce,{key:2,"zone-name":c.value,"zone-ingress-enabled":w.value,"zone-egress-enabled":S.value,token:E.value,"base64-encoded-token":K.value},null,8,["zone-name","zone-ingress-enabled","zone-egress-enabled","token","base64-encoded-token"])),e(),l(te,{"loader-function":P,"has-error":h.value!==null,"can-complete":b.value},{"loading-title":r(()=>[e(o(n(a)("zones.form.scan.waitTitle")),1)]),"complete-title":r(()=>[e(o(n(a)("zones.form.scan.completeTitle")),1)]),"complete-content":r(()=>[t("p",null,o(n(a)("zones.form.scan.completeDescription",{name:c.value})),1),e(),t("p",$e,[l(n($),{appearance:"primary",to:{name:"zone-cp-detail-view",params:{zone:c.value}}},{default:r(()=>[e(o(n(a)("zones.form.scan.completeButtonLabel",{name:c.value})),1)]),_:1},8,["to"])])]),"error-title":r(()=>[t("h3",null,o(n(a)("zones.form.scan.errorTitle")),1)]),"error-content":r(()=>[t("p",null,o(n(a)("zones.form.scan.errorDescription")),1)]),_:1},8,["has-error","can-complete"])])):T("",!0)])]),_:1})]),_:1}))}});const Ue=V(Te,[["__scopeId","data-v-1754afd6"]]);export{Ue as default};
