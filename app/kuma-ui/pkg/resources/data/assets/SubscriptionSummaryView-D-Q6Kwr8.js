import{d as N,r as m,o as r,q as y,w as t,b as i,m as g,t as n,e,T as R,N as b,U as u,c,M as f,s as h,p as C,at as T,a as $,a1 as B}from"./index-DELdVnGm.js";const D={class:"stack-with-borders"},E={key:1,class:"mt-8 stack-with-borders"},M=N({__name:"SubscriptionSummaryView",props:{data:{},routeName:{}},setup(w){const _=w;return(S,a)=>{const I=m("XSelect"),k=m("XLayout"),v=m("XAlert"),x=m("XCodeBlock"),z=m("AppView"),V=m("DataCollection"),X=m("RouteView");return r(),y(X,{name:_.routeName,params:{subscription:"",codeSearch:"",codeFilter:!1,codeRegExp:!1,format:String}},{default:t(({route:d,t:l})=>[i(V,{items:_.data,predicate:s=>s.id===d.params.subscription},{item:t(({item:s})=>[i(z,null,{title:t(()=>[g("h2",null,n(s.zoneInstanceId??s.globalInstanceId??s.controlPlaneInstanceId),1)]),default:t(()=>[a[17]||(a[17]=e()),i(k,{type:"stack"},{default:t(()=>[g("header",null,[i(k,{type:"separated",justify:"end"},{default:t(()=>[i(I,{label:l("subscriptions.routes.item.format"),selected:d.params.format,onChange:o=>{d.update({format:o})}},R({_:2},[b(["structured","yaml"],o=>({name:`${o}-option`,fn:t(()=>[e(n(l(`subscriptions.routes.item.formats.${o}`)),1)])}))]),1032,["label","selected","onChange"])]),_:2},1024)]),a[16]||(a[16]=e()),d.params.format==="structured"?(r(),y(k,{key:0,type:"stack","data-testid":"structured-view"},{default:t(()=>[g("div",D,[i(u,{layout:"horizontal"},{title:t(()=>[e(n(l("http.api.property.version")),1)]),body:t(()=>{var o,p;return[(r(!0),c(f,null,b([(p=(o=s.version)==null?void 0:o.kumaCp)==null?void 0:p.version],A=>(r(),c(f,null,[e(n(A??"-"),1)],64))),256))]}),_:2},1024),a[6]||(a[6]=e()),i(u,{layout:"horizontal"},{title:t(()=>[e(n(l("http.api.property.connectTime")),1)]),body:t(()=>[e(n(l("common.formats.datetime",{value:Date.parse(s.connectTime??"")})),1)]),_:2},1024),a[7]||(a[7]=e()),s.disconnectTime?(r(),y(u,{key:0,layout:"horizontal"},{title:t(()=>[e(n(l("http.api.property.disconnectTime")),1)]),body:t(()=>[e(n(l("common.formats.datetime",{value:Date.parse(s.disconnectTime)})),1)]),_:2},1024)):h("",!0),a[8]||(a[8]=e()),i(u,{layout:"horizontal"},{title:t(()=>[e(n(l("subscriptions.routes.item.headers.responses")),1)]),body:t(()=>{var o;return[(r(!0),c(f,null,b([((o=s.status)==null?void 0:o.total)??{}],p=>(r(),c(f,null,[e(n(p.responsesSent)+"/"+n(p.responsesAcknowledged),1)],64))),256))]}),_:2},1024),a[9]||(a[9]=e()),(r(),c(f,null,b(["zoneInstanceId","globalInstanceId","controlPlaneInstanceId"],o=>(r(),c(f,{key:typeof o},[s[o]?(r(),y(u,{key:0,layout:"horizontal"},{title:t(()=>[e(n(l(`http.api.property.${o}`)),1)]),body:t(()=>[e(n(s[o]),1)]),_:2},1024)):h("",!0)],64))),64)),a[10]||(a[10]=e()),i(u,{layout:"horizontal"},{title:t(()=>[e(n(l("http.api.property.id")),1)]),body:t(()=>[e(n(s.id),1)]),_:2},1024)]),a[15]||(a[15]=e()),Object.keys(s.status.acknowledgements).length===0?(r(),y(v,{key:0,variant:"info"},{icon:t(()=>[i(C(T))]),default:t(()=>[e(" "+n(l("common.detail.subscriptions.no_stats",{id:s.id})),1)]),_:2},1024)):(r(),c("div",E,[g("div",null,[$(S.$slots,"default")]),a[13]||(a[13]=e()),i(u,{class:"mt-4",layout:"horizontal"},{title:t(()=>[g("strong",null,n(l("subscriptions.routes.item.headers.type")),1)]),body:t(()=>[e(n(l("subscriptions.routes.item.headers.stat")),1)]),_:2},1024),a[14]||(a[14]=e()),(r(!0),c(f,null,b(Object.entries(s.status.acknowledgements??{}),([o,p])=>(r(),y(u,{key:o,layout:"horizontal"},{title:t(()=>[e(n(l(`http.api.property.${o}`)),1)]),body:t(()=>[e(n(p.responsesSent)+"/"+n(p.responsesAcknowledged),1)]),_:2},1024))),128))]))]),_:2},1024)):(r(),y(x,{key:1,language:"yaml",code:C(B).stringify(s.$raw),"is-searchable":"",query:d.params.codeSearch,"is-filter-mode":d.params.codeFilter,"is-reg-exp-mode":d.params.codeRegExp,onQueryChange:o=>d.update({codeSearch:o}),onFilterModeChange:o=>d.update({codeFilter:o}),onRegExpModeChange:o=>d.update({codeRegExp:o})},null,8,["code","query","is-filter-mode","is-reg-exp-mode","onQueryChange","onFilterModeChange","onRegExpModeChange"]))]),_:2},1024)]),_:2},1024)]),_:2},1032,["items","predicate"])]),_:3},8,["name"])}}});export{M as default};
