import{d as x,r as z,o as l,e as I,h as s,g as c,p as V,m as A,q as i,a as d,w as e,F as N,s as B,b as o,n as L,G as K,M as q,f as F,N as M,t as h,V as R,D as P,v as U,H as G}from"./index-bb115be3.js";import{A as H}from"./AppCollection-57392b4b.js";import{f as D,g as W,r as j,o as y,E as J,p as O,q as Q,A as X,_ as Y}from"./RouteView.vue_vue_type_script_setup_true_lang-e50bfc04.js";import{_ as Z}from"./RouteTitle.vue_vue_type_script_setup_true_lang-c0548d11.js";const T=t=>(V("data-v-f8f48ec6"),t=t(),A(),t),ee=["href"],ae=T(()=>i("span",{class:"visually-hidden"},"Documentation",-1)),se=x({__name:"DocumentationLink",props:{href:{type:String,required:!0}},setup(t){const r=t;return(f,b)=>{const v=z("KIcon");return l(),I("a",{class:"docs-link",href:r.href,target:"_blank"},[s(v,{icon:"book",color:"currentColor",size:"16","hide-title":""}),c(),ae],8,ee)}}});const te=D(se,[["__scopeId","data-v-f8f48ec6"]]),oe=t=>(V("data-v-c15eb9de"),t=t(),A(),t),ne={class:"stack"},le=oe(()=>i("strong",null,"Warning",-1)),ce=["href"],ie=x({__name:"PolicyListView",props:{page:{},size:{}},setup(t){const r=t,{t:f}=W(),b=j();return(v,pe)=>{const S=z("RouterLink");return l(),d(Y,{name:"policies-list-view"},{default:e(({route:p})=>[s(y,{src:"/*/policy-types"},{default:e(({data:u,error:k})=>[k?(l(),d(J,{key:0,error:k},null,8,["error"])):u===void 0?(l(),d(O,{key:1})):u.policies.length===0?(l(),d(Q,{key:2})):(l(!0),I(N,{key:3},B([u.policies.find(n=>n.path===p.params.policyPath)??u.policies[0]],n=>(l(),d(y,{key:n.name,src:`/meshes/${p.params.mesh}/policy-path/${n.path}?page=${r.page}&size=${r.size}`},{default:e(({data:m,error:E})=>[s(X,null,{title:e(()=>[i("h2",null,[c(`
                  Policies: `),s(Z,{title:o(f)("policies.routes.items.title",{name:n.name}),render:!0},null,8,["title"])])]),default:e(()=>[c(),i("div",{class:L(["relative",n.name])},[s(o(K),null,{body:e(()=>[i("div",ne,[n.isExperimental?(l(),d(o(q),{key:0,appearance:"warning"},{alertMessage:e(()=>[i("p",null,[le,c(` This policy is experimental. If you encountered any problem please open an
                            `),i("a",{href:o(b)("KUMA_FEEDBACK_URL"),target:"_blank",rel:"noopener noreferrer"},"issue",8,ce)])]),_:1})):F("",!0),c(),s(y,{src:`/mesh-insights/${p.params.mesh}`},{default:e(({data:_})=>[s(H,{class:"policy-collection","data-testid":"policy-collection","empty-state-title":"No Data","empty-state-message":`There are no ${n.name} policies present.`,headers:[{label:"Name",key:"name"},{label:"Type",key:"type"},{label:"Actions",key:"actions",hideLabel:!0}],"page-number":r.page,"page-size":r.size,total:m==null?void 0:m.total,items:m==null?void 0:m.items,error:E,onChange:p.update},{toolbar:e(()=>[s(o(M),{label:"Policies",items:u.policies.map(a=>({label:a.name,value:a.path,selected:a.path===p.params.policyPath})),"label-attributes":{class:"visually-hidden"},appearance:"select","enable-filtering":!0,onSelected:a=>p.replace({name:"policies-list-view",params:{...p.params,policyPath:a.value}})},{"item-template":e(({item:a})=>{var g,w,$,C;return[i("span",{class:L({"policy-type-empty":!((w=(g=_==null?void 0:_.policies)==null?void 0:g[a.label])!=null&&w.total)})},h(a.label)+" ("+h(((C=($=_==null?void 0:_.policies)==null?void 0:$[a.label])==null?void 0:C.total)||"0")+`)
                                `,3)]}),_:2},1032,["items","onSelected"]),c(),s(te,{href:o(f)("policies.href.docs",{name:n.name}),"data-testid":"policy-documentation-link"},null,8,["href"])]),name:e(({row:a})=>[s(S,{to:{name:"policy-detail-view",params:{policy:a.name}}},{default:e(()=>[c(h(a.name),1)]),_:2},1032,["to"])]),type:e(({row:a})=>[c(h(a.type),1)]),actions:e(({row:a})=>[s(o(R),{class:"actions-dropdown","kpop-attributes":{placement:"bottomEnd",popoverClasses:"mt-5 more-actions-popover"},width:"150"},{default:e(()=>[s(o(P),{class:"non-visual-button",appearance:"secondary",size:"small"},{icon:e(()=>[s(o(U),{color:"var(--black-400)",icon:"more",size:"16"})]),_:1})]),items:e(()=>[s(o(G),{item:{to:{name:"policy-detail-view",params:{policy:a.name}},label:o(f)("common.collection.actions.view")}},null,8,["item"])]),_:2},1024)]),_:2},1032,["empty-state-message","page-number","page-size","total","items","error","onChange"])]),_:2},1032,["src"])])]),_:2},1024)],2)]),_:2},1024)]),_:2},1032,["src"]))),128))]),_:2},1024)]),_:1})}}});const ue=D(ie,[["__scopeId","data-v-c15eb9de"]]);export{ue as default};
