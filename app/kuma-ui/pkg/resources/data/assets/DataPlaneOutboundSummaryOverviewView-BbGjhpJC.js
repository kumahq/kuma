import{d as E,r as l,p as u,o as n,w as o,b as a,e as r,q as L,l as e,t as f,m as _,F as N,c as s,N as d,L as w,Y as I}from"./index-B1u78Utu.js";import{A as M,a as G}from"./AccordionList-C5XbAray.js";import{P as H}from"./PolicyTypeTag-Ci_OyG1w.js";import{K as J}from"./kri-CjUta6FR.js";const Q={colspan:"2"},h=E({__name:"DataPlaneOutboundSummaryOverviewView",props:{data:{},routeName:{}},setup(P){const p=P;return(U,t)=>{const x=l("XBadge"),g=l("XTable"),S=l("XAction"),O=l("XCodeBlock"),X=l("XLayout"),$=l("XCard"),z=l("DataLoader"),v=l("DataSource"),F=l("AppView"),K=l("RouteView");return n(),u(K,{params:{mesh:"",proxy:"",connection:""},name:p.routeName},{default:o(({t:R,route:B,uri:C})=>[a(F,null,{default:o(()=>[a(X,{type:"stack"},{default:o(()=>[a(g,{variant:"kv"},{default:o(()=>[e("tr",null,[t[0]||(t[0]=e("th",{scope:"row"},`
              Protocol
            `,-1)),t[1]||(t[1]=r()),e("td",null,[a(x,{appearance:"info"},{default:o(()=>[r(f(R(`http.api.value.${p.data.protocol}`)),1)]),_:2},1024)])]),t[4]||(t[4]=r()),e("tr",null,[t[2]||(t[2]=e("th",{scope:"row"},`
              Port
            `,-1)),t[3]||(t[3]=r()),e("td",null,f(p.data.port),1)])]),_:2},1024),t[13]||(t[13]=r()),p.data?(n(),u(X,{key:0,type:"stack",size:"small"},{default:o(()=>[t[11]||(t[11]=e("h3",null,"Policies",-1)),t[12]||(t[12]=r()),a(v,{src:C(_(N),"/policy-types",{})},{default:o(({data:c,error:Y})=>[a(v,{src:C(_(N),"/meshes/:mesh/dataplanes/:name/policies/for/outbound/:kri",{mesh:B.params.mesh,name:B.params.proxy,kri:p.data.kri})},{default:o(({data:k,error:j})=>[a(z,{data:[c,k],errors:[Y,j]},{default:o(()=>[(n(!0),s(d,null,w([Object.groupBy((c==null?void 0:c.policyTypes)??[],({name:m})=>m)],m=>(n(),u(M,{key:`${typeof m}`,"initially-open":0,"multiple-open":"",class:"stack","data-testid":"outbound-policies-rules"},{default:o(()=>[(n(!0),s(d,null,w((k==null?void 0:k.policies)||[],({conf:q,kind:i,origins:V})=>(n(),u($,{key:i},{default:o(()=>[a(G,null,{"accordion-header":o(()=>[a(H,{"policy-type":i},{default:o(()=>[r(f(i),1)]),_:2},1032,["policy-type"])]),"accordion-content":o(()=>[V.length>0?(n(),u(g,{key:0,variant:"kv"},{default:o(()=>[e("tr",null,[t[5]||(t[5]=e("th",{scope:"row"},`
                                  Origin policies
                                `,-1)),t[6]||(t[6]=r()),e("td",null,[e("ul",null,[(n(!0),s(d,null,w(V,y=>(n(),s("li",{key:y.kri},[(n(!0),s(d,null,w([_(J).fromString(y.kri)],({mesh:b,name:A})=>(n(),s(d,{key:`${b}-${A}`},[m[i]?(n(),u(S,{key:0,to:{name:"policy-detail-view",params:{mesh:b,policyPath:m[i][0].path,policy:A}}},{default:o(()=>[r(f(y.kri),1)]),_:2},1032,["to"])):(n(),s(d,{key:1},[r(f(y.kri),1)],64))],64))),128))]))),128))])])]),t[9]||(t[9]=r()),e("tr",null,[e("td",Q,[a(X,{type:"stack",size:"small"},{default:o(()=>[t[7]||(t[7]=e("span",null,"Config",-1)),t[8]||(t[8]=r()),a(O,{code:_(I).stringify(q),language:"yaml","show-copy-button":!1},null,8,["code"])]),_:2},1024)])])]),_:2},1024)):L("",!0)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024))),128))]),_:2},1032,["data","errors"])]),_:2},1032,["src"])]),_:2},1032,["src"])]),_:2},1024)):L("",!0)]),_:2},1024)]),_:2},1024)]),_:1},8,["name"])}}});export{h as default};
