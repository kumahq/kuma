import{d as K,W as M,M as I,o as c,m as h,w as l,c as _,t as o,p as w,X as me,E as pe,H as _e,I as fe,k as e,Y as be,j as x,D as G,e as t,l as s,b as a,v as $,r as p,Z as q,F as E,G as O,$ as F,a0 as he,a1 as H,a2 as W,a3 as j,a4 as ve,z as ge,P as ke,q as ze}from"./index-D7Wwvihu.js";import{c as ye}from"./kong-icons.es282-DUyITwIR.js";import{C}from"./CodeBlock-CQ0ZNdrm.js";const Ce=u=>(_e("data-v-6921da37"),u=u(),fe(),u),Se=["aria-hidden"],we={key:0,"data-testid":"kui-icon-svg-title"},Ee=Ce(()=>e("path",{d:"M10.6 16.6L17.65 9.55L16.25 8.15L10.6 13.8L7.75 10.95L6.35 12.35L10.6 16.6ZM12 22C10.6167 22 9.31667 21.7375 8.1 21.2125C6.88333 20.6875 5.825 19.975 4.925 19.075C4.025 18.175 3.3125 17.1167 2.7875 15.9C2.2625 14.6833 2 13.3833 2 12C2 10.6167 2.2625 9.31667 2.7875 8.1C3.3125 6.88333 4.025 5.825 4.925 4.925C5.825 4.025 6.88333 3.3125 8.1 2.7875C9.31667 2.2625 10.6167 2 12 2C13.3833 2 14.6833 2.2625 15.9 2.7875C17.1167 3.3125 18.175 4.025 19.075 4.925C19.975 5.825 20.6875 6.88333 21.2125 8.1C21.7375 9.31667 22 10.6167 22 12C22 13.3833 21.7375 14.6833 21.2125 15.9C20.6875 17.1167 19.975 18.175 19.075 19.075C18.175 19.975 17.1167 20.6875 15.9 21.2125C14.6833 21.7375 13.3833 22 12 22Z",fill:"currentColor"},null,-1)),Ie=K({__name:"CheckCircleIcon",props:{title:{type:String,required:!1,default:""},color:{type:String,required:!1,default:"currentColor"},display:{type:String,required:!1,default:"block"},decorative:{type:Boolean,required:!1,default:!1},size:{type:[Number,String],required:!1,default:M,validator:u=>{if(typeof u=="number"&&u>0)return!0;if(typeof u=="string"){const n=String(u).replace(/px/gi,""),i=Number(n);if(i&&!isNaN(i)&&Number.isInteger(i)&&i>0)return!0}return!1}},as:{type:String,required:!1,default:"span"}},setup(u){const n=u,i=I(()=>{if(typeof n.size=="number"&&n.size>0)return`${n.size}px`;if(typeof n.size=="string"){const k=String(n.size).replace(/px/gi,""),f=Number(k);if(f&&!isNaN(f)&&Number.isInteger(f)&&f>0)return`${f}px`}return M}),m=I(()=>({boxSizing:"border-box",color:n.color,display:n.display,flexShrink:"0",height:i.value,lineHeight:"0",width:i.value}));return(k,f)=>(c(),h(pe(u.as),{"aria-hidden":u.decorative?"true":void 0,class:"kui-icon check-circle-icon","data-testid":"kui-icon-wrapper-check-circle-icon",style:me(m.value)},{default:l(()=>[(c(),_("svg",{"aria-hidden":u.decorative?"true":void 0,"data-testid":"kui-icon-svg-check-circle-icon",fill:"none",height:"100%",role:"img",viewBox:"0 0 24 24",width:"100%",xmlns:"http://www.w3.org/2000/svg"},[u.title?(c(),_("title",we,o(u.title),1)):w("",!0),Ee],8,Se))]),_:1},8,["aria-hidden","style"]))}}),$e=be(Ie,[["__scopeId","data-v-6921da37"]]),Le={class:"form-step-title"},qe=e("span",{class:"form-step-number"},"1",-1),Ke={class:"instruction-list"},Ve={href:"https://helm.sh/docs/intro/install/"},Ne={class:"form-step-title"},Te=e("span",{class:"form-step-number"},"2",-1),xe=e("p",null,"On your local machine, create a namespace in your Kubernetes cluster and pull down the kong Helm repo.",-1),De={class:"instruction-list"},Ze={class:"form-step-title"},Ae=e("span",{class:"form-step-number"},"3",-1),Be={class:"form-step-title"},Xe=e("span",{class:"form-step-number"},"4",-1),Pe={class:"field-group-label mt-4"},Re={class:"mt-4"},Ue=K({__name:"ZoneCreateKubernetesInstructions",props:{zoneName:{type:String,required:!0},globalKdsAddress:{type:String,required:!0},zoneIngressEnabled:{type:Boolean,required:!0},zoneEgressEnabled:{type:Boolean,required:!0},token:{type:String,required:!0},base64EncodedToken:{type:String,required:!0}},setup(u){const{t:n}=x(),i=G(),m=u,k=I(()=>n("zones-crud.form.kubernetes.secret.createSecretCommand",{token:m.base64EncodedToken}).trim()),f=I(()=>{const S={zoneName:m.zoneName,globalKdsAddress:m.globalKdsAddress,zoneIngressEnabled:String(m.zoneIngressEnabled),zoneEgressEnabled:String(m.zoneEgressEnabled),controlPlaneId:typeof i.params.virtualControlPlaneId=="string"?i.params.virtualControlPlaneId:""};return n("zones-crud.form.kubernetes.connectZone.config",S).trim()});return(S,V)=>(c(),_("div",null,[e("h3",Le,[qe,t(" "+o(s(n)("zones-crud.form.kubernetes.prerequisites.title")),1)]),t(),e("ul",Ke,[e("li",null,[e("b",null,o(s(n)("zones-crud.form.kubernetes.prerequisites.step1Label"))+o(m.zoneIngressEnabled?" "+s(n)("zones-crud.form.kubernetes.prerequisites.step1LabelAddendum"):""),1),t(`:
        `+o(s(n)("zones-crud.form.kubernetes.prerequisites.step1Description",{productName:s(n)("common.product.name")})),1)]),t(),e("li",null,[e("b",null,o(s(n)("zones-crud.form.kubernetes.prerequisites.step2Label")),1),t(`:
        `+o(s(n)("zones-crud.form.kubernetes.prerequisites.step2Description")),1)]),t(),e("li",null,[e("a",Ve,o(s(n)("zones-crud.form.kubernetes.prerequisites.step3LinkTitle")),1),t(" "+o(s(n)("zones-crud.form.kubernetes.prerequisites.step3Tail")),1)])]),t(),e("h3",Ne,[Te,t(" "+o(s(n)("zones-crud.form.kubernetes.helm.title")),1)]),t(),xe,t(),e("ol",De,[e("li",null,[e("b",null,o(s(n)("zones-crud.form.kubernetes.helm.step1Description")),1),t(),a(C,{class:"mt-2",code:s(n)("zones-crud.form.kubernetes.helm.step1Command"),language:"bash"},null,8,["code"])]),t(),e("li",null,[e("b",null,o(s(n)("zones-crud.form.kubernetes.helm.step2Description")),1),t(),a(C,{class:"mt-2",code:s(n)("zones-crud.form.kubernetes.helm.step2Command"),language:"bash"},null,8,["code"])]),t(),e("li",null,[e("b",null,o(s(n)("zones-crud.form.kubernetes.helm.step3Description")),1),t(),a(C,{class:"mt-2",code:s(n)("zones-crud.form.kubernetes.helm.step3Command"),language:"bash"},null,8,["code"])])]),t(),e("h3",Ze,[Ae,t(" "+o(s(n)("zones-crud.form.kubernetes.secret.title")),1)]),t(),e("p",null,o(s(n)("zones-crud.form.kubernetes.secret.createSecretDescription")),1),t(),a(C,{class:"mt-4",code:k.value,language:"bash"},null,8,["code"]),t(),e("h3",Be,[Xe,t(" "+o(s(n)("zones-crud.form.kubernetes.connectZone.title")),1)]),t(),e("p",null,o(s(n)("zones-crud.form.kubernetes.connectZone.configDescription")),1),t(),e("span",Pe,o(s(n)("zones-crud.form.kubernetes.connectZone.configFileName")),1),t(),a(C,{"data-testid":"zone-kubernetes-config",code:f.value,language:"yaml"},null,8,["code"]),t(),e("p",Re,o(s(n)("zones-crud.form.kubernetes.connectZone.connectDescription")),1),t(),a(C,{class:"mt-4",code:s(n)("zones-crud.form.kubernetes.connectZone.connectCommand").trim(),language:"bash"},null,8,["code"])]))}}),Me={class:"form-step-title"},Oe=e("span",{class:"form-step-number"},"1",-1),Fe={class:"form-step-title"},He=e("span",{class:"form-step-number"},"2",-1),We={class:"field-group-label mt-4"},je={class:"mt-4"},Ge=K({__name:"ZoneCreateUniversalInstructions",props:{zoneName:{type:String,required:!0},globalKdsAddress:{type:String,required:!0},token:{type:String,required:!0}},setup(u){const{t:n}=x(),i=G(),m=u,k=I(()=>n("zones-crud.form.universal.saveToken.saveTokenCommand",{token:m.token}).trim()),f=I(()=>{const S={zoneName:m.zoneName,globalKdsAddress:m.globalKdsAddress,controlPlaneId:typeof i.params.virtualControlPlaneId=="string"?i.params.virtualControlPlaneId:""};return n("zones-crud.form.universal.connectZone.config",S).trim()});return(S,V)=>(c(),_("div",null,[e("h3",Me,[Oe,t(" "+o(s(n)("zones-crud.form.universal.saveToken.title")),1)]),t(),e("p",null,o(s(n)("zones-crud.form.universal.saveToken.saveTokenDescription")),1),t(),a(C,{class:"mt-4",code:k.value,language:"bash"},null,8,["code"]),t(),e("h3",Fe,[He,t(" "+o(s(n)("zones-crud.form.universal.connectZone.title")),1)]),t(),e("p",null,o(s(n)("zones-crud.form.universal.connectZone.configDescription")),1),t(),e("span",We,o(s(n)("zones-crud.form.universal.connectZone.configFileName")),1),t(),a(C,{"data-testid":"zone-universal-config",class:"mt-4",code:f.value,language:"yaml"},null,8,["code"]),t(),e("p",je,o(s(n)("zones-crud.form.universal.connectZone.connectDescription")),1),t(),a(C,{class:"mt-4",code:s(n)("zones-crud.form.universal.connectZone.connectCommand").trim(),language:"bash"},null,8,["code"])]))}}),Ye={class:"form-wrapper"},Je={key:1},Qe={key:2},et={class:"form"},tt={class:"form-header"},ot={class:"form-title"},nt={class:"text-gradient"},st={key:0},rt={key:0},at={class:"fact-list"},lt={class:"form-section"},ct={class:"form-section__header"},it={class:"form-section-title"},dt=["onSubmit"],ut=["disabled"],mt={class:"form-section","data-testid":"connect-zone-instructions"},pt={class:"form-section__header"},_t={class:"form-section-title"},ft={class:"form-section__content"},bt={class:"field-group-list"},ht={class:"field-group"},vt={class:"field-group-label"},gt={class:"radio-button-group"},kt={class:"field-group"},zt={class:"field-group-label"},yt={class:"radio-button-group","data-testid":"ingress-input-switch"},Ct={class:"field-group"},St={class:"field-group-label"},wt={class:"radio-button-group","data-testid":"egress-input-switch"},Et={class:"form-section"},It={class:"form-section__header"},$t={class:"form-section-title"},Lt={class:"form-section__content"},qt={class:"form-section"},Kt={class:"form-section__header"},Vt={class:"form-section-title"},Nt={class:"form-section__content"},Tt={class:"mt-2"},xt=K({__name:"ZoneCreateView",setup(u){const{tm:n}=x(),i=$(""),m=$("kubernetes"),k=$(!0),f=$(!0),S=$(!1);function V(){S.value=!0}return(Dt,z)=>{const Y=p("RouteTitle"),L=p("XAction"),J=p("KModal"),Q=p("XTeleportTemplate"),D=p("XDisclosure"),ee=p("KAlert"),te=p("KLabel"),oe=p("XInput"),N=p("DataSource"),Z=p("KRadio"),A=p("KInputSwitch"),ne=p("KEmptyState"),se=p("KCard"),re=p("AppView"),ae=p("DataSink"),le=p("RouteView");return c(),h(le,{name:"zone-create-view",attrs:{class:"is-fullscreen"}},{default:l(({route:B,id:X,uri:T,t:r})=>[a(ae,{src:"/zone-cps/~/create"},{default:l(({submit:ce,payload:ie,data:b,error:v,writing:de})=>[a(re,{fullscreen:!0,breadcrumbs:[]},{title:l(()=>[e("h1",null,[a(Y,{title:r("zones-crud.routes.create.title")},null,8,["title"])])]),actions:l(()=>[a(D,null,{default:l(({expanded:d,toggle:g})=>[a(L,{appearance:"tertiary","data-testid":"exit-button",onClick:()=>{!(b!=null&&b.token)||S.value?B.back({name:"zone-cp-list-view"}):g()}},{default:l(()=>[t(o(r("zones-crud.form.exit")),1)]),_:2},1032,["onClick"]),t(),a(Q,{to:{name:"modal-layer"}},{default:l(()=>[a(J,{visible:d,title:r("zones-crud.form.confirm_modal.title"),"data-testid":"confirm-exit-modal",onCancel:g,onProceed:P=>B.replace({name:"zone-cp-list-view"})},{"footer-actions":l(()=>[a(L,{appearance:"primary",to:{name:"zone-cp-list-view"},"data-testid":"confirm-exit-button"},{default:l(()=>[t(o(r("zones-crud.form.confirm_modal.action_button")),1)]),_:2},1024)]),default:l(()=>[t(o(r("zones-crud.form.confirm_modal.body"))+" ",1)]),_:2},1032,["visible","title","onCancel","onProceed"])]),_:2},1024)]),_:2},1024)]),default:l(()=>[t(),t(),e("div",Ye,[v&&v instanceof s(q)&&v.status!==0?(c(),h(ee,{key:0,appearance:"danger",class:"mb-4","data-testid":"create-zone-error"},{default:l(()=>[v instanceof s(q)&&[409,500].includes(v.status)?(c(),_(E,{key:0},[e("p",null,o(r(`zones-crud.create.status_error.${v.status}.title`,{name:ie.name})),1),t(),e("p",null,o(r(`zones-crud.create.status_error.${v.status}.description`)),1)],64)):v instanceof s(q)?(c(),_("p",Je,o(r("common.error_state.api_error",{status:v.status,title:v.detail})),1)):(c(),_("p",Qe,o(r("common.error_state.default_error")),1))]),_:2},1024)):w("",!0),t(),a(se,{class:"form-card"},{default:l(()=>[e("div",et,[e("div",tt,[e("div",null,[e("h1",ot,[e("span",nt,o(r("zones-crud.form.title")),1)]),t(),r("zones-crud.form.description")!==" "?(c(),_("p",st,o(r("zones-crud.form.description")),1)):w("",!0)]),t(),s(n)("zones-crud.form.facts").length>0?(c(),_("div",rt,[e("ul",at,[(c(!0),_(E,null,O(s(n)("zones-crud.form.facts"),(d,g)=>(c(),_("li",{key:g,class:"fact-list__item"},[a(s(ye),{class:"fact-list__icon",color:s(F)},null,8,["color"]),t(" "+o(d),1)]))),128))])])):w("",!0)]),t(),e("div",lt,[e("div",ct,[e("h2",it,o(r("zones-crud.form.section.name.title")),1),t(),e("p",null,o(r("zones-crud.form.section.name.description")),1)]),t(),e("form",{class:"form-section__content",onSubmit:he(()=>ce({name:i.value}),["prevent"])},[e("fieldset",{disabled:b==null?void 0:b.token},[e("div",null,[a(te,{for:X,required:"","tooltip-attributes":{placement:"right"}},{tooltip:l(()=>[t(o(r("zones-crud.form.name_tooltip")),1)]),default:l(()=>[t(o(r("zones-crud.form.nameLabel"))+" ",1)]),_:2},1032,["for"]),t(),a(D,null,{default:l(({expanded:d,toggle:g})=>[a(N,{src:d?T(s(H),"/zone-cps/:name/validate",{name:i.value}):"",onChange:g,onError:g},{default:l(({error:P})=>{var R,U;return[(c(!0),_(E,null,O([((U=(R=[P,v].find(y=>y instanceof s(q)))==null?void 0:R.invalidParameters)==null?void 0:U.find(y=>y.field==="name"))??void 0],y=>(c(),h(oe,{key:y,id:X,modelValue:i.value,"onUpdate:modelValue":z[0]||(z[0]=ue=>i.value=ue),type:"text",name:"zone-name","data-testid":"name-input","data-test-error-type":y?"invalid-dns-name":void 0,error:typeof y<"u","error-message":(y==null?void 0:y.reason)??void 0,onBlur:()=>{i.value.length>0&&g()}},null,8,["id","modelValue","data-test-error-type","error","error-message","onBlur"]))),128))]}),_:2},1032,["src","onChange","onError"])]),_:2},1024)]),t(),a(L,{appearance:"primary",class:"mt-4","data-testid":"create-zone-button",disabled:i.value.length===0,type:"submit"},{default:l(()=>[de?(c(),h(s(W),{key:0,color:s(j)},null,8,["color"])):(c(),h(s(ve),{key:1})),t(" "+o(r("zones-crud.form.createZoneButtonLabel")),1)]),_:2},1032,["disabled"])],8,ut)],40,dt)]),t(),b!=null&&b.token?(c(),_(E,{key:0},[e("div",mt,[e("div",pt,[e("h2",_t,o(r("zones-crud.form.section.configuration.title")),1),t(),e("p",null,o(r("zones-crud.form.section.configuration.description")),1)]),t(),e("div",ft,[e("div",bt,[e("div",ht,[e("span",vt,o(r("zones-crud.form.environmentLabel"))+` *
                        `,1),t(),e("div",gt,[a(Z,{modelValue:m.value,"onUpdate:modelValue":z[1]||(z[1]=d=>m.value=d),"selected-value":"universal",name:"zone-environment","data-testid":"environment-universal-radio-button"},{default:l(()=>[t(o(r("zones-crud.form.universalLabel")),1)]),_:2},1032,["modelValue"]),t(),a(Z,{modelValue:m.value,"onUpdate:modelValue":z[2]||(z[2]=d=>m.value=d),"selected-value":"kubernetes",name:"zone-environment","data-testid":"environment-kubernetes-radio-button"},{default:l(()=>[t(o(r("zones-crud.form.kubernetesLabel")),1)]),_:2},1032,["modelValue"])])]),t(),m.value==="kubernetes"?(c(),_(E,{key:0},[e("div",kt,[e("span",zt,o(r("zones-crud.form.zoneIngressLabel"))+` *
                          `,1),t(),e("div",yt,[a(A,{modelValue:k.value,"onUpdate:modelValue":z[3]||(z[3]=d=>k.value=d)},{label:l(()=>[t(o(r("zones-crud.form.zoneIngressEnabledLabel")),1)]),_:2},1032,["modelValue"])])]),t(),e("div",Ct,[e("span",St,o(r("zones-crud.form.zoneEgressLabel"))+` *
                          `,1),t(),e("div",wt,[a(A,{modelValue:f.value,"onUpdate:modelValue":z[4]||(z[4]=d=>f.value=d)},{label:l(()=>[t(o(r("zones-crud.form.zoneEgressEnabledLabel")),1)]),_:2},1032,["modelValue"])])])],64)):w("",!0)])])]),t(),e("div",Et,[e("div",It,[e("h2",$t,o(r("zones-crud.form.section.connect_zone.title")),1),t(),e("p",null,o(r("zones-crud.form.section.connect_zone.description")),1)]),t(),e("div",Lt,[a(N,{src:T(s(ge),"/control-plane/addresses",{})},{default:l(({data:d})=>[typeof d<"u"?(c(),_(E,{key:0},[m.value==="universal"?(c(),h(Ge,{key:0,"zone-name":i.value,token:b.token,"global-kds-address":d.kds},null,8,["zone-name","token","global-kds-address"])):(c(),h(Ue,{key:1,"zone-name":i.value,"zone-ingress-enabled":k.value,"zone-egress-enabled":f.value,token:b.token,"base64-encoded-token":b.base64,"global-kds-address":d.kds},null,8,["zone-name","zone-ingress-enabled","zone-egress-enabled","token","base64-encoded-token","global-kds-address"]))],64)):w("",!0)]),_:2},1032,["src"])])]),t(),e("div",qt,[a(N,{src:T(s(H),"/zone-cps/online/:name",{name:i.value},{cacheControl:"no-cache"}),onChange:V},{default:l(({data:d,error:g})=>[e("div",Kt,[e("h2",Vt,o(r("zones-crud.form.section.scanner.title")),1),t(),e("p",null,o(r("zones-crud.form.section.scanner.description")),1)]),t(),e("div",Nt,[g?(c(),h(ke,{key:0,error:g,appearance:"danger","data-testid":"error"},null,8,["error"])):(c(),h(ne,{key:1},{icon:l(()=>[d===void 0?(c(),h(s(W),{key:0,"data-testid":"waiting",color:s(j)},null,8,["color"])):(c(),h(s($e),{key:1,"data-testid":"connected",color:s(F)},null,8,["color"]))]),title:l(()=>[t(o(r(d===void 0?"zones-crud.form.scan.waitTitle":"zones-crud.form.scan.completeTitle")),1)]),default:l(()=>[t(),t(),typeof d<"u"?(c(),_(E,{key:0},[e("p",null,o(r("zones-crud.form.scan.completeDescription",{name:i.value})),1),t(),e("p",Tt,[a(L,{appearance:"primary",to:{name:"zone-cp-detail-view",params:{zone:i.value}}},{default:l(()=>[t(o(r("zones-crud.form.scan.completeButtonLabel",{name:i.value})),1)]),_:2},1032,["to"])])],64)):w("",!0)]),_:2},1024))])]),_:2},1032,["src"])])],64)):w("",!0)])]),_:2},1024)])]),_:2},1024)]),_:2},1024)]),_:1})}}}),Xt=ze(xt,[["__scopeId","data-v-4b4c0ee2"]]);export{Xt as default};
