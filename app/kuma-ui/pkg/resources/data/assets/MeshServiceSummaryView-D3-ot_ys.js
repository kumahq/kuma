import{d as T,e as l,o as p,m as u,w as t,a as s,k as c,b as o,P as g,t as i,p as y,c as z,H as b,J as h}from"./index-B_icS-nL.js";import{_ as A}from"./ResourceCodeBlock.vue_vue_type_script_setup_true_lang-BVH5s-Sl.js";const M={class:"stack"},N={class:"stack-with-borders"},$={class:"mt-4"},Q=T({__name:"MeshServiceSummaryView",props:{items:{}},setup(k){const w=k;return(K,e)=>{const S=l("RouteTitle"),f=l("XAction"),_=l("XBadge"),P=l("KumaPort"),v=l("KTruncate"),R=l("DataSource"),V=l("AppView"),E=l("DataCollection"),D=l("RouteView");return p(),u(D,{name:"mesh-service-summary-view",params:{mesh:"",service:"",codeSearch:"",codeFilter:!1,codeRegExp:!1}},{default:t(({route:r,t:x,can:B})=>[s(E,{items:w.items,predicate:n=>n.id===r.params.service},{item:t(({item:n})=>[s(V,null,{title:t(()=>[c("h2",null,[s(f,{to:{name:"mesh-service-detail-view",params:{mesh:r.params.mesh,service:r.params.service}}},{default:t(()=>[s(S,{title:x("services.routes.item.title",{name:n.name})},null,8,["title"])]),_:2},1032,["to"])])]),default:t(()=>[e[19]||(e[19]=o()),c("div",M,[c("div",N,[s(g,{layout:"horizontal"},{title:t(()=>e[0]||(e[0]=[o(`
                  State
                `)])),body:t(()=>[s(_,{appearance:n.spec.state==="Available"?"success":"danger"},{default:t(()=>[o(i(n.spec.state),1)]),_:2},1032,["appearance"])]),_:2},1024),e[12]||(e[12]=o()),s(g,{layout:"horizontal"},{title:t(()=>e[2]||(e[2]=[o(`
                  Dataplane Proxies
                `)])),body:t(()=>{var a,d,m;return[o(i((a=n.status.dataplaneProxies)==null?void 0:a.connected)+" connected, "+i((d=n.status.dataplaneProxies)==null?void 0:d.healthy)+" healthy ("+i((m=n.status.dataplaneProxies)==null?void 0:m.total)+` total)
                `,1)]}),_:2},1024),e[13]||(e[13]=o()),n.namespace?(p(),u(g,{key:0,layout:"horizontal"},{title:t(()=>e[4]||(e[4]=[o(`
                  Namespace
                `)])),body:t(()=>[o(i(n.namespace),1)]),_:2},1024)):y("",!0),e[14]||(e[14]=o()),B("use zones")&&n.zone?(p(),u(g,{key:1,layout:"horizontal"},{title:t(()=>e[6]||(e[6]=[o(`
                  Zone
                `)])),body:t(()=>[s(f,{to:{name:"zone-cp-detail-view",params:{zone:n.zone}}},{default:t(()=>[o(i(n.zone),1)]),_:2},1032,["to"])]),_:2},1024)):y("",!0),e[15]||(e[15]=o()),s(g,{layout:"horizontal"},{title:t(()=>e[8]||(e[8]=[o(`
                  Ports
                `)])),body:t(()=>[s(v,null,{default:t(()=>[(p(!0),z(b,null,h(n.spec.ports,a=>(p(),u(P,{key:a.port,port:{...a,targetPort:void 0}},null,8,["port"]))),128))]),_:2},1024)]),_:2},1024),e[16]||(e[16]=o()),s(g,{layout:"horizontal"},{title:t(()=>e[10]||(e[10]=[o(`
                  Selector
                `)])),body:t(()=>[s(v,null,{default:t(()=>[(p(!0),z(b,null,h(n.spec.selector.dataplaneTags,(a,d)=>(p(),u(_,{key:`${d}:${a}`,appearance:"info"},{default:t(()=>[o(i(d)+":"+i(a),1)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)]),e[18]||(e[18]=o()),c("div",null,[c("h3",null,i(x("services.routes.item.config")),1),e[17]||(e[17]=o()),c("div",$,[s(A,{resource:n.config,"is-searchable":"",query:r.params.codeSearch,"is-filter-mode":r.params.codeFilter,"is-reg-exp-mode":r.params.codeRegExp,onQueryChange:a=>r.update({codeSearch:a}),onFilterModeChange:a=>r.update({codeFilter:a}),onRegExpModeChange:a=>r.update({codeRegExp:a})},{default:t(({copy:a,copying:d})=>[d?(p(),u(R,{key:0,src:`/meshes/${r.params.mesh}/mesh-service/${r.params.service}/as/kubernetes?no-store`,onChange:m=>{a(C=>C(m))},onError:m=>{a((C,F)=>F(m))}},null,8,["src","onChange","onError"])):y("",!0)]),_:2},1032,["resource","query","is-filter-mode","is-reg-exp-mode","onQueryChange","onFilterModeChange","onRegExpModeChange"])])])])]),_:2},1024)]),_:2},1032,["items","predicate"])]),_:1})}}});export{Q as default};
