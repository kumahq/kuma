import{d as $,l as g,m as S,a as i,o as a,c as p,e as t,q as f,ax as B,f as c,w as s,b as l,F as q,B as R,t as C,ar as L,u as N,p as P}from"./index-bcf3f82a.js";import{_ as T}from"./EmptyBlock.vue_vue_type_script_setup_true_lang-35263b01.js";import{E as V}from"./ErrorBlock-bc5e59d2.js";import{_ as b}from"./LoadingBlock.vue_vue_type_script_setup_true_lang-faafe540.js";import{_ as A}from"./ResourceCodeBlock.vue_vue_type_style_index_0_lang-e9c70f2b.js";import{T as E}from"./TextWithCopyButton-cd7f0f1c.js";import"./index-52545d1d.js";import"./WarningIcon.vue_vue_type_script_setup_true_lang-ac709ad7.js";import"./CodeBlock.vue_vue_type_style_index_0_lang-f49c3327.js";import"./CopyButton-f450bfaf.js";import"./toYaml-4e00099e.js";const K={key:3,"data-testid":"affected-data-plane-proxies"},D=$({__name:"PolicyConnections",props:{mesh:{type:String,required:!0},policyPath:{type:String,required:!0},policyName:{type:String,required:!0}},setup(k){const{t:h}=g(),m=k,n=S("");return(w,d)=>{const _=i("RouterLink");return a(),p("div",null,[t(f(B),{id:"dataplane-search",modelValue:n.value,"onUpdate:modelValue":d[0]||(d[0]=o=>n.value=o),type:"text",placeholder:f(h)("policies.detail.dataplane_input_placeholder"),required:"","data-testid":"dataplane-search-input"},null,8,["modelValue","placeholder"]),c(),t(L,{src:`/meshes/${m.mesh}/policy-path/${m.policyPath}/policy/${m.policyName}/dataplanes`},{default:s(({data:o,error:u})=>[u?(a(),l(V,{key:0,error:u},null,8,["error"])):o===void 0?(a(),l(b,{key:1})):o.items.length===0?(a(),l(T,{key:2})):(a(),p("ul",K,[(a(!0),p(q,null,R(o.items.filter(e=>e.name.toLowerCase().includes(n.value.toLowerCase())),(e,r)=>(a(),p("li",{key:r,"data-testid":"dataplane-name"},[t(_,{to:{name:"data-plane-detail-view",params:{mesh:e.mesh,dataPlane:e.name}}},{default:s(()=>[c(C(e.name),1)]),_:2},1032,["to"])]))),128))]))]),_:1},8,["src"])])}}}),F={key:2,class:"stack","data-testid":"detail-view-details"},X=$({__name:"PolicyDetailView",setup(k){const h=N();return(m,n)=>{const w=i("RouteTitle"),d=i("KCard"),_=i("DataSource"),o=i("AppView"),u=i("RouteView");return a(),l(u,{name:"policy-detail-view",params:{mesh:"",policy:"",policyPath:"",codeSearch:""}},{default:s(({route:e,t:r})=>[t(o,{breadcrumbs:[{to:{name:"mesh-detail-view",params:{mesh:e.params.mesh}},text:e.params.mesh},{to:{name:"policy-list-view",params:{mesh:e.params.mesh,policyPath:e.params.policyPath}},text:r("policies.routes.item.breadcrumbs")}]},{title:s(()=>[P("h1",null,[t(E,{text:e.params.policy},{default:s(()=>[t(w,{title:r("policies.routes.item.title",{name:e.params.policy})},null,8,["title"])]),_:2},1032,["text"])])]),default:s(()=>[c(),t(_,{src:`/meshes/${e.params.mesh}/policy-path/${e.params.policyPath}/policy/${e.params.policy}`},{default:s(({data:v,error:x})=>[x?(a(),l(V,{key:0,error:x},null,8,["error"])):v===void 0?(a(),l(b,{key:1})):(a(),p("div",F,[t(d,null,{body:s(()=>[P("h2",null,C(r("policies.detail.affected_dpps")),1),c(),t(D,{class:"mt-4",mesh:e.params.mesh,"policy-name":e.params.policy,"policy-path":e.params.policyPath},null,8,["mesh","policy-name","policy-path"])]),_:2},1024),c(),t(A,{id:"code-block-policy",resource:v,"resource-fetcher":y=>f(h).getSinglePolicyEntity({name:e.params.policy,mesh:e.params.mesh,path:e.params.policyPath},y),"is-searchable":"",query:e.params.codeSearch,onQueryChange:y=>e.update({codeSearch:y})},null,8,["resource","resource-fetcher","query","onQueryChange"])]))]),_:2},1032,["src"])]),_:2},1032,["breadcrumbs"])]),_:1})}}});export{X as default};
