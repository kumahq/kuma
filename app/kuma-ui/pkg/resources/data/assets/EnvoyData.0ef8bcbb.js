import{J as v,N,o,f as c,b as s,A as E,_ as p,q as I,H as S,E as k,G as B,K as i,w as t,d as n,n as K,e as P,r as a,C as b,D as z,h as l}from"./index.5371ce6a.js";import{_ as $,C as D}from"./CodeBlock.2c568e63.js";import{E as q,_ as w}from"./ErrorBlock.a4674dd2.js";const x={class:"status-info"},L={key:3},V=v({__name:"StatusInfo",props:{isLoading:{type:Boolean,default:!1},hasError:{type:Boolean,default:!1},isEmpty:{type:Boolean,default:!1},error:{type:[Error,N],required:!1,default:null}},setup(e){return(d,_)=>(o(),c("div",x,[e.isLoading?(o(),s($,{key:0})):e.hasError?(o(),s(q,{key:1,error:e.error},null,8,["error"])):e.isEmpty?(o(),s(w,{key:2})):(o(),c("div",L,[E(d.$slots,"default",{},void 0,!0)]))]))}});const A=p(V,[["__scopeId","data-v-3029b7cf"]]);const J={name:"EnvoyData",components:{CodeBlock:D,KButton:I,KCard:S,KClipboardProvider:k,KPop:B,StatusInfo:A},props:{dataPath:{type:String,required:!0},mesh:{type:String,required:!1,default:""},dppName:{type:String,required:!1,default:""},zoneIngressName:{type:String,required:!1,default:""},zoneEgressName:{type:String,required:!1,default:""}},data(){return{isLoading:!0,error:null}},watch:{dppName(){this.fetchContent()},zoneIngressName(){this.fetchContent()},zoneEgressName(){this.fetchContent()}},mounted(){this.fetchContent()},methods:{async fetchContent(){this.error=null,this.isLoading=!0;try{let e="";this.mesh!==""&&this.dppName!==""?e=await i.getDataplaneData({dataPath:this.dataPath,mesh:this.mesh,dppName:this.dppName}):this.zoneIngressName!==""?e=await i.getZoneIngressData({dataPath:this.dataPath,zoneIngressName:this.zoneIngressName}):this.zoneEgressName!==""&&(e=await i.getZoneEgressData({dataPath:this.dataPath,zoneEgressName:this.zoneEgressName})),this.content=typeof e=="string"?e:JSON.stringify(e,null,2)}catch(e){this.error=e}finally{this.isLoading=!1}}}},Z=e=>(b("data-v-28c0ea95"),e=e(),z(),e),j=P(" Copy config to clipboard "),G=Z(()=>l("div",null,[l("p",null,"Config copied to clipboard!")],-1));function H(e,d,_,O,r,T){const u=a("CodeBlock"),f=a("KButton"),h=a("KPop"),m=a("KClipboardProvider"),g=a("KCard"),y=a("StatusInfo");return o(),s(y,{"has-error":r.error!==null,"is-loading":r.isLoading,error:r.error},{default:t(()=>[n(g,{"border-variant":"noBorder"},{body:t(()=>[n(u,{class:"panel-code-block",language:"json",code:e.content},null,8,["code"])]),actions:t(()=>[e.content?(o(),s(m,{key:0},{default:t(({copyToClipboard:C})=>[n(h,{placement:"bottom"},{content:t(()=>[G]),default:t(()=>[n(f,{appearance:"primary",onClick:F=>C(e.content)},{default:t(()=>[j]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})):K("",!0)]),_:1})]),_:1},8,["has-error","is-loading","error"])}const U=p(J,[["render",H],["__scopeId","data-v-28c0ea95"]]);export{U as E,A as S};
