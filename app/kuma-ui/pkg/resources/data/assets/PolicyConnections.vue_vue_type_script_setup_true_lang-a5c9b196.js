import{d as C,k,r as t,i as N,m as x,a5 as D,M as T,o as u,j as q,w as y,f as o,e as c,a7 as B,a8 as L,c as f,A as P,a as S,z as V,u as A,F}from"./index-5f1fbf13.js";import{_ as M}from"./LabelList.vue_vue_type_style_index_0_lang-b2669f10.js";const b=o("h4",null,"Dataplanes",-1),j=C({__name:"PolicyConnections",props:{mesh:{type:String,required:!0},policyType:{type:String,required:!0},policyName:{type:String,required:!0}},setup(h){const n=h,v=k(),p=t(!1),l=t(!0),r=t(!1),d=t([]),i=t(""),_=N(()=>{const s=i.value.toLowerCase();return d.value.filter(({dataplane:e})=>e.name.toLowerCase().includes(s))});x(()=>n.policyName,function(){m()}),D(function(){m()});async function m(){r.value=!1,l.value=!0;try{const{items:s,total:e}=await v.getPolicyConnections({mesh:n.mesh,policyType:n.policyType,policyName:n.policyName});p.value=e>0,d.value=s??[]}catch{r.value=!0}finally{l.value=!1}}return(s,e)=>{const g=T("router-link");return u(),q(M,{"has-error":r.value,"is-loading":l.value,"is-empty":!p.value},{default:y(()=>[o("ul",null,[o("li",null,[b,c(),B(o("input",{id:"dataplane-search","onUpdate:modelValue":e[0]||(e[0]=a=>i.value=a),type:"text",class:"k-input mb-4",placeholder:"Filter by name",required:"","data-testid":"dataplane-search-input"},null,512),[[L,i.value]]),c(),(u(!0),f(F,null,P(A(_),(a,w)=>(u(),f("p",{key:w,class:"my-1","data-testid":"dataplane-name"},[S(g,{to:{name:"data-plane-detail-view",params:{mesh:a.dataplane.mesh,dataPlane:a.dataplane.name}}},{default:y(()=>[c(V(a.dataplane.name),1)]),_:2},1032,["to"])]))),128))])])]),_:1},8,["has-error","is-loading","is-empty"])}}});export{j as _};
