import{d as y,aa as T,j as I,c as b,o as r,e as d,q as s,z as g,g as n,h as x,w as A,f as S,T as L,n as w,ab as B,a as j,b as u,v as D,t as o,M as H,F as f,s as q,p as C,m as E}from"./index-bb115be3.js";import{f as h,g as O}from"./RouteView.vue_vue_type_script_setup_true_lang-e50bfc04.js";const N=["aria-expanded"],P={key:0,class:"accordion-item-content","data-testid":"accordion-item-content"},M=y({__name:"AccordionItem",setup(p){const e=T("parentAccordion"),t=I(null),i=b(()=>e===void 0?!1:e.multipleOpen&&Array.isArray(e.active.value)&&t.value!==null?e.active.value.includes(t.value):t.value===e.active.value);e!==void 0&&(t.value=e.count.value++);function a(){i.value?v():l()}function v(){e!==void 0&&(e.multipleOpen&&Array.isArray(e.active.value)&&t.value!==null?e.active.value.splice(e.active.value.indexOf(t.value),1):e.active.value=null)}function l(){e!==void 0&&(e.multipleOpen&&Array.isArray(e.active.value)&&t.value!==null?e.active.value.push(t.value):e.active.value=t.value)}function _(c){c instanceof HTMLElement&&(c.style.height=`${c.scrollHeight}px`)}function m(c){c instanceof HTMLElement&&(c.style.height="auto")}return(c,k)=>(r(),d("li",{class:w(["accordion-item",{active:i.value}])},[s("button",{class:"accordion-item-header",type:"button","aria-expanded":i.value?"true":"false","data-testid":"accordion-item-button",onClick:a},[g(c.$slots,"accordion-header",{},void 0,!0)],8,N),n(),x(L,{name:"accordion",onEnter:_,onAfterEnter:m,onBeforeLeave:_},{default:A(()=>[i.value?(r(),d("div",P,[g(c.$slots,"accordion-content",{},void 0,!0)])):S("",!0)]),_:3})],2))}});const re=h(M,[["__scopeId","data-v-dfd99690"]]),R={class:"accordion-list"},U=y({__name:"AccordionList",props:{initiallyOpen:{type:[Number,Array],required:!1,default:null},multipleOpen:{type:Boolean,required:!1,default:!1}},setup(p){const e=p,t=I(0),i=I(e.initiallyOpen!==null?e.initiallyOpen:e.multipleOpen?[]:null);return B("parentAccordion",{multipleOpen:e.multipleOpen,active:i,count:t}),(a,v)=>(r(),d("ul",R,[g(a.$slots,"default",{},void 0,!0)]))}});const le=h(U,[["__scopeId","data-v-bdbadd5e"]]),V={class:"stack"},z={key:1},F={class:"row"},G={class:"header"},J={class:"header"},K={class:"header"},Q=["data-testid"],W={class:"type"},X=y({__name:"SubscriptionDetails",props:{subscription:{type:Object,required:!0},isDiscoverySubscription:{type:Boolean,default:!1}},setup(p){const e=p,{t}=O(),i=b(()=>{var v;let a;if("controlPlaneInstanceId"in e.subscription){const{lastUpdateTime:l,total:_,...m}=e.subscription.status;a=m}else a=((v=e.subscription.status)==null?void 0:v.stat)??{};return a?Object.entries(a).map(([l,_])=>{const{responsesSent:m="0",responsesAcknowledged:c="0",responsesRejected:k="0"}=_;return{type:l,responsesSent:m,responsesAcknowledged:c,responsesRejected:k}}):[]});return(a,v)=>(r(),d("div",V,[i.value.length===0?(r(),j(u(H),{key:0,appearance:"info"},{alertIcon:A(()=>[x(u(D),{icon:"portal"})]),alertMessage:A(()=>[n(o(u(t)("common.detail.subscriptions.no_stats",{id:e.subscription.id})),1)]),_:1})):(r(),d("div",z,[s("div",F,[s("div",G,o(u(t)("common.detail.subscriptions.type")),1),n(),s("div",J,o(u(t)("http.api.property.responsesSent")),1),n(),s("div",K,o(u(t)("http.api.property.responsesAcknowledged")),1)]),n(),(r(!0),d(f,null,q(i.value,(l,_)=>(r(),d("div",{key:_,class:"row","data-testid":`subscription-status-${l.type}`},[s("div",W,o(u(t)(`http.api.property.${l.type}`)),1),n(),s("div",null,o(l.responsesSent),1),n(),s("div",null,o(l.responsesAcknowledged),1)],8,Q))),128))]))]))}});const ue=h(X,[["__scopeId","data-v-d4b22517"]]),Y=""+new URL("icon-deployed-code-e3c999ba.svg",import.meta.url).href,Z=""+new URL("icon-connected-037e001a.svg",import.meta.url).href,ee=""+new URL("icon-disconnected-ba3c2624.svg",import.meta.url).href,$=p=>(C("data-v-8fec847c"),p=p(),E(),p),te={class:"subscription-header"},se=$(()=>s("img",{src:Y},null,-1)),ne=$(()=>s("img",{src:Z},null,-1)),oe=$(()=>s("img",{src:ee},null,-1)),ie=y({__name:"SubscriptionHeader",props:{subscription:{type:Object,required:!0}},setup(p){const e=p,{t,formatIsoDate:i}=O(),a=b(()=>"globalInstanceId"in e.subscription?e.subscription.globalInstanceId:null),v=b(()=>"controlPlaneInstanceId"in e.subscription?e.subscription.controlPlaneInstanceId:null),l=b(()=>e.subscription.connectTime?i(e.subscription.connectTime):null),_=b(()=>e.subscription.disconnectTime?i(e.subscription.disconnectTime):null);return(m,c)=>(r(),d("header",te,[s("span",null,[se,n(),a.value?(r(),d(f,{key:0},[s("b",null,o(u(t)("http.api.property.globalInstanceId")),1),n(": "+o(a.value),1)],64)):v.value?(r(),d(f,{key:1},[s("b",null,o(u(t)("http.api.property.controlPlaneInstanceId")),1),n(": "+o(v.value),1)],64)):S("",!0)]),n(),s("span",null,[ne,n(),s("b",null,o(u(t)("common.detail.subscriptions.connect_time")),1),n(": "+o(l.value),1)]),n(),s("span",null,[_.value?(r(),d(f,{key:0},[oe,n(),s("b",null,o(u(t)("common.detail.subscriptions.disconnect_time")),1),n(": "+o(_.value),1)],64)):S("",!0)])]))}});const de=h(ie,[["__scopeId","data-v-8fec847c"]]);export{re as A,de as S,le as a,ue as b};
