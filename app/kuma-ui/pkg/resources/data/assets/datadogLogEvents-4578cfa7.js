var C={log:"log",debug:"debug",info:"info",warn:"warn",error:"error"},y=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];Object.prototype.hasOwnProperty.call(C,e)||(e=C.log),y[e].apply(y,t)};y.debug=console.debug.bind(console);y.log=console.log.bind(console);y.info=console.info.bind(console);y.warn=console.warn.bind(console);y.error=console.error.bind(console);var kt=globalThis&&globalThis.__spreadArray||function(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,i;r<o;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},de,Qe=!1;function Bt(e){de=e}function Nt(e){Qe=e}function Mt(e,t,n){var r=n.value;n.value=function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];var a=de?l(r):r;return a.apply(this,o)}}function l(e){return function(){return N(e,this,arguments)}}function N(e,t,n){try{return e.apply(t,n)}catch(r){if(Le(C.error,r),de)try{de(r)}catch(o){Le(C.error,o)}}}function Le(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];Qe&&y.apply(void 0,kt([e,"[MONITOR]"],t,!1))}var ee=1e3,M=60*ee,Ut=60*M,$=1024,Ze=1024*$;function Pt(e,t,n){var r=n&&n.leading!==void 0?n.leading:!0,o=n&&n.trailing!==void 0?n.trailing:!0,i=!1,a,s;return{throttled:function(){for(var u=[],f=0;f<arguments.length;f++)u[f]=arguments[f];if(i){a=u;return}r?e.apply(void 0,u):a=u,i=!0,s=setTimeout(function(){o&&a&&e.apply(void 0,a),i=!1,a=void 0},t)},cancel:function(){clearTimeout(s),i=!1,a=void 0}}}function w(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.forEach(function(r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}),e}function Dt(e){return w({},e)}function q(e){return e?(parseInt(e,10)^Math.random()*16>>parseInt(e,10)/4).toString(16):"".concat(1e7,"-").concat(1e3,"-").concat(4e3,"-").concat(8e3,"-").concat(1e11).replace(/[018]/g,q)}function xe(e){return e!==0&&Math.random()*100<=e}function ge(){}function be(e,t,n){if(typeof e!="object"||e===null)return JSON.stringify(e);var r=ie(Object.prototype),o=ie(Array.prototype),i=ie(Object.getPrototypeOf(e)),a=ie(e);try{return JSON.stringify(e,t,n)}catch{return"<error: unable to serialize object>"}finally{r(),o(),i(),a()}}function ie(e){var t=e,n=t.toJSON;return n?(delete t.toJSON,function(){t.toJSON=n}):ge}function K(e,t){return e.indexOf(t)!==-1}function et(e){if(Array.from)return Array.from(e);var t=[];if(e instanceof Set)e.forEach(function(r){return t.push(r)});else for(var n=0;n<e.length;n++)t.push(e[n]);return t}function Ft(e,t){for(var n=0;n<e.length;n+=1){var r=e[n];if(t(r,n))return r}}function Ee(e){return jt(e)&&e>=0&&e<=100}function jt(e){return typeof e=="number"}function Q(e){return Object.keys(e).map(function(t){return e[t]})}function Gt(e){return Object.keys(e).map(function(t){return[t,e[t]]})}function tt(e){return Object.keys(e).length===0}function nt(e,t){return e.slice(0,t.length)===t}function Ht(e,t){return e.slice(-t.length)===t}function Ne(){if(typeof globalThis=="object")return globalThis;Object.defineProperty(Object.prototype,"_dd_temp_",{get:function(){return this},configurable:!0});var e=_dd_temp_;return delete Object.prototype._dd_temp_,typeof e!="object"&&(typeof self=="object"?e=self:typeof window=="object"?e=window:e={}),e}function qt(){return Kt(window.location)}function Kt(e){if(e.origin)return e.origin;var t=e.host.replace(/(:80|:443)$/,"");return"".concat(e.protocol,"//").concat(t)}function Yt(e,t){var n=new RegExp("(?:^|;)\\s*".concat(t,"\\s*=\\s*([^;]+)")),r=n.exec(e);return r?r[1]:void 0}function zt(e,t,n){n===void 0&&(n="");var r=e.charCodeAt(t-1),o=r>=55296&&r<=56319,i=o?t+1:t;return e.length<=i?e:"".concat(e.slice(0,i)).concat(n)}function rt(e){return e===null?"null":Array.isArray(e)?"array":typeof e}function Wt(){if(typeof WeakSet<"u"){var e=new WeakSet;return{hasAlreadyBeenSeen:function(n){var r=e.has(n);return r||e.add(n),r}}}var t=[];return{hasAlreadyBeenSeen:function(n){var r=t.indexOf(n)>=0;return r||t.push(n),r}}}function ve(e,t,n){if(n===void 0&&(n=Wt()),t===void 0)return e;if(typeof t!="object"||t===null)return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){var r=t.flags||[t.global?"g":"",t.ignoreCase?"i":"",t.multiline?"m":"",t.sticky?"y":"",t.unicode?"u":""].join("");return new RegExp(t.source,r)}if(!n.hasAlreadyBeenSeen(t)){if(Array.isArray(t)){for(var o=Array.isArray(e)?e:[],i=0;i<t.length;++i)o[i]=ve(o[i],t[i],n);return o}var a=rt(e)==="object"?e:{};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(a[s]=ve(a[s],t[s],n));return a}}function j(e){return ve(void 0,e)}function me(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n,r=0,o=e;r<o.length;r++){var i=o[r];i!=null&&(n=ve(n,i))}return n}function Vt(e){var t=new Set;return e.forEach(function(n){return t.add(n)}),et(t)}var qe=ee;function te(e,t,n,r){var o=new Date;o.setTime(o.getTime()+n);var i="expires=".concat(o.toUTCString()),a=r&&r.crossSite?"none":"strict",s=r&&r.domain?";domain=".concat(r.domain):"",u=r&&r.secure?";secure":"";document.cookie="".concat(e,"=").concat(t,";").concat(i,";path=/;samesite=").concat(a).concat(s).concat(u)}function O(e){return Yt(document.cookie,e)}function ot(e,t){te(e,"",0,t)}function Xt(e){if(document.cookie===void 0||document.cookie===null)return!1;try{var t="dd_cookie_test_".concat(q()),n="test";te(t,n,M,e);var r=O(t)===n;return ot(t,e),r}catch(o){return y.error(o),!1}}var Se;function Jt(){if(Se===void 0){for(var e="dd_site_test_".concat(q()),t="test",n=window.location.hostname.split("."),r=n.pop();n.length&&!O(e);)r="".concat(n.pop(),".").concat(r),te(e,t,ee,{domain:r});ot(e,{domain:r}),Se=r}return Se}function it(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];try{return e.apply(void 0,n)}catch(o){y.error(t,o)}}}var ce;function $t(e){Array.isArray(e)&&(ce||(ce=new Set(e)),e.filter(function(t){return typeof t=="string"}).forEach(function(t){K(t,"-")&&y.warn("please use snake case for '".concat(t,"'")),ce.add(t)}))}function Qt(){return ce||new Set}function W(){return new Date().getTime()}function x(){return W()}function Z(){return performance.now()}function ne(){return{relative:Z(),timeStamp:x()}}function Zt(){return{relative:0,timeStamp:at()}}function en(e,t){return t-e}function tn(e){return e-at()}var Ce;function at(){return Ce===void 0&&(Ce=performance.timing.navigationStart),Ce}function Me(e){return nn(e,qt()).href}function nn(e,t){if(rn())return t!==void 0?new URL(e,t):new URL(e);if(t===void 0&&!/:/.test(e))throw new Error("Invalid URL: '".concat(e,"'"));var n=document,r=n.createElement("a");if(t!==void 0){n=document.implementation.createHTMLDocument("");var o=n.createElement("base");o.href=t,n.head.appendChild(o),n.body.appendChild(r)}return r.href=e,r}var D;function rn(){if(D!==void 0)return D;try{var e=new URL("http://test/path");return D=e.href==="http://test/path",D}catch{D=!1}return D}var on="datad0g.com",V="datadoghq.com",an="ddog-gov.com",sn={logs:"logs",rum:"rum",sessionReplay:"session-replay"},un={logs:"logs",rum:"rum",sessionReplay:"replay"};function X(e,t,n){var r=e.clientToken,o=cn(e,t),i="https://".concat(o,"/api/v2/").concat(un[t]),a=e.proxyUrl&&Me(e.proxyUrl);return{build:function(s,u){var f=["sdk_version:".concat("4.30.1"),"api:".concat(s)].concat(n);u&&f.push("retry_count:".concat(u.count),"retry_after:".concat(u.lastFailureStatus));var v=["ddsource=browser","ddtags=".concat(encodeURIComponent(f.join(","))),"dd-api-key=".concat(r),"dd-evp-origin-version=".concat(encodeURIComponent("4.30.1")),"dd-evp-origin=browser","dd-request-id=".concat(q())];t==="rum"&&v.push("batch_time=".concat(x())),e.internalAnalyticsSubdomain&&v.reverse();var h="".concat(i,"?").concat(v.join("&"));return a?"".concat(a,"?ddforward=").concat(encodeURIComponent(h)):h},buildIntakeUrl:function(){return a?"".concat(a,"?ddforward"):i},endpointType:t}}function cn(e,t){var n=e.site,r=n===void 0?V:n,o=e.internalAnalyticsSubdomain;if(o&&r===V)return"".concat(o,".").concat(V);var i=r.split("."),a=i.pop();return"".concat(sn[t],".browser-intake-").concat(i.join("-"),".").concat(a)}var fn=200;function ln(e){var t=e.env,n=e.service,r=e.version,o=e.datacenter,i=[];return t&&i.push(ae("env",t)),n&&i.push(ae("service",n)),r&&i.push(ae("version",r)),o&&i.push(ae("datacenter",o)),i}var dn=/[^a-z0-9_:./-]/;function ae(e,t){var n=fn-e.length-1;(t.length>n||dn.test(t))&&y.warn("".concat(e," value doesn't meet tag requirements and will be sanitized"));var r=t.replace(/,/g,"_");return"".concat(e,":").concat(r)}function vn(e){var t=ln(e),n=pn(e,t),r=Q(n).map(function(i){return i.buildIntakeUrl()}),o=hn(e,r,t);return w({isIntakeUrl:function(i){return r.some(function(a){return i.indexOf(a)===0})},replica:o,site:e.site||V},n)}function pn(e,t){return{logsEndpointBuilder:X(e,"logs",t),rumEndpointBuilder:X(e,"rum",t),sessionReplayEndpointBuilder:X(e,"sessionReplay",t)}}function hn(e,t,n){if(e.replica){var r=w({},e,{site:V,clientToken:e.replica.clientToken}),o={logsEndpointBuilder:X(r,"logs",n),rumEndpointBuilder:X(r,"rum",n)};return t.push.apply(t,Q(o).map(function(i){return i.buildIntakeUrl()})),w({applicationId:e.replica.applicationId},o)}}function gn(e){var t,n,r;if(!e||!e.clientToken){y.error("Client Token is not configured, we will not send any data.");return}var o=(t=e.sessionSampleRate)!==null&&t!==void 0?t:e.sampleRate;if(o!==void 0&&!Ee(o)){y.error("Session Sample Rate should be a number between 0 and 100");return}if(e.telemetrySampleRate!==void 0&&!Ee(e.telemetrySampleRate)){y.error("Telemetry Sample Rate should be a number between 0 and 100");return}if(e.telemetryConfigurationSampleRate!==void 0&&!Ee(e.telemetryConfigurationSampleRate)){y.error("Telemetry Configuration Sample Rate should be a number between 0 and 100");return}return $t(e.enableExperimentalFeatures),w({beforeSend:e.beforeSend&&it(e.beforeSend,"beforeSend threw an error:"),cookieOptions:bn(e),sessionSampleRate:o??100,telemetrySampleRate:(n=e.telemetrySampleRate)!==null&&n!==void 0?n:20,telemetryConfigurationSampleRate:(r=e.telemetryConfigurationSampleRate)!==null&&r!==void 0?r:5,service:e.service,silentMultipleInit:!!e.silentMultipleInit,batchBytesLimit:16*$,eventRateLimiterThreshold:3e3,maxTelemetryEventsPerPage:15,flushTimeout:30*ee,batchMessagesLimit:50,messageBytesLimit:256*$},vn(e))}function bn(e){var t={};return t.secure=mn(e),t.crossSite=!!e.useCrossSiteSessionCookie,e.trackSessionAcrossSubdomains&&(t.domain=Jt()),t}function mn(e){return!!e.useSecureSessionCookie||!!e.useCrossSiteSessionCookie}function yn(e){var t;return{session_sample_rate:(t=e.sessionSampleRate)!==null&&t!==void 0?t:e.sampleRate,telemetry_sample_rate:e.telemetrySampleRate,telemetry_configuration_sample_rate:e.telemetryConfigurationSampleRate,use_before_send:!!e.beforeSend,use_cross_site_session_cookie:e.useCrossSiteSessionCookie,use_secure_session_cookie:e.useSecureSessionCookie,use_proxy:e.proxyUrl!==void 0?!!e.proxyUrl:void 0,silent_multiple_init:e.silentMultipleInit,track_session_across_subdomains:e.trackSessionAcrossSubdomains,track_resources:e.trackResources,track_long_task:e.trackLongTasks}}var re="?";function I(e){var t=[],n=we(e,"stack"),r=String(e);return n&&nt(n,r)&&(n=n.slice(r.length)),n&&n.split(`
`).forEach(function(o){var i=Cn(o)||Tn(o)||On(o)||xn(o);i&&(!i.func&&i.line&&(i.func=re),t.push(i))}),{message:we(e,"message"),name:we(e,"name"),stack:t}}var st="((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|\\w+\\.|\\/).*?)",H="(?::(\\d+))",En=new RegExp("^\\s*at (.*?) ?\\(".concat(st).concat(H,"?").concat(H,"?\\)?\\s*$"),"i"),Sn=new RegExp("\\((\\S*)".concat(H).concat(H,"\\)"));function Cn(e){var t=En.exec(e);if(t){var n=t[2]&&t[2].indexOf("native")===0,r=t[2]&&t[2].indexOf("eval")===0,o=Sn.exec(t[2]);return r&&o&&(t[2]=o[1],t[3]=o[2],t[4]=o[3]),{args:n?[t[2]]:[],column:t[4]?+t[4]:void 0,func:t[1]||re,line:t[3]?+t[3]:void 0,url:n?void 0:t[2]}}}var wn=new RegExp("^\\s*at ?".concat(st).concat(H,"?").concat(H,"??\\s*$"),"i");function Tn(e){var t=wn.exec(e);if(t)return{args:[],column:t[3]?+t[3]:void 0,func:re,line:t[2]?+t[2]:void 0,url:t[1]}}var _n=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i;function On(e){var t=_n.exec(e);if(t)return{args:[],column:t[4]?+t[4]:void 0,func:t[1]||re,line:+t[3],url:t[2]}}var Rn=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|capacitor|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,Ln=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i;function xn(e){var t=Rn.exec(e);if(t){var n=t[3]&&t[3].indexOf(" > eval")>-1,r=Ln.exec(t[3]);return n&&r&&(t[3]=r[1],t[4]=r[2],t[5]=void 0),{args:t[2]?t[2].split(","):[],column:t[5]?+t[5]:void 0,func:t[1]||re,line:t[4]?+t[4]:void 0,url:t[3]}}}function we(e,t){if(!(typeof e!="object"||!e||!(t in e))){var n=e[t];return typeof n=="string"?n:void 0}}function ut(e,t,n){var r=e[t],o=n(r),i=function(){if(typeof o=="function")return o.apply(this,arguments)};return e[t]=i,{stop:function(){e[t]===i?e[t]=r:o=r}}}function G(e,t,n){var r=n.before,o=n.after;return ut(e,t,function(i){return function(){var a=arguments,s;return r&&N(r,this,a),typeof i=="function"&&(s=i.apply(this,a)),o&&N(o,this,a),s}})}var In=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/;function An(e){var t=kn(e).stop,n=Bn(e).stop;return{stop:function(){t(),n()}}}function kn(e){return G(window,"onerror",{before:function(t,n,r,o,i){var a;if(i)a=I(i),e(a,i);else{var s={url:n,column:o,line:r},u,f=t;if({}.toString.call(t)==="[object String]"){var v=In.exec(f);v&&(u=v[1],f=v[2])}a={name:u,message:typeof f=="string"?f:void 0,stack:[s]},e(a,t)}}})}function Bn(e){return G(window,"onunhandledrejection",{before:function(t){var n=t.reason||"Empty reason",r=I(n);e(r,n)}})}var S={AGENT:"agent",CONSOLE:"console",CUSTOM:"custom",LOGGER:"logger",NETWORK:"network",SOURCE:"source",REPORT:"report"};function Nn(e){var t=e.stackTrace,n=e.originalError,r=e.handlingStack,o=e.startClocks,i=e.nonErrorPrefix,a=e.source,s=e.handling;return!t||t.message===void 0&&!(n instanceof Error)?{startClocks:o,source:a,handling:s,originalError:n,message:"".concat(i," ").concat(be(n)),stack:"No stack, consider using an instance of Error",handlingStack:r,type:t&&t.name}:{startClocks:o,source:a,handling:s,originalError:n,message:t.message||"Empty message",stack:U(t),handlingStack:r,type:t.name,causes:Pn(n,a)}}function U(e){var t=ct(e);return e.stack.forEach(function(n){var r=n.func==="?"?"<anonymous>":n.func,o=n.args&&n.args.length>0?"(".concat(n.args.join(", "),")"):"",i=n.line?":".concat(n.line):"",a=n.line&&n.column?":".concat(n.column):"";t+=`
  at `.concat(r).concat(o," @ ").concat(n.url).concat(i).concat(a)}),t}function Mn(e){var t;return(t=/@ (.+)/.exec(e))===null||t===void 0?void 0:t[1]}function ct(e){return"".concat(e.name||"Error",": ").concat(e.message)}function Un(){var e=2,t=new Error,n;if(!t.stack)try{throw t}catch{}return N(function(){var r=I(t);r.stack=r.stack.slice(e),n=U(r)}),n}function Pn(e,t){for(var n=e,r=[];(n==null?void 0:n.cause)instanceof Error&&r.length<10;){var o=I(n.cause);r.push({message:n.cause.message,source:t,type:o==null?void 0:o.name,stack:o&&U(o)}),n=n.cause}return r.length?r:void 0}function Dn(e){return An(function(t,n){e.notify(Nn({stackTrace:t,originalError:n,startClocks:ne(),nonErrorPrefix:"Uncaught",source:S.SOURCE,handling:"unhandled"}))})}function Fn(e){var t=w({version:"4.30.1",onReady:function(n){n()}},e);return Object.defineProperty(t,"_setDebug",{get:function(){return Nt},enumerable:!1}),t}function jn(e,t,n){var r=e[t];e[t]=n,r&&r.q&&r.q.forEach(function(o){return it(o,"onReady callback threw an error:")()})}var T=function(){function e(t){this.onFirstSubscribe=t,this.observers=[]}return e.prototype.subscribe=function(t){var n=this;return!this.observers.length&&this.onFirstSubscribe&&(this.onLastUnsubscribe=this.onFirstSubscribe()||void 0),this.observers.push(t),{unsubscribe:function(){n.observers=n.observers.filter(function(r){return t!==r}),!n.observers.length&&n.onLastUnsubscribe&&n.onLastUnsubscribe()}}},e.prototype.notify=function(t){this.observers.forEach(function(n){return n(t)})},e}();function ft(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=new T(function(){var r=e.map(function(o){return o.subscribe(function(i){return n.notify(i)})});return function(){return r.forEach(function(o){return o.unsubscribe()})}});return n}function Ke(e,t){var n=window,r;return n.Zone&&typeof n.Zone.__symbol__=="function"&&(r=e[n.Zone.__symbol__(t)]),r||(r=e[t]),r}function pe(e,t,n,r){return lt(e,[t],n,r)}function lt(e,t,n,r){var o=r===void 0?{}:r,i=o.once,a=o.capture,s=o.passive,u=l(i?function(b){h(),n(b)}:n),f=s?{capture:a,passive:s}:a,v=Ke(e,"addEventListener");t.forEach(function(b){return v.call(e,b,u,f)});function h(){var b=Ke(e,"removeEventListener");t.forEach(function(c){return b.call(e,c,u,f)})}return{stop:h}}var L={intervention:"intervention",deprecation:"deprecation",cspViolation:"csp_violation"};function Gn(e){var t=[];K(e,L.cspViolation)&&t.push(qn());var n=e.filter(function(r){return r!==L.cspViolation});return n.length&&t.push(Hn(n)),ft.apply(void 0,t)}function Hn(e){var t=new T(function(){if(window.ReportingObserver){var n=l(function(o){return o.forEach(function(i){t.notify(Kn(i))})}),r=new window.ReportingObserver(n,{types:e,buffered:!0});return r.observe(),function(){r.disconnect()}}});return t}function qn(){var e=new T(function(){var t=l(function(r){e.notify(Yn(r))}),n=pe(document,"securitypolicyviolation",t).stop;return n});return e}function Kn(e){var t=e.type,n=e.body;return{type:t,subtype:n.id,message:"".concat(t,": ").concat(n.message),stack:dt(n.id,n.message,n.sourceFile,n.lineNumber,n.columnNumber)}}function Yn(e){var t=L.cspViolation,n="'".concat(e.blockedURI,"' blocked by '").concat(e.effectiveDirective,"' directive");return{type:L.cspViolation,subtype:e.effectiveDirective,message:"".concat(t,": ").concat(n),stack:dt(e.effectiveDirective,e.originalPolicy?"".concat(n,' of the policy "').concat(zt(e.originalPolicy,100,"..."),'"'):"no policy",e.sourceFile,e.lineNumber,e.columnNumber)}}function dt(e,t,n,r,o){return n&&U({name:e,message:t,stack:[{func:"?",url:n,line:r,column:o}]})}function vt(e,t){var n=window.__ddBrowserSdkExtensionCallback;n&&n({type:e,payload:t})}var Ue={log:"log",configuration:"configuration"},zn=["https://www.datadoghq-browser-agent.com","https://www.datad0g-browser-agent.com","http://localhost","<anonymous>"],Wn=[an],R={maxEventsPerPage:0,sentEventCount:0,telemetryEnabled:!1,telemetryConfigurationEnabled:!1},Ie;function Vn(e,t){var n,r=new T;R.telemetryEnabled=xe(t.telemetrySampleRate),R.telemetryConfigurationEnabled=R.telemetryEnabled&&xe(t.telemetryConfigurationSampleRate),Ie=function(i){if(!K(Wn,t.site)&&R.telemetryEnabled){var a=o(e,i);r.notify(a),vt("telemetry",a)}},Bt(pt),w(R,{maxEventsPerPage:t.maxTelemetryEventsPerPage,sentEventCount:0});function o(i,a){return me({type:"telemetry",date:x(),service:i,version:"4.30.1",source:"browser",_dd:{format_version:2},telemetry:a,experimental_features:et(Qt())},n!==void 0?n():{})}return{setContextProvider:function(i){n=i},observable:r}}function Xn(e){return e.site===on}function Jn(e,t){Le(C.debug,e,t),Pe(w({type:Ue.log,message:e,status:"debug"},t))}function pt(e){Pe(w({type:Ue.log,status:"error"},Qn(e)))}function $n(e){R.telemetryConfigurationEnabled&&Pe({type:Ue.configuration,configuration:e})}function Pe(e){Ie&&R.sentEventCount<R.maxEventsPerPage&&(R.sentEventCount+=1,Ie(e))}function Qn(e){if(e instanceof Error){var t=I(e);return{error:{kind:t.name,stack:U(Zn(t))},message:t.message}}return{error:{stack:"Not an instance of error"},message:"Uncaught ".concat(be(e))}}function Zn(e){return e.stack=e.stack.filter(function(t){return!t.url||zn.some(function(n){return nt(t.url,n)})}),e}var se=1/0,er=M,tr=function(){function e(t){var n=this;this.expireDelay=t,this.entries=[],this.clearOldContextsInterval=setInterval(function(){return n.clearOldContexts()},er)}return e.prototype.add=function(t,n){var r=this,o={context:t,startTime:n,endTime:se,remove:function(){var i=r.entries.indexOf(o);i>=0&&r.entries.splice(i,1)},close:function(i){o.endTime=i}};return this.entries.unshift(o),o},e.prototype.find=function(t){t===void 0&&(t=se);for(var n=0,r=this.entries;n<r.length;n++){var o=r[n];if(o.startTime<=t){if(t<=o.endTime)return o.context;break}}},e.prototype.closeActive=function(t){var n=this.entries[0];n&&n.endTime===se&&n.close(t)},e.prototype.findAll=function(t){return t===void 0&&(t=se),this.entries.filter(function(n){return n.startTime<=t&&t<=n.endTime}).map(function(n){return n.context})},e.prototype.reset=function(){this.entries=[]},e.prototype.stop=function(){clearInterval(this.clearOldContextsInterval)},e.prototype.clearOldContexts=function(){for(var t=Z()-this.expireDelay;this.entries.length>0&&this.entries[this.entries.length-1].endTime<t;)this.entries.pop()},e}();function nr(){return!!window.chrome||/HeadlessChrome/.test(window.navigator.userAgent)}var ht=4*Ut,gt=15*M,bt=/^([a-z]+)=([a-z0-9-]+)$/,De="&",ye="_dd_s",rr=10,or=100,mt=[],fe;function J(e,t){var n;if(t===void 0&&(t=0),fe||(fe=e),e!==fe){mt.push(e);return}if(t>=or){Ye();return}var r,o=z();if(Te()){if(o.lock){ue(e,t);return}if(r=q(),o.lock=r,Ae(o,e.options),o=z(),o.lock!==r){ue(e,t);return}}var i=e.process(o);if(Te()&&(o=z(),o.lock!==r)){ue(e,t);return}if(i&&yt(i,e.options),Te()&&!(i&&Et(i))){if(o=z(),o.lock!==r){ue(e,t);return}delete o.lock,Ae(o,e.options),i=o}(n=e.after)===null||n===void 0||n.call(e,i||o),Ye()}function Te(){return nr()}function ue(e,t){setTimeout(l(function(){J(e,t+1)}),rr)}function Ye(){fe=void 0;var e=mt.shift();e&&J(e)}function yt(e,t){if(Et(e)){sr(t);return}e.expire=String(W()+gt),Ae(e,t)}function Ae(e,t){te(ye,ir(e),gt,t)}function ir(e){return Gt(e).map(function(t){var n=t[0],r=t[1];return"".concat(n,"=").concat(r)}).join(De)}function z(){var e=O(ye),t={};return ar(e)&&e.split(De).forEach(function(n){var r=bt.exec(n);if(r!==null){var o=r[1],i=r[2];t[o]=i}}),t}function ar(e){return e!==void 0&&(e.indexOf(De)!==-1||bt.test(e))}function Et(e){return tt(e)}function sr(e){te(ye,"",0,e)}var ur="_dd",cr="_dd_r",fr="_dd_l",lr="rum",dr="logs";function vr(e){var t=O(ye),n=O(ur),r=O(cr),o=O(fr);if(!t){var i={};n&&(i.id=n),o&&/^[01]$/.test(o)&&(i[dr]=o),r&&/^[012]$/.test(r)&&(i[lr]=r),yt(i,e)}}function pr(e,t,n){var r=new T,o=new T,i=setInterval(l(f),qe),a=E();function s(){var d;J({options:e,process:function(_){var A=v(_);return d=h(A),A},after:function(_){d&&!b()&&m(_),a=_}})}function u(){J({options:e,process:function(d){return b()?v(d):void 0}})}function f(){J({options:e,process:function(d){return P(d)?void 0:{}},after:v})}function v(d){return P(d)||(d={}),b()&&(c(d)?p():a=d),d}function h(d){var _=n(d[t]),A=_.trackingType,k=_.isTracked;return d[t]=A,k&&!d.id&&(d.id=q(),d.created=String(W())),k}function b(){return a[t]!==void 0}function c(d){return a.id!==d.id||a[t]!==d[t]}function p(){a={},o.notify()}function m(d){a=d,r.notify()}function E(){var d=z();return P(d)?d:{}}function P(d){return(d.created===void 0||W()-Number(d.created)<ht)&&(d.expire===void 0||W()<Number(d.expire))}return{expandOrRenewSession:Pt(l(s),qe).throttled,expandSession:u,getSession:function(){return a},renewObservable:r,expireObservable:o,stop:function(){clearInterval(i)}}}var hr=M,gr=ht;function br(e,t,n){vr(e);var r=pr(e,t,n),o=new tr(gr);r.renewObservable.subscribe(function(){o.add(i(),Z())}),r.expireObservable.subscribe(function(){o.closeActive(Z())}),r.expandOrRenewSession(),o.add(i(),Zt().relative),mr(function(){return r.expandOrRenewSession()}),yr(function(){return r.expandSession()});function i(){return{id:r.getSession().id,trackingType:r.getSession()[t]}}return{findActiveSession:function(a){return o.find(a)},renewObservable:r.renewObservable,expireObservable:r.expireObservable}}function mr(e){lt(window,["click","touchstart","keydown","scroll"],e,{capture:!0,passive:!0}).stop}function yr(e){var t=l(function(){document.visibilityState==="visible"&&e()});pe(document,"visibilitychange",t).stop,setInterval(t,hr)}var Er=80*$,Sr=32,St=3*Ze,Cr=M,Ct=ee;function wt(e,t,n,r,o){t.transportStatus===0&&t.queuedPayloads.size()===0&&t.bandwidthMonitor.canHandle(e)?_t(e,t,n,{onSuccess:function(){return Ot(0,t,n,r,o)},onFailure:function(){t.queuedPayloads.enqueue(e),Tt(t,n,r,o)}}):t.queuedPayloads.enqueue(e)}function Tt(e,t,n,r){e.transportStatus===2&&setTimeout(l(function(){var o=e.queuedPayloads.first();_t(o,e,t,{onSuccess:function(){e.queuedPayloads.dequeue(),e.currentBackoffTime=Ct,Ot(1,e,t,n,r)},onFailure:function(){e.currentBackoffTime=Math.min(Cr,e.currentBackoffTime*2),Tt(e,t,n,r)}})}),e.currentBackoffTime)}function _t(e,t,n,r){var o=r.onSuccess,i=r.onFailure;t.bandwidthMonitor.add(e),n(e,function(a){t.bandwidthMonitor.remove(e),wr(a)?(t.transportStatus=t.bandwidthMonitor.ongoingRequestCount>0?1:2,e.retry={count:e.retry?e.retry.count+1:1,lastFailureStatus:a.status},i()):(t.transportStatus=0,o())})}function Ot(e,t,n,r,o){e===0&&t.queuedPayloads.isFull()&&!t.queueFullReported&&(o({message:"Reached max ".concat(r," events size queued for upload: ").concat(St/Ze,"MiB"),source:S.AGENT,startClocks:ne()}),t.queueFullReported=!0);var i=t.queuedPayloads;for(t.queuedPayloads=Rt();i.size()>0;)wt(i.dequeue(),t,n,r,o)}function wr(e){return e.type!=="opaque"&&(e.status===0&&!navigator.onLine||e.status===408||e.status===429||e.status>=500)}function Tr(){return{transportStatus:0,currentBackoffTime:Ct,bandwidthMonitor:_r(),queuedPayloads:Rt(),queueFullReported:!1}}function Rt(){var e=[];return{bytesCount:0,enqueue:function(t){this.isFull()||(e.push(t),this.bytesCount+=t.bytesCount)},first:function(){return e[0]},dequeue:function(){var t=e.shift();return t&&(this.bytesCount-=t.bytesCount),t},size:function(){return e.length},isFull:function(){return this.bytesCount>=St}}}function _r(){return{ongoingRequestCount:0,ongoingByteCount:0,canHandle:function(e){return this.ongoingRequestCount===0||this.ongoingByteCount+e.bytesCount<=Er&&this.ongoingRequestCount<Sr},add:function(e){this.ongoingRequestCount+=1,this.ongoingByteCount+=e.bytesCount},remove:function(e){this.ongoingRequestCount-=1,this.ongoingByteCount-=e.bytesCount}}}function Or(e,t,n){var r=Tr(),o=function(i,a){return xr(e,t,i,a)};return{send:function(i){wt(i,r,o,e.endpointType,n)},sendOnExit:function(i){Rr(e,t,i)}}}function Rr(e,t,n){var r=n.data,o=n.bytesCount,i=!!navigator.sendBeacon&&o<t;if(i)try{var a=e.build("beacon"),s=navigator.sendBeacon(a,r);if(s)return}catch(f){Lr(f)}var u=e.build("xhr");ke(u,r)}var ze=!1;function Lr(e){ze||(ze=!0,pt(e))}function xr(e,t,n,r){var o=n.data,i=n.bytesCount,a=n.retry,s=Ir()&&i<t;if(s){var u=e.build("fetch",a);fetch(u,{method:"POST",body:o,keepalive:!0,mode:"cors"}).then(l(function(v){return r==null?void 0:r({status:v.status,type:v.type})}),l(function(){var v=e.build("xhr",a);ke(v,o,r)}))}else{var f=e.build("xhr",a);ke(f,o,r)}}function Ir(){try{return window.Request&&"keepalive"in new Request("http://a")}catch{return!1}}function ke(e,t,n){var r=new XMLHttpRequest,o=l(function(){r.removeEventListener("loadend",o),n==null||n({status:r.status})});r.open("POST",e,!0),r.addEventListener("loadend",o),r.send(t)}var Ar=/[^\u0000-\u007F]/,kr=function(){function e(t,n,r,o,i,a){var s=this;this.request=t,this.batchMessagesLimit=n,this.batchBytesLimit=r,this.messageBytesLimit=o,this.flushTimeout=i,this.pageExitObservable=a,this.pushOnlyBuffer=[],this.upsertBuffer={},this.bufferBytesCount=0,this.bufferMessagesCount=0,a.subscribe(function(){return s.flush(s.request.sendOnExit)}),this.flushPeriodically()}return e.prototype.add=function(t){this.addOrUpdate(t)},e.prototype.upsert=function(t,n){this.addOrUpdate(t,n)},e.prototype.flush=function(t){if(t===void 0&&(t=this.request.send),this.bufferMessagesCount!==0){var n=this.pushOnlyBuffer.concat(Q(this.upsertBuffer)),r=this.bufferBytesCount;this.pushOnlyBuffer=[],this.upsertBuffer={},this.bufferBytesCount=0,this.bufferMessagesCount=0,t({data:n.join(`
`),bytesCount:r})}},e.prototype.computeBytesCount=function(t){return Ar.test(t)?window.TextEncoder!==void 0?new TextEncoder().encode(t).length:new Blob([t]).size:t.length},e.prototype.addOrUpdate=function(t,n){var r=this.process(t),o=r.processedMessage,i=r.messageBytesCount;if(i>=this.messageBytesLimit){y.warn("Discarded a message whose size was bigger than the maximum allowed size ".concat(this.messageBytesLimit,"KB."));return}this.hasMessageFor(n)&&this.remove(n),this.willReachedBytesLimitWith(i)&&this.flush(),this.push(o,i,n),this.isFull()&&this.flush()},e.prototype.process=function(t){var n=be(t),r=this.computeBytesCount(n);return{processedMessage:n,messageBytesCount:r}},e.prototype.push=function(t,n,r){this.bufferMessagesCount>0&&(this.bufferBytesCount+=1),r!==void 0?this.upsertBuffer[r]=t:this.pushOnlyBuffer.push(t),this.bufferBytesCount+=n,this.bufferMessagesCount+=1},e.prototype.remove=function(t){var n=this.upsertBuffer[t];delete this.upsertBuffer[t];var r=this.computeBytesCount(n);this.bufferBytesCount-=r,this.bufferMessagesCount-=1,this.bufferMessagesCount>0&&(this.bufferBytesCount-=1)},e.prototype.hasMessageFor=function(t){return t!==void 0&&this.upsertBuffer[t]!==void 0},e.prototype.willReachedBytesLimitWith=function(t){return this.bufferBytesCount+t+1>=this.batchBytesLimit},e.prototype.isFull=function(){return this.bufferMessagesCount===this.batchMessagesLimit||this.bufferBytesCount>=this.batchBytesLimit},e.prototype.flushPeriodically=function(){var t=this;setTimeout(l(function(){t.flush(),t.flushPeriodically()}),this.flushTimeout)},e}();function Fe(){var e=Br();if(e)return{getAllowedWebViewHosts:function(){return JSON.parse(e.getAllowedWebViewHosts())},send:function(t,n){e.send(JSON.stringify({eventType:t,event:n}))}}}function he(e){var t;e===void 0&&(e=(t=Ne().location)===null||t===void 0?void 0:t.hostname);var n=Fe();return!!n&&n.getAllowedWebViewHosts().some(function(r){return e===r||Ht(e,".".concat(r))})}function Br(){return Ne().DatadogEventBridge}function Lt(e,t,n,r,o){var i=s(t),a;o&&(a=s(o));function s(u){return new kr(Or(u,e.batchBytesLimit,n),e.batchMessagesLimit,e.batchBytesLimit,e.messageBytesLimit,e.flushTimeout,r)}return{add:function(u,f){f===void 0&&(f=!0),i.add(u),a&&f&&a.add(u)}}}function Nr(e,t,n){var r=0,o=!1;return{isLimitReached:function(){if(r===0&&setTimeout(function(){r=0},M),r+=1,r<=t||o)return o=!1,!1;if(r===t+1){o=!0;try{n({message:"Reached max number of ".concat(e,"s by minute: ").concat(t),source:S.AGENT,startClocks:ne()})}finally{o=!1}}return!0}}}var _e,je=new WeakMap;function Mr(){return _e||(_e=Ur()),_e}function Ur(){var e=new T(function(){var t=G(XMLHttpRequest.prototype,"open",{before:Pr}).stop,n=G(XMLHttpRequest.prototype,"send",{before:function(){Dr.call(this,e)}}).stop,r=G(XMLHttpRequest.prototype,"abort",{before:Fr}).stop;return function(){t(),n(),r()}});return e}function Pr(e,t){je.set(this,{state:"open",method:e,url:Me(String(t))})}function Dr(e){var t=this,n=je.get(this);if(n){var r=n;r.state="start",r.startTime=Z(),r.startClocks=ne(),r.isAborted=!1,r.xhr=this;var o=!1,i=G(this,"onreadystatechange",{before:function(){this.readyState===XMLHttpRequest.DONE&&a()}}).stop,a=l(function(){if(t.removeEventListener("loadend",a),i(),!o){o=!0;var s=n;s.state="complete",s.duration=en(r.startClocks.timeStamp,x()),s.status=t.status,e.notify(Dt(s))}});this.addEventListener("loadend",a),e.notify(r)}}function Fr(){var e=je.get(this);e&&(e.isAborted=!0)}var Oe;function jr(){return Oe||(Oe=Gr()),Oe}function Gr(){var e=new T(function(){if(window.fetch){var t=ut(window,"fetch",function(n){return function(r,o){var i,a=N(Hr,null,[e,r,o]);return a?(i=n.call(this,a.input,a.init),N(qr,null,[e,i,a])):i=n.call(this,r,o),i}}).stop;return t}});return e}function Hr(e,t,n){var r=n&&n.method||typeof t=="object"&&t.method||"GET",o=Me(typeof t=="object"&&t.url||t),i=ne(),a={state:"start",init:n,input:t,method:r,startClocks:i,url:o};return e.notify(a),a}function qr(e,t,n){var r=function(o){var i=n;i.state="resolve","stack"in o||o instanceof Error?(i.status=0,i.isAborted=o instanceof DOMException&&o.code===DOMException.ABORT_ERR,i.error=o):"status"in o&&(i.response=o,i.responseType=o.type,i.status=o.status,i.isAborted=!1),e.notify(i)};t.then(l(r),l(r))}function Kr(){var e=new T(function(){var t=pe(document,"visibilitychange",function(){document.visibilityState==="hidden"&&e.notify({reason:"visibility_hidden"})},{capture:!0}).stop,n=pe(window,"beforeunload",function(){e.notify({reason:"before_unload"})}).stop;return function(){t(),n()}});return e}var Re={};function Yr(e){var t=e.map(function(n){return Re[n]||(Re[n]=zr(n)),Re[n]});return ft.apply(void 0,t)}function zr(e){var t=new T(function(){var n=console[e];return console[e]=function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];n.apply(console,r);var i=Un();N(function(){t.notify(Wr(r,e,i))})},function(){console[e]=n}});return t}function Wr(e,t,n){var r=e.map(function(a){return Vr(a)}).join(" "),o;if(t===C.error){var i=Ft(e,function(a){return a instanceof Error});o=i?U(I(i)):void 0,r="console error: ".concat(r)}return{api:t,message:r,stack:o,handlingStack:n}}function Vr(e){return typeof e=="string"?e:e instanceof Error?ct(I(e)):be(e,void 0,2)}var Xr=500,Jr=function(){function e(){this.buffer=[]}return e.prototype.add=function(t){var n=this.buffer.push(t);n>Xr&&this.buffer.splice(0,1)},e.prototype.drain=function(){this.buffer.forEach(function(t){return t()}),this.buffer.length=0},e}();function Be(){var e={};return{get:function(){return e},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},set:function(t){e=t},getContext:function(){return j(e)},setContext:function(t){e=j(t)},setContextProperty:function(t,n){e[t]=j(n)},removeContextProperty:function(t){delete e[t]},clearContext:function(){e={}}}}function $r(e,t,n){var r=e.getReader(),o=[],i=0;a();function a(){r.read().then(l(function(u){if(u.done){s();return}n.collectStreamBody&&o.push(u.value),i+=u.value.length,i>n.bytesLimit?s():a()}),l(function(u){return t(u)}))}function s(){r.cancel().catch(ge);var u,f;if(n.collectStreamBody){var v;if(o.length===1)v=o[0];else{v=new Uint8Array(i);var h=0;o.forEach(function(b){v.set(b,h),h+=b.length})}u=v.slice(0,n.bytesLimit),f=v.length>n.bytesLimit}t(void 0,u,f)}}var Qr="datadog-synthetics-public-id",Zr="datadog-synthetics-result-id",eo="datadog-synthetics-injects-rum";function xt(){return Boolean(window._DATADOG_SYNTHETICS_INJECTS_RUM||O(eo))}function to(){var e=window._DATADOG_SYNTHETICS_PUBLIC_ID||O(Qr);return typeof e=="string"?e:void 0}function no(){var e=window._DATADOG_SYNTHETICS_RESULT_ID||O(Zr);return typeof e=="string"?e:void 0}function We(e){var t=w({},e),n=["id","name","email"];return n.forEach(function(r){r in t&&(t[r]=String(t[r]))}),t}function ro(e){var t=rt(e)==="object";return t||y.error("Unsupported user:",e),t}var oo=32*$;function io(e){var t=gn(e),n=Ve(e.forwardConsoleLogs,Q(C),"Forward Console Logs"),r=Ve(e.forwardReports,Q(L),"Forward Reports");if(!(!t||!n||!r))return e.forwardErrorsToLogs&&!K(n,C.error)&&n.push(C.error),w({forwardErrorsToLogs:e.forwardErrorsToLogs!==!1,forwardConsoleLogs:n,forwardReports:r,requestErrorResponseLengthLimit:oo},t)}function Ve(e,t,n){if(e===void 0)return[];if(!(e==="all"||Array.isArray(e)&&e.every(function(r){return K(t,r)}))){y.error("".concat(n,' should be "all" or an array with allowed values "').concat(t.join('", "'),'"'));return}return e==="all"?t:Vt(e)}function ao(e){var t=yn(e);return w({forward_errors_to_logs:e.forwardErrorsToLogs,forward_console_logs:e.forwardConsoleLogs,forward_reports:e.forwardReports},t)}var so=globalThis&&globalThis.__decorate||function(e,t,n,r){var o=arguments.length,i=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i},g={debug:"debug",error:"error",info:"info",warn:"warn"},Ge={console:"console",http:"http",silent:"silent"},uo=Object.keys(g),Xe=function(){function e(t,n,r,o,i){r===void 0&&(r=Ge.http),o===void 0&&(o=g.debug),i===void 0&&(i={}),this.handleLogStrategy=t,this.handlerType=r,this.level=o,this.contextManager=Be(),this.contextManager.set(w({},i,n?{logger:{name:n}}:void 0))}return e.prototype.log=function(t,n,r){r===void 0&&(r=g.info),this.handleLogStrategy({message:t,context:j(n),status:r},this)},e.prototype.debug=function(t,n){this.log(t,n,g.debug)},e.prototype.info=function(t,n){this.log(t,n,g.info)},e.prototype.warn=function(t,n){this.log(t,n,g.warn)},e.prototype.error=function(t,n){var r={error:{origin:S.LOGGER}};this.log(t,me(r,n),g.error)},e.prototype.setContext=function(t){this.contextManager.set(t)},e.prototype.getContext=function(){return this.contextManager.get()},e.prototype.addContext=function(t,n){this.contextManager.add(t,n)},e.prototype.removeContext=function(t){this.contextManager.remove(t)},e.prototype.setHandler=function(t){this.handlerType=t},e.prototype.getHandler=function(){return this.handlerType},e.prototype.setLevel=function(t){this.level=t},e.prototype.getLevel=function(){return this.level},so([Mt],e.prototype,"log",null),e}();function co(e){var t=!1,n=Be(),r=Be(),o={},i=function(){},a=new Jr,s=function(c,p,m,E){m===void 0&&(m=j(v())),E===void 0&&(E=x()),a.add(function(){return s(c,p,m,E)})},u=function(){},f=new Xe(function(){for(var c=[],p=0;p<arguments.length;p++)c[p]=arguments[p];return s.apply(void 0,c)});function v(){return{view:{referrer:document.referrer,url:window.location.href},context:n.getContext(),user:r.getContext()}}return Fn({logger:f,init:l(function(c){var p;if(u=function(){return j(c)},he()&&(c=h(c)),!!b(c)){var m=io(c);m&&(p=e(c,m,v,f),s=p.handleLog,i=p.getInternalContext,a.drain(),t=!0)}}),getLoggerGlobalContext:l(n.get),getGlobalContext:l(n.getContext),setLoggerGlobalContext:l(n.set),setGlobalContext:l(n.setContext),addLoggerGlobalContext:l(n.add),setGlobalContextProperty:l(n.setContextProperty),removeLoggerGlobalContext:l(n.remove),removeGlobalContextProperty:l(n.removeContextProperty),clearGlobalContext:l(n.clearContext),createLogger:l(function(c,p){return p===void 0&&(p={}),o[c]=new Xe(function(){for(var m=[],E=0;E<arguments.length;E++)m[E]=arguments[E];return s.apply(void 0,m)},c,p.handler,p.level,p.context),o[c]}),getLogger:l(function(c){return o[c]}),getInitConfiguration:l(function(){return u()}),getInternalContext:l(function(c){return i(c)}),setUser:l(function(c){ro(c)&&r.setContext(We(c))}),getUser:l(r.getContext),setUserProperty:l(function(c,p){var m,E=We((m={},m[c]=p,m))[c];r.setContextProperty(c,E)}),removeUserProperty:l(r.removeContextProperty),clearUser:l(r.clearContext)});function h(c){return w({},c,{clientToken:"empty"})}function b(c){return t?(c.silentMultipleInit||y.error("DD_LOGS is already initialized."),!1):!0}}var fo="logs";function lo(e){var t=br(e.cookieOptions,fo,function(n){return po(e,n)});return{findTrackedSession:function(n){var r=t.findActiveSession(n);return r&&r.trackingType==="1"?{id:r.id}:void 0}}}function vo(e){var t=It(e)==="1",n=t?{}:void 0;return{findTrackedSession:function(){return n}}}function It(e){return xe(e.sessionSampleRate)?"1":"0"}function po(e,t){var n=ho(t)?t:It(e);return{trackingType:n,isTracked:n==="1"}}function ho(e){return e==="0"||e==="1"}var F,Je=(F={},F[g.debug]=0,F[g.info]=1,F[g.warn]=2,F[g.error]=3,F);function go(e){function t(n,r,o,i){var a=n.context;At(n.status,Ge.console,r)&&y(n.status,n.message,me(r.getContext(),a)),e.notify(0,{rawLogsEvent:{date:i||x(),message:n.message,status:n.status,origin:S.LOGGER},messageContext:a,savedCommonContext:o,logger:r})}return{handleLog:t}}function At(e,t,n){var r=n.getHandler(),o=Array.isArray(r)?r:[r];return Je[e]>=Je[n.getLevel()]&&K(o,t)}function bo(e,t,n,r,o,i){var a=uo.concat(["custom"]),s={};a.forEach(function(u){s[u]=Nr(u,t.eventRateLimiterThreshold,i)}),n.subscribe(0,function(u){var f,v,h,b=u.rawLogsEvent,c=u.messageContext,p=c===void 0?void 0:c,m=u.savedCommonContext,E=m===void 0?void 0:m,P=u.logger,d=P===void 0?o:P,_=tn(b.date),A=e.findTrackedSession(_);if(A){var k=E||r(),oe=me({service:t.service,session_id:A.id,usr:tt(k.user)?void 0:k.user,view:k.view},k.context,le(_),b,d.getContext(),p);!At(b.status,Ge.http,d)||((f=t.beforeSend)===null||f===void 0?void 0:f.call(t,oe))===!1||((v=oe.error)===null||v===void 0?void 0:v.origin)!==S.AGENT&&((h=s[oe.status])!==null&&h!==void 0?h:s.custom).isLimitReached()||n.notify(1,oe)}})}var $e=!1;function le(e){var t=window;if(xt()){var n=r(t.DD_RUM_SYNTHETICS);return!n&&!$e&&($e=!0,Jn("Logs sent before RUM is injected by the synthetics worker",{testId:to(),resultId:no()})),n}return r(t.DD_RUM);function r(o){if(o&&o.getInternalContext)return o.getInternalContext(e)}}var B,mo=(B={},B[C.log]=g.info,B[C.debug]=g.debug,B[C.info]=g.info,B[C.warn]=g.warn,B[C.error]=g.error,B);function yo(e,t){var n=Yr(e.forwardConsoleLogs).subscribe(function(r){t.notify(0,{rawLogsEvent:{date:x(),message:r.message,origin:S.CONSOLE,error:r.api===C.error?{origin:S.CONSOLE,stack:r.stack}:void 0,status:mo[r.api]}})});return{stop:function(){n.unsubscribe()}}}var Y,Eo=(Y={},Y[L.cspViolation]=g.error,Y[L.intervention]=g.error,Y[L.deprecation]=g.warn,Y);function So(e,t){var n=Gn(e.forwardReports).subscribe(function(r){var o=r.message,i=Eo[r.type],a;i===g.error?a={kind:r.subtype,origin:S.REPORT,stack:r.stack}:r.stack&&(o+=" Found in ".concat(Mn(r.stack))),t.notify(0,{rawLogsEvent:{date:x(),message:o,origin:S.REPORT,error:a,status:i}})});return{stop:function(){n.unsubscribe()}}}function Co(e,t){if(!e.forwardErrorsToLogs)return{stop:ge};var n=Mr().subscribe(function(i){i.state==="complete"&&o("xhr",i)}),r=jr().subscribe(function(i){i.state==="resolve"&&o("fetch",i)});function o(i,a){!e.isIntakeUrl(a.url)&&(Oo(a)||Ro(a))&&("xhr"in a?wo(a.xhr,e,s):a.response?_o(a.response,e,s):a.error&&To(a.error,e,s));function s(u){t.notify(0,{rawLogsEvent:{message:"".concat(Lo(i)," error ").concat(a.method," ").concat(a.url),date:a.startClocks.timeStamp,error:{origin:S.NETWORK,stack:u||"Failed to load"},http:{method:a.method,status_code:a.status,url:a.url},status:g.error,origin:S.NETWORK}})}}return{stop:function(){n.unsubscribe(),r.unsubscribe()}}}function wo(e,t,n){typeof e.response=="string"?n(He(e.response,t)):n(e.response)}function To(e,t,n){n(He(U(I(e)),t))}function _o(e,t,n){window.TextDecoder?e.body?xo(e.clone().body,t.requestErrorResponseLengthLimit,function(r,o){n(r?"Unable to retrieve response: ".concat(r):o)}):n():e.clone().text().then(l(function(r){return n(He(r,t))}),l(function(r){return n("Unable to retrieve response: ".concat(r))}))}function Oo(e){return e.status===0&&e.responseType!=="opaque"}function Ro(e){return e.status>=500}function He(e,t){return e.length>t.requestErrorResponseLengthLimit?"".concat(e.substring(0,t.requestErrorResponseLengthLimit),"..."):e}function Lo(e){return e==="xhr"?"XHR":"Fetch"}function xo(e,t,n){$r(e,function(r,o,i){if(r)n(r);else{var a=new TextDecoder().decode(o);i&&(a+="..."),n(void 0,a)}},{bytesLimit:t,collectStreamBody:!0})}function Io(e,t){if(!e.forwardErrorsToLogs)return{stop:ge};var n=new T,r=Dn(n).stop,o=n.subscribe(function(i){t.notify(0,{rawLogsEvent:{message:i.message,date:i.startClocks.timeStamp,error:{kind:i.type,origin:S.SOURCE,stack:i.stack},origin:S.SOURCE,status:g.error}})});return{stop:function(){r(),o.unsubscribe()}}}var Ao=function(){function e(){this.callbacks={}}return e.prototype.notify=function(t,n){var r=this.callbacks[t];r&&r.forEach(function(o){return o(n)})},e.prototype.subscribe=function(t,n){var r=this;return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(n),{unsubscribe:function(){r.callbacks[t]=r.callbacks[t].filter(function(o){return n!==o})}}},e}();function ko(e,t,n,r){var o,i=Lt(e,e.logsEndpointBuilder,n,r,(o=e.replica)===null||o===void 0?void 0:o.logsEndpointBuilder);t.subscribe(1,function(a){i.add(a)})}function Bo(e){var t=Fe();e.subscribe(1,function(n){t.send("log",n)})}function No(e){return{get:function(t){var n=e.findTrackedSession(t);if(n)return{session_id:n.id}}}}function Mo(e,t,n,r){var o=new Ao;o.subscribe(1,function(h){return vt("logs",h)});var i=function(h){return o.notify(0,{rawLogsEvent:{message:h.message,date:h.startClocks.timeStamp,error:{origin:S.AGENT},origin:S.AGENT,status:g.error}})},a=Kr(),s=Uo(t,i,a);s.setContextProvider(function(){var h,b,c,p,m,E;return{application:{id:(h=le())===null||h===void 0?void 0:h.application_id},session:{id:(b=f.findTrackedSession())===null||b===void 0?void 0:b.id},view:{id:(p=(c=le())===null||c===void 0?void 0:c.view)===null||p===void 0?void 0:p.id},action:{id:(E=(m=le())===null||m===void 0?void 0:m.user_action)===null||E===void 0?void 0:E.id}}}),Co(t,o),Io(t,o),yo(t,o),So(t,o);var u=go(o).handleLog,f=Xt(t.cookieOptions)&&!he()&&!xt()?lo(t):vo(t);bo(f,t,o,n,r,i),he()?Bo(o):ko(t,o,i,a),$n(ao(e));var v=No(f);return{handleLog:u,getInternalContext:v.get}}function Uo(e,t,n){var r,o=Vn("browser-logs-sdk",e);if(he()){var i=Fe();o.observable.subscribe(function(s){return i.send("internal_telemetry",s)})}else{var a=Lt(e,e.rumEndpointBuilder,t,n,(r=e.replica)===null||r===void 0?void 0:r.rumEndpointBuilder);o.observable.subscribe(function(s){return a.add(s,Xn(e))})}return o}var Po=co(Mo);jn(Ne(),"DD_LOGS",Po);const Do={PAGINATION_PREVIOUS_BUTTON_CLICKED:"pagination-previous-button-clicked",PAGINATION_NEXT_BUTTON_CLICKED:"pagination-next-button-clicked",SIDEBAR_ITEM_CLICKED:"sidebar-item-clicked",TABLE_REFRESH_BUTTON_CLICKED:"table-refresh-button-clicked",TABS_TAB_CHANGE:"tabs-tab-change",CREATE_MESH_CLICKED:"create-mesh-clicked",CREATE_DATA_PLANE_PROXY_CLICKED:"create-data-plane-proxy-clicked"};export{Do as a,Po as d};
