import{f as J,c as W,K as H,g as pe}from"./index-FZCiQto1.js";import{d as B,l as x,A as Q,I as C,o as l,c,m as n,f as o,t as s,q as e,e as a,N as _e,B as f,a3 as q,a as m,b as K,w as r,F as h,p as y,D as fe,E as ve,a6 as j,J as be,az as ze,aA as he,_ as ge}from"./index-ENpHoh_M.js";import{C as g}from"./CodeBlock-iElUnEkk.js";const ke={class:"form-step-title"},ye=n("span",{class:"form-step-number"},"1",-1),Ce={class:"instruction-list"},Ee={href:"https://helm.sh/docs/intro/install/"},Ke={class:"form-step-title"},Ve=n("span",{class:"form-step-number"},"2",-1),$e=n("p",null,"On your local machine, create a namespace in your Kubernetes cluster and pull down the kong Helm repo.",-1),Ie={class:"instruction-list"},we={class:"form-step-title"},Ne=n("span",{class:"form-step-number"},"3",-1),Te={class:"form-step-title"},Se=n("span",{class:"form-step-number"},"4",-1),Ze={class:"field-group-label mt-4"},Le={class:"mt-4"},Ae=B({__name:"ZoneCreateKubernetesInstructions",props:{zoneName:{type:String,required:!0},globalKdsAddress:{type:String,required:!0},zoneIngressEnabled:{type:Boolean,required:!0},zoneEgressEnabled:{type:Boolean,required:!0},token:{type:String,required:!0},base64EncodedToken:{type:String,required:!0}},setup(N){const{t}=x(),k=Q(),p=N,V=C(()=>t("zones.form.kubernetes.secret.createSecretCommand",{token:p.base64EncodedToken}).trim()),v=C(()=>{const b={zoneName:p.zoneName,globalKdsAddress:p.globalKdsAddress,zoneIngressEnabled:String(p.zoneIngressEnabled),zoneEgressEnabled:String(p.zoneEgressEnabled),controlPlaneId:typeof k.params.virtualControlPlaneId=="string"?k.params.virtualControlPlaneId:""};return t("zones.form.kubernetes.connectZone.config",b).trim()});return(b,$)=>(l(),c("div",null,[n("h3",ke,[ye,o(" "+s(e(t)("zones.form.kubernetes.prerequisites.title")),1)]),o(),n("ul",Ce,[n("li",null,[n("b",null,s(e(t)("zones.form.kubernetes.prerequisites.step1Label"))+s(p.zoneIngressEnabled?" "+e(t)("zones.form.kubernetes.prerequisites.step1LabelAddendum"):""),1),o(`:
        `+s(e(t)("zones.form.kubernetes.prerequisites.step1Description",{productName:e(t)("common.product.name")})),1)]),o(),n("li",null,[n("b",null,s(e(t)("zones.form.kubernetes.prerequisites.step2Label")),1),o(`:
        `+s(e(t)("zones.form.kubernetes.prerequisites.step2Description")),1)]),o(),n("li",null,[n("a",Ee,s(e(t)("zones.form.kubernetes.prerequisites.step3LinkTitle")),1),o(" "+s(e(t)("zones.form.kubernetes.prerequisites.step3Tail")),1)])]),o(),n("h3",Ke,[Ve,o(" "+s(e(t)("zones.form.kubernetes.helm.title")),1)]),o(),$e,o(),n("ol",Ie,[n("li",null,[n("b",null,s(e(t)("zones.form.kubernetes.helm.step1Description")),1),o(),a(g,{class:"mt-2",code:e(t)("zones.form.kubernetes.helm.step1Command"),language:"bash"},null,8,["code"])]),o(),n("li",null,[n("b",null,s(e(t)("zones.form.kubernetes.helm.step2Description")),1),o(),a(g,{class:"mt-2",code:e(t)("zones.form.kubernetes.helm.step2Command"),language:"bash"},null,8,["code"])]),o(),n("li",null,[n("b",null,s(e(t)("zones.form.kubernetes.helm.step3Description")),1),o(),a(g,{class:"mt-2",code:e(t)("zones.form.kubernetes.helm.step3Command"),language:"bash"},null,8,["code"])])]),o(),n("h3",we,[Ne,o(" "+s(e(t)("zones.form.kubernetes.secret.title")),1)]),o(),n("p",null,s(e(t)("zones.form.kubernetes.secret.createSecretDescription")),1),o(),a(g,{class:"mt-4",code:V.value,language:"bash"},null,8,["code"]),o(),n("h3",Te,[Se,o(" "+s(e(t)("zones.form.kubernetes.connectZone.title")),1)]),o(),n("p",null,s(e(t)("zones.form.kubernetes.connectZone.configDescription")),1),o(),n("span",Ze,s(e(t)("zones.form.kubernetes.connectZone.configFileName")),1),o(),a(g,{"data-testid":"zone-kubernetes-config",code:v.value,language:"yaml"},null,8,["code"]),o(),n("p",Le,s(e(t)("zones.form.kubernetes.connectZone.connectDescription")),1),o(),a(g,{class:"mt-4",code:e(t)("zones.form.kubernetes.connectZone.connectCommand").trim(),language:"bash"},null,8,["code"])]))}}),De={class:"form-step-title"},qe=n("span",{class:"form-step-number"},"1",-1),Be={class:"form-step-title"},xe=n("span",{class:"form-step-number"},"2",-1),Re={class:"field-group-label mt-4"},Ue={class:"mt-4"},Pe=B({__name:"ZoneCreateUniversalInstructions",props:{zoneName:{type:String,required:!0},globalKdsAddress:{type:String,required:!0},token:{type:String,required:!0}},setup(N){const{t}=x(),k=Q(),p=N,V=C(()=>t("zones.form.universal.saveToken.saveTokenCommand",{token:p.token}).trim()),v=C(()=>{const b={zoneName:p.zoneName,globalKdsAddress:p.globalKdsAddress,controlPlaneId:typeof k.params.virtualControlPlaneId=="string"?k.params.virtualControlPlaneId:""};return t("zones.form.universal.connectZone.config",b).trim()});return(b,$)=>(l(),c("div",null,[n("h3",De,[qe,o(" "+s(e(t)("zones.form.universal.saveToken.title")),1)]),o(),n("p",null,s(e(t)("zones.form.universal.saveToken.saveTokenDescription")),1),o(),a(g,{class:"mt-4",code:V.value,language:"bash"},null,8,["code"]),o(),n("h3",Be,[xe,o(" "+s(e(t)("zones.form.universal.connectZone.title")),1)]),o(),n("p",null,s(e(t)("zones.form.universal.connectZone.configDescription")),1),o(),n("span",Re,s(e(t)("zones.form.universal.connectZone.configFileName")),1),o(),a(g,{"data-testid":"zone-universal-config",class:"mt-4",code:v.value,language:"yaml"},null,8,["code"]),o(),n("p",Ue,s(e(t)("zones.form.universal.connectZone.connectDescription")),1),o(),a(g,{class:"mt-4",code:e(t)("zones.form.universal.connectZone.connectCommand").trim(),language:"bash"},null,8,["code"])]))}}),Oe={class:"form-wrapper"},Me={key:1},Fe={key:2},Xe={class:"form"},Ge={class:"form-header"},Je={class:"form-title"},We={class:"text-gradient"},He={key:0},je={key:0},Qe={class:"fact-list"},Ye={class:"form-section"},eo={class:"form-section__header"},oo={class:"form-section-title"},no={class:"form-section__content"},to={class:"form-section","data-testid":"connect-zone-instructions"},so={class:"form-section__header"},ao={class:"form-section-title"},lo={class:"form-section__content"},ro={class:"field-group-list"},io={class:"field-group"},co={class:"field-group-label"},uo={class:"radio-button-group"},mo={class:"field-group"},po={class:"field-group-label"},_o={class:"radio-button-group","data-testid":"ingress-input-switch"},fo={class:"field-group"},vo={class:"field-group-label"},bo={class:"radio-button-group","data-testid":"egress-input-switch"},zo={class:"form-section"},ho={class:"form-section__header"},go={class:"form-section-title"},ko={class:"form-section__content"},yo={class:"form-section"},Co={key:0,class:"form-section__header"},Eo={class:"form-section-title"},Ko={class:"form-section__content"},Vo={key:0},$o={class:"mt-2"},Io=B({__name:"ZoneCreateView",setup(N){const{t,tm:k}=x(),p=_e(),V=/^(?![-0-9])[a-z0-9-]{1,63}$/,v=f(null),b=f(!1),$=f(!1),_=f(null),T=f(null),Z=f(""),R=f(!1),Y=f(new Date),d=f(""),E=f("kubernetes"),L=f(!0),A=f(!0),I=C(()=>v.value!==null&&v.value.token?v.value.token:""),ee=C(()=>I.value!==""?window.btoa(I.value):""),oe=C(()=>d.value===""||b.value||v.value!==null),D=C(()=>{if(T.value!==null)return T.value;if(_.value instanceof q){const z=_.value.invalidParameters.find(u=>u.field==="name");if(z!==void 0)return z.reason}return null});async function ne(){b.value=!0,_.value=null,Z.value="";try{if(!U(d.value))return;v.value=await p.createZone({name:d.value})}catch(z){z instanceof Error?(Z.value=d.value,_.value=z):console.error(z)}finally{b.value=!1}}function U(z){const u=V.test(z);return u?T.value=null:T.value=t("zones.create.invalidNameError"),u}function P(){$.value=!$.value}function te(){R.value=!0}return(z,u)=>{const se=m("RouteTitle"),S=m("KButton"),ae=m("KAlert"),le=m("KLabel"),re=m("KInput"),O=m("KRadio"),M=m("KInputSwitch"),F=m("DataSource"),ie=m("KEmptyState"),ce=m("KCard"),ue=m("KModal"),de=m("AppView"),me=m("RouteView");return l(),K(me,{name:"zone-create-view",attrs:{class:"is-fullscreen"}},{default:r(({route:X,id:G})=>[a(de,{fullscreen:!0,breadcrumbs:[]},{title:r(()=>[n("h1",null,[a(se,{title:e(t)("zones.routes.create.title")},null,8,["title"])])]),actions:r(()=>[a(S,{appearance:"tertiary","data-testid":"exit-button",onClick:()=>{I.value===""||R.value?X.back({name:"zone-cp-list-view"}):P()}},{default:r(()=>[o(s(e(t)("zones.form.exit")),1)]),_:2},1032,["onClick"])]),default:r(()=>[o(),o(),n("div",Oe,[_.value!==null?(l(),K(ae,{key:0,appearance:"danger",class:"mb-4","dismiss-type":"icon","data-testid":"create-zone-error"},{alertMessage:r(()=>[_.value instanceof e(q)&&[409,500].includes(_.value.status)?(l(),c(h,{key:0},[n("p",null,s(e(t)(`zones.create.status_error.${_.value.status}.title`,{name:Z.value})),1),o(),n("p",null,s(e(t)(`zones.create.status_error.${_.value.status}.description`)),1)],64)):_.value instanceof e(q)?(l(),c("p",Me,s(e(t)("common.error_state.api_error",{status:_.value.status,title:_.value.detail})),1)):(l(),c("p",Fe,s(e(t)("common.error_state.default_error")),1))]),_:1})):y("",!0),o(),a(ce,{class:"form-card"},{default:r(()=>[n("div",Xe,[n("div",Ge,[n("div",null,[n("h1",Je,[n("span",We,s(e(t)("zones.form.title")),1)]),o(),e(t)("zones.form.description")!==" "?(l(),c("p",He,s(e(t)("zones.form.description")),1)):y("",!0)]),o(),e(k)("zones.form.facts").length>0?(l(),c("div",je,[n("ul",Qe,[(l(!0),c(h,null,ve(e(k)("zones.form.facts"),(i,w)=>(l(),c("li",{key:w,class:"fact-list__item"},[a(e(fe),{color:e(J)},null,8,["color"]),o(" "+s(i),1)]))),128))])])):y("",!0)]),o(),n("div",Ye,[n("div",eo,[n("h2",oo,s(e(t)("zones.form.section.name.title")),1),o(),n("p",null,s(e(t)("zones.form.section.name.description")),1)]),o(),n("div",no,[n("div",null,[a(le,{for:G,required:"","tooltip-attributes":{placement:"right"}},{tooltip:r(()=>[o(s(e(t)("zones.form.name_tooltip")),1)]),default:r(()=>[o(s(e(t)("zones.form.nameLabel"))+" ",1)]),_:2},1032,["for"]),o(),a(re,{id:G,modelValue:d.value,"onUpdate:modelValue":u[0]||(u[0]=i=>d.value=i),type:"text",name:"zone-name","data-testid":"name-input","data-test-error-type":D.value!==null?"invalid-dns-name":void 0,error:D.value!==null,"error-message":D.value??void 0,disabled:v.value!==null,onBlur:u[1]||(u[1]=i=>U(d.value))},null,8,["id","modelValue","data-test-error-type","error","error-message","disabled"])]),o(),a(S,{appearance:"primary",class:"mt-4",disabled:oe.value,"data-testid":"create-zone-button",onClick:ne},{default:r(()=>[b.value?(l(),K(e(j),{key:0,color:e(W),size:e(H)},null,8,["color","size"])):(l(),K(e(be),{key:1,size:e(H)},null,8,["size"])),o(" "+s(e(t)("zones.form.createZoneButtonLabel")),1)]),_:1},8,["disabled"])])]),o(),v.value!==null?(l(),c(h,{key:0},[n("div",to,[n("div",so,[n("h2",ao,s(e(t)("zones.form.section.configuration.title")),1),o(),n("p",null,s(e(t)("zones.form.section.configuration.description")),1)]),o(),n("div",lo,[n("div",ro,[n("div",io,[n("span",co,s(e(t)("zones.form.environmentLabel"))+` *
                      `,1),o(),n("div",uo,[a(O,{modelValue:E.value,"onUpdate:modelValue":u[2]||(u[2]=i=>E.value=i),"selected-value":"universal",name:"zone-environment","data-testid":"environment-universal-radio-button"},{default:r(()=>[o(s(e(t)("zones.form.universalLabel")),1)]),_:1},8,["modelValue"]),o(),a(O,{modelValue:E.value,"onUpdate:modelValue":u[3]||(u[3]=i=>E.value=i),"selected-value":"kubernetes",name:"zone-environment","data-testid":"environment-kubernetes-radio-button"},{default:r(()=>[o(s(e(t)("zones.form.kubernetesLabel")),1)]),_:1},8,["modelValue"])])]),o(),E.value==="kubernetes"?(l(),c(h,{key:0},[n("div",mo,[n("span",po,s(e(t)("zones.form.zoneIngressLabel"))+` *
                        `,1),o(),n("div",_o,[a(M,{modelValue:L.value,"onUpdate:modelValue":u[4]||(u[4]=i=>L.value=i)},{label:r(()=>[o(s(e(t)("zones.form.zoneIngressEnabledLabel")),1)]),_:1},8,["modelValue"])])]),o(),n("div",fo,[n("span",vo,s(e(t)("zones.form.zoneEgressLabel"))+` *
                        `,1),o(),n("div",bo,[a(M,{modelValue:A.value,"onUpdate:modelValue":u[5]||(u[5]=i=>A.value=i)},{label:r(()=>[o(s(e(t)("zones.form.zoneEgressEnabledLabel")),1)]),_:1},8,["modelValue"])])])],64)):y("",!0)])])]),o(),n("div",zo,[n("div",ho,[n("h2",go,s(e(t)("zones.form.section.connect_zone.title")),1),o(),n("p",null,s(e(t)("zones.form.section.connect_zone.description")),1)]),o(),n("div",ko,[a(F,{src:"/control-plane/addresses"},{default:r(({data:i})=>[typeof i<"u"?(l(),c(h,{key:0},[E.value==="universal"?(l(),K(Pe,{key:0,"zone-name":d.value,token:I.value,"global-kds-address":i.kds},null,8,["zone-name","token","global-kds-address"])):(l(),K(Ae,{key:1,"zone-name":d.value,"zone-ingress-enabled":L.value,"zone-egress-enabled":A.value,token:I.value,"base64-encoded-token":ee.value,"global-kds-address":i.kds},null,8,["zone-name","zone-ingress-enabled","zone-egress-enabled","token","base64-encoded-token","global-kds-address"]))],64)):y("",!0)]),_:1})])]),o(),n("div",yo,[a(F,{src:`/zone-cps/online/${d.value}?no-cache=${Y.value}`,onChange:te},{default:r(({data:i,error:w})=>[w?y("",!0):(l(),c("div",Co,[n("h2",Eo,s(e(t)("zones.form.section.scanner.title")),1),o(),n("p",null,s(e(t)("zones.form.section.scanner.description")),1)])),o(),n("div",Ko,[a(ie,{"cta-is-hidden":""},{title:r(()=>[w?(l(),c(h,{key:0},[a(e(ze),{"data-testid":"error",display:"inline-block",color:e(pe)},null,8,["color"]),o(),n("h3",null,s(e(t)("zones.form.scan.errorTitle")),1)],64)):typeof i>"u"?(l(),c(h,{key:1},[a(e(j),{"data-testid":"waiting",display:"inline-block",color:e(W)},null,8,["color"]),o(" "+s(e(t)("zones.form.scan.waitTitle")),1)],64)):(l(),c(h,{key:2},[a(e(he),{"data-testid":"connected",display:"inline-block",color:e(J)},null,8,["color"]),o(" "+s(e(t)("zones.form.scan.completeTitle")),1)],64))]),message:r(()=>[w?(l(),c("p",Vo,s(e(t)("zones.form.scan.errorDescription")),1)):typeof i<"u"?(l(),c(h,{key:1},[n("p",null,s(e(t)("zones.form.scan.completeDescription",{name:d.value})),1),o(),n("p",$o,[a(S,{appearance:"primary",to:{name:"zone-cp-detail-view",params:{zone:d.value}}},{default:r(()=>[o(s(e(t)("zones.form.scan.completeButtonLabel",{name:d.value})),1)]),_:1},8,["to"])])],64)):y("",!0)]),_:2},1024)])]),_:1},8,["src"])])],64)):y("",!0)])]),_:2},1024)]),o(),a(ue,{visible:$.value,title:e(t)("zones.form.confirm_modal.title"),"data-testid":"confirm-exit-modal",onCancel:P,onProceed:i=>X.replace({name:"zone-cp-list-view"})},{"footer-actions":r(()=>[a(S,{appearance:"primary",to:{name:"zone-cp-list-view"},"data-testid":"confirm-exit-button"},{default:r(()=>[o(s(e(t)("zones.form.confirm_modal.action_button")),1)]),_:1})]),default:r(()=>[o(s(e(t)("zones.form.confirm_modal.body"))+" ",1)]),_:2},1032,["visible","title","onProceed"])]),_:2},1024)]),_:1})}}}),So=ge(Io,[["__scopeId","data-v-c90fd086"]]);export{So as default};
