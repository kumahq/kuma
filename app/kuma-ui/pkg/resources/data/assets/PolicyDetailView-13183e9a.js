import{d as E,u as N,r as m,c as d,G as T,o as e,j as y,b as o,w as r,i as V,t as v,g as _,F as x,q as C,h,f as L}from"./index-9446a80a.js";import{_ as $}from"./PolicyConnections.vue_vue_type_script_setup_true_lang-ad074857.js";import{D as A,a as S}from"./DefinitionListItem-ff5ef3cf.js";import{_ as F}from"./EmptyBlock.vue_vue_type_script_setup_true_lang-6f33c42a.js";import{E as j}from"./ErrorBlock-95d72981.js";import{_ as q}from"./LoadingBlock.vue_vue_type_script_setup_true_lang-57553418.js";import{T as G}from"./TabsWidget-b87682a9.js";import{_ as H}from"./YamlView.vue_vue_type_script_setup_true_lang-0e3a83c0.js";import{u as I}from"./store-151b9d07.js";import{u as K}from"./index-8803a3d4.js";import"./StatusInfo.vue_vue_type_script_setup_true_lang-fbb95771.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./kongponents.es-086743bd.js";import"./datadogLogEvents-302eea7b.js";import"./QueryParameter-70743f73.js";import"./CodeBlock.vue_vue_type_style_index_0_lang-84f822cd.js";import"./toYaml-4e00099e.js";const O={class:"policy-details kcard-border"},R={class:"entity-heading","data-testid":"policy-single-entity"},ne=E({__name:"PolicyDetailView",props:{mesh:{},policyPath:{},policyName:{}},setup(k){const p=k,g=K(),w=N(),P=I(),b=[{hash:"#overview",title:"Overview"},{hash:"#affected-dpps",title:"Affected DPPs"}],t=m(null),u=m(!0),i=m(null),l=d(()=>{if(t.value===null)return null;const{type:n,name:c,mesh:s}=t.value;return{type:n,name:c,mesh:s}}),f=d(()=>t.value!==null?T(t.value):null);D();function D(){P.dispatch("updatePageTitle",w.params.policy),B(p)}async function B({mesh:n,policyPath:c,policyName:s}){u.value=!0,i.value=null,t.value=null;try{t.value=await g.getSinglePolicyEntity({mesh:n,path:c,name:s})}catch(a){a instanceof Error?i.value=a:console.error(a)}finally{u.value=!1}}return(n,c)=>(e(),y("div",O,[u.value?(e(),o(q,{key:0})):i.value!==null?(e(),o(j,{key:1,error:i.value},null,8,["error"])):l.value===null?(e(),o(F,{key:2})):(e(),o(G,{key:3,tabs:b},{tabHeader:r(()=>[V("h1",R,v(l.value.name),1)]),overview:r(()=>[_(A,null,{default:r(()=>[(e(!0),y(x,null,C(l.value,(s,a)=>(e(),o(S,{key:a,term:a},{default:r(()=>[h(v(s),1)]),_:2},1032,["term"]))),128))]),_:1}),h(),f.value!==null?(e(),o(H,{key:0,id:"code-block-policy",class:"mt-4",content:f.value,"is-searchable":""},null,8,["content"])):L("",!0)]),"affected-dpps":r(()=>[_($,{mesh:l.value.mesh,"policy-name":l.value.name,"policy-path":p.policyPath},null,8,["mesh","policy-name","policy-path"])]),_:1}))]))}});export{ne as default};
