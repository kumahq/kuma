import{d as C,u as N,r as d,c as y,G as V,x as E,o as e,j as k,b as l,w as a,i as L,h as m,t as v,g as p,F as $,q as A,f as S}from"./index-7c362181.js";import{_ as F}from"./PolicyConnections.vue_vue_type_script_setup_true_lang-10668c77.js";import{T as R,D as W,a as j}from"./TextWithCopyButton-28c506a3.js";import{_ as q}from"./EmptyBlock.vue_vue_type_script_setup_true_lang-6507ce20.js";import{E as G}from"./ErrorBlock-41d3ccd4.js";import{_ as H}from"./LoadingBlock.vue_vue_type_script_setup_true_lang-b7beddaa.js";import{T as I}from"./TabsWidget-72787dfe.js";import{_ as K}from"./YamlView.vue_vue_type_script_setup_true_lang-50a2869f.js";import{u as O}from"./store-72ab29d4.js";import{u as z}from"./index-efbce9eb.js";import"./StatusInfo.vue_vue_type_script_setup_true_lang-6ef0b459.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./kongponents.es-414449e8.js";import"./datadogLogEvents-302eea7b.js";import"./QueryParameter-70743f73.js";import"./CodeBlock.vue_vue_type_style_index_0_lang-c645bc0d.js";import"./toYaml-4e00099e.js";const J={class:"policy-details kcard-border"},M={class:"entity-heading","data-testid":"policy-single-entity"},pe=C({__name:"PolicyDetailView",props:{mesh:{},policyPath:{},policyName:{}},setup(g){const s=g,w=z(),P=N(),x=O(),b=[{hash:"#overview",title:"Overview"},{hash:"#affected-dpps",title:"Affected DPPs"}],o=d(null),f=d(!0),n=d(null),D=y(()=>({name:"policy-detail-view",params:{mesh:s.mesh,policy:s.policyName,policyPath:s.policyPath}})),t=y(()=>{if(o.value===null)return null;const{type:c,name:u,mesh:i}=o.value;return{type:c,name:u,mesh:i}}),_=y(()=>o.value!==null?V(o.value):null);T();function T(){x.dispatch("updatePageTitle",P.params.policy),B(s)}async function B({mesh:c,policyPath:u,policyName:i}){f.value=!0,n.value=null,o.value=null;try{o.value=await w.getSinglePolicyEntity({mesh:c,path:u,name:i})}catch(r){r instanceof Error?n.value=r:console.error(r)}finally{f.value=!1}}return(c,u)=>{const i=E("router-link");return e(),k("div",J,[f.value?(e(),l(H,{key:0})):n.value!==null?(e(),l(G,{key:1,error:n.value},null,8,["error"])):t.value===null?(e(),l(q,{key:2})):(e(),l(I,{key:3,tabs:b},{tabHeader:a(()=>[L("h1",M,[m(v(t.value.type)+`:

          `,1),p(R,{text:t.value.name},{default:a(()=>[p(i,{to:D.value},{default:a(()=>[m(v(t.value.name),1)]),_:1},8,["to"])]),_:1},8,["text"])])]),overview:a(()=>[p(W,null,{default:a(()=>[(e(!0),k($,null,A(t.value,(r,h)=>(e(),l(j,{key:h,term:h},{default:a(()=>[m(v(r),1)]),_:2},1032,["term"]))),128))]),_:1}),m(),_.value!==null?(e(),l(K,{key:0,id:"code-block-policy",class:"mt-4",content:_.value,"is-searchable":""},null,8,["content"])):S("",!0)]),"affected-dpps":a(()=>[p(F,{mesh:t.value.mesh,"policy-name":t.value.name,"policy-path":s.policyPath},null,8,["mesh","policy-name","policy-path"])]),_:1}))])}}});export{pe as default};
