import{d as N,r as t,c as k,q as x,i as q,s as D,o as u,h as c,e as f,w as h,g as o,f as p,W as T,a5 as L,F as P,l as S,t as V,u as B}from"./runtime-dom.esm-bundler-9284044f.js";import{_ as F}from"./LabelList.vue_vue_type_style_index_0_lang-8d6c26c5.js";import{u as b}from"./index-86d1ef67.js";const A=o("h4",null,"Dataplanes",-1),K=N({__name:"PolicyConnections",props:{mesh:{type:String,required:!0},policyType:{type:String,required:!0},policyName:{type:String,required:!0}},setup(v){const n=v,_=b(),d=t(!1),l=t(!0),r=t(!1),m=t([]),i=t(""),g=k(()=>{const s=i.value.toLowerCase();return m.value.filter(({dataplane:e})=>e.name.toLowerCase().includes(s))});x(()=>n.policyName,function(){y()}),q(function(){y()});async function y(){r.value=!1,l.value=!0;try{const{items:s,total:e}=await _.getPolicyConnections({mesh:n.mesh,policyType:n.policyType,policyName:n.policyName});d.value=e>0,m.value=s??[]}catch{r.value=!0}finally{l.value=!1}}return(s,e)=>{const w=D("router-link");return u(),c("div",null,[f(F,{"has-error":r.value,"is-loading":l.value,"is-empty":!d.value},{default:h(()=>[o("ul",null,[o("li",null,[A,p(),T(o("input",{id:"dataplane-search","onUpdate:modelValue":e[0]||(e[0]=a=>i.value=a),type:"text",class:"k-input mb-4",placeholder:"Filter by name",required:"","data-testid":"dataplane-search-input"},null,512),[[L,i.value]]),p(),(u(!0),c(P,null,S(B(g),(a,C)=>(u(),c("p",{key:C,class:"my-1","data-testid":"dataplane-name"},[f(w,{to:{name:"data-plane-detail-view",params:{mesh:a.dataplane.mesh,dataPlane:a.dataplane.name}}},{default:h(()=>[p(V(a.dataplane.name),1)]),_:2},1032,["to"])]))),128))])])]),_:1},8,["has-error","is-loading","is-empty"])])}}});export{K as _};
