import{d as O,e as n,o,m as p,w as t,a,k as l,X as d,b as e,t as i,$ as A,p as f,c as s,l as B,a4 as T,H as m,J as g,a2 as j}from"./index-uDOFM6ir.js";import{a as F,A as I}from"./AccordionList-eCqNi2El.js";import{P as K}from"./PolicyTypeTag-jH-d3CDC.js";import{T as M}from"./TagList-DYv0PxS4.js";import{R as E}from"./RuleMatchers-OsQ19QN9.js";const H={class:"stack-with-borders"},J={key:0,class:"mt-6"},Y=l("h3",null,"Rules",-1),q={class:"mt-4"},G={class:"stack-with-borders"},Q=l("dt",null,`
                                Config
                              `,-1),U={class:"mt-2"},st=O({__name:"ConnectionInboundSummaryOverviewView",props:{data:{}},setup(P){const r=P;return(W,Z)=>{const C=n("XBadge"),V=n("XAction"),x=n("DataSource"),D=n("XCodeBlock"),$=n("KCard"),z=n("DataCollection"),X=n("DataLoader"),L=n("AppView"),N=n("RouteView");return o(),p(N,{params:{mesh:"",dataPlane:"",connection:""},name:"connection-inbound-summary-overview-view"},{default:t(({t:b,route:v,uri:R})=>[a(L,null,{default:t(()=>[l("div",H,[a(d,{layout:"horizontal"},{title:t(()=>[e(`
            Tags
          `)]),body:t(()=>[a(M,{tags:r.data.tags,alignment:"right"},null,8,["tags"])]),_:1}),e(),a(d,{layout:"horizontal"},{title:t(()=>[e(i(b("http.api.property.state")),1)]),body:t(()=>[a(C,{appearance:r.data.state==="Ready"?"success":"danger"},{default:t(()=>[e(i(b(`http.api.value.${r.data.state}`)),1)]),_:2},1032,["appearance"])]),_:2},1024),e(),a(d,{layout:"horizontal"},{title:t(()=>[e(`
            Protocol
          `)]),body:t(()=>[a(C,{appearance:"info"},{default:t(()=>[e(i(b(`http.api.value.${r.data.protocol}`)),1)]),_:2},1024)]),_:2},1024),e(),a(d,{layout:"horizontal"},{title:t(()=>[e(`
            Address
          `)]),body:t(()=>[a(A,{text:`${r.data.addressPort}`},null,8,["text"])]),_:1}),e(),r.data.serviceAddressPort.length>0?(o(),p(d,{key:0,layout:"horizontal"},{title:t(()=>[e(`
            Service Address
          `)]),body:t(()=>[a(A,{text:`${r.data.serviceAddressPort}`},null,8,["text"])]),_:1})):f("",!0)]),e(),r.data?(o(),s("div",J,[Y,e(),a(X,{src:R(B(T),"/meshes/:mesh/rules/for/:dataplane",{mesh:v.params.mesh,dataplane:v.params.dataPlane})},{default:t(({data:S})=>[a(z,{predicate:h=>h.ruleType==="from"&&Number(h.inbound.port)===Number(v.params.connection.split("_")[1]),items:S.rules},{default:t(({items:h})=>[l("div",q,[a(F,{"initially-open":0,"multiple-open":"",class:"stack"},{default:t(()=>[(o(!0),s(m,null,g(Object.groupBy(h,y=>y.type),(y,k)=>(o(),p($,{key:k},{default:t(()=>[a(I,null,{"accordion-header":t(()=>[a(K,{"policy-type":k},{default:t(()=>[e(i(k)+" ("+i(y.length)+`)
                        `,1)]),_:2},1032,["policy-type"])]),"accordion-content":t(()=>[l("div",G,[(o(!0),s(m,null,g(y,u=>(o(),s(m,{key:u},[u.matchers.length>0?(o(),p(d,{key:0,layout:"horizontal"},{title:t(()=>[e(`
                                From
                              `)]),body:t(()=>[l("p",null,[a(E,{items:u.matchers},null,8,["items"])])]),_:2},1024)):f("",!0),e(),u.origins.length>0?(o(),p(d,{key:1,layout:"horizontal"},{title:t(()=>[e(`
                                Origin Policies
                              `)]),body:t(()=>[a(x,{src:"/policy-types"},{default:t(({data:w})=>[(o(!0),s(m,null,g([Object.groupBy((w==null?void 0:w.policies)??[],_=>_.name)],_=>(o(),s("ul",{key:_},[(o(!0),s(m,null,g(u.origins,c=>(o(),s("li",{key:`${c.mesh}-${c.name}`},[_[c.type]?(o(),p(V,{key:0,to:{name:"policy-detail-view",params:{mesh:c.mesh,policyPath:_[c.type][0].path,policy:c.name}}},{default:t(()=>[e(i(c.name),1)]),_:2},1032,["to"])):(o(),s(m,{key:1},[e(i(c.name),1)],64))]))),128))]))),128))]),_:2},1024)]),_:2},1024)):f("",!0),e(),l("div",null,[Q,e(),l("dd",U,[l("div",null,[a(D,{code:B(j).stringify(u.raw),language:"yaml","show-copy-button":!1},null,8,["code"])])])])],64))),128))])]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)])]),_:2},1032,["predicate","items"])]),_:2},1032,["src"])])):f("",!0)]),_:2},1024)]),_:1})}}});export{st as default};
