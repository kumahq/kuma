import{K as B}from"./index-FZCiQto1.js";import{d as I,k as R,a as l,o as n,b as r,w as s,q as _,e as t,m as b,f as o,t as m,F as v,c as y,Q as L,C as D,p as w,$ as N,x as $,y as A,_ as E}from"./index-Eji0C-Q5.js";import{A as P}from"./AppCollection-vSD1k4Xv.js";import{E as K}from"./ErrorBlock-tZ_qs6LA.js";import{L as q}from"./LinkBox-QZRyVDbw.js";import{S as F}from"./StatusBadge-3mjZmol0.js";import{S as O}from"./SummaryView-Tnnps213.js";import{T as S}from"./TextWithCopyButton-CMioPVeB.js";import"./WarningIcon.vue_vue_type_script_setup_true_lang-xZZ4Psen.js";import"./CopyButton-ULULAS88.js";const Q=p=>($("data-v-b5a2efab"),p=p(),A(),p),U=Q(()=>b("b",null,"Internal",-1)),W=I({__name:"ServiceListView",setup(p){const f=R();return(Z,j)=>{const C=l("RouteTitle"),d=l("RouterLink"),x=l("KCard"),z=l("RouterView"),V=l("AppView"),g=l("DataSource"),T=l("RouteView");return n(),r(g,{src:"/me"},{default:s(({data:k})=>[k?(n(),r(T,{key:0,name:"service-list-view",params:{page:1,size:k.pageSize,mesh:"",service:""}},{default:s(({route:a,t:c})=>[t(g,{src:`/meshes/${a.params.mesh}/service-insights/of/${_(f)("use gateways ui")?"internal,gateway_builtin,gateway_delegated":"all"}?page=${a.params.page}&size=${a.params.size}`},{default:s(({data:i,error:u})=>[t(V,null,N({title:s(()=>[b("h2",null,[t(C,{title:c("services.routes.items.title")},null,8,["title"])])]),default:s(()=>[o(),o(),t(x,null,{default:s(()=>[u!==void 0?(n(),r(K,{key:0,error:u},null,8,["error"])):(n(),r(P,{key:1,class:"service-collection","data-testid":"service-collection","empty-state-message":c("common.emptyState.message",{type:"Services"}),headers:[{label:"Name",key:"name"},{label:"Type",key:"serviceType"},{label:"Address",key:"addressPort"},{label:"DP proxies (online / total)",key:"online"},{label:"Status",key:"status"},{label:"Details",key:"details",hideLabel:!0}],"page-number":a.params.page,"page-size":a.params.size,total:i==null?void 0:i.total,items:i==null?void 0:i.items,error:u,"is-selected-row":e=>e.name===a.params.service,onChange:a.update},{name:s(({row:e})=>[t(S,{text:e.name},{default:s(()=>[t(d,{to:{name:"service-detail-view",params:{mesh:e.mesh,service:e.name},query:{page:a.params.page,size:a.params.size}}},{default:s(()=>[o(m(e.name),1)]),_:2},1032,["to"])]),_:2},1032,["text"])]),serviceType:s(({row:e})=>[o(m(e.serviceType),1)]),addressPort:s(({row:e})=>[e.addressPort?(n(),r(S,{key:0,text:e.addressPort},null,8,["text"])):(n(),y(v,{key:1},[o(m(c("common.collection.none")),1)],64))]),online:s(({row:e})=>[e.dataplanes?(n(),y(v,{key:0},[o(m(e.dataplanes.online||0)+" / "+m(e.dataplanes.total||0),1)],64)):(n(),y(v,{key:1},[o(m(c("common.collection.none")),1)],64))]),status:s(({row:e})=>[t(F,{status:e.status},null,8,["status"])]),details:s(({row:e})=>[t(d,{class:"details-link","data-testid":"details-link",to:{name:"service-detail-view",params:{mesh:e.mesh,service:e.name}}},{default:s(()=>[o(m(c("common.collection.details_link"))+" ",1),t(_(L),{display:"inline-block",decorative:"",size:_(B)},null,8,["size"])]),_:2},1032,["to"])]),_:2},1032,["empty-state-message","headers","page-number","page-size","total","items","error","is-selected-row","onChange"]))]),_:2},1024),o(),a.params.service?(n(),r(z,{key:0},{default:s(e=>[t(O,{onClose:h=>a.replace({name:"service-list-view",params:{mesh:a.params.mesh},query:{page:a.params.page,size:a.params.size}})},{default:s(()=>[(n(),r(D(e.Component),{name:a.params.service,service:i==null?void 0:i.items.find(h=>h.name===a.params.service)},null,8,["name","service"]))]),_:2},1032,["onClose"])]),_:2},1024)):w("",!0)]),_:2},[_(f)("use gateways ui")?{name:"actions",fn:s(()=>[t(q,null,{default:s(()=>[t(d,{to:{name:"service-list-view",params:{mesh:a.params.mesh}}},{default:s(()=>[U]),_:2},1032,["to"]),o(),t(d,{to:{name:"external-service-list-view",params:{mesh:a.params.mesh}}},{default:s(()=>[o(`
                External
              `)]),_:2},1032,["to"])]),_:2},1024)]),key:"0"}:void 0]),1024)]),_:2},1032,["src"])]),_:2},1032,["params"])):w("",!0)]),_:1})}}}),oe=E(W,[["__scopeId","data-v-b5a2efab"]]);export{oe as default};
