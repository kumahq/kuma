import{d as k,f as h,y as E,i as T,o as a,j as v,l as e,e as t,a as g,w as C,t as o,u as c,A as I,C as A,D as B,E as $,cA as j,B as L,F as w,r as S,g as b,k as D,c as m}from"./index.60b0f0ac.js";import{T as N}from"./TagList.b3d2d71f.js";import{_ as q}from"./YamlView.vue_vue_type_script_setup_true_lang.152633f3.js";import{_ as P}from"./EmptyBlock.vue_vue_type_script_setup_true_lang.548da37c.js";import{E as V}from"./ErrorBlock.2ee4d08e.js";import{_ as O}from"./LoadingBlock.vue_vue_type_script_setup_true_lang.be7e4bb1.js";const y=n=>(A("data-v-a0e796c2"),n=n(),B(),n),F={class:"entity-summary entity-section-list"},M={class:"entity-title"},R=y(()=>e("span",{class:"visually-hidden"},"Service:",-1)),z={class:"definition"},U=y(()=>e("span",null,"Mesh:",-1)),G={class:"definition"},H=y(()=>e("span",null,"Address:",-1)),J={class:"definition"},K=y(()=>e("span",null,"TLS:",-1)),Q={key:0},W=y(()=>e("h4",null,"Tags",-1)),X=k({__name:"ExternalServiceDetails",props:{externalService:{type:Object,required:!0}},setup(n){const s=n,u=h(()=>({name:"external-service-detail-view",params:{service:s.externalService.name,mesh:s.externalService.mesh}})),i=h(()=>Object.entries(s.externalService.tags).map(([l,r])=>({label:l,value:r}))),d=h(()=>E(s.externalService));return(l,r)=>{var _;const p=T("router-link");return a(),v("div",F,[e("h3",M,[R,t(),g(p,{to:c(u)},{default:C(()=>[t(o(n.externalService.name),1)]),_:1},8,["to"])]),t(),e("section",null,[e("div",z,[U,t(),e("span",null,o(n.externalService.mesh),1)]),t(),e("div",G,[H,t(),e("span",null,o(s.externalService.networking.address),1)]),t(),e("div",J,[K,t(),e("span",null,o((_=s.externalService.networking.tls)!=null&&_.enabled?"Enabled":"Disabled"),1)])]),t(),c(i).length>0?(a(),v("section",Q,[W,t(),g(N,{tags:c(i)},null,8,["tags"])])):I("",!0),t(),g(q,{id:"code-block-external-service",content:c(d),"is-searchable":""},null,8,["content"])])}}});const Y=$(X,[["__scopeId","data-v-a0e796c2"]]),f=n=>(A("data-v-0a675b23"),n=n(),B(),n),Z={class:"entity-summary entity-section-list"},ee={class:"entity-title"},te=f(()=>e("span",{class:"visually-hidden"},"Service:",-1)),se={class:"definition"},ne=f(()=>e("span",null,"Mesh:",-1)),ae={class:"definition"},ie=f(()=>e("span",null,"Address:",-1)),ce={key:0,class:"definition"},re=f(()=>e("span",null,"DP proxies (online / total):",-1)),le=k({__name:"ServiceInsightDetails",props:{serviceInsight:{type:Object,required:!0}},setup(n){const s=n,u=h(()=>({name:s.serviceInsight.serviceType==="external"?"external-service-detail-view":"service-insight-detail-view",params:{service:s.serviceInsight.name,mesh:s.serviceInsight.mesh}})),i=h(()=>s.serviceInsight.status?j[s.serviceInsight.status]:null),d=h(()=>{var r;return s.serviceInsight.dataplanes?`${(r=s.serviceInsight.dataplanes.online)!=null?r:0} / ${s.serviceInsight.dataplanes.total}`:null}),l=h(()=>E(s.serviceInsight));return(r,p)=>{const _=T("router-link");return a(),v("div",Z,[e("h3",ee,[te,t(),g(_,{to:c(u)},{default:C(()=>[t(o(n.serviceInsight.name),1)]),_:1},8,["to"]),t(),c(i)!==null?(a(),v("div",{key:0,class:L(`status status--${c(i).appearance}`),"data-testid":"data-plane-status-badge"},o(c(i).title.toLowerCase()),3)):I("",!0)]),t(),e("section",null,[e("div",se,[ne,t(),e("span",null,o(n.serviceInsight.mesh),1)]),t(),e("div",ae,[ie,t(),e("span",null,[n.serviceInsight.addressPort?(a(),v(w,{key:0},[t(o(n.serviceInsight.addressPort),1)],64)):(a(),v(w,{key:1},[t("\u2014")],64))])]),t(),c(d)!==null?(a(),v("div",ce,[re,t(),e("span",null,o(c(d)),1)])):I("",!0)]),t(),g(q,{id:"code-block-service-insight",content:c(l),"is-searchable":""},null,8,["content"])])}}});const oe=$(le,[["__scopeId","data-v-0a675b23"]]),ue={class:"service-details"},de=k({__name:"ServiceDetails",props:{serviceType:{type:String,required:!1,default:"internal"},name:{type:String,required:!0},mesh:{type:String,required:!0}},setup(n){const s=n,u=S(null),i=S(null),d=S(!0),l=S(null);b(()=>s.mesh,function(){r()}),b(()=>s.name,function(){r()}),r();async function r(){d.value=!0,l.value=null,u.value=null,i.value=null;const p=s.mesh,_=s.name;try{s.serviceType==="external"?i.value=await D.getExternalService({mesh:p,name:_}):u.value=await D.getServiceInsight({mesh:p,name:_})}catch(x){x instanceof Error?l.value=x:console.error(x)}finally{d.value=!1}}return(p,_)=>(a(),v("div",ue,[d.value?(a(),m(O,{key:0})):l.value!==null?(a(),m(V,{key:1,error:l.value},null,8,["error"])):u.value!==null?(a(),m(oe,{key:2,"service-insight":u.value},null,8,["service-insight"])):i.value!==null?(a(),m(Y,{key:3,"external-service":i.value},null,8,["external-service"])):(a(),m(P,{key:4}))]))}});const ye=$(de,[["__scopeId","data-v-c0c06f69"]]);export{ye as S};
