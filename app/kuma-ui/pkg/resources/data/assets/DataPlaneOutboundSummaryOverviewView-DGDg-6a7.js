import{d as E,r as s,x as T,p as i,o as n,w as r,b as a,e,q as v,l as o,c as l,t as d,L as m,M as w,m as X,a9 as L,F as z,Y as Z,z as G}from"./index-CJOY8Jaq.js";import{A as H,a as J}from"./AccordionList-CJIuL0i3.js";const Q={key:0},U={key:1},W={colspan:"2"},ot=E({__name:"DataPlaneOutboundSummaryOverviewView",props:{data:{},routeName:{}},setup(D){const u=D;return(c,t)=>{const S=s("XBadge"),P=s("XCopyButton"),C=s("XTable"),$=s("XAction"),O=s("XCodeBlock"),B=s("XLayout"),M=s("XCard"),R=s("DataLoader"),g=s("DataSource"),F=s("AppView"),I=s("RouteView"),K=T("icon-start");return n(),i(I,{params:{mesh:"",proxy:"",connection:""},name:u.routeName},{default:r(({t:Y,route:x,uri:N})=>[a(F,null,{default:r(()=>[a(B,{type:"stack"},{default:r(()=>[a(C,{variant:"kv"},{default:r(()=>[o("tr",null,[t[0]||(t[0]=o("th",{scope:"row"},`
              Protocol
            `,-1)),t[1]||(t[1]=e()),o("td",null,[a(S,{appearance:"info"},{default:r(()=>[e(d(Y(`http.api.value.${u.data.protocol}`)),1)]),_:2},1024)])]),t[15]||(t[15]=e()),o("tr",null,[t[2]||(t[2]=o("th",{scope:"row"},`
              KRI
            `,-1)),t[3]||(t[3]=e()),o("td",null,[a(P,{text:u.data.kri},null,8,["text"])])]),t[16]||(t[16]=e()),(n(!0),l(m,null,w([X(L).fromString(u.data.kri)],p=>(n(),l(m,{key:typeof p},[o("tr",null,[t[4]||(t[4]=o("th",{scope:"row"},`
                Mesh
              `,-1)),t[5]||(t[5]=e()),o("td",null,d(p.mesh),1)]),t[12]||(t[12]=e()),p.zone.length>0?(n(),l("tr",Q,[t[6]||(t[6]=o("th",{scope:"row"},`
                Zone
              `,-1)),t[7]||(t[7]=e()),o("td",null,d(p.zone),1)])):v("",!0),t[13]||(t[13]=e()),p.namespace.length>0?(n(),l("tr",U,[t[8]||(t[8]=o("th",{scope:"row"},`
                Namespace
              `,-1)),t[9]||(t[9]=e()),o("td",null,d(p.namespace),1)])):v("",!0),t[14]||(t[14]=e()),o("tr",null,[t[10]||(t[10]=o("th",{scope:"row"},`
                Port
              `,-1)),t[11]||(t[11]=e()),o("td",null,d(`${u.data.port}${u.data.portName?` (${u.data.portName})`:""}`),1)])],64))),128))]),_:2},1024),t[25]||(t[25]=e()),u.data?(n(),i(B,{key:0,type:"stack",size:"small"},{default:r(()=>[t[23]||(t[23]=o("h3",null,"Policies",-1)),t[24]||(t[24]=e()),a(g,{src:N(X(z),"/policy-types",{})},{default:r(({data:p,error:_})=>[a(g,{src:N(X(z),"/meshes/:mesh/dataplanes/:name/policies/for/outbound/:kri",{mesh:x.params.mesh,name:x.params.proxy,kri:u.data.kri})},{default:r(({data:V,error:j})=>[a(R,{data:[p,V],errors:[_,j]},{default:r(()=>[(n(!0),l(m,null,w([Object.groupBy(p?.policyTypes??[],({name:y})=>y)],y=>(n(),i(H,{key:`${typeof y}`,"initially-open":0,"multiple-open":"",class:"stack","data-testid":"outbound-policies-rules"},{default:r(()=>[(n(!0),l(m,null,w(V?.policies||[],({conf:q,kind:f,origins:b})=>(n(),i(M,{key:f},{default:r(()=>[a(J,null,{"accordion-header":r(()=>[G((n(),l("span",null,[e(d(f),1)])),[[K,{name:f,size:"60",default:"policy"}]])]),"accordion-content":r(()=>[b.length>0?(n(),i(C,{key:0,variant:"kv"},{default:r(()=>[o("tr",null,[t[17]||(t[17]=o("th",{scope:"row"},`
                                  Origin policies
                                `,-1)),t[18]||(t[18]=e()),o("td",null,[o("ul",null,[(n(!0),l(m,null,w(b,k=>(n(),l("li",{key:k.kri},[(n(!0),l(m,null,w([X(L).fromString(k.kri)],A=>(n(),l(m,{key:typeof A},[y[f]?(n(),i($,{key:0,to:{name:"policy-detail-view",params:{mesh:A.mesh,policyPath:y[f][0].path,policy:k.kri}}},{default:r(()=>[e(d(k.kri),1)]),_:2},1032,["to"])):(n(),l(m,{key:1},[e(d(k.kri),1)],64))],64))),128))]))),128))])])]),t[21]||(t[21]=e()),o("tr",null,[o("td",W,[a(B,{type:"stack",size:"small"},{default:r(()=>[t[19]||(t[19]=o("span",null,"Config",-1)),t[20]||(t[20]=e()),a(O,{code:X(Z).stringify(q),language:"yaml","show-copy-button":!1},null,8,["code"])]),_:2},1024)])])]),_:2},1024)):v("",!0)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024))),128))]),_:2},1032,["data","errors"])]),_:2},1032,["src"])]),_:2},1032,["src"])]),_:2},1024)):v("",!0)]),_:2},1024)]),_:2},1024)]),_:1},8,["name"])}}});export{ot as default};
