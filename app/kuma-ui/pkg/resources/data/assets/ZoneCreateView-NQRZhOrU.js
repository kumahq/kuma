import{d as B,l as x,B as j,M as y,o as r,c as m,m as n,f as e,t as s,p as o,e as a,Q as pe,C as f,aw as D,a as d,b as h,w as l,F as K,q as C,G as _e,ax as H,H as fe,ay as J,az as W,K as Q,J as ve,E as be,aA as ze,_ as he}from"./index-i9Uphcre.js";import{C as g}from"./CodeBlock-3HK16lYA.js";const ge={class:"form-step-title"},ke=n("span",{class:"form-step-number"},"1",-1),ye={class:"instruction-list"},Ce={href:"https://helm.sh/docs/intro/install/"},Ee={class:"form-step-title"},Ke=n("span",{class:"form-step-number"},"2",-1),Ve=n("p",null,"On your local machine, create a namespace in your Kubernetes cluster and pull down the kong Helm repo.",-1),$e={class:"instruction-list"},we={class:"form-step-title"},Ie=n("span",{class:"form-step-number"},"3",-1),Ne={class:"form-step-title"},Se=n("span",{class:"form-step-number"},"4",-1),Ze={class:"field-group-label mt-4"},Te={class:"mt-4"},Le=B({__name:"ZoneCreateKubernetesInstructions",props:{zoneName:{type:String,required:!0},globalKdsAddress:{type:String,required:!0},zoneIngressEnabled:{type:Boolean,required:!0},zoneEgressEnabled:{type:Boolean,required:!0},token:{type:String,required:!0},base64EncodedToken:{type:String,required:!0}},setup(I){const{t}=x(),k=j(),p=I,V=y(()=>t("zones.form.kubernetes.secret.createSecretCommand",{token:p.base64EncodedToken}).trim()),v=y(()=>{const b={zoneName:p.zoneName,globalKdsAddress:p.globalKdsAddress,zoneIngressEnabled:String(p.zoneIngressEnabled),zoneEgressEnabled:String(p.zoneEgressEnabled),controlPlaneId:typeof k.params.virtualControlPlaneId=="string"?k.params.virtualControlPlaneId:""};return t("zones.form.kubernetes.connectZone.config",b).trim()});return(b,$)=>(r(),m("div",null,[n("h3",ge,[ke,e(" "+s(o(t)("zones.form.kubernetes.prerequisites.title")),1)]),e(),n("ul",ye,[n("li",null,[n("b",null,s(o(t)("zones.form.kubernetes.prerequisites.step1Label"))+s(p.zoneIngressEnabled?" "+o(t)("zones.form.kubernetes.prerequisites.step1LabelAddendum"):""),1),e(`:
        `+s(o(t)("zones.form.kubernetes.prerequisites.step1Description",{productName:o(t)("common.product.name")})),1)]),e(),n("li",null,[n("b",null,s(o(t)("zones.form.kubernetes.prerequisites.step2Label")),1),e(`:
        `+s(o(t)("zones.form.kubernetes.prerequisites.step2Description")),1)]),e(),n("li",null,[n("a",Ce,s(o(t)("zones.form.kubernetes.prerequisites.step3LinkTitle")),1),e(" "+s(o(t)("zones.form.kubernetes.prerequisites.step3Tail")),1)])]),e(),n("h3",Ee,[Ke,e(" "+s(o(t)("zones.form.kubernetes.helm.title")),1)]),e(),Ve,e(),n("ol",$e,[n("li",null,[n("b",null,s(o(t)("zones.form.kubernetes.helm.step1Description")),1),e(),a(g,{class:"mt-2",code:o(t)("zones.form.kubernetes.helm.step1Command"),language:"bash"},null,8,["code"])]),e(),n("li",null,[n("b",null,s(o(t)("zones.form.kubernetes.helm.step2Description")),1),e(),a(g,{class:"mt-2",code:o(t)("zones.form.kubernetes.helm.step2Command"),language:"bash"},null,8,["code"])]),e(),n("li",null,[n("b",null,s(o(t)("zones.form.kubernetes.helm.step3Description")),1),e(),a(g,{class:"mt-2",code:o(t)("zones.form.kubernetes.helm.step3Command"),language:"bash"},null,8,["code"])])]),e(),n("h3",we,[Ie,e(" "+s(o(t)("zones.form.kubernetes.secret.title")),1)]),e(),n("p",null,s(o(t)("zones.form.kubernetes.secret.createSecretDescription")),1),e(),a(g,{class:"mt-4",code:V.value,language:"bash"},null,8,["code"]),e(),n("h3",Ne,[Se,e(" "+s(o(t)("zones.form.kubernetes.connectZone.title")),1)]),e(),n("p",null,s(o(t)("zones.form.kubernetes.connectZone.configDescription")),1),e(),n("span",Ze,s(o(t)("zones.form.kubernetes.connectZone.configFileName")),1),e(),a(g,{"data-testid":"zone-kubernetes-config",code:v.value,language:"yaml"},null,8,["code"]),e(),n("p",Te,s(o(t)("zones.form.kubernetes.connectZone.connectDescription")),1),e(),a(g,{class:"mt-4",code:o(t)("zones.form.kubernetes.connectZone.connectCommand").trim(),language:"bash"},null,8,["code"])]))}}),qe={class:"form-step-title"},Ae=n("span",{class:"form-step-number"},"1",-1),De={class:"form-step-title"},Be=n("span",{class:"form-step-number"},"2",-1),xe={class:"field-group-label mt-4"},Ue={class:"mt-4"},Re=B({__name:"ZoneCreateUniversalInstructions",props:{zoneName:{type:String,required:!0},globalKdsAddress:{type:String,required:!0},token:{type:String,required:!0}},setup(I){const{t}=x(),k=j(),p=I,V=y(()=>t("zones.form.universal.saveToken.saveTokenCommand",{token:p.token}).trim()),v=y(()=>{const b={zoneName:p.zoneName,globalKdsAddress:p.globalKdsAddress,controlPlaneId:typeof k.params.virtualControlPlaneId=="string"?k.params.virtualControlPlaneId:""};return t("zones.form.universal.connectZone.config",b).trim()});return(b,$)=>(r(),m("div",null,[n("h3",qe,[Ae,e(" "+s(o(t)("zones.form.universal.saveToken.title")),1)]),e(),n("p",null,s(o(t)("zones.form.universal.saveToken.saveTokenDescription")),1),e(),a(g,{class:"mt-4",code:V.value,language:"bash"},null,8,["code"]),e(),n("h3",De,[Be,e(" "+s(o(t)("zones.form.universal.connectZone.title")),1)]),e(),n("p",null,s(o(t)("zones.form.universal.connectZone.configDescription")),1),e(),n("span",xe,s(o(t)("zones.form.universal.connectZone.configFileName")),1),e(),a(g,{"data-testid":"zone-universal-config",class:"mt-4",code:v.value,language:"yaml"},null,8,["code"]),e(),n("p",Ue,s(o(t)("zones.form.universal.connectZone.connectDescription")),1),e(),a(g,{class:"mt-4",code:o(t)("zones.form.universal.connectZone.connectCommand").trim(),language:"bash"},null,8,["code"])]))}}),Pe={class:"form-wrapper"},Me={key:1},Oe={key:2},Fe={class:"form"},Xe={class:"form-header"},Ge={class:"form-title"},He={class:"text-gradient"},Je={key:0},We={key:0},Qe={class:"fact-list"},je={class:"form-section"},Ye={class:"form-section__header"},eo={class:"form-section-title"},oo={class:"form-section__content"},no={class:"form-section","data-testid":"connect-zone-instructions"},to={class:"form-section__header"},so={class:"form-section-title"},ao={class:"form-section__content"},lo={class:"field-group-list"},ro={class:"field-group"},io={class:"field-group-label"},co={class:"radio-button-group"},uo={class:"field-group"},mo={class:"field-group-label"},po={class:"radio-button-group","data-testid":"ingress-input-switch"},_o={class:"field-group"},fo={class:"field-group-label"},vo={class:"radio-button-group","data-testid":"egress-input-switch"},bo={class:"form-section"},zo={class:"form-section__header"},ho={class:"form-section-title"},go={class:"form-section__content"},ko={class:"form-section"},yo={class:"form-section__header"},Co={class:"form-section-title"},Eo={class:"form-section__content"},Ko={class:"mt-2"},Vo=B({__name:"ZoneCreateView",setup(I){const{t,tm:k}=x(),p=pe(),V=/^(?![-0-9])[a-z0-9-]{1,63}$/,v=f(null),b=f(!1),$=f(!1),_=f(null),N=f(null),T=f(""),U=f(!1),Y=f(new Date),u=f(""),E=f("kubernetes"),L=f(!0),q=f(!0),w=y(()=>v.value!==null&&v.value.token?v.value.token:""),ee=y(()=>w.value!==""?window.btoa(w.value):""),oe=y(()=>u.value===""||b.value||v.value!==null),A=y(()=>{if(N.value!==null)return N.value;if(_.value instanceof D){const z=_.value.invalidParameters.find(c=>c.field==="name");if(z!==void 0)return z.reason}return null});async function ne(){b.value=!0,_.value=null,T.value="";try{if(!R(u.value))return;v.value=await p.createZone({name:u.value})}catch(z){z instanceof Error?(T.value=u.value,_.value=z):console.error(z)}finally{b.value=!1}}function R(z){const c=V.test(z);return c?N.value=null:N.value=t("zones.create.invalidNameError"),c}function P(){$.value=!$.value}function te(){U.value=!0}return(z,c)=>{const se=d("RouteTitle"),S=d("KButton"),ae=d("KAlert"),le=d("KLabel"),re=d("KInput"),M=d("KRadio"),O=d("KInputSwitch"),F=d("DataSource"),ie=d("KEmptyState"),ce=d("KCard"),ue=d("KModal"),de=d("AppView"),me=d("RouteView");return r(),h(me,{name:"zone-create-view",attrs:{class:"is-fullscreen"}},{default:l(({route:X,id:G})=>[a(de,{fullscreen:!0,breadcrumbs:[]},{title:l(()=>[n("h1",null,[a(se,{title:o(t)("zones.routes.create.title")},null,8,["title"])])]),actions:l(()=>[a(S,{appearance:"tertiary","data-testid":"exit-button",onClick:()=>{w.value===""||U.value?X.back({name:"zone-cp-list-view"}):P()}},{default:l(()=>[e(s(o(t)("zones.form.exit")),1)]),_:2},1032,["onClick"])]),default:l(()=>[e(),e(),n("div",Pe,[_.value!==null?(r(),h(ae,{key:0,appearance:"danger",class:"mb-4","data-testid":"create-zone-error"},{default:l(()=>[_.value instanceof o(D)&&[409,500].includes(_.value.status)?(r(),m(K,{key:0},[n("p",null,s(o(t)(`zones.create.status_error.${_.value.status}.title`,{name:T.value})),1),e(),n("p",null,s(o(t)(`zones.create.status_error.${_.value.status}.description`)),1)],64)):_.value instanceof o(D)?(r(),m("p",Me,s(o(t)("common.error_state.api_error",{status:_.value.status,title:_.value.detail})),1)):(r(),m("p",Oe,s(o(t)("common.error_state.default_error")),1))]),_:1})):C("",!0),e(),a(ce,{class:"form-card"},{default:l(()=>[n("div",Fe,[n("div",Xe,[n("div",null,[n("h1",Ge,[n("span",He,s(o(t)("zones.form.title")),1)]),e(),o(t)("zones.form.description")!==" "?(r(),m("p",Je,s(o(t)("zones.form.description")),1)):C("",!0)]),e(),o(k)("zones.form.facts").length>0?(r(),m("div",We,[n("ul",Qe,[(r(!0),m(K,null,fe(o(k)("zones.form.facts"),(i,Z)=>(r(),m("li",{key:Z,class:"fact-list__item"},[a(o(_e),{class:"fact-list__icon",color:o(H)},null,8,["color"]),e(" "+s(i),1)]))),128))])])):C("",!0)]),e(),n("div",je,[n("div",Ye,[n("h2",eo,s(o(t)("zones.form.section.name.title")),1),e(),n("p",null,s(o(t)("zones.form.section.name.description")),1)]),e(),n("div",oo,[n("div",null,[a(le,{for:G,required:"","tooltip-attributes":{placement:"right"}},{tooltip:l(()=>[e(s(o(t)("zones.form.name_tooltip")),1)]),default:l(()=>[e(s(o(t)("zones.form.nameLabel"))+" ",1)]),_:2},1032,["for"]),e(),a(re,{id:G,modelValue:u.value,"onUpdate:modelValue":c[0]||(c[0]=i=>u.value=i),type:"text",name:"zone-name","data-testid":"name-input","data-test-error-type":A.value!==null?"invalid-dns-name":void 0,error:A.value!==null,"error-message":A.value??void 0,disabled:v.value!==null,onBlur:c[1]||(c[1]=i=>R(u.value))},null,8,["id","modelValue","data-test-error-type","error","error-message","disabled"])]),e(),a(S,{appearance:"primary",class:"mt-4",disabled:oe.value,"data-testid":"create-zone-button",onClick:ne},{default:l(()=>[b.value?(r(),h(o(J),{key:0,color:o(W),size:o(Q)},null,8,["color","size"])):(r(),h(o(ve),{key:1,size:o(Q)},null,8,["size"])),e(" "+s(o(t)("zones.form.createZoneButtonLabel")),1)]),_:1},8,["disabled"])])]),e(),v.value!==null?(r(),m(K,{key:0},[n("div",no,[n("div",to,[n("h2",so,s(o(t)("zones.form.section.configuration.title")),1),e(),n("p",null,s(o(t)("zones.form.section.configuration.description")),1)]),e(),n("div",ao,[n("div",lo,[n("div",ro,[n("span",io,s(o(t)("zones.form.environmentLabel"))+` *
                      `,1),e(),n("div",co,[a(M,{modelValue:E.value,"onUpdate:modelValue":c[2]||(c[2]=i=>E.value=i),"selected-value":"universal",name:"zone-environment","data-testid":"environment-universal-radio-button"},{default:l(()=>[e(s(o(t)("zones.form.universalLabel")),1)]),_:1},8,["modelValue"]),e(),a(M,{modelValue:E.value,"onUpdate:modelValue":c[3]||(c[3]=i=>E.value=i),"selected-value":"kubernetes",name:"zone-environment","data-testid":"environment-kubernetes-radio-button"},{default:l(()=>[e(s(o(t)("zones.form.kubernetesLabel")),1)]),_:1},8,["modelValue"])])]),e(),E.value==="kubernetes"?(r(),m(K,{key:0},[n("div",uo,[n("span",mo,s(o(t)("zones.form.zoneIngressLabel"))+` *
                        `,1),e(),n("div",po,[a(O,{modelValue:L.value,"onUpdate:modelValue":c[4]||(c[4]=i=>L.value=i)},{label:l(()=>[e(s(o(t)("zones.form.zoneIngressEnabledLabel")),1)]),_:1},8,["modelValue"])])]),e(),n("div",_o,[n("span",fo,s(o(t)("zones.form.zoneEgressLabel"))+` *
                        `,1),e(),n("div",vo,[a(O,{modelValue:q.value,"onUpdate:modelValue":c[5]||(c[5]=i=>q.value=i)},{label:l(()=>[e(s(o(t)("zones.form.zoneEgressEnabledLabel")),1)]),_:1},8,["modelValue"])])])],64)):C("",!0)])])]),e(),n("div",bo,[n("div",zo,[n("h2",ho,s(o(t)("zones.form.section.connect_zone.title")),1),e(),n("p",null,s(o(t)("zones.form.section.connect_zone.description")),1)]),e(),n("div",go,[a(F,{src:"/control-plane/addresses"},{default:l(({data:i})=>[typeof i<"u"?(r(),m(K,{key:0},[E.value==="universal"?(r(),h(Re,{key:0,"zone-name":u.value,token:w.value,"global-kds-address":i.kds},null,8,["zone-name","token","global-kds-address"])):(r(),h(Le,{key:1,"zone-name":u.value,"zone-ingress-enabled":L.value,"zone-egress-enabled":q.value,token:w.value,"base64-encoded-token":ee.value,"global-kds-address":i.kds},null,8,["zone-name","zone-ingress-enabled","zone-egress-enabled","token","base64-encoded-token","global-kds-address"]))],64)):C("",!0)]),_:1})])]),e(),n("div",ko,[a(F,{src:`/zone-cps/online/${u.value}?no-cache=${Y.value}`,onChange:te},{default:l(({data:i,error:Z})=>[n("div",yo,[n("h2",Co,s(o(t)("zones.form.section.scanner.title")),1),e(),n("p",null,s(o(t)("zones.form.section.scanner.description")),1)]),e(),n("div",Eo,[Z?(r(),h(be,{key:0,error:Z,appearance:"danger","data-testid":"error"},null,8,["error"])):(r(),h(ie,{key:1},{icon:l(()=>[i===void 0?(r(),h(o(J),{key:0,"data-testid":"waiting",display:"inline-block",color:o(W)},null,8,["color"])):(r(),h(o(ze),{key:1,"data-testid":"connected",display:"inline-block",color:o(H)},null,8,["color"]))]),title:l(()=>[e(s(i===void 0?o(t)("zones.form.scan.waitTitle"):o(t)("zones.form.scan.completeTitle")),1)]),default:l(()=>[e(),e(),typeof i<"u"?(r(),m(K,{key:0},[n("p",null,s(o(t)("zones.form.scan.completeDescription",{name:u.value})),1),e(),n("p",Ko,[a(S,{appearance:"primary",to:{name:"zone-cp-detail-view",params:{zone:u.value}}},{default:l(()=>[e(s(o(t)("zones.form.scan.completeButtonLabel",{name:u.value})),1)]),_:1},8,["to"])])],64)):C("",!0)]),_:2},1024))])]),_:1},8,["src"])])],64)):C("",!0)])]),_:2},1024)]),e(),a(ue,{visible:$.value,title:o(t)("zones.form.confirm_modal.title"),"data-testid":"confirm-exit-modal",onCancel:P,onProceed:i=>X.replace({name:"zone-cp-list-view"})},{"footer-actions":l(()=>[a(S,{appearance:"primary",to:{name:"zone-cp-list-view"},"data-testid":"confirm-exit-button"},{default:l(()=>[e(s(o(t)("zones.form.confirm_modal.action_button")),1)]),_:1})]),default:l(()=>[e(s(o(t)("zones.form.confirm_modal.body"))+" ",1)]),_:2},1032,["visible","title","onProceed"])]),_:2},1024)]),_:1})}}}),Io=he(Vo,[["__scopeId","data-v-59f0d7b9"]]);export{Io as default};
