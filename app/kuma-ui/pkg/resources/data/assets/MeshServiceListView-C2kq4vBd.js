import{d as T,a,o as n,b as i,w as t,e as o,m as D,f as p,p as b,aI as d,T as x,t as S,E as k,q as c}from"./index-C7b3yb6_.js";import{A}from"./AppCollection-B1hRqkME.js";import{S as N}from"./SummaryView-BizXSFIO.js";const I=T({__name:"MeshServiceListView",setup(R){return(B,X)=>{const l=a("RouteTitle"),_=a("XTeleportTemplate"),u=a("XAction"),v=a("RouterView"),h=a("DataCollection"),f=a("DataLoader"),w=a("KCard"),g=a("AppView"),C=a("RouteView"),y=a("DataSource");return n(),i(y,{src:"/me"},{default:t(({data:r})=>[r?(n(),i(C,{key:0,name:"mesh-service-list-view",params:{page:1,size:r.pageSize,mesh:"",service:""}},{default:t(({route:s,t:V,uri:z})=>[o(g,null,{title:t(()=>[o(_,{to:{name:"service-list-tabs-view-title"}},{default:t(()=>[D("h2",null,[o(l,{title:V("services.routes.mesh-service-list-view.title")},null,8,["title"])])]),_:2},1024)]),default:t(()=>[p(),o(w,null,{default:t(()=>[o(f,{src:z(b(d),"/meshes/:mesh/mesh-services",{mesh:s.params.mesh},{page:s.params.page,size:s.params.size})},{loadable:t(({data:e})=>[o(h,{type:"services",items:(e==null?void 0:e.items)??[void 0]},{default:t(()=>[o(A,{"data-testid":"service-collection",headers:[{label:"Name",key:"name"},{label:"Namespace",key:"namespace"}],"page-number":s.params.page,"page-size":s.params.size,total:e==null?void 0:e.total,items:e==null?void 0:e.items,"is-selected-row":m=>m.name===s.params.service,onChange:s.update},{name:t(({row:m})=>[o(x,{text:m.name},{default:t(()=>[o(u,{to:{name:"mesh-service-summary-view",params:{mesh:m.mesh,service:m.id},query:{page:s.params.page,size:s.params.size}}},{default:t(()=>[p(S(m.name),1)]),_:2},1032,["to"])]),_:2},1032,["text"])]),_:2},1032,["page-number","page-size","total","items","is-selected-row","onChange"]),p(),e!=null&&e.items&&s.params.service?(n(),i(v,{key:0},{default:t(m=>[o(N,{onClose:q=>s.replace({name:"mesh-service-list-view",params:{mesh:s.params.mesh},query:{page:s.params.page,size:s.params.size}})},{default:t(()=>[(n(),i(k(m.Component),{items:e==null?void 0:e.items},null,8,["items"]))]),_:2},1032,["onClose"])]),_:2},1024)):c("",!0)]),_:2},1032,["items"])]),_:2},1032,["src"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["params"])):c("",!0)]),_:1})}}});export{I as default};
