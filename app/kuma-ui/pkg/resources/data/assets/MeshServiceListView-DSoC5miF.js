import{d as R,r as t,p as m,o as i,w as s,b as o,e as n,l as g,I as S,m as q,a1 as K,q as M,K as T,t as r,c as w,N as y,L as G,y as I,_ as E}from"./index-8QMKyk4n.js";const F=R({__name:"MeshServiceListView",setup(Z){return($,p)=>{const f=t("RouteTitle"),z=t("XSearch"),_=t("XAction"),C=t("XCopyButton"),k=t("XBadge"),X=t("KumaPort"),h=t("XLayout"),b=t("XActionGroup"),V=t("XDrawer"),x=t("RouterView"),A=t("DataCollection"),D=t("DataLoader"),L=t("XCard"),B=t("AppView"),N=t("RouteView");return i(),m(N,{name:"mesh-service-list-view",params:{page:1,size:Number,mesh:"",service:"",s:""}},{default:s(({route:a,t:d,can:v,uri:P,me:l})=>[o(f,{render:!1,title:d("services.routes.mesh-service-list-view.title")},null,8,["title"]),p[9]||(p[9]=n()),o(B,{docs:d("services.mesh-service.href.docs")},{default:s(()=>[o(L,null,{default:s(()=>[o(h,null,{default:s(()=>[g("search",null,[g("form",{onSubmit:p[0]||(p[0]=S(()=>{},["prevent"]))},[o(z,{class:"search-field",keys:["name","namespace",...v("use zones")?["zone"]:[],"label"],value:a.params.s,onChange:c=>a.update({s:c})},null,8,["keys","value","onChange"])],32)]),p[8]||(p[8]=n()),o(D,{src:P(q(K),"/meshes/:mesh/mesh-services",{mesh:a.params.mesh},{page:a.params.page,size:a.params.size,search:a.params.s}),variant:"list"},{default:s(({data:c})=>[o(A,{type:"services",items:c.items,page:a.params.page,"page-size":a.params.size,total:c.total,onChange:a.update},{default:s(()=>[o(T,{"data-testid":"service-collection",headers:[{...l.get("headers.name"),label:"Name",key:"name"},{...l.get("headers.namespace"),label:"Namespace",key:"namespace"},...v("use zones")?[{...l.get("headers.zone"),label:"Zone",key:"zone"}]:[],{...l.get("headers.state"),label:"State",key:"state"},{...l.get("headers.status"),label:"DP proxies (connected / healthy / total)",key:"status"},{...l.get("headers.ports"),label:"Ports",key:"ports"},{...l.get("headers.actions"),label:"Actions",key:"actions",hideLabel:!0}],items:c.items,"is-selected-row":e=>e.name===a.params.service,onResize:l.set},{name:s(({row:e})=>[o(C,{text:e.name},{default:s(()=>[o(_,{"data-action":"",to:{name:"mesh-service-summary-view",params:{mesh:e.mesh,service:e.id},query:{page:a.params.page,size:a.params.size,s:a.params.s}}},{default:s(()=>[n(r(e.name),1)]),_:2},1032,["to"])]),_:2},1032,["text"])]),namespace:s(({row:e})=>[n(r(e.namespace),1)]),zone:s(({row:e})=>[e.zone?(i(),m(_,{key:0,to:{name:"zone-cp-detail-view",params:{zone:e.zone}}},{default:s(()=>[n(r(e.zone),1)]),_:2},1032,["to"])):(i(),w(y,{key:1},[n(r(d("common.detail.none")),1)],64))]),state:s(({row:e})=>[o(k,{appearance:e.spec.state==="Available"?"success":"danger"},{default:s(()=>[n(r(e.spec.state),1)]),_:2},1032,["appearance"])]),status:s(({row:e})=>[n(r(e.status.dataplaneProxies?.connected)+" / "+r(e.status.dataplaneProxies?.healthy)+" / "+r(e.status.dataplaneProxies?.total),1)]),ports:s(({row:e})=>[o(h,{type:"separated",truncate:""},{default:s(()=>[(i(!0),w(y,null,G(e.spec.ports,u=>(i(),m(X,{key:u.port,port:{...u,targetPort:void 0}},null,8,["port"]))),128))]),_:2},1024)]),actions:s(({row:e})=>[o(b,null,{default:s(()=>[o(_,{to:{name:"mesh-service-detail-view",params:{mesh:e.mesh,service:e.id}}},{default:s(()=>[n(r(d("common.collection.actions.view")),1)]),_:2},1032,["to"])]),_:2},1024)]),_:2},1032,["headers","items","is-selected-row","onResize"]),p[7]||(p[7]=n()),c.items&&a.params.service?(i(),m(x,{key:0},{default:s(e=>[o(V,{onClose:u=>a.replace({name:"mesh-service-list-view",params:{mesh:a.params.mesh},query:{page:a.params.page,size:a.params.size,s:a.params.s}})},{default:s(()=>[(i(),m(I(e.Component),{items:c.items},null,8,["items"]))]),_:2},1032,["onClose"])]),_:2},1024)):M("",!0)]),_:2},1032,["items","page","page-size","total","onChange"])]),_:2},1032,["src"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["docs"])]),_:1})}}}),H=E(F,[["__scopeId","data-v-3ba53270"]]);export{H as default};
