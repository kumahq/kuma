import{d as P,r as o,p as m,o as c,w as s,b as t,e as n,l as f,I as R,m as D,a5 as q,q as K,K as M,t as r,c as g,N as w,L as T,y as G,_ as I}from"./index-DYbR5Se5.js";import{S as E}from"./SummaryView-DDM3hZF4.js";const F=P({__name:"MeshServiceListView",setup(Z){return($,p)=>{const y=o("RouteTitle"),z=o("XSearch"),u=o("XAction"),C=o("XCopyButton"),k=o("XBadge"),X=o("KumaPort"),h=o("XLayout"),b=o("XActionGroup"),V=o("RouterView"),x=o("DataCollection"),A=o("DataLoader"),L=o("XCard"),S=o("AppView"),B=o("RouteView");return c(),m(B,{name:"mesh-service-list-view",params:{page:1,size:Number,mesh:"",service:"",s:""}},{default:s(({route:a,t:d,can:v,uri:N,me:l})=>[t(y,{render:!1,title:d("services.routes.mesh-service-list-view.title")},null,8,["title"]),p[9]||(p[9]=n()),t(S,{docs:d("services.mesh-service.href.docs")},{default:s(()=>[t(L,null,{default:s(()=>[t(h,null,{default:s(()=>[f("search",null,[f("form",{onSubmit:p[0]||(p[0]=R(()=>{},["prevent"]))},[t(z,{class:"search-field",keys:["name","namespace",...v("use zones")?["zone"]:[],"label"],value:a.params.s,onChange:i=>a.update({s:i})},null,8,["keys","value","onChange"])],32)]),p[8]||(p[8]=n()),t(A,{src:N(D(q),"/meshes/:mesh/mesh-services",{mesh:a.params.mesh},{page:a.params.page,size:a.params.size,search:a.params.s}),variant:"list"},{default:s(({data:i})=>[t(x,{type:"services",items:i.items,page:a.params.page,"page-size":a.params.size,total:i.total,onChange:a.update},{default:s(()=>[t(M,{"data-testid":"service-collection",headers:[{...l.get("headers.name"),label:"Name",key:"name"},{...l.get("headers.namespace"),label:"Namespace",key:"namespace"},...v("use zones")?[{...l.get("headers.zone"),label:"Zone",key:"zone"}]:[],{...l.get("headers.state"),label:"State",key:"state"},{...l.get("headers.status"),label:"DP proxies (connected / healthy / total)",key:"status"},{...l.get("headers.ports"),label:"Ports",key:"ports"},{...l.get("headers.actions"),label:"Actions",key:"actions",hideLabel:!0}],items:i.items,"is-selected-row":e=>e.name===a.params.service,onResize:l.set},{name:s(({row:e})=>[t(C,{text:e.name},{default:s(()=>[t(u,{"data-action":"",to:{name:"mesh-service-summary-view",params:{mesh:e.mesh,service:e.id},query:{page:a.params.page,size:a.params.size,s:a.params.s}}},{default:s(()=>[n(r(e.name),1)]),_:2},1032,["to"])]),_:2},1032,["text"])]),namespace:s(({row:e})=>[n(r(e.namespace),1)]),zone:s(({row:e})=>[e.zone?(c(),m(u,{key:0,to:{name:"zone-cp-detail-view",params:{zone:e.zone}}},{default:s(()=>[n(r(e.zone),1)]),_:2},1032,["to"])):(c(),g(w,{key:1},[n(r(d("common.detail.none")),1)],64))]),state:s(({row:e})=>[t(k,{appearance:e.spec.state==="Available"?"success":"danger"},{default:s(()=>[n(r(e.spec.state),1)]),_:2},1032,["appearance"])]),status:s(({row:e})=>[n(r(e.status.dataplaneProxies?.connected)+" / "+r(e.status.dataplaneProxies?.healthy)+" / "+r(e.status.dataplaneProxies?.total),1)]),ports:s(({row:e})=>[t(h,{type:"separated",truncate:""},{default:s(()=>[(c(!0),g(w,null,T(e.spec.ports,_=>(c(),m(X,{key:_.port,port:{..._,targetPort:void 0}},null,8,["port"]))),128))]),_:2},1024)]),actions:s(({row:e})=>[t(b,null,{default:s(()=>[t(u,{to:{name:"mesh-service-detail-view",params:{mesh:e.mesh,service:e.id}}},{default:s(()=>[n(r(d("common.collection.actions.view")),1)]),_:2},1032,["to"])]),_:2},1024)]),_:2},1032,["headers","items","is-selected-row","onResize"]),p[7]||(p[7]=n()),i.items&&a.params.service?(c(),m(V,{key:0},{default:s(e=>[t(E,{onClose:_=>a.replace({name:"mesh-service-list-view",params:{mesh:a.params.mesh},query:{page:a.params.page,size:a.params.size,s:a.params.s}})},{default:s(()=>[(c(),m(G(e.Component),{items:i.items},null,8,["items"]))]),_:2},1032,["onClose"])]),_:2},1024)):K("",!0)]),_:2},1032,["items","page","page-size","total","onChange"])]),_:2},1032,["src"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["docs"])]),_:1})}}}),J=I(F,[["__scopeId","data-v-d9ff3a80"]]);export{J as default};
