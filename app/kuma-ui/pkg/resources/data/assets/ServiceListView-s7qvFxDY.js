import{K as B}from"./index-FZCiQto1.js";import{d as L,k as $,A,a as m,o as n,b as c,w as s,q as p,e as t,m as D,f as i,t as l,F as _,c as f,Q as N,C as P,p as h,n as C,$ as T,_ as E}from"./index-CqXGLTiP.js";import{A as I}from"./AppCollection-kQgAZcfN.js";import{E as K}from"./ErrorBlock-226oEngl.js";import{L as q}from"./LinkBox-uuEpyyKB.js";import{S as F}from"./StatusBadge-OJUndbhX.js";import{S as O}from"./SummaryView-DgqOrci4.js";import{T as x}from"./TextWithCopyButton-3lrZWnHN.js";import"./WarningIcon.vue_vue_type_script_setup_true_lang-2iMUP-XH.js";import"./CopyButton-MfTze-YE.js";const Q=L({__name:"ServiceListView",setup(U){const y=$(),d=A();return(W,Z)=>{const S=m("RouteTitle"),u=m("RouterLink"),z=m("KCard"),V=m("RouterView"),b=m("AppView"),g=m("DataSource"),R=m("RouteView");return n(),c(g,{src:"/me"},{default:s(({data:k})=>[k?(n(),c(R,{key:0,name:"service-list-view",params:{page:1,size:k.pageSize,mesh:"",service:""}},{default:s(({route:a,t:r})=>[t(g,{src:`/meshes/${a.params.mesh}/service-insights/of/${p(y)("use gateways ui")?"internal":"all"}?page=${a.params.page}&size=${a.params.size}`},{default:s(({data:o,error:v})=>[t(b,null,T({title:s(()=>[D("h2",null,[t(S,{title:r(`${p(d).name==="service-list-view"?"":"external-"}services.routes.items.title`)},null,8,["title"])])]),default:s(()=>[i(),i(),t(z,null,{default:s(()=>[v!==void 0?(n(),c(K,{key:0,error:v},null,8,["error"])):(n(),c(I,{key:1,class:"service-collection","data-testid":"service-collection","empty-state-message":r("common.emptyState.message",{type:"Services"}),headers:[{label:"Name",key:"name"},{label:"Address",key:"addressPort"},{label:"DP proxies (online / total)",key:"online"},{label:"Status",key:"status"},{label:"Details",key:"details",hideLabel:!0}],"page-number":a.params.page,"page-size":a.params.size,total:o==null?void 0:o.total,items:o==null?void 0:o.items,error:v,"is-selected-row":e=>e.name===a.params.service,onChange:a.update},{name:s(({row:e})=>[t(x,{text:e.name},{default:s(()=>[t(u,{to:{name:"service-detail-view",params:{mesh:e.mesh,service:e.name},query:{page:a.params.page,size:a.params.size}}},{default:s(()=>[i(l(e.name),1)]),_:2},1032,["to"])]),_:2},1032,["text"])]),addressPort:s(({row:e})=>[e.addressPort?(n(),c(x,{key:0,text:e.addressPort},null,8,["text"])):(n(),f(_,{key:1},[i(l(r("common.collection.none")),1)],64))]),online:s(({row:e})=>[e.dataplanes?(n(),f(_,{key:0},[i(l(e.dataplanes.online||0)+" / "+l(e.dataplanes.total||0),1)],64)):(n(),f(_,{key:1},[i(l(r("common.collection.none")),1)],64))]),status:s(({row:e})=>[t(F,{status:e.status},null,8,["status"])]),details:s(({row:e})=>[t(u,{class:"details-link","data-testid":"details-link",to:{name:"service-detail-view",params:{mesh:e.mesh,service:e.name}}},{default:s(()=>[i(l(r("common.collection.details_link"))+" ",1),t(p(N),{display:"inline-block",decorative:"",size:p(B)},null,8,["size"])]),_:2},1032,["to"])]),_:2},1032,["empty-state-message","headers","page-number","page-size","total","items","error","is-selected-row","onChange"]))]),_:2},1024),i(),a.params.service?(n(),c(V,{key:0},{default:s(e=>[t(O,{onClose:w=>a.replace({name:"service-list-view",params:{mesh:a.params.mesh},query:{page:a.params.page,size:a.params.size}})},{default:s(()=>[(n(),c(P(e.Component),{name:a.params.service,service:o==null?void 0:o.items.find(w=>w.name===a.params.service)},null,8,["name","service"]))]),_:2},1032,["onClose"])]),_:2},1024)):h("",!0)]),_:2},[p(y)("use gateways ui")?{name:"actions",fn:s(()=>[t(q,null,{default:s(()=>[t(u,{class:C({active:p(d).name==="service-list-view"}),to:{name:"service-list-view",params:{mesh:a.params.mesh}}},{default:s(()=>[i(l(r("services.routes.items.navigation.internal")),1)]),_:2},1032,["class","to"]),i(),t(u,{class:C({active:p(d).name==="external-service-list-view"}),to:{name:"external-service-list-view",params:{mesh:a.params.mesh}}},{default:s(()=>[i(l(r("services.routes.items.navigation.external")),1)]),_:2},1032,["class","to"])]),_:2},1024)]),key:"0"}:void 0]),1024)]),_:2},1032,["src"])]),_:2},1032,["params"])):h("",!0)]),_:1})}}}),te=E(Q,[["__scopeId","data-v-8187fa37"]]);export{te as default};
