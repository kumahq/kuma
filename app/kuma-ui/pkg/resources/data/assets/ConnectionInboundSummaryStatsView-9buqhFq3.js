import{d as R,X as f,r,p as $,o as C,w as n,b as c,e as p,m as A,a3 as k}from"./index-8QMKyk4n.js";const T=R({__name:"ConnectionInboundSummaryStatsView",props:{data:{},networking:{},routeName:{}},setup(d){const a=d,e=f(()=>({...a.data,proxyResourceName:"proxyResourcePortName"in a.data?a.data.proxyResourcePortName:"",listenerAddress:"listenerAddress"in a.data?a.data.listenerAddress:"",clusterName:"clusterName"in a.data?a.data.clusterName:"",port:"port"in a.data?a.data.port.toString():"",servicePort:"servicePort"in a.data?a.data.servicePort:"",name:"name"in a.data?a.data.name:""}));return(w,l)=>{const i=r("RouteTitle"),m=r("XAction"),u=r("XCodeBlock"),v=r("DataCollection"),x=r("DataLoader"),y=r("AppView"),g=r("RouteView");return C(),$(g,{params:{codeSearch:"",codeFilter:!1,codeRegExp:!1,mesh:"",proxy:"",proxyType:"",connection:""},name:a.routeName},{default:n(({route:t,uri:h})=>[c(i,{render:!1,title:"Stats"}),l[1]||(l[1]=p()),c(y,null,{default:n(()=>[c(x,{src:h(A(k),"/connections/stats/for/:proxyType/:name/:mesh/:socketAddress",{proxyType:{ingresses:"zone-ingress",egresses:"zone-egress"}[t.params.proxyType]??"dataplane",name:t.params.proxy,mesh:t.params.mesh||"*",socketAddress:a.networking.inboundAddress})},{default:n(({data:_,refresh:N})=>[c(v,{items:_.raw.split(`
`),predicate:s=>[`listener.${e.value.listenerAddress?.length>0?e.value.listenerAddress:t.params.connection}`,`cluster.${e.value.name}.`,`cluster.${e.value.clusterName}.`,`http.${e.value.name}.`,`http.${e.value.clusterName}.`,`tcp.${e.value.name}.`,`cluster.${e.value.proxyResourceName}.`,`listener.${e.value.proxyResourceName}`,`cluster.${e.value.proxyResourceName}.`,`http.${e.value.proxyResourceName}.`,`http.${e.value.proxyResourceName}.`,`tcp.${e.value.proxyResourceName}.`].some(o=>s.startsWith(o))&&(!s.includes(".rds.")||s.includes(`_${e.value.port}`)||s.includes(`${e.value.servicePort}`))},{default:n(({items:s})=>[c(u,{language:"json",code:s.map(o=>o.replace(`${e.value.listenerAddress?.length>0?e.value.listenerAddress:e.value.proxyResourceName.length?e.value.proxyResourceName:t.params.connection}.`,"").replace(e.value.name.length?`${e.value.name}.`:"","").replace(e.value.clusterName.length?`${e.value.clusterName}.`:"","")).join(`
`),"is-searchable":"",query:t.params.codeSearch,"is-filter-mode":t.params.codeFilter,"is-reg-exp-mode":t.params.codeRegExp,onQueryChange:o=>t.update({codeSearch:o}),onFilterModeChange:o=>t.update({codeFilter:o}),onRegExpModeChange:o=>t.update({codeRegExp:o})},{"primary-actions":n(()=>[c(m,{action:"refresh",appearance:"primary",onClick:N},{default:n(()=>[...l[0]||(l[0]=[p(`
                Refresh
              `,-1)])]),_:1},8,["onClick"])]),_:2},1032,["code","query","is-filter-mode","is-reg-exp-mode","onQueryChange","onFilterModeChange","onRegExpModeChange"])]),_:2},1032,["items","predicate"])]),_:2},1032,["src"])]),_:2},1024)]),_:1},8,["name"])}}});export{T as default};
