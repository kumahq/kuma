import{d as A,l as B,A as W,H as y,o as r,c as p,m as o,f as e,t as s,p as n,e as a,ax as me,B as v,ay as L,a as u,b as h,w as l,F as $,q as E,D as pe,G as _e,az as M,aA as G,aB as H,z as fe,E as ve,aC as be,_ as ze}from"./index-kNITWRcL.js";import{C as g}from"./CodeBlock-DFFWuXZY.js";const he={class:"form-step-title"},ge=o("span",{class:"form-step-number"},"1",-1),ke={class:"instruction-list"},ye={href:"https://helm.sh/docs/intro/install/"},Ce={class:"form-step-title"},Ee=o("span",{class:"form-step-number"},"2",-1),Ke=o("p",null,"On your local machine, create a namespace in your Kubernetes cluster and pull down the kong Helm repo.",-1),$e={class:"instruction-list"},Ve={class:"form-step-title"},we=o("span",{class:"form-step-number"},"3",-1),Te={class:"form-step-title"},Ie=o("span",{class:"form-step-number"},"4",-1),Ne={class:"field-group-label mt-4"},Se={class:"mt-4"},Ze=A({__name:"ZoneCreateKubernetesInstructions",props:{zoneName:{type:String,required:!0},globalKdsAddress:{type:String,required:!0},zoneIngressEnabled:{type:Boolean,required:!0},zoneEgressEnabled:{type:Boolean,required:!0},token:{type:String,required:!0},base64EncodedToken:{type:String,required:!0}},setup(T){const{t}=B(),k=W(),_=T,V=y(()=>t("zones.form.kubernetes.secret.createSecretCommand",{token:_.base64EncodedToken}).trim()),f=y(()=>{const b={zoneName:_.zoneName,globalKdsAddress:_.globalKdsAddress,zoneIngressEnabled:String(_.zoneIngressEnabled),zoneEgressEnabled:String(_.zoneEgressEnabled),controlPlaneId:typeof k.params.virtualControlPlaneId=="string"?k.params.virtualControlPlaneId:""};return t("zones.form.kubernetes.connectZone.config",b).trim()});return(b,d)=>(r(),p("div",null,[o("h3",he,[ge,e(" "+s(n(t)("zones.form.kubernetes.prerequisites.title")),1)]),e(),o("ul",ke,[o("li",null,[o("b",null,s(n(t)("zones.form.kubernetes.prerequisites.step1Label"))+s(_.zoneIngressEnabled?" "+n(t)("zones.form.kubernetes.prerequisites.step1LabelAddendum"):""),1),e(`:
        `+s(n(t)("zones.form.kubernetes.prerequisites.step1Description",{productName:n(t)("common.product.name")})),1)]),e(),o("li",null,[o("b",null,s(n(t)("zones.form.kubernetes.prerequisites.step2Label")),1),e(`:
        `+s(n(t)("zones.form.kubernetes.prerequisites.step2Description")),1)]),e(),o("li",null,[o("a",ye,s(n(t)("zones.form.kubernetes.prerequisites.step3LinkTitle")),1),e(" "+s(n(t)("zones.form.kubernetes.prerequisites.step3Tail")),1)])]),e(),o("h3",Ce,[Ee,e(" "+s(n(t)("zones.form.kubernetes.helm.title")),1)]),e(),Ke,e(),o("ol",$e,[o("li",null,[o("b",null,s(n(t)("zones.form.kubernetes.helm.step1Description")),1),e(),a(g,{class:"mt-2",code:n(t)("zones.form.kubernetes.helm.step1Command"),language:"bash"},null,8,["code"])]),e(),o("li",null,[o("b",null,s(n(t)("zones.form.kubernetes.helm.step2Description")),1),e(),a(g,{class:"mt-2",code:n(t)("zones.form.kubernetes.helm.step2Command"),language:"bash"},null,8,["code"])]),e(),o("li",null,[o("b",null,s(n(t)("zones.form.kubernetes.helm.step3Description")),1),e(),a(g,{class:"mt-2",code:n(t)("zones.form.kubernetes.helm.step3Command"),language:"bash"},null,8,["code"])])]),e(),o("h3",Ve,[we,e(" "+s(n(t)("zones.form.kubernetes.secret.title")),1)]),e(),o("p",null,s(n(t)("zones.form.kubernetes.secret.createSecretDescription")),1),e(),a(g,{class:"mt-4",code:V.value,language:"bash"},null,8,["code"]),e(),o("h3",Te,[Ie,e(" "+s(n(t)("zones.form.kubernetes.connectZone.title")),1)]),e(),o("p",null,s(n(t)("zones.form.kubernetes.connectZone.configDescription")),1),e(),o("span",Ne,s(n(t)("zones.form.kubernetes.connectZone.configFileName")),1),e(),a(g,{"data-testid":"zone-kubernetes-config",code:f.value,language:"yaml"},null,8,["code"]),e(),o("p",Se,s(n(t)("zones.form.kubernetes.connectZone.connectDescription")),1),e(),a(g,{class:"mt-4",code:n(t)("zones.form.kubernetes.connectZone.connectCommand").trim(),language:"bash"},null,8,["code"])]))}}),qe={class:"form-step-title"},De=o("span",{class:"form-step-number"},"1",-1),Le={class:"form-step-title"},Ae=o("span",{class:"form-step-number"},"2",-1),Be={class:"field-group-label mt-4"},xe={class:"mt-4"},Re=A({__name:"ZoneCreateUniversalInstructions",props:{zoneName:{type:String,required:!0},globalKdsAddress:{type:String,required:!0},token:{type:String,required:!0}},setup(T){const{t}=B(),k=W(),_=T,V=y(()=>t("zones.form.universal.saveToken.saveTokenCommand",{token:_.token}).trim()),f=y(()=>{const b={zoneName:_.zoneName,globalKdsAddress:_.globalKdsAddress,controlPlaneId:typeof k.params.virtualControlPlaneId=="string"?k.params.virtualControlPlaneId:""};return t("zones.form.universal.connectZone.config",b).trim()});return(b,d)=>(r(),p("div",null,[o("h3",qe,[De,e(" "+s(n(t)("zones.form.universal.saveToken.title")),1)]),e(),o("p",null,s(n(t)("zones.form.universal.saveToken.saveTokenDescription")),1),e(),a(g,{class:"mt-4",code:V.value,language:"bash"},null,8,["code"]),e(),o("h3",Le,[Ae,e(" "+s(n(t)("zones.form.universal.connectZone.title")),1)]),e(),o("p",null,s(n(t)("zones.form.universal.connectZone.configDescription")),1),e(),o("span",Be,s(n(t)("zones.form.universal.connectZone.configFileName")),1),e(),a(g,{"data-testid":"zone-universal-config",class:"mt-4",code:f.value,language:"yaml"},null,8,["code"]),e(),o("p",xe,s(n(t)("zones.form.universal.connectZone.connectDescription")),1),e(),a(g,{class:"mt-4",code:n(t)("zones.form.universal.connectZone.connectCommand").trim(),language:"bash"},null,8,["code"])]))}}),Ue={class:"form-wrapper"},Pe={key:1},Xe={key:2},Oe={class:"form"},Fe={class:"form-header"},Me={class:"form-title"},Ge={class:"text-gradient"},He={key:0},We={key:0},je={class:"fact-list"},Je={class:"form-section"},Qe={class:"form-section__header"},Ye={class:"form-section-title"},eo={class:"form-section__content"},oo={class:"form-section","data-testid":"connect-zone-instructions"},no={class:"form-section__header"},to={class:"form-section-title"},so={class:"form-section__content"},ao={class:"field-group-list"},lo={class:"field-group"},ro={class:"field-group-label"},io={class:"radio-button-group"},co={class:"field-group"},uo={class:"field-group-label"},mo={class:"radio-button-group","data-testid":"ingress-input-switch"},po={class:"field-group"},_o={class:"field-group-label"},fo={class:"radio-button-group","data-testid":"egress-input-switch"},vo={class:"form-section"},bo={class:"form-section__header"},zo={class:"form-section-title"},ho={class:"form-section__content"},go={class:"form-section"},ko={class:"form-section__header"},yo={class:"form-section-title"},Co={class:"form-section__content"},Eo={class:"mt-2"},Ko=A({__name:"ZoneCreateView",setup(T){const{t,tm:k}=B(),_=me(),V=/^(?![-0-9])[a-z0-9-]{1,63}$/,f=v(null),b=v(!1),d=v(null),I=v(null),S=v(""),x=v(!1),j=v(new Date),m=v(""),K=v("kubernetes"),Z=v(!0),q=v(!0),w=y(()=>f.value!==null&&f.value.token?f.value.token:""),J=y(()=>w.value!==""?window.btoa(w.value):""),Q=y(()=>m.value===""||b.value||f.value!==null),D=y(()=>{if(I.value!==null)return I.value;if(d.value instanceof L){const z=d.value.invalidParameters.find(c=>c.field==="name");if(z!==void 0)return z.reason}return null});async function Y(){b.value=!0,d.value=null,S.value="";try{if(!R(m.value))return;f.value=await _.createZone({name:m.value})}catch(z){z instanceof Error?(S.value=m.value,d.value=z):console.error(z)}finally{b.value=!1}}function R(z){const c=V.test(z);return c?I.value=null:I.value=t("zones.create.invalidNameError"),c}function ee(){x.value=!0}return(z,c)=>{const oe=u("RouteTitle"),N=u("KButton"),ne=u("KModal"),te=u("XTeleportTemplate"),se=u("XDisclosure"),ae=u("KAlert"),le=u("KLabel"),re=u("KInput"),U=u("KRadio"),P=u("KInputSwitch"),X=u("DataSource"),ie=u("KEmptyState"),ce=u("KCard"),ue=u("AppView"),de=u("RouteView");return r(),h(de,{name:"zone-create-view",attrs:{class:"is-fullscreen"}},{default:l(({route:O,id:F})=>[a(ue,{fullscreen:!0,breadcrumbs:[]},{title:l(()=>[o("h1",null,[a(oe,{title:n(t)("zones.routes.create.title")},null,8,["title"])])]),actions:l(()=>[a(se,null,{default:l(({expanded:i,toggle:C})=>[a(N,{appearance:"tertiary","data-testid":"exit-button",onClick:()=>{w.value===""||x.value?O.back({name:"zone-cp-list-view"}):C()}},{default:l(()=>[e(s(n(t)("zones.form.exit")),1)]),_:2},1032,["onClick"]),e(),a(te,{to:{name:"modal-layer"}},{default:l(()=>[a(ne,{visible:i,title:n(t)("zones.form.confirm_modal.title"),"data-testid":"confirm-exit-modal",onCancel:C,onProceed:$o=>O.replace({name:"zone-cp-list-view"})},{"footer-actions":l(()=>[a(N,{appearance:"primary",to:{name:"zone-cp-list-view"},"data-testid":"confirm-exit-button"},{default:l(()=>[e(s(n(t)("zones.form.confirm_modal.action_button")),1)]),_:1})]),default:l(()=>[e(s(n(t)("zones.form.confirm_modal.body"))+" ",1)]),_:2},1032,["visible","title","onCancel","onProceed"])]),_:2},1024)]),_:2},1024)]),default:l(()=>[e(),e(),o("div",Ue,[d.value!==null?(r(),h(ae,{key:0,appearance:"danger",class:"mb-4","data-testid":"create-zone-error"},{default:l(()=>[d.value instanceof n(L)&&[409,500].includes(d.value.status)?(r(),p($,{key:0},[o("p",null,s(n(t)(`zones.create.status_error.${d.value.status}.title`,{name:S.value})),1),e(),o("p",null,s(n(t)(`zones.create.status_error.${d.value.status}.description`)),1)],64)):d.value instanceof n(L)?(r(),p("p",Pe,s(n(t)("common.error_state.api_error",{status:d.value.status,title:d.value.detail})),1)):(r(),p("p",Xe,s(n(t)("common.error_state.default_error")),1))]),_:1})):E("",!0),e(),a(ce,{class:"form-card"},{default:l(()=>[o("div",Oe,[o("div",Fe,[o("div",null,[o("h1",Me,[o("span",Ge,s(n(t)("zones.form.title")),1)]),e(),n(t)("zones.form.description")!==" "?(r(),p("p",He,s(n(t)("zones.form.description")),1)):E("",!0)]),e(),n(k)("zones.form.facts").length>0?(r(),p("div",We,[o("ul",je,[(r(!0),p($,null,pe(n(k)("zones.form.facts"),(i,C)=>(r(),p("li",{key:C,class:"fact-list__item"},[a(n(_e),{class:"fact-list__icon",color:n(M)},null,8,["color"]),e(" "+s(i),1)]))),128))])])):E("",!0)]),e(),o("div",Je,[o("div",Qe,[o("h2",Ye,s(n(t)("zones.form.section.name.title")),1),e(),o("p",null,s(n(t)("zones.form.section.name.description")),1)]),e(),o("div",eo,[o("div",null,[a(le,{for:F,required:"","tooltip-attributes":{placement:"right"}},{tooltip:l(()=>[e(s(n(t)("zones.form.name_tooltip")),1)]),default:l(()=>[e(s(n(t)("zones.form.nameLabel"))+" ",1)]),_:2},1032,["for"]),e(),a(re,{id:F,modelValue:m.value,"onUpdate:modelValue":c[0]||(c[0]=i=>m.value=i),type:"text",name:"zone-name","data-testid":"name-input","data-test-error-type":D.value!==null?"invalid-dns-name":void 0,error:D.value!==null,"error-message":D.value??void 0,disabled:f.value!==null,onBlur:c[1]||(c[1]=i=>R(m.value))},null,8,["id","modelValue","data-test-error-type","error","error-message","disabled"])]),e(),a(N,{appearance:"primary",class:"mt-4",disabled:Q.value,"data-testid":"create-zone-button",onClick:Y},{default:l(()=>[b.value?(r(),h(n(G),{key:0,color:n(H)},null,8,["color"])):(r(),h(n(fe),{key:1})),e(" "+s(n(t)("zones.form.createZoneButtonLabel")),1)]),_:1},8,["disabled"])])]),e(),f.value!==null?(r(),p($,{key:0},[o("div",oo,[o("div",no,[o("h2",to,s(n(t)("zones.form.section.configuration.title")),1),e(),o("p",null,s(n(t)("zones.form.section.configuration.description")),1)]),e(),o("div",so,[o("div",ao,[o("div",lo,[o("span",ro,s(n(t)("zones.form.environmentLabel"))+` *
                      `,1),e(),o("div",io,[a(U,{modelValue:K.value,"onUpdate:modelValue":c[2]||(c[2]=i=>K.value=i),"selected-value":"universal",name:"zone-environment","data-testid":"environment-universal-radio-button"},{default:l(()=>[e(s(n(t)("zones.form.universalLabel")),1)]),_:1},8,["modelValue"]),e(),a(U,{modelValue:K.value,"onUpdate:modelValue":c[3]||(c[3]=i=>K.value=i),"selected-value":"kubernetes",name:"zone-environment","data-testid":"environment-kubernetes-radio-button"},{default:l(()=>[e(s(n(t)("zones.form.kubernetesLabel")),1)]),_:1},8,["modelValue"])])]),e(),K.value==="kubernetes"?(r(),p($,{key:0},[o("div",co,[o("span",uo,s(n(t)("zones.form.zoneIngressLabel"))+` *
                        `,1),e(),o("div",mo,[a(P,{modelValue:Z.value,"onUpdate:modelValue":c[4]||(c[4]=i=>Z.value=i)},{label:l(()=>[e(s(n(t)("zones.form.zoneIngressEnabledLabel")),1)]),_:1},8,["modelValue"])])]),e(),o("div",po,[o("span",_o,s(n(t)("zones.form.zoneEgressLabel"))+` *
                        `,1),e(),o("div",fo,[a(P,{modelValue:q.value,"onUpdate:modelValue":c[5]||(c[5]=i=>q.value=i)},{label:l(()=>[e(s(n(t)("zones.form.zoneEgressEnabledLabel")),1)]),_:1},8,["modelValue"])])])],64)):E("",!0)])])]),e(),o("div",vo,[o("div",bo,[o("h2",zo,s(n(t)("zones.form.section.connect_zone.title")),1),e(),o("p",null,s(n(t)("zones.form.section.connect_zone.description")),1)]),e(),o("div",ho,[a(X,{src:"/control-plane/addresses"},{default:l(({data:i})=>[typeof i<"u"?(r(),p($,{key:0},[K.value==="universal"?(r(),h(Re,{key:0,"zone-name":m.value,token:w.value,"global-kds-address":i.kds},null,8,["zone-name","token","global-kds-address"])):(r(),h(Ze,{key:1,"zone-name":m.value,"zone-ingress-enabled":Z.value,"zone-egress-enabled":q.value,token:w.value,"base64-encoded-token":J.value,"global-kds-address":i.kds},null,8,["zone-name","zone-ingress-enabled","zone-egress-enabled","token","base64-encoded-token","global-kds-address"]))],64)):E("",!0)]),_:1})])]),e(),o("div",go,[a(X,{src:`/zone-cps/online/${m.value}?no-cache=${j.value}`,onChange:ee},{default:l(({data:i,error:C})=>[o("div",ko,[o("h2",yo,s(n(t)("zones.form.section.scanner.title")),1),e(),o("p",null,s(n(t)("zones.form.section.scanner.description")),1)]),e(),o("div",Co,[C?(r(),h(ve,{key:0,error:C,appearance:"danger","data-testid":"error"},null,8,["error"])):(r(),h(ie,{key:1},{icon:l(()=>[i===void 0?(r(),h(n(G),{key:0,"data-testid":"waiting",color:n(H)},null,8,["color"])):(r(),h(n(be),{key:1,"data-testid":"connected",color:n(M)},null,8,["color"]))]),title:l(()=>[e(s(i===void 0?n(t)("zones.form.scan.waitTitle"):n(t)("zones.form.scan.completeTitle")),1)]),default:l(()=>[e(),e(),typeof i<"u"?(r(),p($,{key:0},[o("p",null,s(n(t)("zones.form.scan.completeDescription",{name:m.value})),1),e(),o("p",Eo,[a(N,{appearance:"primary",to:{name:"zone-cp-detail-view",params:{zone:m.value}}},{default:l(()=>[e(s(n(t)("zones.form.scan.completeButtonLabel",{name:m.value})),1)]),_:1},8,["to"])])],64)):E("",!0)]),_:2},1024))])]),_:1},8,["src"])])],64)):E("",!0)])]),_:2},1024)])]),_:2},1024)]),_:1})}}}),To=ze(Ko,[["__scopeId","data-v-56a4ce4f"]]);export{To as default};
