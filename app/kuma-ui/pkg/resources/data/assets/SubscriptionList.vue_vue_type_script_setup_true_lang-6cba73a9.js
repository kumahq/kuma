import{d as S,k as T,H as m,o,c as l,b as g,w as v,e as k,l as a,al as x,f as t,t as e,am as B,r as A,p as I,m as n,F as f,C as D,_ as L,s as P,v as R}from"./index-671fe4fd.js";import{A as C,a as H}from"./AccordionList-7f864a3b.js";const N={class:"stack"},U={key:1},V={key:0,class:"intro"},O={class:"row"},q={class:"header"},F={class:"header"},E=["data-testid"],M={class:"type"},z=S({__name:"SubscriptionDetails",props:{subscription:{type:Object,required:!0},isDiscoverySubscription:{type:Boolean,default:!1}},setup(d){const{t:c}=T(),p=d,s=m(()=>{var u;let i;if("controlPlaneInstanceId"in p.subscription){const{lastUpdateTime:r,total:_,...b}=p.subscription.status;i=b}else i=((u=p.subscription.status)==null?void 0:u.stat)??{};return i?Object.entries(i).map(([r,_])=>{const{responsesSent:b="0",responsesAcknowledged:h="0",responsesRejected:y="0"}=_;return{type:r,responsesSent:b,responsesAcknowledged:h,responsesRejected:y}}):[]});return(i,u)=>(o(),l("div",N,[s.value.length===0?(o(),g(a(B),{key:0,appearance:"info"},{alertIcon:v(()=>[k(a(x))]),alertMessage:v(()=>[t(e(a(c)("common.detail.subscriptions.no_stats",{id:p.subscription.id})),1)]),_:1})):(o(),l("div",U,[i.$slots.default?(o(),l("div",V,[A(i.$slots,"default",{},void 0,!0)])):I("",!0),t(),n("div",O,[n("div",q,e(a(c)("common.detail.subscriptions.type")),1),t(),n("div",F,e(a(c)("common.detail.subscriptions.responses_sent_acknowledged")),1)]),t(),(o(!0),l(f,null,D(s.value,(r,_)=>(o(),l("div",{key:_,class:"row","data-testid":`subscription-status-${r.type}`},[n("div",M,e(a(c)(`http.api.property.${r.type}`)),1),t(),n("div",null,e(r.responsesSent)+"/"+e(r.responsesAcknowledged),1)],8,E))),128))]))]))}});const G=L(z,[["__scopeId","data-v-c3ee36ce"]]),J=""+new URL("icon-deployed-code-e3c999ba.svg",import.meta.url).href,K=""+new URL("icon-connected-037e001a.svg",import.meta.url).href,Q=""+new URL("icon-disconnected-ba3c2624.svg",import.meta.url).href,$=d=>(P("data-v-991b71e7"),d=d(),R(),d),W={class:"subscription-header"},X={class:"instance-id"},Y=$(()=>n("img",{src:J},null,-1)),Z=$(()=>n("img",{src:K},null,-1)),ss={key:0},es=$(()=>n("img",{src:Q},null,-1)),ts={class:"responses-sent-acknowledged"},ns=S({__name:"SubscriptionHeader",props:{subscription:{type:Object,required:!0}},setup(d){const{t:c,formatIsoDate:p}=T(),s=d,i=m(()=>"globalInstanceId"in s.subscription?s.subscription.globalInstanceId:null),u=m(()=>"controlPlaneInstanceId"in s.subscription?s.subscription.controlPlaneInstanceId:null),r=m(()=>s.subscription.connectTime?p(s.subscription.connectTime):null),_=m(()=>s.subscription.disconnectTime?p(s.subscription.disconnectTime):null),b=m(()=>{var w;const{responsesSent:h=0,responsesAcknowledged:y=0,responsesRejected:j=0}=((w=s.subscription.status)==null?void 0:w.total)??{};return{responsesSent:h,responsesAcknowledged:y,responsesRejected:j}});return(h,y)=>(o(),l("header",W,[n("span",X,[Y,t(),i.value?(o(),l(f,{key:0},[n("b",null,e(a(c)("http.api.property.globalInstanceId")),1),t(": "+e(i.value),1)],64)):u.value?(o(),l(f,{key:1},[n("b",null,e(a(c)("http.api.property.controlPlaneInstanceId")),1),t(": "+e(u.value),1)],64)):I("",!0)]),t(),n("span",null,[Z,t(),n("b",null,e(a(c)("common.detail.subscriptions.connect_time")),1),t(": "+e(r.value),1)]),t(),_.value?(o(),l("span",ss,[es,t(),n("b",null,e(a(c)("common.detail.subscriptions.disconnect_time")),1),t(": "+e(_.value),1)])):I("",!0),t(),n("span",ts,e(a(c)("common.detail.subscriptions.responses_sent_acknowledged"))+`:

      `+e(b.value.responsesSent)+"/"+e(b.value.responsesAcknowledged),1)]))}});const os=L(ns,[["__scopeId","data-v-991b71e7"]]),rs=S({__name:"SubscriptionList",props:{subscriptions:{}},setup(d){const c=d,p=m(()=>{const s=Array.from(c.subscriptions);return s.reverse(),s});return(s,i)=>(o(),g(H,null,{default:v(()=>[(o(!0),l(f,null,D(p.value,(u,r)=>(o(),g(C,{key:r},{"accordion-header":v(()=>[k(os,{subscription:u},null,8,["subscription"])]),"accordion-content":v(()=>[k(G,{subscription:u},{default:v(()=>[s.$slots.default?A(s.$slots,"default",{key:0}):I("",!0)]),_:2},1032,["subscription"])]),_:2},1024))),128))]),_:3}))}});export{rs as _};
