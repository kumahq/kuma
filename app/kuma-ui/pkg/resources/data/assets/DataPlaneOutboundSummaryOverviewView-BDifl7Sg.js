import{d as q,r,p as u,o,w as t,b as n,l as s,e as a,q as A,O as L,t as f,m as y,F as N,c as l,N as d,L as k,Y as E}from"./index-C8cHhogd.js";import{A as I,a as M}from"./AccordionList-AZPLZtN0.js";import{P as G}from"./PolicyTypeTag-T-Tn9F9k.js";import{K as H}from"./kri-Dtsf0JIc.js";const J={class:"stack-with-borders"},Q={class:"stack-with-borders"},U={class:"mt-2"},et=q({__name:"DataPlaneOutboundSummaryOverviewView",props:{data:{},routeName:{}},setup(x){const w=x;return(W,e)=>{const O=r("XBadge"),P=r("XAction"),S=r("XCodeBlock"),h=r("XCard"),$=r("DataLoader"),C=r("DataSource"),X=r("XLayout"),z=r("AppView"),R=r("RouteView");return o(),u(R,{params:{mesh:"",proxy:"",connection:""},name:w.routeName},{default:t(({t:F,route:b,uri:g})=>[n(z,null,{default:t(()=>[n(X,{type:"stack"},{default:t(()=>[s("div",J,[n(L,{layout:"horizontal"},{title:t(()=>e[0]||(e[0]=[a(`
              Protocol
            `,-1)])),body:t(()=>[n(O,{appearance:"info"},{default:t(()=>[a(f(F(`http.api.value.${w.data.protocol}`)),1)]),_:2},1024)]),_:2,__:[1]},1024)]),e[10]||(e[10]=a()),w.data?(o(),u(X,{key:0,type:"stack",size:"small"},{default:t(()=>[e[8]||(e[8]=s("h3",null,"Rules",-1)),e[9]||(e[9]=a()),n(C,{src:g(y(N),"/policy-types",{})},{default:t(({data:p,error:K})=>[n(C,{src:g(y(N),"/meshes/:mesh/dataplanes/:name/policies/for/outbound/:kri",{mesh:b.params.mesh,name:b.params.proxy,kri:b.params.connection})},{default:t(({data:c,error:Y})=>[n($,{data:[p,c],errors:[K,Y]},{default:t(()=>[(o(!0),l(d,null,k([Object.groupBy((p==null?void 0:p.policyTypes)??[],({name:i})=>i)],i=>(o(),u(I,{key:`${typeof i}`,"initially-open":0,"multiple-open":"",class:"stack","data-testid":"outbound-policies-rules"},{default:t(()=>[(o(!0),l(d,null,k((c==null?void 0:c.policies)||[],({conf:j,kind:m,origins:v})=>(o(),u(h,{key:m},{default:t(()=>[n(M,null,{"accordion-header":t(()=>[n(G,{"policy-type":m},{default:t(()=>[a(f(m),1)]),_:2},1032,["policy-type"])]),"accordion-content":t(()=>[s("div",Q,[v.length>0?(o(),u(L,{key:0,layout:"horizontal"},{title:t(()=>e[2]||(e[2]=[a(`
                                  Origin policies
                                `,-1)])),body:t(()=>[s("ul",null,[(o(!0),l(d,null,k(v,_=>(o(),l("li",{key:_.kri},[(o(!0),l(d,null,k([y(H).fromString(_.kri)],({mesh:B,name:V})=>(o(),l(d,{key:`${B}-${V}`},[i[m]?(o(),u(P,{key:0,to:{name:"policy-detail-view",params:{mesh:B,policyPath:i[m][0].path,policy:V}}},{default:t(()=>[a(f(_.kri),1)]),_:2},1032,["to"])):(o(),l(d,{key:1},[a(f(_.kri),1)],64))],64))),128))]))),128))])]),_:2,__:[3]},1024)):A("",!0),e[6]||(e[6]=a()),s("div",null,[e[4]||(e[4]=s("dt",null,`
                                  Config
                                `,-1)),e[5]||(e[5]=a()),s("dd",U,[s("div",null,[n(S,{code:y(E).stringify(j),language:"yaml","show-copy-button":!1},null,8,["code"])])])])])]),_:2,__:[7]},1024)]),_:2},1024))),128))]),_:2},1024))),128))]),_:2},1032,["data","errors"])]),_:2},1032,["src"])]),_:2},1032,["src"])]),_:2,__:[8,9]},1024)):A("",!0)]),_:2,__:[10]},1024)]),_:2},1024)]),_:1},8,["name"])}}});export{et as default};
