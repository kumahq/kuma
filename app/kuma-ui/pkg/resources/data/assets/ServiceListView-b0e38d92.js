import{d as K,r as a,o,g as p,w as e,h as s,m as T,l as i,E as x,$ as z,C as c,a5 as R,j as _,F as u,S as V,i as d,a1 as B,ay as I,K as D,k as E,q as L}from"./index-77212499.js";const N=K({__name:"ServiceListView",setup(A){return($,O)=>{const w=a("RouteTitle"),k=a("RouterLink"),g=a("KButton"),b=a("KDropdownItem"),h=a("KDropdownMenu"),C=a("KCard"),S=a("AppView"),v=a("DataSource"),f=a("RouteView");return o(),p(v,{src:"/me"},{default:e(({data:y})=>[y?(o(),p(f,{key:0,name:"services-list-view",params:{page:1,size:y.pageSize,mesh:""}},{default:e(({route:n,t:r})=>[s(v,{src:`/meshes/${n.params.mesh}/service-insights?page=${n.params.page}&size=${n.params.size}`},{default:e(({data:l,error:m})=>[s(S,null,{title:e(()=>[T("h2",null,[s(w,{title:r("services.routes.items.title"),render:!0},null,8,["title"])])]),default:e(()=>[i(),s(C,null,{body:e(()=>[m!==void 0?(o(),p(x,{key:0,error:m},null,8,["error"])):(o(),p(z,{key:1,class:"service-collection","data-testid":"service-collection","empty-state-message":r("common.emptyState.message",{type:"Services"}),headers:[{label:"Name",key:"name"},{label:"Type",key:"serviceType"},{label:"Address",key:"addressPort"},{label:"DP proxies (online / total)",key:"online"},{label:"Status",key:"status"},{label:"Actions",key:"actions",hideLabel:!0}],"page-number":parseInt(n.params.page),"page-size":parseInt(n.params.size),total:l==null?void 0:l.total,items:l==null?void 0:l.items,error:m,onChange:n.update},{name:e(({row:t})=>[s(k,{to:{name:"service-detail-view",params:{service:t.name}}},{default:e(()=>[i(c(t.name),1)]),_:2},1032,["to"])]),serviceType:e(({rowValue:t})=>[i(c(t||"internal"),1)]),addressPort:e(({rowValue:t})=>[t?(o(),p(R,{key:0,text:t},null,8,["text"])):(o(),_(u,{key:1},[i(c(r("common.collection.none")),1)],64))]),online:e(({row:t})=>[t.dataplanes?(o(),_(u,{key:0},[i(c(t.dataplanes.online||0)+" / "+c(t.dataplanes.total||0),1)],64)):(o(),_(u,{key:1},[i(c(r("common.collection.none")),1)],64))]),status:e(({row:t})=>[s(V,{status:t.status||"not_available"},null,8,["status"])]),actions:e(({row:t})=>[s(h,{class:"actions-dropdown","kpop-attributes":{placement:"bottomEnd",popoverClasses:"mt-5 more-actions-popover"},width:"150"},{default:e(()=>[s(g,{class:"non-visual-button",appearance:"secondary",size:"small"},{default:e(()=>[s(d(B),{color:d(I),size:d(D)},null,8,["color","size"])]),_:1})]),items:e(()=>[s(b,{item:{to:{name:"service-detail-view",params:{service:t.name}},label:r("common.collection.actions.view")}},null,8,["item"])]),_:2},1024)]),_:2},1032,["empty-state-message","headers","page-number","page-size","total","items","error","onChange"]))]),_:2},1024)]),_:2},1024)]),_:2},1032,["src"])]),_:2},1032,["params"])):E("",!0)]),_:1})}}});const U=L(N,[["__scopeId","data-v-39bc4590"]]);export{U as default};
