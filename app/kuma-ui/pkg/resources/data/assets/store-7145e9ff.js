var he=Object.defineProperty;var pe=(t,e,s)=>e in t?he(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var E=(t,e,s)=>(pe(t,typeof e!="symbol"?e+"":e,s),s);import{c as me,u as Ee}from"./vuex.esm-bundler-ef854cbe.js";import{a as w,D as G}from"./constants-31fdaf55.js";const ge="modulepreload",de=function(t,e){return t.startsWith(".")?new URL(t,e).href:t},F={},c=function(e,s,n){if(!s||s.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(s.map(r=>{if(r=de(r,n),r in F)return;F[r]=!0;const a=r.endsWith(".css"),l=a?'[rel="stylesheet"]':"";if(!!n)for(let p=i.length-1;p>=0;p--){const f=i[p];if(f.href===r&&(!a||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${l}`))return;const h=document.createElement("link");if(h.rel=a?"stylesheet":ge,a||(h.as="script",h.crossOrigin=""),h.href=r,document.head.appendChild(h),a)return new Promise((p,f)=>{h.addEventListener("load",p),h.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>e())},_e=typeof process=="object"&&process.env&&{}.NODE_DEBUG&&/\bsemver\b/i.test({}.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};var q=_e;const Ie="2.0.0",fe=256,Te=Number.MAX_SAFE_INTEGER||9007199254740991,Se=16;var J={SEMVER_SPEC_VERSION:Ie,MAX_LENGTH:fe,MAX_SAFE_INTEGER:Te,MAX_SAFE_COMPONENT_LENGTH:Se},y={},ve={get exports(){return y},set exports(t){y=t}};(function(t,e){const{MAX_SAFE_COMPONENT_LENGTH:s}=J,n=q;e=t.exports={};const i=e.re=[],r=e.src=[],a=e.t={};let l=0;const o=(h,p,f)=>{const v=l++;n(h,v,p),a[h]=v,r[v]=p,i[v]=new RegExp(p,f?"g":void 0)};o("NUMERICIDENTIFIER","0|[1-9]\\d*"),o("NUMERICIDENTIFIERLOOSE","[0-9]+"),o("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),o("MAINVERSION",`(${r[a.NUMERICIDENTIFIER]})\\.(${r[a.NUMERICIDENTIFIER]})\\.(${r[a.NUMERICIDENTIFIER]})`),o("MAINVERSIONLOOSE",`(${r[a.NUMERICIDENTIFIERLOOSE]})\\.(${r[a.NUMERICIDENTIFIERLOOSE]})\\.(${r[a.NUMERICIDENTIFIERLOOSE]})`),o("PRERELEASEIDENTIFIER",`(?:${r[a.NUMERICIDENTIFIER]}|${r[a.NONNUMERICIDENTIFIER]})`),o("PRERELEASEIDENTIFIERLOOSE",`(?:${r[a.NUMERICIDENTIFIERLOOSE]}|${r[a.NONNUMERICIDENTIFIER]})`),o("PRERELEASE",`(?:-(${r[a.PRERELEASEIDENTIFIER]}(?:\\.${r[a.PRERELEASEIDENTIFIER]})*))`),o("PRERELEASELOOSE",`(?:-?(${r[a.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${r[a.PRERELEASEIDENTIFIERLOOSE]})*))`),o("BUILDIDENTIFIER","[0-9A-Za-z-]+"),o("BUILD",`(?:\\+(${r[a.BUILDIDENTIFIER]}(?:\\.${r[a.BUILDIDENTIFIER]})*))`),o("FULLPLAIN",`v?${r[a.MAINVERSION]}${r[a.PRERELEASE]}?${r[a.BUILD]}?`),o("FULL",`^${r[a.FULLPLAIN]}$`),o("LOOSEPLAIN",`[v=\\s]*${r[a.MAINVERSIONLOOSE]}${r[a.PRERELEASELOOSE]}?${r[a.BUILD]}?`),o("LOOSE",`^${r[a.LOOSEPLAIN]}$`),o("GTLT","((?:<|>)?=?)"),o("XRANGEIDENTIFIERLOOSE",`${r[a.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),o("XRANGEIDENTIFIER",`${r[a.NUMERICIDENTIFIER]}|x|X|\\*`),o("XRANGEPLAIN",`[v=\\s]*(${r[a.XRANGEIDENTIFIER]})(?:\\.(${r[a.XRANGEIDENTIFIER]})(?:\\.(${r[a.XRANGEIDENTIFIER]})(?:${r[a.PRERELEASE]})?${r[a.BUILD]}?)?)?`),o("XRANGEPLAINLOOSE",`[v=\\s]*(${r[a.XRANGEIDENTIFIERLOOSE]})(?:\\.(${r[a.XRANGEIDENTIFIERLOOSE]})(?:\\.(${r[a.XRANGEIDENTIFIERLOOSE]})(?:${r[a.PRERELEASELOOSE]})?${r[a.BUILD]}?)?)?`),o("XRANGE",`^${r[a.GTLT]}\\s*${r[a.XRANGEPLAIN]}$`),o("XRANGELOOSE",`^${r[a.GTLT]}\\s*${r[a.XRANGEPLAINLOOSE]}$`),o("COERCE",`(^|[^\\d])(\\d{1,${s}})(?:\\.(\\d{1,${s}}))?(?:\\.(\\d{1,${s}}))?(?:$|[^\\d])`),o("COERCERTL",r[a.COERCE],!0),o("LONETILDE","(?:~>?)"),o("TILDETRIM",`(\\s*)${r[a.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",o("TILDE",`^${r[a.LONETILDE]}${r[a.XRANGEPLAIN]}$`),o("TILDELOOSE",`^${r[a.LONETILDE]}${r[a.XRANGEPLAINLOOSE]}$`),o("LONECARET","(?:\\^)"),o("CARETTRIM",`(\\s*)${r[a.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",o("CARET",`^${r[a.LONECARET]}${r[a.XRANGEPLAIN]}$`),o("CARETLOOSE",`^${r[a.LONECARET]}${r[a.XRANGEPLAINLOOSE]}$`),o("COMPARATORLOOSE",`^${r[a.GTLT]}\\s*(${r[a.LOOSEPLAIN]})$|^$`),o("COMPARATOR",`^${r[a.GTLT]}\\s*(${r[a.FULLPLAIN]})$|^$`),o("COMPARATORTRIM",`(\\s*)${r[a.GTLT]}\\s*(${r[a.LOOSEPLAIN]}|${r[a.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",o("HYPHENRANGE",`^\\s*(${r[a.XRANGEPLAIN]})\\s+-\\s+(${r[a.XRANGEPLAIN]})\\s*$`),o("HYPHENRANGELOOSE",`^\\s*(${r[a.XRANGEPLAINLOOSE]})\\s+-\\s+(${r[a.XRANGEPLAINLOOSE]})\\s*$`),o("STAR","(<|>)?=?\\s*\\*"),o("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),o("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(ve,y);const Ae=["includePrerelease","loose","rtl"],Oe=t=>t?typeof t!="object"?{loose:!0}:Ae.filter(e=>t[e]).reduce((e,s)=>(e[s]=!0,e),{}):{};var Re=Oe;const k=/^[0-9]+$/,Q=(t,e)=>{const s=k.test(t),n=k.test(e);return s&&n&&(t=+t,e=+e),t===e?0:s&&!n?-1:n&&!s?1:t<e?-1:1},Ne=(t,e)=>Q(e,t);var ye={compareIdentifiers:Q,rcompareIdentifiers:Ne};const A=q,{MAX_LENGTH:H,MAX_SAFE_INTEGER:O}=J,{re:B,t:x}=y,Le=Re,{compareIdentifiers:T}=ye;let m=class{constructor(e,s){if(s=Le(s),e instanceof m){if(e.loose===!!s.loose&&e.includePrerelease===!!s.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid Version: ${e}`);if(e.length>H)throw new TypeError(`version is longer than ${H} characters`);A("SemVer",e,s),this.options=s,this.loose=!!s.loose,this.includePrerelease=!!s.includePrerelease;const n=e.trim().match(s.loose?B[x.LOOSE]:B[x.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>O||this.major<0)throw new TypeError("Invalid major version");if(this.minor>O||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>O||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const r=+i;if(r>=0&&r<O)return r}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(A("SemVer.compare",this.version,this.options,e),!(e instanceof m)){if(typeof e=="string"&&e===this.version)return 0;e=new m(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof m||(e=new m(e,this.options)),T(this.major,e.major)||T(this.minor,e.minor)||T(this.patch,e.patch)}comparePre(e){if(e instanceof m||(e=new m(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let s=0;do{const n=this.prerelease[s],i=e.prerelease[s];if(A("prerelease compare",s,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return T(n,i)}while(++s)}compareBuild(e){e instanceof m||(e=new m(e,this.options));let s=0;do{const n=this.build[s],i=e.build[s];if(A("prerelease compare",s,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return T(n,i)}while(++s)}inc(e,s){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",s);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",s);break;case"prepatch":this.prerelease.length=0,this.inc("patch",s),this.inc("pre",s);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",s),this.inc("pre",s);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let n=this.prerelease.length;for(;--n>=0;)typeof this.prerelease[n]=="number"&&(this.prerelease[n]++,n=-2);n===-1&&this.prerelease.push(0)}s&&(T(this.prerelease[0],s)===0?isNaN(this.prerelease[1])&&(this.prerelease=[s,0]):this.prerelease=[s,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}};var De=m;const z=De,Ce=(t,e,s)=>new z(t,s).compare(new z(e,s));var D=Ce;class Me{constructor(e){E(this,"storageAdapter");this.storageAdapter=e}get(e){let s;try{s=this.storageAdapter.getItem(e)}catch{return null}if(s===null||!(s.startsWith("[")||s.startsWith("{")))return s;try{return JSON.parse(s)}catch{return s}}set(e,s){try{const n=typeof s=="string"?s:JSON.stringify(s);this.storageAdapter.setItem(e,n)}catch{}}has(e){try{return this.storageAdapter.getItem(e)!==null}catch{return!1}}remove(e){try{this.storageAdapter.removeItem(e)}catch{}}}const d=new Me(window.localStorage);function ee(t,e,s=void 0){if(typeof t!="object"||Array.isArray(t))return s;const n=e.indexOf(".");if(n===-1)return t[e]===void 0?s:t[e];const i=e.substring(0,n),r=e.substring(n+1);return ee(t[i],r,s)}const we=new Intl.DateTimeFormat("en-US",{dateStyle:"long"}),Pe=new Intl.DateTimeFormat("en-US",{dateStyle:"long",timeStyle:"medium"});function $e(t){const e=new Date(Date.parse(t)),s=Math.floor((Date.now()-e.getTime())/1e3);return s<=1?"just now":s<20?`${s} seconds ago`:s<40?"half a minute ago":s<60?"less than a minute ago":s<=90?"one minute ago":s<=3540?`${Math.round(s/60)} minutes ago`:s<=5400?"1 hour ago":s<=86400?`${Math.round(s/3600)} hours ago`:s<=129600?"1 day ago":s<604800?`${Math.round(s/86400)} days ago`:s<=777600?"1 week ago":we.format(e)}function qt(t){const e=new Date(Date.parse(t));return Pe.format(e)}function Jt(t,e){const s=t&&typeof t=="object"&&t.constructor===Array?Object.assign({},...t):t;return e.reduce((n,i)=>({...n,[i]:s[i]}),{})}function Qt(t){const{creationTime:e,modificationTime:s,...n}=t;return n}function es(t){const e=t.replace(/[^a-zA-Z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim();return t?e:""}async function R(t){try{let e=null,s=0,n=[];for(;;){const i={size:w,offset:s},{total:r,items:a,next:l}=await t(i);if(Array.isArray(a)&&(n=n.concat(a)),e===null&&(e=r),r!==e)throw new Error('Mismatch between "total" values between requests');if(!l)break;s+=w}return{total:e,items:n}}catch(e){throw new Error(`Resource fetching failed: ${e}`)}}function ts(t){var s;const e=((s=t==null?void 0:t.zoneInsight)==null?void 0:s.subscriptions.length)??0;if(e&&t.zoneInsight.subscriptions[e-1].config){const n=JSON.parse(t.zoneInsight.subscriptions[e-1].config);return ee(n,"dpServer.auth.type",G)}return G}const te=(t={},e={})=>{const s=t.online||0,n=e.online||0,i=t.partiallyDegraded||0,r=e.partiallyDegraded||0,a=t.total||0,l=e.total||0;return{online:s+n,partiallyDegraded:i+r,total:a+l}},$=()=>({CircuitBreaker:{total:0},FaultInjection:{total:0},HealthCheck:{total:0},MeshAccessLog:{total:0},MeshGateway:{total:0},MeshGatewayRoute:{total:0},MeshTrace:{total:0},MeshTrafficPermission:{total:0},ProxyTemplate:{total:0},RateLimit:{total:0},Retry:{total:0},Timeout:{total:0},TrafficLog:{total:0},TrafficPermission:{total:0},TrafficRoute:{total:0},TrafficTrace:{total:0},VirtualOutbound:{total:0}}),be=(t=$(),e={})=>Object.entries(e).reduce((s,[n,i])=>{const r=s[n]?s[n].total:0;return{...s,[n]:{total:r+i.total}}},t),j=(t={},e={})=>Object.entries(e).reduce((s,[n,i])=>({...s,[n]:te(s[n],i)}),t),Ve=(t={},e={})=>({kumaDp:j(t.kumaDp,e.kumaDp),envoy:j(t.envoy,e.envoy)});function se(){return{meshesTotal:0,dataplanes:{online:0,partiallyDegraded:0,total:0},policies:$(),dpVersions:{kumaDp:{},envoy:{}}}}function Ue(t={}){return ne([t])}function ne(t=[]){return t.reduce((e,s)=>({meshesTotal:t.length,dataplanes:te(e.dataplanes,s.dataplanes),policies:be(e.policies,s.policies),dpVersions:Ve(e.dpVersions,s.dpVersions)}),{meshesTotal:0,dataplanes:{online:0,partiallyDegraded:0,total:0},policies:$(),dpVersions:{kumaDp:{},envoy:{}}})}function ss(t){let e=[];t.networking.inbound&&(e=t.networking.inbound.filter(n=>"tags"in n).flatMap(n=>Object.entries(n.tags)).map(([n,i])=>`${n}=${i}`)),t.networking.gateway&&(e=Object.entries(t.networking.gateway.tags).map(([n,i])=>`${n}=${i}`));const s=Array.from(new Set(e));return s.sort((n,i)=>n.localeCompare(i)),s.map(n=>n.split("=")).map(([n,i])=>({label:n,value:i}))}function re(t={subscriptions:[]}){return(t.subscriptions??[]).some(s=>{var n;return((n=s.connectTime)==null?void 0:n.length)&&!s.disconnectTime})?"online":"offline"}function ns(t,e={subscriptions:[]}){const s=t.networking.inbound??[],n=s.filter(r=>r.health&&!r.health.ready).map(r=>`Inbound on port ${r.port} is not ready (kuma.io/service: ${r.tags["kuma.io/service"]})`);let i;switch(!0){case s.length===0:i="online";break;case n.length===s.length:i="offline";break;case n.length>0:i="partially_degraded";break;default:i=re(e)}return{status:i,reason:n}}function rs(t){if(t===void 0||t.subscriptions.length===0)return null;const e={},s=t.subscriptions[t.subscriptions.length-1];return s.version===void 0?null:(s.version.envoy&&(e.envoy=s.version.envoy.version),s.version.kumaDp&&(e.kumaDp=s.version.kumaDp.version),s.version.dependencies&&Object.entries(s.version.dependencies).forEach(([n,i])=>{e[n]=i}),e)}function is(t){if(t.dataplaneInsight===void 0||t.dataplaneInsight.mTLS===void 0)return null;const{mTLS:e}=t.dataplaneInsight,s=new Date(e.certificateExpirationTime),n=new Date(s.getTime()+s.getTimezoneOffset()*6e4);return{certificateExpirationTime:{label:"Expiration Time",value:`${n.toLocaleDateString("en-US")} ${n.getHours()}:${n.getMinutes()}:${n.getSeconds()}`},lastCertificateRegeneration:{label:"Last Generated",value:$e(e.lastCertificateRegeneration)},certificateRegenerations:{label:"Regenerations",value:e.certificateRegenerations}}}function as(t){var n,i;return((n=t.kumaDp)==null?void 0:n.kumaCpCompatible)??!0?((i=t.envoy)==null?void 0:i.kumaDpCompatible)??!0?{kind:Ge}:{kind:ke,payload:{envoy:t.envoy.version,kumaDp:t.kumaDp.version}}:{kind:Fe,payload:{kumaDp:t.kumaDp.version}}}const Ge="COMPATIBLE",os="INCOMPATIBLE_ZONE_CP_AND_KUMA_DP_VERSIONS",ls="INCOMPATIBLE_ZONE_AND_GLOBAL_CPS_VERSIONS",Fe="INCOMPATIBLE_UNSUPPORTED_KUMA_DP",ke="INCOMPATIBLE_UNSUPPORTED_ENVOY",cs="INCOMPATIBLE_WRONG_FORMAT";class He extends Error{constructor({title:s=null,message:n,code:i=null,statusCode:r,causes:a=[]}){super(n);E(this,"title");E(this,"code");E(this,"causes");E(this,"statusCode");this.name="ApiError",this.title=s,this.code=i,this.statusCode=r,this.causes=a}toJSON(){return{name:this.name,title:this.title,message:this.message,code:this.code,statusCode:this.statusCode,causes:this.causes}}}async function Be(t,e={}){var h;const s=e,n=s.method??"GET";s.headers=s.headers instanceof Headers?s.headers:new Headers(s.headers),!s.headers.has("content-type")&&["POST","PUT","PATCH"].includes(n)&&s.headers.set("content-type","application/json");let i=t;"params"in e&&(n==="GET"?i+=`?${new URLSearchParams(e.params).toString()}`:(h=s.headers.get("content-type"))!=null&&h.startsWith("application/json")&&(s.body=JSON.stringify(e.params)));let r;try{r=await fetch(i,s)}catch(p){throw xe(p)}const a=r.headers.get("content-type"),o=(a!==null?a.startsWith("application/json"):!1)?await r.json():await r.text();if(r.ok)return{response:r,data:o};throw ze(r,o)}function xe(t){const e=t instanceof Error?t.message:"An unknown network error occurred.";return new Error(e)}function ze(t,e){let s=null,n="An error has occurred while trying to load this data.",i=null,r=[];return typeof e=="string"&&e.length>0?n=e:e&&(Object.prototype.hasOwnProperty.call(e,"title")&&(s=e.title),Object.prototype.hasOwnProperty.call(e,"details")&&(n=e.details),Object.prototype.hasOwnProperty.call(e,"code")&&(i=e.code),Object.prototype.hasOwnProperty.call(e,"causes")&&Array.isArray(e.causes)&&(r=e.causes)),t.status===403&&(n="You currently don’t have access to this data."),new He({title:s,message:n,code:i,causes:r,statusCode:t.status})}const K=window.location.origin;class je{constructor(){E(this,"_baseUrl",K)}get baseUrl(){return this._baseUrl}set baseUrl(e){if(e.startsWith("http"))this._baseUrl=ie(e);else{const s=Ze(e);this._baseUrl=[K,s].filter(n=>n!=="").join("/")}}async get(e,s){const n=Z(s);n.method="GET";const{data:i}=await this.raw(e,n);return i}async raw(e,s){const n=Z(s),i=e.startsWith("http")?e:[this.baseUrl,e].join("/");return Be(i,n)}}function ie(t){return t.replace(/\/+$/,"")}function Ke(t){return t.replace(/^\/+/,"")}function Ze(t){return ie(Ke(t))}function Z(t){const e=t??{};if(e.params&&!Array.isArray(e.params)){const s=[];for(const[n,i]of Object.entries(e.params))if(i!==void 0)if(Array.isArray(i))for(const r of i)s.push([n,r]);else s.push([n,i]);e.params=s}return e}var C=new Map,ae=new Map,Xe=new Map,I;(function(t){t[t.Constant=0]="Constant",t[t.Instance=1]="Instance",t[t.Factory=2]="Factory"})(I||(I={}));var g;(function(t){t[t.Container=0]="Container",t[t.Resolution=1]="Resolution",t[t.Singleton=2]="Singleton",t[t.Transient=3]="Transient"})(g||(g={}));var Ye=class{constructor(t){this.impl=t,this.type=I.Constant}},We=class{constructor(t){this.impl=t,this.type=I.Factory}},qe=t=>t.type===I.Factory,L=class{constructor(t){this.impl=t,this.type=I.Instance}},Je=class extends L{constructor(){super(...arguments),this.scope=g.Container,this.cache=new WeakMap}},Qe=class extends L{constructor(){super(...arguments),this.scope=g.Resolution}},et=class extends L{constructor(t){super(t),this.impl=t,this.scope=g.Singleton}},tt=class extends L{constructor(){super(...arguments),this.scope=g.Transient}},st=t=>t.type===I.Instance,nt=t=>t.scope===g.Container,rt=t=>t.scope===g.Resolution,it=t=>t.scope===g.Singleton,at=t=>Symbol(t),oe=t=>{const e=Symbol(t);return{__t:null,__d:t,__s:e,__o:!1,optional:{__t:null,__d:t,__s:e,__o:!0}}},S=class{constructor(){this.parent=null,this.map=new Map}set(t,e,s=S.notag){const n=this.map.get(e.__s);n?n.set(s,t):this.map.set(e.__s,new Map().set(s,t))}find(t,e,s){const n=this.map.get(t.__s);if(n!==void 0){if(s){const i=n.get(s);if(i)return i}if(e)for(let i=0,r=e.length;i<r;i+=1){const a=n.get(e[i]);if(a)return a}return n.get(S.notag)}}resolve(t,e,s,n){const i=this.find(t,s,n);return i===void 0?this.parent?this.parent.resolve(t,e,s,n):null:i instanceof S?(e.vaults.push(i),i.resolve(t,e,s,n)):i}get(t,e,s,n){const i=this.resolve(t,e,s,n);if(i)return i;for(let r=0,a=e.vaults,l=a.length;r<l;r+=1){const o=a[r].resolve(t,e,s,n);if(o)return o}return null}from(t){const e=new S;return e.parent=this.parent,this.map.forEach((s,n)=>{e.map.set(n,t(s))}),e}clone(){return this.from(t=>new Map(t))}},le=S;le.notag=at("NO_TAG");var ot=class{constructor(t,e,s,n){this.vault=t,this.tokens=e,this.getVault=s,this.condition=n}from(t){const{tokens:e}=this;for(let s=0,n=e.length;s<n;s+=1)this.vault.set(this.getVault(t),e[s],this.condition)}},lt=class{constructor(t,e,s,n){this.vault=t,this.impl=e,this.token=s,this.condition=n}inContainerScope(){this.set(Je)}inResolutionScope(){this.set(Qe)}inSingletonScope(){this.set(et)}inTransientScope(){this.set(tt)}set(t){this.vault.set(new t(this.impl),this.token,this.condition)}},ct=class{constructor(t,e,s){this.vault=t,this.token=e,this.condition=s}toConstant(t){this.vault.set(new Ye(t),this.token,this.condition)}toFactory(t,e){this.vault.set(new We({creator:t,initializer:e}),this.token,this.condition)}toInstance(t){return new lt(this.vault,t,this.token,this.condition)}},P=class{constructor(t,e){this.vault=t,this.condition=e}static vault(t){return t.vault}bind(t){return new ct(this.vault,t,this.condition)}use(...t){return new ot(this.vault,t,P.vault,this.condition)}},ut=class extends P{when(t){return new P(this.vault,t)}},ht=class extends ut{constructor(){super(new le)}},ce=class{constructor(t=new Map,e=[]){this.instances=t,this.vaults=e}split(){return new ce(this.instances,this.vaults.slice())}},N=class extends ht{constructor(){super(),this.snapshot=null}extend(t){return this.vault.parent=t===null?null:t.vault,this}clone(){const t=new N;return t.vault=this.vault.clone(),t}get(t,e){return this.resolveToken(t,e)}resolveTokens(t,e,s,n){return t.map(i=>this.resolveToken(i,s,n,e.split()))}resolveToken(t,e,s,n=new ce){const i=this.vault.get(t,n,e,s);if(i)return this.resolveBinding(i,n);if(!t.__o)throw new Error(`No matching bindings found for '${t.__d}' token.`)}resolveBinding(t,e){return st(t)?it(t)?this.resolveCache(t,e,()=>t.cache,s=>{t.cache=s}):nt(t)?this.resolveCache(t,e,()=>t.cache.get(this.vault),s=>{t.cache.set(this.vault,s)}):rt(t)?this.resolveCache(t,e,()=>e.instances.get(t),s=>{e.instances.set(t,s)}):this.createInstance(t.impl,e):qe(t)?(...s)=>{const n=this.createInstance(t.impl.creator,e);return n instanceof Promise?n.then(i=>N.resolveInitialization(i,s,t.impl.initializer)):N.resolveInitialization(n,s,t.impl.initializer)}:t.impl}resolveCache(t,e,s,n){const i=s();if(i!==void 0)return i;const r=this.createInstance(t.impl,e);return n(r),r}createInstance(t,e){const s=this.getParameters(t,e),n=C.get(t);if(n!==void 0)return n?t(...s):new t(...s);try{const i=t(...s);return C.set(t,!0),i}catch{const r=new t(...s);return C.set(t,!1),r}}getParameters(t,e){const s=ae.get(t);if(s)return this.resolveTokens(s,e,Xe.get(t),t);if(t.length===0)return[];throw new Error(`Missing required 'injected' registration of '${t.name}'`)}static resolveInitialization(t,e,s){const n=s==null?void 0:s(t,...e);return n instanceof Promise?n.then(()=>t):t}},pt=()=>new N,mt=(t,...e)=>(ae.set(t,e),t);const b=pt(),V=t=>b.get(t),us=(...t)=>t.map(e=>()=>V(e)),M=(t,e)=>{const s=oe(e.description);return b.bind(s).toInstance(t).inSingletonScope(),s},Et=(t,e)=>{const s=oe(e.description);return b.bind(s).toConstant(t),s},gt={baseGuiPath:"",apiUrl:"/",version:"1.7.0"};class ue{constructor(e){E(this,"env");let s=e;const n=(a,l="")=>this.var(a,(s==null?void 0:s[a])??l),i=_t(),r=dt(n("KUMA_VERSION",i.version));s={...s,KUMA_UTM_QUERY_PARAMS:`utm_source=${n("KUMA_PRODUCT_NAME")}&utm_medium=${n("KUMA_PRODUCT_NAME")}-GUI`},this.env={...s,KUMA_INSTALL_URL:`${n("KUMA_INSTALL_URL")}?${n("KUMA_UTM_QUERY_PARAMS")}`,KUMA_DOCS_URL:`${n("KUMA_DOCS_URL")}/${r.patch==="0.0.0"?"dev":r.patch.replace(/\.\d+$/,".x")}`,KUMA_VERSION:r.pre,KUMA_API_URL:n("KUMA_API_URL")??i.apiUrl,KUMA_BASE_PATH:n("KUMA_BASE_PATH")??i.baseGuiPath}}var(e,s=""){var n;return((n=this.env)==null?void 0:n[e])??s}}function dt(t){const[e,s,...n]=t.split("."),[i,r]=n.join(".").split("-");return{major:e,minor:`${e}.${s}`,patch:`${e}.${s}.${i}`,pre:`${e}.${s}.${i}${r!==void 0?`-${r}`:""}`}}function _t(){const t=document.querySelector("#kuma-config");if(t instanceof HTMLScriptElement)try{return JSON.parse(t.innerText.trim())}catch{}return gt}function _(t,e=0){const s=It(t);return s!==void 0?parseInt(s):e}function It(t){const e=Array.isArray(t)?t:[t];return e[e.length-1]??void 0}const ft=t=>[{path:"/404",name:"not-found",alias:"/:pathMatch(.*)*",meta:{title:"Item not found"},component:()=>c(()=>import("./AppNotFoundView-fe19d0b3.js"),[],import.meta.url)},{path:"/",name:"home",meta:{title:"Overview"},component:()=>c(()=>import("./MainOverviewView-d1c18e90.js"),["./MeshResources-061a43b2.css","./MainOverviewView-995aa41e.css"],import.meta.url)},{path:"/diagnostics",name:"diagnostics",meta:{title:"Diagnostics"},component:()=>c(()=>import("./DiagnosticsView-b5de47d6.js"),["./CodeBlock-7d9027b4.css"],import.meta.url)},{path:"/zones",name:"zones",meta:{title:"Zones"},props:e=>({selectedZoneName:e.query.zone,offset:_(e.query.offset)}),component:()=>c(()=>import("./ZonesView-13365956.js"),["./AccordionItem-2e8063db.css","./CodeBlock-7d9027b4.css","./ErrorBlock-8c979915.css","./StatusBadge-43351938.css","./TagList-27d87a7b.css","./DataOverview-cc37ba93.css","./LabelList-82c1e9de.css","./SubscriptionHeader-da67a0ee.css","./TabsWidget-4d82abdb.css"],import.meta.url)},{path:"/zone-ingresses",name:"zoneingresses",meta:{title:"Zone ingresses"},props:e=>({selectedZoneIngressName:e.query.zoneIngress,offset:_(e.query.offset)}),component:()=>c(()=>import("./ZoneIngresses-f29b5926.js"),["./AccordionItem-2e8063db.css","./ErrorBlock-8c979915.css","./StatusBadge-43351938.css","./TagList-27d87a7b.css","./DataOverview-cc37ba93.css","./CodeBlock-7d9027b4.css","./EnvoyData-55ab94cb.css","./LabelList-82c1e9de.css","./SubscriptionHeader-da67a0ee.css","./TabsWidget-4d82abdb.css"],import.meta.url)},{path:"/zoneegresses",name:"zoneegresses",meta:{title:"Zone egresses"},props:e=>({selectedZoneEgressName:e.query.zoneEgress,offset:_(e.query.offset)}),component:()=>c(()=>import("./ZoneEgresses-ab0eb926.js"),["./AccordionItem-2e8063db.css","./ErrorBlock-8c979915.css","./StatusBadge-43351938.css","./TagList-27d87a7b.css","./DataOverview-cc37ba93.css","./CodeBlock-7d9027b4.css","./EnvoyData-55ab94cb.css","./LabelList-82c1e9de.css","./SubscriptionHeader-da67a0ee.css","./TabsWidget-4d82abdb.css"],import.meta.url)},{path:"/mesh/:mesh",children:[{path:"",name:"mesh-detail-view",meta:{title:"Mesh overview"},component:()=>c(()=>import("./MeshOverviewView-894da006.js"),["./ContentWrapper-fe2d0f8d.css","./MeshResources-061a43b2.css","./ErrorBlock-8c979915.css","./LabelList-82c1e9de.css","./CodeBlock-7d9027b4.css","./MeshOverviewView-d74d8263.css"],import.meta.url)},{path:"gateways",children:[{path:"",name:"gateway-list-view",meta:{title:"Gateways"},props:e=>({selectedDppName:e.query.gateway,gatewayType:e.query.gatewayType==="all"?"true":e.query.gatewayType,offset:_(e.query.offset),isGatewayView:!0}),component:()=>c(()=>import("./DataPlaneListView-6beb61a1.js"),["./ContentWrapper-fe2d0f8d.css","./ErrorBlock-8c979915.css","./StatusBadge-43351938.css","./TagList-27d87a7b.css","./DataOverview-cc37ba93.css","./CodeBlock-7d9027b4.css","./DataPlaneList-d74cf059.css","./DataPlaneListView-c9bf2e34.css"],import.meta.url)},{path:":dataPlane",name:"gateway-detail-view",meta:{title:"Gateway",parent:"gateway-list-view",breadcrumbTitleParam:"dataPlane"},component:()=>c(()=>import("./DataPlaneDetailView-b5ca3965.js"),["./AccordionItem-2e8063db.css","./CodeBlock-7d9027b4.css","./TagList-27d87a7b.css","./ErrorBlock-8c979915.css","./EnvoyData-55ab94cb.css","./LabelList-82c1e9de.css","./StatusBadge-43351938.css","./TabsWidget-4d82abdb.css","./SubscriptionHeader-da67a0ee.css","./DataPlaneDetailView-230a138b.css"],import.meta.url)}]},{path:"data-planes",children:[{path:"",name:"data-plane-list-view",meta:{title:"Data plane proxies"},props:e=>({selectedDppName:e.query.dpp,offset:_(e.query.offset)}),component:()=>c(()=>import("./DataPlaneListView-6beb61a1.js"),["./ContentWrapper-fe2d0f8d.css","./ErrorBlock-8c979915.css","./StatusBadge-43351938.css","./TagList-27d87a7b.css","./DataOverview-cc37ba93.css","./CodeBlock-7d9027b4.css","./DataPlaneList-d74cf059.css","./DataPlaneListView-c9bf2e34.css"],import.meta.url)},{path:":dataPlane",name:"data-plane-detail-view",meta:{title:"Data plane proxy",parent:"data-plane-list-view",breadcrumbTitleParam:"dataPlane"},component:()=>c(()=>import("./DataPlaneDetailView-b5ca3965.js"),["./AccordionItem-2e8063db.css","./CodeBlock-7d9027b4.css","./TagList-27d87a7b.css","./ErrorBlock-8c979915.css","./EnvoyData-55ab94cb.css","./LabelList-82c1e9de.css","./StatusBadge-43351938.css","./TabsWidget-4d82abdb.css","./SubscriptionHeader-da67a0ee.css","./DataPlaneDetailView-230a138b.css"],import.meta.url)}]},{path:"services",children:[{path:"",name:"service-list-view",meta:{title:"Services"},props:e=>({selectedServiceName:e.query.service,offset:_(e.query.offset)}),component:()=>c(()=>import("./ServiceListView-d3524769.js"),["./ContentWrapper-fe2d0f8d.css","./ErrorBlock-8c979915.css","./StatusBadge-43351938.css","./TagList-27d87a7b.css","./DataOverview-cc37ba93.css","./CodeBlock-7d9027b4.css","./ServiceSummary-af890f41.css"],import.meta.url)},{path:":service",name:"service-detail-view",meta:{title:"Internal service",parent:"service-list-view",breadcrumbTitleParam:"service"},props:e=>({selectedDppName:e.query.dpp}),component:()=>c(()=>import("./ServiceDetailView-2fc7ad33.js"),["./ErrorBlock-8c979915.css","./ContentWrapper-fe2d0f8d.css","./StatusBadge-43351938.css","./TagList-27d87a7b.css","./DataOverview-cc37ba93.css","./CodeBlock-7d9027b4.css","./DataPlaneList-d74cf059.css","./ServiceSummary-af890f41.css"],import.meta.url)}]},{path:"policies",name:"policies",meta:{title:"Policies"},redirect:e=>{let s=t.state.policyTypes.find(n=>t.state.sidebar.insights.mesh.policies[n.name]!==0);return s===void 0&&(s=t.state.policyTypes[0]),{...e,params:{...e.params,policyPath:s.path},name:"policy"}}},{path:"policies/:policyPath",name:"policy",meta:{parent:"policies"},component:()=>c(()=>import("./PolicyView-e3d84892.js"),["./ErrorBlock-8c979915.css","./StatusBadge-43351938.css","./TagList-27d87a7b.css","./DataOverview-cc37ba93.css","./LabelList-82c1e9de.css","./TabsWidget-4d82abdb.css","./CodeBlock-7d9027b4.css","./PolicyView-143a82ea.css"],import.meta.url),props:e=>{const s=t.state.policyTypesByPath[e.params.policyPath];return e.meta.title=s.name,{policyPath:e.params.policyPath,selectedPolicyName:e.query.policy,offset:_(e.query.offset)}}}]},{path:"/onboarding",redirect:{name:"onboarding-welcome"},component:()=>c(()=>import("./ShellEmpty-2ecf13da.js"),["./ShellEmpty-6642bce4.css"],import.meta.url),children:[{path:"welcome",name:"onboarding-welcome",meta:{title:"Welcome to Kuma!",onboardingProcess:!0},component:()=>c(()=>import("./WelcomeView-d5044d88.js"),["./OnboardingNavigation-8e0e24c9.css","./WelcomeView-81c1745d.css"],import.meta.url)},{path:"deployment-types",name:"onboarding-deployment-types",meta:{title:"Deployment Types",onboardingProcess:!0},component:()=>c(()=>import("./DeploymentTypes-3a768ee8.js"),["./OnboardingNavigation-8e0e24c9.css","./OnboardingPage-b97c066f.css","./DeploymentTypes-a5506858.css"],import.meta.url)},{path:"configuration-types",name:"onboarding-configuration-types",meta:{title:"Configuration Types",onboardingProcess:!0},component:()=>c(()=>import("./ConfigurationTypes-6434b327.js"),["./OnboardingNavigation-8e0e24c9.css","./OnboardingPage-b97c066f.css","./ConfigurationTypes-3e295b7d.css"],import.meta.url)},{path:"multi-zone",name:"onboarding-multi-zone",meta:{title:"Multizone",onboardingProcess:!0},component:()=>c(()=>import("./MultiZoneView-53b5e1f6.js"),["./LoadingBox-c2da9e95.css","./OnboardingNavigation-8e0e24c9.css","./OnboardingPage-b97c066f.css"],import.meta.url)},{path:"create-mesh",name:"onboarding-create-mesh",meta:{title:"Create the Mesh",onboardingProcess:!0},component:()=>c(()=>import("./CreateMesh-4afec307.js"),["./OnboardingNavigation-8e0e24c9.css","./OnboardingPage-b97c066f.css"],import.meta.url)},{path:"add-services",name:"onboarding-add-services",meta:{title:"Add new services",onboardingProcess:!0},component:()=>c(()=>import("./AddNewServices-d960a2d4.js"),["./OnboardingNavigation-8e0e24c9.css","./OnboardingPage-b97c066f.css","./AddNewServices-1b605ca2.css"],import.meta.url)},{path:"add-services-code",name:"onboarding-add-services-code",meta:{title:"Add new services",onboardingProcess:!0},component:()=>c(()=>import("./AddNewServicesCode-dcb45cd8.js"),["./CodeBlock-7d9027b4.css","./LoadingBox-c2da9e95.css","./OnboardingNavigation-8e0e24c9.css","./OnboardingPage-b97c066f.css"],import.meta.url)},{path:"dataplanes-overview",name:"onboarding-dataplanes-overview",meta:{title:"Data plane overview",onboardingProcess:!0},component:()=>c(()=>import("./DataplanesOverview-f02c86f7.js"),["./LoadingBox-c2da9e95.css","./StatusBadge-43351938.css","./OnboardingNavigation-8e0e24c9.css","./OnboardingPage-b97c066f.css","./DataplanesOverview-0c89c176.css"],import.meta.url)},{path:"completed",name:"onboarding-completed",meta:{title:"Completed",onboardingProcess:!0},component:()=>c(()=>import("./CompletedView-715213a0.js"),["./OnboardingNavigation-8e0e24c9.css","./OnboardingPage-b97c066f.css"],import.meta.url)}]},{path:"/wizard",name:"wizard",children:[{path:"mesh",name:"create-mesh",meta:{title:"Create a new mesh",wizardProcess:!0},component:()=>c(()=>import("./MeshWizard-af86f106.js"),["./CodeBlock-7d9027b4.css","./StepSkeleton-4161d6eb.css","./ErrorBlock-8c979915.css","./TabsWidget-4d82abdb.css","./MeshWizard-bd986a8d.css"],import.meta.url)},{path:"kubernetes-dataplane",name:"kubernetes-dataplane",meta:{title:"Create a new data plane proxy on Kubernetes",wizardProcess:!0},component:()=>c(()=>import("./DataplaneKubernetes-9fe766f0.js"),["./CodeBlock-7d9027b4.css","./StepSkeleton-4161d6eb.css","./EnvironmentSwitcher-8d17c23e.css","./DataplaneKubernetes-bad15b66.css"],import.meta.url)},{path:"universal-dataplane",name:"universal-dataplane",meta:{title:"Create a new data plane proxy on Universal",wizardProcess:!0},component:()=>c(()=>import("./DataplaneUniversal-7bdfb4a2.js"),["./CodeBlock-7d9027b4.css","./StepSkeleton-4161d6eb.css","./EnvironmentSwitcher-8d17c23e.css","./DataplaneUniversal-451f0c43.css"],import.meta.url)}]}],U={EnvVars:Et({KUMA_PRODUCT_NAME:"Kuma",KUMA_FEEDBACK_URL:"https://github.com/kumahq/kuma/issues/new/choose",KUMA_CHAT_URL:"https://kuma-mesh.slack.com",KUMA_INSTALL_URL:"https://kuma.io/install/latest/",KUMA_VERSION_URL:"https://kuma.io/latest_version/",KUMA_DOCS_URL:"https://kuma.io/docs"},{description:"EnvVars"}),Env:M(ue,{description:"Env"}),env:M(()=>t=>V(U.Env).var(t),{description:"env"}),routes:M(()=>ft(Kt),{description:"routes"})};mt(ue,U.EnvVars);const Tt=V(U.Env);class St{constructor(){E(this,"client");this.client=new je}get baseUrl(){return this.client.baseUrl}setBaseUrl(e){this.client.baseUrl=e}getInfo(){return this.client.get("")}async getStatus(){try{const{response:e}=await this.client.raw("");return e.status===200?"OK":null}catch{return null}}async getLatestVersion(){return this.client.get(Tt.var("KUMA_VERSION_URL"))}getConfig(){return this.client.get("config")}getPolicyTypes(){return this.client.get("policies")}getGlobalInsights(){return this.client.get("global-insights")}getZones(e){return this.client.get("zones",{params:e})}getZone({name:e},s){return this.client.get(`zones/${e}`,{params:s})}getAllZoneOverviews(e){return this.client.get("zones+insights",{params:e})}getZoneOverview({name:e},s){return this.client.get(`zones+insights/${e}`,{params:s})}getZoneIngressData({zoneIngressName:e,dataPath:s},n){return this.client.get(`zoneingresses/${e}/${s}`,{params:n})}getAllZoneIngressOverviews(e){return this.client.get("zoneingresses+insights",{params:e})}getZoneIngressOverview({name:e},s){return this.client.get(`zoneingresses+insights/${e}`,{params:s})}getZoneEgressData({zoneEgressName:e,dataPath:s},n){return this.client.get(`zoneegresses/${e}/${s}`,{params:n})}getAllZoneEgressOverviews(e){return this.client.get("zoneegressoverviews",{params:e})}getZoneEgressOverview({name:e},s){return this.client.get(`zoneegressoverviews/${e}`,{params:s})}getAllMeshes(e){return this.client.get("meshes",{params:e})}getMesh({name:e},s){return this.client.get(`meshes/${e}`,{params:s})}getAllMeshInsights(e){return this.client.get("mesh-insights",{params:e})}getMeshInsights({name:e},s){return this.client.get(`mesh-insights/${e}`,{params:s})}getAllDataplanes(e){return this.client.get("dataplanes",{params:e})}getDataplaneFromMesh({mesh:e,name:s},n){return this.client.get(`meshes/${e}/dataplanes/${s}`,{params:n})}getAllDataplaneOverviews(e){return this.client.get("dataplanes+insights",{params:e})}getAllDataplaneOverviewsFromMesh({mesh:e},s){return this.client.get(`meshes/${e}/dataplanes+insights`,{params:s})}getDataplaneOverviewFromMesh({mesh:e,name:s},n){return this.client.get(`meshes/${e}/dataplanes+insights/${s}`,{params:n})}getSidecarDataplanePolicies({mesh:e,name:s},n){return this.client.get(`meshes/${e}/dataplanes/${s}/policies`,{params:n})}getMeshGatewayDataplane({mesh:e,name:s},n){return this.client.get(`meshes/${e}/dataplanes/${s}/policies`,{params:n})}getDataplaneRules({mesh:e,name:s},n){return this.client.get(`meshes/${e}/dataplanes/${s}/rules`,{params:n})}getDataplaneData({mesh:e,dppName:s,dataPath:n},i){return this.client.get(`meshes/${e}/dataplanes/${s}/${n}`,{params:i})}getAllServiceInsights(e){return this.client.get("service-insights",{params:e})}getAllServiceInsightsFromMesh({mesh:e},s){return this.client.get(`meshes/${e}/service-insights`,{params:s})}getServiceInsight({mesh:e,name:s},n){return this.client.get(`meshes/${e}/service-insights/${s}`,{params:n})}getAllExternalServices(e){return this.client.get("external-services",{params:e})}getAllExternalServicesFromMesh({mesh:e},s){return this.client.get(`meshes/${e}/external-services`,{params:s})}getExternalService({mesh:e,name:s},n){return this.client.get(`meshes/${e}/external-services/${s}`,{params:n})}getPolicyConnections({mesh:e,policyType:s,policyName:n},i){return this.client.get(`meshes/${e}/${s}/${n}/dataplanes`,{params:i})}getAllPolicyEntities({path:e},s){return this.client.get(e,{params:s})}getAllPolicyEntitiesFromMesh({mesh:e,path:s},n){return this.client.get(`meshes/${e}/${s}`,{params:n})}getSinglePolicyEntity({mesh:e,path:s,name:n},i){return this.client.get(`meshes/${e}/${s}/${n}`,{params:i})}}const u=new St,vt={status:null,tagline:null,version:null,kumaDocsVersion:"latest",clientConfig:null},At={SET_CONFIG_DATA:(t,e)=>t.clientConfig=e,SET_STATUS:(t,e)=>t.status=e,SET_TAGLINE:(t,e)=>t.tagline=e,SET_VERSION:(t,e)=>t.version=e,SET_KUMA_DOCS_VERSION:(t,e)=>t.kumaDocsVersion=e},Ot={getStatus:t=>t.status,getConfig:t=>t.clientConfig,getEnvironment:t=>{var e;return(e=t.clientConfig)==null?void 0:e.environment},getMode:t=>{var e;return(e=t.clientConfig)==null?void 0:e.mode},getTagline:t=>t.tagline,getVersion:t=>t.version,getKumaDocsVersion:t=>t.kumaDocsVersion,getConfigurationType:t=>{var e,s;return(s=(e=t.clientConfig)==null?void 0:e.store)==null?void 0:s.type},getMulticlusterStatus:(t,e)=>({}).VITE_FAKE_MULTIZONE==="true"?(console.warn("%c ✨You are currently faking Multi-Zone mode.","background: black; color: white; display: block; padding: 0.25rem;"),!0):e.getMode==="global"},Rt={bootstrapConfig({dispatch:t}){const e=t("getInfo"),s=t("getConfig");return Promise.all([e,s])},getConfig({commit:t}){return u.getConfig().then(e=>{t("SET_CONFIG_DATA",e)})},getStatus({commit:t}){return u.getStatus().then(e=>{t("SET_STATUS",e)})},getInfo({commit:t}){return u.getInfo().then(e=>{t("SET_TAGLINE",e.tagline),t("SET_VERSION",e.version);let s;const n=e.basedOnKuma??e.version,i=n.indexOf("-preview.");if(i!==-1){const r=n.substring(0,i);s=r==="0.0.0"?"dev":r.replace(/\.\d+$/,".x")}else s=n.replace(/\.\d+$/,".x");t("SET_KUMA_DOCS_VERSION",s)}).catch(e=>{console.error(e)})}},Nt={namespaced:!0,state:()=>vt,getters:Ot,mutations:At,actions:Rt},yt={isOpen:!1},Lt={OPEN_MODAL:t=>t.isOpen=!0,CLOSE_MODAL:t=>t.isOpen=!1},Dt={meshNotificationItemMap(t,e,s){var r;return(((r=s.meshes)==null?void 0:r.items)||[]).reduce((a,l)=>(a[l.name]={hasLogging:Boolean(l.logging),hasMtls:Boolean(l.mtls),hasMetrics:Boolean(l.metrics),hasTracing:Boolean(l.tracing)},a),{})},meshNotificationItemMapWithAction(t,e){const s=e.meshNotificationItemMap;return Object.entries(s).reduce((n,[i,r])=>(Object.values(r).some(l=>!l)&&(n[i]=r),n),{})},singleMeshNotificationItems(t,e,s,n){if(s.selectedMesh===null)return[];const i=e.meshNotificationItemMap[s.selectedMesh],r=Object.entries(n.getMeshInsight.policies).filter(([l,o])=>["MeshAccessLog","MeshTrace"].includes(l)).some(([l,o])=>o.total>0),a=[{name:"Observability, Metrics & Service Map",component:"MetricsNotification",isCompleted:i.hasMetrics},{name:"Logging",component:"LoggingNotification",isCompleted:i.hasLogging||r},{name:"Zero-trust security",component:"MtlsNotification",isCompleted:i.hasMtls},{name:"Tracing",component:"TracingNotification",isCompleted:i.hasTracing}];return a.sort((l,o)=>+l.isCompleted-+o.isCompleted),a},amountOfActions(t,e){return Object.keys(e.meshNotificationItemMapWithAction).length}},Ct={openModal({commit:t}){t("OPEN_MODAL")},closeModal({commit:t}){t("CLOSE_MODAL")}},Mt={namespaced:!0,state:()=>yt,getters:Dt,mutations:Lt,actions:Ct},wt={isCompleted:d.get("onboardingIsCompleted")==="true",step:d.get("onboardingStep")||"onboarding-welcome",mode:"demo"},Pt={SET_STEP:(t,e)=>t.step=e,SET_IS_COMPLETED:(t,e)=>t.isCompleted=e,UPDATE_MODE:(t,e)=>t.mode=e},$t={getMode:t=>t.mode,showOnboarding:(t,e,s)=>{const n=s.meshes.items.length===1&&s.meshes.items[0].name==="default";return s.totalDataplaneCount===0&&n}},bt={completeOnboarding({commit:t,dispatch:e}){e("fetchDataplaneTotalCount",null,{root:!0}),e("sidebar/getInsights",null,{root:!0}),t("SET_IS_COMPLETED",!0),d.set("onboardingIsCompleted","true"),d.remove("onboardingStep")},changeStep({commit:t},e){t("SET_STEP",e),d.set("onboardingStep",e)}},Vt={namespaced:!0,state:()=>wt,getters:$t,mutations:Pt,actions:bt};function X(t){const e=t.items.reduce((s,{dataplanes:n,dataplanesByType:i,policies:r,services:a})=>{var l,o;s.services.internal+=a.internal||0,s.services.external+=a.external||0,s.services.total+=a.total||0,s.dataplanes.total+=n.total||0,s.dataplanes.standard+=((l=i.standard)==null?void 0:l.total)||0,s.dataplanes.gateway+=((o=i.gateway)==null?void 0:o.total)||0;for(const[h,p]of Object.entries(r))s.policies[h]||(s.policies[h]=0),s.policies[h]+=p.total||0;return s},{services:{total:0,internal:0,external:0},dataplanes:{total:0,standard:0,gateway:0},policies:{}});return e.policies.total=Object.values(e.policies).reduce((s,n)=>s+n,0),e}function Ut(t){return Object.entries(t.resources).reduce((e,[s,n])=>(e[s]||(e[s]=0),e[s]+=n.total||0,e),{})}const Gt={insights:{global:{},mesh:{services:{total:0,internal:0,external:0},dataplanes:{total:0,standard:0,gateway:0},policies:{}}}},Ft={SET_GLOBAL_INSIGHTS:(t,e)=>t.insights.global=e,SET_MESH_INSIGHTS:(t,e)=>t.insights.mesh=e},kt={getInsights({dispatch:t}){return Promise.all([t("getGlobalInsights"),t("getMeshInsights")])},async getMeshInsights({commit:t,rootState:e}){if(e.selectedMesh===null)return;let s;try{const n=await u.getMeshInsights({name:e.selectedMesh});s=X({items:[n]})}catch{s=X({items:[]})}t("SET_MESH_INSIGHTS",s)},async getGlobalInsights({commit:t}){const e=await u.getGlobalInsights(),s=Ut(e);t("SET_GLOBAL_INSIGHTS",s)}},Ht={namespaced:!0,state:()=>Gt,mutations:Ft,actions:kt},Y="Online",W="Offline",Bt="Partially degraded",xt={menu:null,globalLoading:!0,pageTitle:"",meshes:{total:0,items:[],next:null},selectedMesh:"default",totalDataplaneCount:0,version:"",itemQueryNamespace:"item",totalClusters:0,serviceSummary:{total:0,internal:{total:0,online:0,offline:0,partiallyDegraded:0},external:{total:0}},overviewCharts:{dataplanes:{data:[]},meshes:{data:[]},services:{data:[]},policies:{data:[]},zones:{data:[]},zonesCPVersions:{data:[]},kumaDPVersions:{data:[]},envoyVersions:{data:[]}},meshInsight:se(),meshInsightsFetching:!1,serviceInsightsFetching:!1,externalServicesFetching:!1,zonesInsightsFetching:!1,policyTypes:[],policyTypesByPath:{},policyTypesByName:{}},zt={modules:{sidebar:Ht,config:Nt,notifications:Mt,onboarding:Vt},state:()=>xt,getters:{globalLoading:t=>t.globalLoading,getMeshList:t=>t.meshes,getItemQueryNamespace:t=>t.itemQueryNamespace,getMeshInsight:t=>t.meshInsight,getMeshInsightsFetching:t=>t.meshInsightsFetching,getServiceInsightsFetching:t=>t.serviceInsightsFetching,getExternalServicesFetching:t=>t.externalServicesFetching,getResourceFetching:({meshInsightsFetching:t,serviceInsightsFetching:e,externalServicesFetching:s})=>t||e||s,getServiceResourcesFetching:({serviceInsightsFetching:t,externalServicesFetching:e})=>t||e,getZonesInsightsFetching:({zonesInsightsFetching:t})=>t,getChart:t=>(e,{title:s,subtitle:n=void 0,showTotal:i=!1,isStatusChart:r=!1})=>({title:s,subtitle:n,showTotal:i,isStatusChart:r,dataPoints:t.overviewCharts[e].data})},mutations:{SET_GLOBAL_LOADING:(t,e)=>t.globalLoading=e,SET_PAGE_TITLE:(t,e)=>t.pageTitle=e,SET_MESHES:(t,e)=>t.meshes=e,SET_SELECTED_MESH:(t,e)=>t.selectedMesh=e,SET_TOTAL_DATAPLANE_COUNT:(t,e)=>t.totalDataplaneCount=e,SET_TOTAL_CLUSTER_COUNT:(t,e)=>t.totalClusters=e,SET_INTERNAL_SERVICE_SUMMARY:(t,{items:e=[]})=>{const s={online:0,partially_degraded:0,offline:0,not_available:0},{online:n,offline:i,partially_degraded:r}=e.reduce((l,{status:o="offline"})=>({...l,[o]:l[o]+1}),s),a=n+i+r;t.serviceSummary.internal={...t.serviceSummary.internal,total:a,online:n,partiallyDegraded:r,offline:i},t.serviceSummary.total=t.serviceSummary.external.total+a},SET_EXTERNAL_SERVICE_SUMMARY:(t,{total:e=0})=>{t.serviceSummary.external.total=e,t.serviceSummary.total=t.serviceSummary.internal.total+e},SET_MESH_INSIGHT:(t,e)=>t.meshInsight=Ue(e),SET_MESH_INSIGHT_FROM_ALL_MESHES:(t,e)=>t.meshInsight=ne(e.items),SET_ZONES_INSIGHTS_FETCHING:(t,e)=>t.zonesInsightsFetching=e,SET_MESH_INSIGHTS_FETCHING:(t,e)=>t.meshInsightsFetching=e,SET_SERVICE_INSIGHTS_FETCHING:(t,e)=>t.serviceInsightsFetching=e,SET_EXTERNAL_SERVICES_FETCHING:(t,e)=>t.externalServicesFetching=e,SET_OVERVIEW_CHART_DATA:(t,{chartName:e,data:s})=>{t.overviewCharts[e].data=s},SET_POLICY_TYPES:(t,e)=>{e.sort((s,n)=>s.name.localeCompare(n.name)),t.policyTypes=e},SET_POLICY_TYPES_BY_PATH:(t,e)=>t.policyTypesByPath=e,SET_POLICY_TYPES_BY_NAME:(t,e)=>t.policyTypesByName=e},actions:{async bootstrap({commit:t,dispatch:e,getters:s,state:n}){if(t("SET_GLOBAL_LOADING",!0),await e("config/getStatus"),s["config/getStatus"]==="OK")if(await Promise.all([e("fetchMeshList"),e("fetchDataplaneTotalCount"),e("config/bootstrapConfig")]),n.meshes.items.length>0){const i=d.get("selectedMesh");let r;if(i!==null){const a=n.meshes.items.find(l=>l.name===i);a!==void 0&&(r=a)}r===void 0&&(r=n.meshes.items[0]),await e("updateSelectedMesh",r.name),await e("sidebar/getInsights")}else await e("updateSelectedMesh",null);t("SET_GLOBAL_LOADING",!1)},updatePageTitle({commit:t},e){t("SET_PAGE_TITLE",e)},async fetchMeshList({commit:t,state:e}){const s={size:w};try{const{total:n,items:i,next:r}=await u.getAllMeshes(s),a={items:i??[],total:n,next:r};a.items.sort((l,o)=>l.name==="default"?-1:o.name==="default"?1:l.name.localeCompare(o.name)),t("SET_MESHES",a)}catch(n){console.error(n)}},updateSelectedMesh({commit:t},e){e!==null?d.set("selectedMesh",e):d.remove("selectedMesh"),t("SET_SELECTED_MESH",e)},async fetchTotalClusterCount({commit:t}){const e=await u.getZones();t("SET_TOTAL_CLUSTER_COUNT",e.total)},async fetchDataplaneTotalCount({commit:t}){try{const e=await u.getAllDataplanes({size:1});t("SET_TOTAL_DATAPLANE_COUNT",e.total)}catch(e){console.error(e)}},async fetchMeshInsights({commit:t,dispatch:e},s){t("SET_MESH_INSIGHTS_FETCHING",!0);try{if(s===void 0){const n=await R(u.getAllMeshInsights.bind(u)),i=[];n.items.length>0&&i.push({title:"Mesh",data:n.items.length}),t("SET_OVERVIEW_CHART_DATA",{chartName:"meshes",data:i}),t("SET_MESH_INSIGHT_FROM_ALL_MESHES",n)}else t("SET_MESH_INSIGHT",await u.getMeshInsights({name:s}))}catch{t("SET_OVERVIEW_CHART_DATA",{chartName:"meshes",data:[]}),t("SET_MESH_INSIGHT",se())}finally{e("setChartsFromMeshInsights")}t("SET_MESH_INSIGHTS_FETCHING",!1)},async fetchServiceInsights({commit:t},e){t("SET_SERVICE_INSIGHTS_FETCHING",!0);try{const s=e===void 0?u.getAllServiceInsights.bind(u):u.getAllServiceInsightsFromMesh.bind(u,{mesh:e});t("SET_INTERNAL_SERVICE_SUMMARY",await R(s))}catch{t("SET_INTERNAL_SERVICE_SUMMARY")}t("SET_SERVICE_INSIGHTS_FETCHING",!1)},async fetchExternalServices({commit:t},e){t("SET_EXTERNAL_SERVICES_FETCHING",!0);try{const s=e===void 0?u.getAllExternalServices.bind(u):u.getAllExternalServicesFromMesh.bind(u,{mesh:e});t("SET_EXTERNAL_SERVICE_SUMMARY",await R(s))}catch{t("SET_EXTERNAL_SERVICE_SUMMARY")}t("SET_EXTERNAL_SERVICES_FETCHING",!1)},async fetchServices({dispatch:t},e){const s=t("fetchExternalServices",e),n=t("fetchServiceInsights",e);await Promise.all([n,s]),await t("setOverviewServicesChartData")},async fetchZonesInsights({commit:t,dispatch:e,getters:s},n=!1){t("SET_ZONES_INSIGHTS_FETCHING",!0);try{if(n){const i=await R(u.getAllZoneOverviews.bind(u));e("setOverviewZonesChartData",i),e("setOverviewZonesCPVersionsChartData",i)}else{const i=[{title:"Zone",data:1,route:{name:"zones"}}],r=[{title:s["config/getVersion"],data:1,route:{name:"zones"}}];t("SET_OVERVIEW_CHART_DATA",{chartName:"zones",data:i}),t("SET_OVERVIEW_CHART_DATA",{chartName:"zonesCPVersions",data:r})}}catch{t("SET_OVERVIEW_CHART_DATA",{chartName:"zones",data:[]}),t("SET_OVERVIEW_CHART_DATA",{chartName:"zonesCPVersions",data:[]})}t("SET_ZONES_INSIGHTS_FETCHING",!1)},async fetchPolicyTypes({commit:t}){const{policies:e}=await u.getPolicyTypes(),s=e.reduce((i,r)=>Object.assign(i,{[r.path]:r}),{}),n=e.reduce((i,r)=>Object.assign(i,{[r.name]:r}),{});t("SET_POLICY_TYPES",e),t("SET_POLICY_TYPES_BY_PATH",s),t("SET_POLICY_TYPES_BY_NAME",n)},setChartsFromMeshInsights({dispatch:t}){t("setOverviewDataplanesChartData"),t("setOverviewKumaDPVersionsChartData"),t("setOverviewEnvoyVersionsChartData")},setOverviewZonesChartData({commit:t},{items:e=[]}){const s=e.length;let n=0;e.forEach(r=>{re(r.zoneInsight)==="online"&&n++});const i=[];s&&(i.push({title:Y,data:n,route:{name:"zones"}}),n!==s&&i.push({title:W,data:s-n,route:{name:"zones"}})),t("SET_OVERVIEW_CHART_DATA",{chartName:"zones",data:i})},setOverviewServicesChartData({state:t,commit:e}){const{internal:s,external:n}=t.serviceSummary,i=[];s.total&&t.selectedMesh!==null&&i.push({title:"Internal",data:s.total,route:{name:"service-list-view",params:{mesh:t.selectedMesh}}}),n.total&&t.selectedMesh!==null&&i.push({title:"External",data:n.total,route:{name:"service-list-view",params:{mesh:t.selectedMesh}}}),e("SET_OVERVIEW_CHART_DATA",{chartName:"services",data:i})},setOverviewDataplanesChartData({state:t,commit:e}){const s=t.meshInsight.dataplanes.total,n=[];if(s>0){const i=t.meshInsight.dataplanes.online??0;n.push({title:Y,data:i});const r=t.meshInsight.dataplanes.partiallyDegraded??0;r>0&&n.push({title:Bt,data:r});const a=s-r-i;a>0&&n.push({title:W,data:a})}e("SET_OVERVIEW_CHART_DATA",{chartName:"dataplanes",data:n})},setOverviewZonesCPVersionsChartData({commit:t},{items:e}){const s=e.reduce((n,i)=>{if(i.zoneInsight.subscriptions.length===0)return n;const r=i.zoneInsight.subscriptions.pop(),a=n.find(l=>{var o,h;return l.title===((h=(o=r.version)==null?void 0:o.kumaCp)==null?void 0:h.version)});return a?a.data++:n.push({title:r.version.kumaCp.version,data:1,route:{name:"zones"}}),n},[]);s.sort((n,i)=>n.title==="unknown"?1:i.title==="unknown"?-1:D(n.title,i.title)),t("SET_OVERVIEW_CHART_DATA",{chartName:"zonesCPVersions",data:s})},setOverviewEnvoyVersionsChartData({state:t,commit:e}){const{envoy:s}=t.meshInsight.dpVersions,n=Object.entries(s).map(([i,r])=>({title:i,data:r.total}));n.sort((i,r)=>i.title==="unknown"?1:r.title==="unknown"?-1:D(i.title,r.title)),e("SET_OVERVIEW_CHART_DATA",{chartName:"envoyVersions",data:n})},setOverviewKumaDPVersionsChartData({state:t,commit:e}){const{kumaDp:s}=t.meshInsight.dpVersions,n=Object.entries(s).map(([i,r])=>({title:i,data:r.total}));n.sort((i,r)=>i.title==="unknown"?1:r.title==="unknown"?-1:D(i.title,r.title)),e("SET_OVERVIEW_CHART_DATA",{chartName:"kumaDPVersions",data:n})}}},jt=Symbol("store"),Kt=me(zt);function hs(){return Ee(jt)}export{He as A,es as B,d as C,ls as I,U as T,c as _,M as a,D as b,us as c,V as d,jt as e,R as f,ee as g,re as h,Jt as i,ts as j,u as k,$e as l,os as m,Fe as n,ke as o,Qt as p,ss as q,qt as r,Kt as s,ns as t,hs as u,rs as v,as as w,Ge as x,cs as y,is as z};
