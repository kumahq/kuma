import{d as T,h as o,o as a,a as _,w as t,j as c,k as u,g as f,b as d,F as y,B as w,l as X,t as V,r as $,e as b,A as j}from"./index-ChTNn-OB.js";const z={class:"policy-list-content"},E={class:"policy-count"},q={class:"policy-list"},G=T({__name:"PolicyTypeListView",setup(H){return(J,M)=>{const C=o("RouteTitle"),D=o("XAction"),R=o("DataCollection"),B=o("DataLoader"),P=o("KCard"),x=o("RouterView"),m=o("DataSource"),A=o("AppView"),L=o("RouteView");return a(),_(m,{src:"/me"},{default:t(({data:N})=>[N?(a(),_(L,{key:0,name:"policy-list-view",params:{mesh:"",policyPath:"",policy:""}},{default:t(({route:r,t:S})=>[c(C,{render:!1,title:S("policies.routes.types.title")},null,8,["title"]),u(),c(A,null,{default:t(()=>[c(m,{src:`/mesh-insights/${r.params.mesh}`},{default:t(({data:e})=>[c(m,{src:"/policy-types"},{default:t(({data:i,error:F})=>[f("div",z,[c(P,{class:"policy-type-list","data-testid":"policy-type-list"},{default:t(()=>[c(B,{data:[i],errors:[F]},{default:t(()=>[(a(!0),d(y,null,w([typeof(e==null?void 0:e.policies)>"u"?i.policies:i.policies.filter(s=>{var p,l;return!s.isTargetRefBased&&(((l=(p=e.policies)==null?void 0:p[s.name])==null?void 0:l.total)??0)>0})],s=>(a(),_(R,{key:s,predicate:typeof(e==null?void 0:e.policies)>"u"?void 0:p=>s.length>0||p.isTargetRefBased,items:i.policies},{default:t(({items:p})=>[(a(!0),d(y,null,w([p.find(l=>l.path===r.params.policyPath)],l=>(a(),d(y,{key:l},[(a(!0),d(y,null,w(p,(n,K)=>{var k,v;return a(),d("div",{key:n.path,class:X(["policy-type-link-wrapper",{"policy-type-link-wrapper--is-active":l&&l.path===n.path}])},[c(D,{class:"policy-type-link",to:{name:"policy-list-view",params:{mesh:r.params.mesh,policyPath:n.path}},mount:r.params.policyPath.length===0&&K===0?r.replace:void 0,"data-testid":`policy-type-link-${n.name}`},{default:t(()=>[u(V(n.name),1)]),_:2},1032,["to","mount","data-testid"]),u(),f("div",E,V(((v=(k=e==null?void 0:e.policies)==null?void 0:k[n.name])==null?void 0:v.total)??0),1)],2)}),128))],64))),128))]),_:2},1032,["predicate","items"]))),128))]),_:2},1032,["data","errors"])]),_:2},1024),u(),f("div",q,[c(x,null,{default:t(({Component:s})=>[(a(),_($(s),{"policy-types":i==null?void 0:i.policies},null,8,["policy-types"]))]),_:2},1024)])])]),_:2},1024)]),_:2},1032,["src"])]),_:2},1024)]),_:1})):b("",!0)]),_:1})}}}),Q=j(G,[["__scopeId","data-v-aa615dd3"]]);export{Q as default};
