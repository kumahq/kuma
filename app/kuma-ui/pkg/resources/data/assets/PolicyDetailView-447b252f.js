import{d as E,u as N,r as m,c as d,K as T,j as y,b as o,w as r,o as e,i as V,t as v,g as _,F as x,q as C,h,f as L}from"./index-c271a676.js";import{_ as $}from"./PolicyConnections.vue_vue_type_script_setup_true_lang-508215d5.js";import{D as A,a as S}from"./DefinitionListItem-1834b712.js";import{_ as F}from"./EmptyBlock.vue_vue_type_script_setup_true_lang-5dc5aad7.js";import{E as K}from"./ErrorBlock-1f74e70f.js";import{_ as j}from"./LoadingBlock.vue_vue_type_script_setup_true_lang-daa04137.js";import{T as q}from"./TabsWidget-8c883876.js";import{_ as H}from"./YamlView.vue_vue_type_script_setup_true_lang-51a6c3f7.js";import{u as I}from"./store-7a329c21.js";import{u as O}from"./index-0fcc3d29.js";import"./StatusInfo.vue_vue_type_script_setup_true_lang-d9a82a33.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./kongponents.es-6cc20401.js";import"./datadogLogEvents-302eea7b.js";import"./QueryParameter-70743f73.js";import"./CodeBlock.vue_vue_type_style_index_0_lang-7b980fdd.js";import"./toYaml-4e00099e.js";const R={class:"policy-details kcard-border"},W={class:"entity-heading","data-testid":"policy-single-entity"},ne=E({__name:"PolicyDetailView",props:{mesh:{},policyPath:{},policyName:{}},setup(k){const p=k,g=O(),w=N(),P=I(),b=[{hash:"#overview",title:"Overview"},{hash:"#affected-dpps",title:"Affected DPPs"}],t=m(null),u=m(!0),i=m(null),l=d(()=>{if(t.value===null)return null;const{type:n,name:c,mesh:s}=t.value;return{type:n,name:c,mesh:s}}),f=d(()=>t.value!==null?T(t.value):null);D();function D(){P.dispatch("updatePageTitle",w.params.policy),B(p)}async function B({mesh:n,policyPath:c,policyName:s}){u.value=!0,i.value=null,t.value=null;try{t.value=await g.getSinglePolicyEntity({mesh:n,path:c,name:s})}catch(a){a instanceof Error?i.value=a:console.error(a)}finally{u.value=!1}}return(n,c)=>(e(),y("div",R,[u.value?(e(),o(j,{key:0})):i.value!==null?(e(),o(K,{key:1,error:i.value},null,8,["error"])):l.value===null?(e(),o(F,{key:2})):(e(),o(q,{key:3,tabs:b},{tabHeader:r(()=>[V("h1",W,v(l.value.name),1)]),overview:r(()=>[_(S,null,{default:r(()=>[(e(!0),y(x,null,C(l.value,(s,a)=>(e(),o(A,{key:a,term:a},{default:r(()=>[h(v(s),1)]),_:2},1032,["term"]))),128))]),_:1}),h(),f.value!==null?(e(),o(H,{key:0,id:"code-block-policy",class:"mt-4",content:f.value,"is-searchable":""},null,8,["content"])):L("",!0)]),"affected-dpps":r(()=>[_($,{mesh:l.value.mesh,"policy-name":l.value.name,"policy-path":p.policyPath},null,8,["mesh","policy-name","policy-path"])]),_:1}))]))}});export{ne as default};
