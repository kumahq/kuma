import{S as I,a as Z}from"./SubscriptionHeader.c81059ed.js";import{F,g as B}from"./FrameSkeleton.7c484e95.js";import{_ as q,X as K,Y as N,P as O,K as h,Z as R,j as V,e as u,a,w as t,r as n,o as i,c as b,b as H,k as _,f as m,t as E,F as v,h as f}from"./index.59498396.js";import{D as U}from"./DataOverview.0f707221.js";import{E as W}from"./EntityURLControl.04b162ee.js";import{T as P}from"./TabsWidget.64a13b95.js";import{L as X}from"./LabelList.1d886000.js";import{E as j}from"./EnvoyData.819fbe87.js";import"./EmptyBlock.vue_vue_type_script_setup_true_lang.ca9e3849.js";import"./ErrorBlock.9fdf1c69.js";import"./LoadingBlock.vue_vue_type_script_setup_true_lang.49103b8d.js";import"./CodeBlock.76d75c2c.js";import"./_commonjsHelpers.712cc82f.js";const G={name:"ZoneEgresses",components:{EnvoyData:j,FrameSkeleton:F,DataOverview:U,TabsWidget:P,LabelList:X,AccordionList:K,AccordionItem:N,SubscriptionDetails:I,SubscriptionHeader:Z,EntityURLControl:W},data(){return{isLoading:!0,isEmpty:!1,hasError:!1,empty_state:{title:"No Data",message:"There are no Zone Egresses present."},tableData:{headers:[{key:"actions",hideLabel:!0},{label:"Status",key:"status"},{label:"Name",key:"name"}],data:[]},tabs:[{hash:"#overview",title:"Overview"},{hash:"#insights",title:"Zone Egress Insights"},{hash:"#xds-configuration",title:"XDS Configuration"},{hash:"#envoy-stats",title:"Stats"},{hash:"#envoy-clusters",title:"Clusters"}],entity:{},rawData:[],pageSize:O,next:null,subscriptionsReversed:[]}},watch:{$route(){this.isLoading=!0,this.isEmpty=!1,this.hasError=!1,this.init()}},beforeMount(){this.init()},methods:{init(){this.loadData()},tableAction(r){const o=r;this.getEntity(o)},async loadData(r="0"){this.isLoading=!0,this.isEmpty=!1;const o=this.$route.query.ns||null;try{const{data:s,next:p}=await B({getAllEntities:h.getAllZoneEgressOverviews.bind(h),getSingleEntity:h.getZoneEgressOverview.bind(h),size:this.pageSize,offset:r,query:o});this.next=p,s.length?(this.isEmpty=!1,this.rawData=s,this.getEntity({name:s[0].name}),this.tableData.data=s.map(e=>{const{zoneEgressInsight:l={}}=e;return{...e,...R(l)}})):(this.tableData.data=[],this.isEmpty=!0)}catch(s){this.hasError=!0,this.isEmpty=!0,console.error(s)}finally{this.isLoading=!1}},getEntity(r){var e,l;const o=["type","name"],s=this.rawData.find(y=>y.name===r.name),p=(l=(e=s==null?void 0:s.zoneEgressInsight)==null?void 0:e.subscriptions)!=null?l:[];this.subscriptionsReversed=Array.from(p).reverse(),this.entity=V(s,o)}}},M={class:"zoneegresses"},Y=m("span",{class:"custom-control-icon"}," \u2190 ",-1),J={key:0};function Q(r,o,s,p,e,l){const y=n("KButton"),D=n("DataOverview"),L=n("EntityURLControl"),S=n("LabelList"),z=n("SubscriptionHeader"),k=n("SubscriptionDetails"),w=n("AccordionItem"),A=n("AccordionList"),x=n("KCard"),g=n("EnvoyData"),C=n("TabsWidget"),T=n("FrameSkeleton");return i(),u("div",M,[a(T,null,{default:t(()=>[a(D,{"page-size":e.pageSize,"has-error":e.hasError,"is-loading":e.isLoading,"empty-state":e.empty_state,"table-data":e.tableData,"table-data-is-empty":e.isEmpty,next:e.next,onTableAction:l.tableAction,onLoadData:o[0]||(o[0]=c=>l.loadData(c))},{additionalControls:t(()=>[r.$route.query.ns?(i(),b(y,{key:0,class:"back-button",appearance:"primary",to:{name:"zoneegresses"}},{default:t(()=>[Y,H(" View All ")]),_:1})):_("",!0)]),_:1},8,["page-size","has-error","is-loading","empty-state","table-data","table-data-is-empty","next","onTableAction"]),e.isEmpty===!1?(i(),b(C,{key:0,"has-error":e.hasError,"is-loading":e.isLoading,tabs:e.tabs,"initial-tab-override":"overview"},{tabHeader:t(()=>[m("div",null,[m("h3",null," Zone Egress: "+E(e.entity.name),1)]),m("div",null,[a(L,{name:e.entity.name},null,8,["name"])])]),overview:t(()=>[a(S,null,{default:t(()=>[m("div",null,[m("ul",null,[(i(!0),u(v,null,f(e.entity,(c,d)=>(i(),u("li",{key:d},[c?(i(),u("h4",J,E(d),1)):_("",!0),m("p",null,E(c),1)]))),128))])])]),_:1})]),insights:t(()=>[a(x,{"border-variant":"noBorder"},{body:t(()=>[a(A,{"initially-open":0},{default:t(()=>[(i(!0),u(v,null,f(e.subscriptionsReversed,(c,d)=>(i(),b(w,{key:d},{"accordion-header":t(()=>[a(z,{details:c},null,8,["details"])]),"accordion-content":t(()=>[a(k,{details:c,"is-discovery-subscription":""},null,8,["details"])]),_:2},1024))),128))]),_:1})]),_:1})]),"xds-configuration":t(()=>[a(g,{"data-path":"xds","zone-egress-name":e.entity.name,"query-key":"envoy-data-zone-egress"},null,8,["zone-egress-name"])]),"envoy-stats":t(()=>[a(g,{"data-path":"stats","zone-egress-name":e.entity.name,"query-key":"envoy-data-zone-egress"},null,8,["zone-egress-name"])]),"envoy-clusters":t(()=>[a(g,{"data-path":"clusters","zone-egress-name":e.entity.name,"query-key":"envoy-data-zone-egress"},null,8,["zone-egress-name"])]),_:1},8,["has-error","is-loading","tabs"])):_("",!0)]),_:1})])}const pe=q(G,[["render",Q]]);export{pe as default};
