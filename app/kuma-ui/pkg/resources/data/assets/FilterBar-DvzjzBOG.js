var V=Object.defineProperty;var U=(t,i,r)=>i in t?V(t,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[i]=r;var x=(t,i,r)=>U(t,typeof i!="symbol"?i+"":i,r);import{d as D,I as B,G as k,o as f,p as Z,w as G,c as b,H as J,F as Q,a8 as W,v as h,a3 as Y,af as X,ag as ee,l as c,b as v,a as q,m as C,L as A,ah as te,r as ie,t as w,ai as re,aj as ne,n as M,J as se,K as oe,q as _,ak as ae,_ as le}from"./index-CseWi7we.js";const ue=["aria-hidden"],z='<path d="M9.4 18L8 16.6L12.6 12L8 7.4L9.4 6L15.4 12L9.4 18Z" fill="currentColor"/>',de=D({__name:"ChevronRightIcon",props:{title:{type:String,required:!1,default:""},color:{type:String,required:!1,default:"currentColor"},display:{type:String,required:!1,default:"block"},decorative:{type:Boolean,required:!1,default:!1},size:{type:[Number,String],required:!1,default:B,validator:t=>{if(typeof t=="number"&&t>0)return!0;if(typeof t=="string"){const i=String(t).replace(/px/gi,""),r=Number(i);if(r&&!isNaN(r)&&Number.isInteger(r)&&r>0)return!0}return!1}},as:{type:String,required:!1,default:"span"},staticIds:{type:Boolean,default:!1}},setup(t){const i=t,r=k(()=>{if(typeof i.size=="number"&&i.size>0)return`${i.size}px`;if(typeof i.size=="string"){const a=String(i.size).replace(/px/gi,""),s=Number(a);if(s&&!isNaN(s)&&Number.isInteger(s)&&s>0)return`${s}px`}return B}),g=k(()=>({boxSizing:"border-box",color:i.color,display:i.display,flexShrink:"0",height:r.value,lineHeight:"0",width:r.value,pointerEvents:i.decorative?"none":void 0})),p=a=>{const s={},S=Math.random().toString(36).substring(2,12);return a.replace(/id="([^"]+)"/g,(d,l)=>{const m=`${S}-${l}`;return s[l]=m,`id="${m}"`}).replace(/#([^\s^")]+)/g,(d,l)=>s[l]?`#${s[l]}`:d)},y=a=>{const s={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;","`":"&#039;"};return a.replace(/[<>"'`]/g,S=>s[S])},u=`${i.title?`<title data-testid="kui-icon-svg-title">${y(i.title)}</title>`:""}${i.staticIds?z:p(z)}`;return(a,s)=>(f(),Z(Q(t.as),{"aria-hidden":t.decorative?"true":void 0,class:"kui-icon chevron-right-icon","data-testid":"kui-icon-wrapper-chevron-right-icon",style:J(g.value),tabindex:t.decorative?"-1":void 0},{default:G(()=>[(f(),b("svg",{"aria-hidden":t.decorative?"true":void 0,"data-testid":"kui-icon-svg-chevron-right-icon",fill:"none",height:"100%",role:"img",viewBox:"0 0 24 24",width:"100%",xmlns:"http://www.w3.org/2000/svg",innerHTML:u},null,8,ue))]),_:1},8,["aria-hidden","style","tabindex"]))}}),ce=["ControlLeft","ControlRight","ShiftLeft","ShiftRight","AltLeft"];class fe{constructor(i,r){x(this,"commands");x(this,"keyMap");x(this,"boundTriggerShortcuts");this.commands=r,this.keyMap=Object.fromEntries(Object.entries(i).map(([g,p])=>[g.toLowerCase(),p])),this.boundTriggerShortcuts=this.triggerShortcuts.bind(this)}registerListener(){document.addEventListener("keydown",this.boundTriggerShortcuts)}unRegisterListener(){document.removeEventListener("keydown",this.boundTriggerShortcuts)}triggerShortcuts(i){ge(i,this.keyMap,this.commands)}}function ge(t,i,r){const g=pe(t.code),p=[t.ctrlKey?"ctrl":"",t.shiftKey?"shift":"",t.altKey?"alt":"",g].filter(a=>a!=="").join("+"),y=i[p];if(!y)return;const u=r[y];u.isAllowedContext&&!u.isAllowedContext(t)||(u.shouldPreventDefaultAction&&t.preventDefault(),!(u.isDisabled&&u.isDisabled())&&u.trigger(t))}function pe(t=""){return ce.includes(t)?"":t.replace(/^Key/,"").toLowerCase()}const me={class:"filter-bar-icon"},ve=["for"],be=["id","placeholder"],he={key:0,class:"suggestion-box","data-testid":"filter-bar-suggestion-box"},ye={class:"suggestion-list"},Se={key:0,class:"filter-bar-error"},we={key:0},ke=["title","data-filter-field"],xe={class:"visually-hidden"},Ce=D({__name:"FilterBar",props:{fields:{},placeholder:{default:""},query:{default:""},id:{default:()=>W("filter-bar")}},emits:["change"],setup(t,{emit:i}){const r=t,g=h(),p=i,y=n=>{n!=null&&n.target&&(p("change",new FormData(n.target)),d.value=!1)},u=n=>{p("change",new FormData(g.value))},a=h(null),s=h(null),S=h(null),d=h(!1),l=h(r.query);Y(()=>r.query,n=>{l.value=n});const m=h(0),I=k(()=>Object.keys(r.fields)),N=k(()=>Object.entries(r.fields).slice(0,5).map(([n,e])=>({fieldName:n,...e}))),$=k(()=>I.value.length>0?`Filter by ${I.value.join(", ")}`:"Filter"),j=k(()=>r.placeholder??$.value),P={ArrowDown:"jumpToNextSuggestion",ArrowUp:"jumpToPreviousSuggestion"},E={jumpToNextSuggestion:{trigger:()=>T(1),isAllowedContext(n){return s.value!==null&&n.composedPath().includes(s.value)},shouldPreventDefaultAction:!0},jumpToPreviousSuggestion:{trigger:()=>T(-1),isAllowedContext(n){return s.value!==null&&n.composedPath().includes(s.value)},shouldPreventDefaultAction:!0}},F=new fe(P,E);X(function(){F.registerListener()}),ee(function(){F.unRegisterListener()});function T(n){const e=N.value.length;let o=m.value+n;o===-1&&(o=e),m.value=o%(e+1)}function K(){s.value instanceof HTMLInputElement&&s.value.focus()}function O(n){const o=n.currentTarget.getAttribute("data-filter-field");o&&s.value instanceof HTMLInputElement&&H(s.value,o)}function H(n,e){const o=l.value===""||l.value.endsWith(" ")?"":" ";l.value+=o+e+":",n.focus(),m.value=0}function R(n){n.relatedTarget===null&&(d.value=!1),a.value instanceof HTMLElement&&n.relatedTarget instanceof Node&&!a.value.contains(n.relatedTarget)&&(d.value=!1)}return(n,e)=>(f(),b("div",{ref_key:"filterBar",ref:a,class:"filter-bar","data-testid":"filter-bar"},[c("form",{ref_key:"$form",ref:g,onSubmit:ae(y,["prevent"])},[c("button",{class:"focus-filter-input-button",title:"Focus filter",type:"button","data-testid":"filter-bar-focus-filter-input-button",onClick:K},[e[4]||(e[4]=c("span",{class:"visually-hidden"},"Focus filter",-1)),e[5]||(e[5]=v()),c("span",me,[q(C(te),{decorative:"","data-testid":"filter-bar-filter-icon","hide-title":"",size:C(A)},null,8,["size"])])]),e[9]||(e[9]=v()),c("label",{for:`${r.id}-filter-bar-input`,class:"visually-hidden"},[ie(n.$slots,"default",{},()=>[v(w($.value),1)],!0)],8,ve),e[10]||(e[10]=v()),re(c("input",{id:`${r.id}-filter-bar-input`,ref_key:"filterInput",ref:s,"onUpdate:modelValue":e[0]||(e[0]=o=>l.value=o),class:"filter-bar-input",type:"search",placeholder:j.value,"data-testid":"filter-bar-filter-input",name:"s",onFocus:e[1]||(e[1]=o=>d.value=!0),onInput:e[2]||(e[2]=o=>d.value=!0),onBlur:R,onSearch:e[3]||(e[3]=o=>{o.target.value.length===0&&(u(),d.value=!0)})},null,40,be),[[ne,l.value]]),e[11]||(e[11]=v()),d.value?(f(),b("div",he,[c("div",ye,[S.value!==null?(f(),b("p",Se,w(S.value.message),1)):(f(),b("button",{key:1,type:"submit",class:M(["submit-query-button",{"submit-query-button-is-selected":m.value===0}]),"data-testid":"filter-bar-submit-query-button"},`
            Submit `+w(l.value),3)),e[8]||(e[8]=v()),(f(!0),b(se,null,oe(N.value,(o,L)=>(f(),b("div",{key:`${r.id}-${L}`,class:M(["suggestion-list-item",{"suggestion-list-item-is-selected":m.value===L+1}])},[c("b",null,w(o.fieldName),1),o.description!==""?(f(),b("span",we,": "+w(o.description),1)):_("",!0),e[7]||(e[7]=v()),c("button",{class:"apply-suggestion-button",title:`Add ${o.fieldName}:`,type:"button","data-filter-field":o.fieldName,"data-testid":"filter-bar-apply-suggestion-button",onClick:O},[c("span",xe,"Add "+w(o.fieldName)+":",1),e[6]||(e[6]=v()),q(C(de),{decorative:"","hide-title":"",size:C(A)},null,8,["size"])],8,ke)],2))),128))])])):_("",!0)],544)],512))}}),Ne=le(Ce,[["__scopeId","data-v-69c99aab"]]);export{Ne as F};
