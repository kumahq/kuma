"use strict";(self["webpackChunkkuma_gui"]=self["webpackChunkkuma_gui"]||[]).push([[722],{74608:function(e,t,a){a.d(t,{Z:function(){return m}});var n=a(70821);const s=e=>((0,n.dD)("data-v-1fa60dc9"),e=e(),(0,n.Cn)(),e),i=(0,n.Uk)(" Copy config to clipboard "),r=s((()=>(0,n._)("div",null,[(0,n._)("p",null,"Config copied to clipboard!")],-1)));function o(e,t,a,s,o,l){const d=(0,n.up)("CodeBlock"),c=(0,n.up)("KButton"),u=(0,n.up)("KPop"),p=(0,n.up)("KClipboardProvider"),g=(0,n.up)("KCard"),h=(0,n.up)("StatusInfo");return(0,n.wg)(),(0,n.j4)(h,{"has-error":null!==o.error,"is-loading":o.isLoading,error:o.error},{default:(0,n.w5)((()=>[(0,n.Wm)(g,{"border-variant":"noBorder"},{body:(0,n.w5)((()=>[(0,n.Wm)(d,{class:"panel-code-block",language:"json",code:e.content},null,8,["code"])])),actions:(0,n.w5)((()=>[e.content?((0,n.wg)(),(0,n.j4)(p,{key:0},{default:(0,n.w5)((({copyToClipboard:t})=>[(0,n.Wm)(u,{placement:"bottom"},{content:(0,n.w5)((()=>[r])),default:(0,n.w5)((()=>[(0,n.Wm)(c,{appearance:"primary",onClick:a=>t(e.content)},{default:(0,n.w5)((()=>[i])),_:2},1032,["onClick"])])),_:2},1024)])),_:1})):(0,n.kq)("",!0)])),_:1})])),_:1},8,["has-error","is-loading","error"])}var l=a(62519),d=a(61496),c=a(21180),u=a(7433),p={name:"EnvoyData",components:{CodeBlock:d.Z,KButton:l.zU,KCard:l._s,KClipboardProvider:l.tm,KPop:l.JA,StatusInfo:u.Z},props:{dataPath:{type:String,required:!0},mesh:{type:String,required:!1,default:""},dppName:{type:String,required:!1,default:""},zoneIngressName:{type:String,required:!1,default:""},zoneEgressName:{type:String,required:!1,default:""}},data(){return{isLoading:!0,error:null}},watch:{dppName(){this.fetchContent()},zoneIngressName(){this.fetchContent()},zoneEgressName(){this.fetchContent()}},mounted(){this.fetchContent()},methods:{async fetchContent(){this.error=null,this.isLoading=!0;try{let e="";""!==this.mesh&&""!==this.dppName?e=await c["default"].getDataplaneData({dataPath:this.dataPath,mesh:this.mesh,dppName:this.dppName}):""!==this.zoneIngressName?e=await c["default"].getZoneIngressData({dataPath:this.dataPath,zoneIngressName:this.zoneIngressName}):""!==this.zoneEgressName&&(e=await c["default"].getZoneEgressData({dataPath:this.dataPath,zoneEgressName:this.zoneEgressName})),this.content="string"===typeof e?e:JSON.stringify(e,null,2)}catch(e){this.error=e}finally{this.isLoading=!1}}}},g=a(83744);const h=(0,g.Z)(p,[["render",o],["__scopeId","data-v-1fa60dc9"]]);var m=h},7433:function(e,t,a){a.d(t,{Z:function(){return k}});var n=a(70821);const s=e=>((0,n.dD)("data-v-382ac7c5"),e=e(),(0,n.Cn)(),e),i={class:"status-info"},r={class:"card-icon mb-3"},o=(0,n.Uk)(" Data Loading... "),l={class:"card-icon mb-3"},d=(0,n.Uk)(" An error has occurred while trying to load this data. "),c=s((()=>(0,n._)("summary",null,"Details",-1))),u={key:0,class:"badge-list"},p={class:"card-icon mb-3"},g=(0,n.Uk)(" There is no data to display. "),h={key:3};function m(e,t,a,s,m,y){const w=(0,n.up)("KIcon"),f=(0,n.up)("KEmptyState"),v=(0,n.up)("KBadge");return(0,n.wg)(),(0,n.iD)("div",i,[a.isLoading?((0,n.wg)(),(0,n.j4)(f,{key:0,"cta-is-hidden":"","data-testid":"status-info-loading-section"},{title:(0,n.w5)((()=>[(0,n._)("div",r,[(0,n.Wm)(w,{icon:"spinner",color:"rgba(0, 0, 0, 0.1)",size:"42"})]),o])),_:1})):a.hasError?((0,n.wg)(),(0,n.iD)(n.HY,{key:1},[(0,n.Wm)(f,{"cta-is-hidden":""},(0,n.Nv)({title:(0,n.w5)((()=>[(0,n._)("div",l,[(0,n.Wm)(w,{class:"kong-icon--centered",icon:"warning",color:"var(--black-75)","secondary-color":"var(--yellow-300)",size:"42"})]),y.shouldShowApiError?((0,n.wg)(),(0,n.iD)(n.HY,{key:0},[(0,n.Uk)((0,n.zw)(a.error.message),1)],64)):((0,n.wg)(),(0,n.iD)(n.HY,{key:1},[d],64))])),_:2},[y.shouldShowApiError&&Array.isArray(a.error.causes)&&a.error.causes.length>0?{name:"message",fn:(0,n.w5)((()=>[(0,n._)("details",null,[c,(0,n._)("ul",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.error.causes,((e,t)=>((0,n.wg)(),(0,n.iD)("li",{key:t},[(0,n._)("b",null,[(0,n._)("code",null,(0,n.zw)(e.field),1)]),(0,n.Uk)(": "+(0,n.zw)(e.message),1)])))),128))])])])),key:"0"}:void 0]),1024),y.shouldShowApiError?((0,n.wg)(),(0,n.iD)("div",u,[a.error.code?((0,n.wg)(),(0,n.j4)(v,{key:0,appearance:"warning"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,n.zw)(a.error.code),1)])),_:1})):(0,n.kq)("",!0),(0,n.Wm)(v,{appearance:"warning"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,n.zw)(a.error.statusCode),1)])),_:1})])):(0,n.kq)("",!0)],64)):a.isEmpty?((0,n.wg)(),(0,n.j4)(f,{key:2,"cta-is-hidden":""},{title:(0,n.w5)((()=>[(0,n._)("div",p,[(0,n.Wm)(w,{class:"kong-icon--centered",icon:"warning",color:"var(--black-75)","secondary-color":"var(--yellow-300)",size:"42"})]),g])),_:1})):((0,n.wg)(),(0,n.iD)("div",h,[(0,n.WI)(e.$slots,"default",{},void 0,!0)]))])}var y=a(62519),w=a(76502),f={name:"StatusInfo",components:{KBadge:y.i1,KEmptyState:y.KB,KIcon:y.Ec},props:{isLoading:{type:Boolean,default:!1},hasError:{type:Boolean,default:!1},isEmpty:{type:Boolean,default:!1},error:{type:Object,required:!1,default:null}},computed:{shouldShowApiError(){return this.error instanceof w.ApiError}}},v=a(83744);const b=(0,v.Z)(f,[["render",m],["__scopeId","data-v-382ac7c5"]]);var k=b},4733:function(e,t,a){a.r(t),a.d(t,{default:function(){return W}});var n=a(70821);const s={class:"zoneegresses"},i=(0,n._)("span",{class:"custom-control-icon"}," â† ",-1),r=(0,n.Uk)(" View All "),o={key:0};function l(e,t,a,l,d,c){const u=(0,n.up)("KButton"),p=(0,n.up)("DataOverview"),g=(0,n.up)("EntityURLControl"),h=(0,n.up)("LabelList"),m=(0,n.up)("SubscriptionHeader"),y=(0,n.up)("SubscriptionDetails"),w=(0,n.up)("AccordionItem"),f=(0,n.up)("AccordionList"),v=(0,n.up)("KCard"),b=(0,n.up)("EnvoyData"),k=(0,n.up)("TabsWidget"),E=(0,n.up)("FrameSkeleton");return(0,n.wg)(),(0,n.iD)("div",s,[(0,n.Wm)(E,null,{default:(0,n.w5)((()=>[(0,n.Wm)(p,{"page-size":d.pageSize,"has-error":d.hasError,"is-loading":d.isLoading,"empty-state":d.empty_state,"table-data":d.tableData,"table-data-is-empty":d.isEmpty,next:d.next,onTableAction:c.tableAction,onLoadData:t[0]||(t[0]=e=>c.loadData(e))},{additionalControls:(0,n.w5)((()=>[e.$route.query.ns?((0,n.wg)(),(0,n.j4)(u,{key:0,class:"back-button",appearance:"primary",size:"small",to:{name:"zoneegresses"}},{default:(0,n.w5)((()=>[i,r])),_:1})):(0,n.kq)("",!0)])),_:1},8,["page-size","has-error","is-loading","empty-state","table-data","table-data-is-empty","next","onTableAction"]),!1===d.isEmpty?((0,n.wg)(),(0,n.j4)(k,{key:0,"has-error":d.hasError,"is-loading":d.isLoading,tabs:d.tabs,"initial-tab-override":"overview"},{tabHeader:(0,n.w5)((()=>[(0,n._)("div",null,[(0,n._)("h3",null," Zone Egress: "+(0,n.zw)(d.entity.name),1)]),(0,n._)("div",null,[(0,n.Wm)(g,{name:d.entity.name},null,8,["name"])])])),overview:(0,n.w5)((()=>[(0,n.Wm)(h,null,{default:(0,n.w5)((()=>[(0,n._)("div",null,[(0,n._)("ul",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(d.entity,((e,t)=>((0,n.wg)(),(0,n.iD)("li",{key:t},[e?((0,n.wg)(),(0,n.iD)("h4",o,(0,n.zw)(t),1)):(0,n.kq)("",!0),(0,n._)("p",null,(0,n.zw)(e),1)])))),128))])])])),_:1})])),insights:(0,n.w5)((()=>[(0,n.Wm)(v,{"border-variant":"noBorder"},{body:(0,n.w5)((()=>[(0,n.Wm)(f,{"initially-open":0},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(d.subscriptionsReversed,((e,t)=>((0,n.wg)(),(0,n.j4)(w,{key:t},{"accordion-header":(0,n.w5)((()=>[(0,n.Wm)(m,{details:e},null,8,["details"])])),"accordion-content":(0,n.w5)((()=>[(0,n.Wm)(y,{details:e,"is-discovery-subscription":""},null,8,["details"])])),_:2},1024)))),128))])),_:1})])),_:1})])),"xds-configuration":(0,n.w5)((()=>[(0,n.Wm)(b,{"data-path":"xds","zone-egress-name":d.entity.name},null,8,["zone-egress-name"])])),"envoy-stats":(0,n.w5)((()=>[(0,n.Wm)(b,{"data-path":"stats","zone-egress-name":d.entity.name},null,8,["zone-egress-name"])])),"envoy-clusters":(0,n.w5)((()=>[(0,n.Wm)(b,{"data-path":"clusters","zone-egress-name":d.entity.name},null,8,["zone-egress-name"])])),_:1},8,["has-error","is-loading","tabs"])):(0,n.kq)("",!0)])),_:1})])}var d=a(27361),c=a.n(d),u=a(93063),p=a(46187),g=a(70172),h=a(53419),m=a(21180),y=a(59713),w=a(93480),f=a(82318),v=a(18574),b=a(52681),k=a(65404),E=a(45689),_=a(79197),D=a(46483),z=a(74608),S={name:"ZoneEgresses",components:{EnvoyData:z.Z,FrameSkeleton:f.Z,DataOverview:y.Z,TabsWidget:v.Z,LabelList:b.Z,AccordionList:_.Z,AccordionItem:D.Z,SubscriptionDetails:u.Z,SubscriptionHeader:p.Z,EntityURLControl:w.Z},data(){return{isLoading:!0,isEmpty:!1,hasError:!1,empty_state:{title:"No Data",message:"There are no Zone Egresses present."},tableData:{headers:[{key:"actions",hideLabel:!0},{label:"Status",key:"status"},{label:"Name",key:"name"}],data:[]},tabs:[{hash:"#overview",title:"Overview"},{hash:"#insights",title:"Zone Egress Insights"},{hash:"#xds-configuration",title:"XDS Configuration"},{hash:"#envoy-stats",title:"Stats"},{hash:"#envoy-clusters",title:"Clusters"}],entity:{},rawData:[],pageSize:E.NR,next:null,subscriptionsReversed:[]}},watch:{$route(){this.isLoading=!0,this.isEmpty=!1,this.hasError=!1,this.init()}},beforeMount(){this.init()},methods:{init(){this.loadData()},tableAction(e){const t=e;this.getEntity(t)},async loadData(e="0"){this.isLoading=!0,this.isEmpty=!1;const t=this.$route.query.ns||null;try{const{data:a,next:n}=await(0,g.W)({getAllEntities:m["default"].getAllZoneEgressOverviews.bind(m["default"]),getSingleEntity:m["default"].getZoneEgressOverview.bind(m["default"]),size:this.pageSize,offset:e,query:t});this.next=n,a.length?(this.isEmpty=!1,this.rawData=a,this.getEntity({name:a[0].name}),this.tableData.data=a.map((e=>{const{zoneEgressInsight:t={}}=e;return{...e,...(0,k._I)(t)}}))):(this.tableData.data=[],this.isEmpty=!0)}catch(a){this.hasError=!0,this.isEmpty=!0,console.error(a)}finally{this.isLoading=!1}},getEntity(e){const t=["type","name"],a=this.rawData.find((t=>t.name===e.name)),n=c()(a,"zoneEgressInsight.subscriptions",[]);this.subscriptionsReversed=Array.from(n).reverse(),this.entity=(0,h.wy)(a,t)}}},C=a(83744);const Z=(0,C.Z)(S,[["render",l]]);var W=Z}}]);