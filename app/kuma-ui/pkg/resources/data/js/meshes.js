(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["meshes"],{"23d6":function(e,t,n){"use strict";n("b91b")},2835:function(e,t,n){"use strict";n("7569")},"362e":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"all-meshes"},[n("FrameSkeleton",[n("DataOverview",{attrs:{"page-size":e.pageSize,"has-error":e.hasError,"is-loading":e.isLoading,"empty-state":e.empty_state,"table-data":e.tableData,"table-data-is-empty":e.tableDataIsEmpty,next:e.next},on:{tableAction:e.tableAction,loadData:function(t){return e.loadData(t)}},scopedSlots:e._u([{key:"additionalControls",fn:function(){return[n("KButton",{staticClass:"add-mesh-button",attrs:{appearance:"primary",size:"small",to:{path:"/wizard/mesh"}},nativeOn:{click:function(t){return e.onCreateClick(t)}}},[n("span",{staticClass:"custom-control-icon"},[e._v(" + ")]),e._v(" Create Mesh ")])]},proxy:!0}])}),!1===e.isEmpty?n("Tabs",{attrs:{"has-error":e.hasError,"is-loading":e.isLoading,tabs:e.tabs,"initial-tab-override":"overview"},scopedSlots:e._u([{key:"tabHeader",fn:function(){return[e.entity.basicData?n("div",[n("h3",[e._v(" Mesh: "+e._s(e.entity.basicData.name))])]):e._e()]},proxy:!0},{key:"overview",fn:function(){return[n("LabelList",{attrs:{"has-error":e.entityHasError,"is-loading":e.entityIsLoading,"is-empty":e.entityIsEmpty}},[n("div",[n("ul",e._l(e.entity.basicData,(function(t,a){return n("li",{key:a},[n("h4","creationTime"===a?[e._v(" Created ")]:"modificationTime"===a?[e._v(" Last Modified ")]:[e._v(" "+e._s(a)+" ")]),n("p","creationTime"===a||"modificationTime"===a?[e._v(" "+e._s(e._f("readableDate")(t))+" "),n("em",[e._v("("+e._s(e._f("rawDate")(t))+")")])]:[e._v(" "+e._s(t)+" ")])])})),0)]),e.entity.extendedData&&e.entity.extendedData.length?n("div",[n("ul",[e._l(e.entity.extendedData,(function(t,a){return n("li",{key:a},[n("h4",[e._v(e._s(t.label))]),t.value?n("p",{staticClass:"label-cols"},[n("span",[e._v(" "+e._s(t.value.type)+" ")]),n("span",[e._v(" "+e._s(t.value.name)+" ")])]):n("KBadge",{attrs:{size:"small",appearance:"danger"}},[e._v(" Disabled ")])],1)})),n("li",[n("h4",[e._v("Locality Aware Loadbalancing")]),e.entity.localityEnabled?n("p",[n("KBadge",{attrs:{size:"small",appearance:"success"}},[e._v(" Enabled ")])],1):n("KBadge",{attrs:{size:"small",appearance:"danger"}},[e._v(" Disabled ")])],1)],2)]):e._e()])]},proxy:!0},{key:"yaml",fn:function(){return[n("YamlView",{attrs:{"has-error":e.entityHasError,"is-loading":e.entityIsLoading,"is-empty":e.entityIsEmpty,content:e.rawEntity}})]},proxy:!0},{key:"resources",fn:function(){return[n("LabelList",{attrs:{"has-error":e.entityHasError,"is-loading":e.entityIsLoading,"is-empty":e.entityIsEmpty}},e._l(e.countCols,(function(t){return n("div",{key:t},[n("ul",e._l(e.counts.slice((t-1)*e.itemsPerCol,t*e.itemsPerCol),(function(t,a){return n("li",{key:a},[n("h4",[e._v(e._s(t.title))]),n("p",[e._v(e._s(e._f("formatValue")(t.value)))])])})),0)])})),0)]},proxy:!0}],null,!1,159924467)}):e._e()],1)],1)},i=[],r=(n("7db0"),n("4160"),n("b0c0"),n("4fad"),n("d3b7"),n("25f0"),n("159b"),n("d0ff")),s=(n("96cf"),n("c964")),o=n("f3f3"),l=n("0f82"),c=n("1d3a"),u=n("6e9b"),p=n("027b"),f=n("75bb"),d=n("bc1e"),y=n("1d10"),h=n("2778"),m=n("251b"),v=n("ff9d"),b=n("0ada"),g=n("c6ec"),E={name:"Meshes",metaInfo:{title:"Meshes"},components:{FrameSkeleton:y["a"],DataOverview:h["a"],Tabs:m["a"],YamlView:v["a"],LabelList:b["a"]},filters:{formatValue:function(e){return e?e.toLocaleString("en").toString():0},readableDate:function(e){return Object(d["f"])(e)},rawDate:function(e){return Object(d["i"])(e)}},data:function(){return{isLoading:!0,isEmpty:!1,hasError:!1,entityIsLoading:!0,entityIsEmpty:!1,entityHasError:!1,tableDataIsEmpty:!1,empty_state:{title:"No Data",message:"There are no Meshes present."},tableData:{headers:[{key:"actions",hideLabel:!0},{label:"Name",key:"name"},{label:"Type",key:"type"}],data:[]},tabs:[{hash:"#overview",title:"Overview"},{hash:"#resources",title:"Resources"},{hash:"#yaml",title:"YAML"}],entity:{},rawEntity:null,pageSize:g["g"],next:null,itemsPerCol:3,meshInsight:Object(u["a"])()}},computed:{counts:function(){var e=this.meshInsight,t=e.policies,n=e.dataplanes.total,a=Object(o["a"])(Object(o["a"])({},Object(u["b"])()),t);return[{title:"Data plane proxies",value:n},{title:"Circuit Breakers",value:a.CircuitBreaker.total},{title:"Fault Injections",value:a.FaultInjection.total},{title:"Health Checks",value:a.HealthCheck.total},{title:"Proxy Templates",value:a.ProxyTemplate.total},{title:"Traffic Logs",value:a.TrafficLog.total},{title:"Traffic Permissions",value:a.TrafficPermission.total},{title:"Traffic Routes",value:a.TrafficRoute.total},{title:"Traffic Traces",value:a.TrafficTrace.total},{title:"Rate Limits",value:a.RateLimit.total},{title:"Retries",value:a.Retry.total},{title:"Timeouts",value:a.Timeout.total}]},countCols:function(){return Math.ceil(this.counts.length/this.itemsPerCol)}},watch:{$route:function(e,t){this.init()}},beforeMount:function(){this.init()},methods:{init:function(){this.loadData()},onCreateClick:function(){p["a"].logger.info(f["a"].CREATE_MESH_CLICKED)},tableAction:function(e){var t=e;this.getEntity(t)},loadData:function(){var e=arguments,t=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var a,i,s,o,u,p;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.length>0&&void 0!==e[0]?e[0]:"0",t.isLoading=!0,t.isEmpty=!1,i=t.$route.params.mesh,"all"!==i&&(s=t.$route.params.mesh),n.prev=5,n.next=8,Object(c["a"])({getSingleEntity:l["a"].getMesh.bind(l["a"]),getAllEntities:l["a"].getAllMeshes.bind(l["a"]),size:t.pageSize,offset:a,query:s});case 8:o=n.sent,u=o.data,p=o.next,t.next=p,u.length?(t.tableData.data=Object(r["a"])(u),t.tableDataIsEmpty=!1,t.isEmpty=!1,t.getEntity({name:u[0].name})):(t.tableData.data=[],t.tableDataIsEmpty=!0,t.isEmpty=!0,t.entityIsEmpty=!0),n.next=20;break;case 15:n.prev=15,n.t0=n["catch"](5),t.hasError=!0,t.isEmpty=!0,console.error(n.t0);case 20:return n.prev=20,t.isLoading=!1,n.finish(20);case 23:case"end":return n.stop()}}),n,null,[[5,15,20,23]])})))()},getEntity:function(e){var t=this;if(this.entityIsLoading=!0,this.entityIsEmpty=!1,this.entityHasError=!1,e&&null!==e)return l["a"].getMesh({name:e.name}).then((function(n){if(n){l["a"].getMeshInsights({name:e.name}).then((function(e){t.meshInsight=e}));var a=Object(d["d"])(n,["type","name"]),i=function(){var e=Object.entries(Object(d["d"])(n,["mtls","logging","metrics","tracing"])),t=[];return e.forEach((function(e){var n=e[0],a=e[1]||null;if(a&&a.enabledBackend){var i=a.enabledBackend,r=a.backends.find((function(e){return e.name===i}));r&&t.push({label:n,value:{type:r.type,name:r.name}})}else if(a&&a.defaultBackend){var s=a.defaultBackend,o=a.backends.find((function(e){return e.name===s}));o&&t.push({label:n,value:{type:o.type,name:o.name}})}else if(a&&a.backends){var l=a.backends[0];l&&t.push({label:n,value:{type:l.type,name:l.name}})}else t.push({label:n,value:null})})),t},r=function(){var e=n.routing;return e&&e.localityAwareLoadBalancing};t.entity={basicData:a,extendedData:i(),localityEnabled:r()},t.rawEntity=Object(d["j"])(n)}else t.entity={},t.entityIsEmpty=!0})).catch((function(e){t.entityHasError=!0,console.error(e)})).finally((function(){setTimeout((function(){t.entityIsLoading=!1}),"500")}));setTimeout((function(){t.entityIsEmpty=!0,t.entityIsLoading=!1}),"500")}}},_=E,x=(n("a065"),n("2877")),k=Object(x["a"])(_,a,i,!1,null,"1a5de0cd",null);t["default"]=k.exports},"62e5":function(e,t){var n;n=function(){function e(e,t){var n,a,i,r,s,o,l,c,u;null==t&&(t=""),i="",s=e.length,o=null,a=0,r=0;while(r<s){if(n=e.charAt(r),"\\"===n)i+=e.slice(r,+(r+1)+1||9e9),r++;else if("("===n)if(r<s-2)if(c=e.slice(r,+(r+2)+1||9e9),"(?:"===c)r+=2,i+=c;else if("(?<"===c){a++,r+=2,l="";while(r+1<s){if(u=e.charAt(r+1),">"===u){i+="(",r++,l.length>0&&(null==o&&(o={}),o[l]=a);break}l+=u,r++}}else i+=n,a++;else i+=n;else i+=n;r++}this.rawRegex=e,this.cleanedRegex=i,this.regex=new RegExp(this.cleanedRegex,"g"+t.replace("g","")),this.mapping=o}return e.prototype.regex=null,e.prototype.rawRegex=null,e.prototype.cleanedRegex=null,e.prototype.mapping=null,e.prototype.exec=function(e){var t,n,a,i;if(this.regex.lastIndex=0,n=this.regex.exec(e),null==n)return null;if(null!=this.mapping)for(a in i=this.mapping,i)t=i[a],n[a]=n[t];return n},e.prototype.test=function(e){return this.regex.lastIndex=0,this.regex.test(e)},e.prototype.replace=function(e,t){return this.regex.lastIndex=0,e.replace(this.regex,t)},e.prototype.replaceAll=function(e,t,n){var a;null==n&&(n=0),this.regex.lastIndex=0,a=0;while(this.regex.test(e)&&(0===n||a<n))this.regex.lastIndex=0,e=e.replace(this.regex,t),a++;return[e,a]},e}(),e.exports=n},"6d8a":function(e,t,n){var a,i;i=n("62e5"),a=function(){var e;function t(){}return t.LIST_ESCAPEES=["\\","\\\\",'\\"','"',"\0","","","","","","","","\b","\t","\n","\v","\f","\r","","","","","","","","","","","","","","","","","","",(e=String.fromCharCode)(133),e(160),e(8232),e(8233)],t.LIST_ESCAPED=["\\\\",'\\"','\\"','\\"',"\\0","\\x01","\\x02","\\x03","\\x04","\\x05","\\x06","\\a","\\b","\\t","\\n","\\v","\\f","\\r","\\x0e","\\x0f","\\x10","\\x11","\\x12","\\x13","\\x14","\\x15","\\x16","\\x17","\\x18","\\x19","\\x1a","\\e","\\x1c","\\x1d","\\x1e","\\x1f","\\N","\\_","\\L","\\P"],t.MAPPING_ESCAPEES_TO_ESCAPED=function(){var e,n,a,i;for(a={},e=n=0,i=t.LIST_ESCAPEES.length;0<=i?n<i:n>i;e=0<=i?++n:--n)a[t.LIST_ESCAPEES[e]]=t.LIST_ESCAPED[e];return a}(),t.PATTERN_CHARACTERS_TO_ESCAPE=new i("[\\x00-\\x1f]|Ã‚Â…|Ã‚Â |Ã¢Â€Â¨|Ã¢Â€Â©"),t.PATTERN_MAPPING_ESCAPEES=new i(t.LIST_ESCAPEES.join("|").split("\\").join("\\\\")),t.PATTERN_SINGLE_QUOTING=new i("[\\s'\":{}[\\],&*#?]|^[-?|<>=!%@`]"),t.requiresDoubleQuoting=function(e){return this.PATTERN_CHARACTERS_TO_ESCAPE.test(e)},t.escapeWithDoubleQuotes=function(e){var t;return t=this.PATTERN_MAPPING_ESCAPEES.replace(e,function(e){return function(t){return e.MAPPING_ESCAPEES_TO_ESCAPED[t]}}(this)),'"'+t+'"'},t.requiresSingleQuoting=function(e){return this.PATTERN_SINGLE_QUOTING.test(e)},t.escapeWithSingleQuotes=function(e){return"'"+e.replace(/'/g,"''")+"'"},t}(),e.exports=a},7569:function(e,t,n){},"99ea":function(e,t,n){},a065:function(e,t,n){"use strict";n("99ea")},b91b:function(e,t,n){},e80b:function(e,t,n){var a=n("6d8a"),i="  ";function r(e){var t=typeof e;return e instanceof Array?"array":"string"==t?"string":"boolean"==t?"boolean":"number"==t?"number":"undefined"==t||null===e?"null":"hash"}function s(e,t){var n=r(e);switch(n){case"array":o(e,t);break;case"hash":l(e,t);break;case"string":u(e,t);break;case"null":t.push("null");break;case"number":t.push(e.toString());break;case"boolean":t.push(e?"true":"false");break}}function o(e,t){for(var n=0;n<e.length;n++){var a=e[n],r=[];s(a,r);for(var o=0;o<r.length;o++)t.push((0==o?"- ":i)+r[o])}}function l(e,t){for(var n in e){var a=[];if(e.hasOwnProperty(n)){var o=e[n];s(o,a);var l=r(o);if("string"==l||"null"==l||"number"==l||"boolean"==l)t.push(c(n)+": "+a[0]);else{t.push(c(n)+": ");for(var u=0;u<a.length;u++)t.push(i+a[u])}}}}function c(e){return e.match(/^[\w]+$/)?e:a.requiresDoubleQuoting(e)?a.escapeWithDoubleQuotes(e):a.requiresSingleQuoting(e)?a.escapeWithSingleQuotes(e):e}function u(e,t){t.push(c(e))}var p=function(e){"string"==typeof e&&(e=JSON.parse(e));var t=[];return s(e,t),t.join("\n")};e.exports=p},ff9d:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"yaml-view"},[e.isReady?n("div",{staticClass:"yaml-view-content"},[e.isLoading||e.isEmpty?e._e():n("KCard",{attrs:{title:e.yamlTitle,"border-variant":"noBorder"},scopedSlots:e._u([{key:"body",fn:function(){return[n("KTabs",{key:e.environment,attrs:{tabs:e.tabs},scopedSlots:e._u([{key:"universal",fn:function(){return[n("KClipboardProvider",{scopedSlots:e._u([{key:"default",fn:function(t){var a=t.copyToClipboard;return[n("KPop",{attrs:{placement:"bottom"},scopedSlots:e._u([{key:"content",fn:function(){return[n("div",[n("p",[e._v("Entity copied to clipboard!")])])]},proxy:!0}],null,!0)},[n("KButton",{staticClass:"copy-button",attrs:{appearance:"primary",size:"small"},on:{click:function(){a(e.yamlContent.universal)}}},[e._v(" Copy Universal YAML ")])],1)]}}],null,!1,1536634960)}),n("Prism",{staticClass:"code-block",attrs:{language:"yaml",code:e.yamlContent.universal}})]},proxy:!0},{key:"kubernetes",fn:function(){return[n("KClipboardProvider",{scopedSlots:e._u([{key:"default",fn:function(t){var a=t.copyToClipboard;return[n("KPop",{attrs:{placement:"bottom"},scopedSlots:e._u([{key:"content",fn:function(){return[n("div",[n("p",[e._v("Entity copied to clipboard!")])])]},proxy:!0}],null,!0)},[n("KButton",{staticClass:"copy-button",attrs:{appearance:"primary",size:"small"},on:{click:function(){a(e.yamlContent.kubernetes)}}},[e._v(" Copy Kubernetes YAML ")])],1)]}}],null,!1,2265429040)}),n("Prism",{staticClass:"code-block",attrs:{language:"yaml",code:e.yamlContent.kubernetes}})]},proxy:!0}],null,!1,1506056494),model:{value:e.activeTab.hash,callback:function(t){e.$set(e.activeTab,"hash",t)},expression:"activeTab.hash"}})]},proxy:!0}],null,!1,137880475)})],1):e._e(),!0===e.loaders?n("div",[e.isLoading?n("KEmptyState",{attrs:{"cta-is-hidden":""},scopedSlots:e._u([{key:"title",fn:function(){return[n("div",{staticClass:"card-icon mb-3"},[n("KIcon",{attrs:{icon:"spinner",color:"rgba(0, 0, 0, 0.1)",size:"42"}})],1),e._v(" Data Loading... ")]},proxy:!0}],null,!1,3263214496)}):e._e(),e.isEmpty&&!e.isLoading?n("KEmptyState",{attrs:{"cta-is-hidden":""},scopedSlots:e._u([{key:"title",fn:function(){return[n("div",{staticClass:"card-icon mb-3"},[n("KIcon",{staticClass:"kong-icon--centered",attrs:{color:"var(--yellow-200)",icon:"warning","secondary-color":"var(--black-75)",size:"42"}})],1),e._v(" There is no data to display. ")]},proxy:!0}],null,!1,1612658095)}):e._e(),e.hasError?n("KEmptyState",{attrs:{"cta-is-hidden":""},scopedSlots:e._u([{key:"title",fn:function(){return[n("div",{staticClass:"card-icon mb-3"},[n("KIcon",{staticClass:"kong-icon--centered",attrs:{color:"var(--yellow-200)",icon:"warning","secondary-color":"var(--black-75)",size:"42"}})],1),e._v(" An error has occurred while trying to load this data. ")]},proxy:!0}],null,!1,822917942)}):e._e()],1):e._e()])},i=[],r=(n("caad"),n("a15b"),n("b0c0"),n("4fad"),n("ac1f"),n("2532"),n("1276"),n("f3f3")),s=n("2f62"),o=n("2ccf"),l=n.n(o),c=n("e80b"),u=n.n(c),p={name:"YamlView",components:{Prism:l.a},props:{title:{type:String,default:null},content:{type:Object,default:null},loaders:{type:Boolean,default:!0},isLoading:{type:Boolean,default:!1},hasError:{type:Boolean,default:!1},isEmpty:{type:Boolean,default:!1}},data:function(){return{tabs:[{hash:"#universal",title:"Universal"},{hash:"#kubernetes",title:"Kubernetes"}]}},computed:Object(r["a"])(Object(r["a"])({},Object(s["c"])({environment:"config/getEnvironment"})),{},{isReady:function(){return!this.isEmpty&&!this.hasError&&!this.isLoading},activeTab:{get:function(){var e=this.environment;return{hash:"#".concat(e),nohash:e}},set:function(e){return{hash:"#".concat(e),nohash:e}}},yamlTitle:function(){var e;return this.title?this.title:null!==(e=this.content)&&void 0!==e&&e.name?"Entity Overview for ".concat(this.content.name):"Entity Overview"},yamlContent:function(){var e=this,t=this.content,n=function(){var t={},n=Object.assign({},e.content),a=n.name,i=n.mesh,r=n.type,s=function(){var t=Object.assign({},e.content);return delete t.type,delete t.mesh,delete t.name,!!(t&&Object.entries(t).length>0)&&t};if(t.apiVersion="kuma.io/v1alpha1",t.kind=r,void 0!==i&&(t.mesh=n.mesh),null!==a&&void 0!==a&&a.includes(".")){var o=a.split("."),l=o.pop(),c=o.join(".");t.metadata={name:c,namespace:l}}else t.metadata={name:a};return s()&&(t.spec=s()),t},a={universal:u()(t),kubernetes:u()(n())};return a}})},f=p,d=(n("23d6"),n("2835"),n("2877")),y=Object(d["a"])(f,a,i,!1,null,"588ccef2",null);t["a"]=y.exports}}]);