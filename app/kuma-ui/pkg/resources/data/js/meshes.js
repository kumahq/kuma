(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["meshes"],{"23d6":function(t,e,n){"use strict";n("b91b")},3047:function(t,e,n){},"362e":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"all-meshes"},[n("FrameSkeleton",[n("DataOverview",{attrs:{"page-size":t.pageSize,"has-error":t.hasError,"is-loading":t.isLoading,"empty-state":t.empty_state,"table-data":t.tableData,"table-data-is-empty":t.tableDataIsEmpty,"table-data-function-text":"View","table-data-row":"name",next:t.next},on:{tableAction:t.tableAction,loadData:function(e){return t.loadData(e)}},scopedSlots:t._u([{key:"additionalControls",fn:function(){return[n("KButton",{staticClass:"add-mesh-button",attrs:{appearance:"primary",size:"small",to:{path:"/wizard/mesh"}},nativeOn:{click:function(e){return t.onCreateClick(e)}}},[n("span",{staticClass:"custom-control-icon"},[t._v(" + ")]),t._v(" Create Mesh ")])]},proxy:!0}])}),!1===t.isEmpty?n("Tabs",{attrs:{"has-error":t.hasError,"is-loading":t.isLoading,tabs:t.tabs,"initial-tab-override":"overview"},scopedSlots:t._u([{key:"tabHeader",fn:function(){return[n("div",[n("h3",[t._v(t._s(t.tabGroupTitle))])])]},proxy:!0},{key:"overview",fn:function(){return[n("LabelList",{attrs:{"has-error":t.entityHasError,"is-loading":t.entityIsLoading,"is-empty":t.entityIsEmpty}},[n("div",[n("ul",t._l(t.entity.basicData,(function(e,a){return n("li",{key:a},[n("h4","creationTime"===a?[t._v(" Created ")]:"modificationTime"===a?[t._v(" Last Modified ")]:[t._v(" "+t._s(a)+" ")]),n("p","creationTime"===a||"modificationTime"===a?[t._v(" "+t._s(t._f("readableDate")(e))+" "),n("em",[t._v("("+t._s(t._f("rawDate")(e))+")")])]:[t._v(" "+t._s(e)+" ")])])})),0)]),t.entity.extendedData&&t.entity.extendedData.length?n("div",[n("ul",[t._l(t.entity.extendedData,(function(e,a){return n("li",{key:a},[n("h4",[t._v(t._s(e.label))]),e.value?n("p",{staticClass:"label-cols"},[n("span",[t._v(" "+t._s(e.value.type)+" ")]),n("span",[t._v(" "+t._s(e.value.name)+" ")])]):n("KBadge",{attrs:{size:"small",appearance:"danger"}},[t._v(" Disabled ")])],1)})),n("li",[n("h4",[t._v("Locality Aware Loadbalancing")]),t.entity.localityEnabled?n("p",[n("KBadge",{attrs:{size:"small",appearance:"success"}},[t._v(" Enabled ")])],1):n("KBadge",{attrs:{size:"small",appearance:"danger"}},[t._v(" Disabled ")])],1)],2)]):t._e()])]},proxy:!0},{key:"yaml",fn:function(){return[n("YamlView",{attrs:{title:t.entityOverviewTitle,"has-error":t.entityHasError,"is-loading":t.entityIsLoading,"is-empty":t.entityIsEmpty,content:t.rawEntity}})]},proxy:!0},{key:"resources",fn:function(){return[n("LabelList",{attrs:{"has-error":t.entityHasError,"is-loading":t.entityIsLoading,"is-empty":t.entityIsEmpty}},t._l(t.countCols,(function(e){return n("div",{key:e},[n("ul",t._l(t.counts.slice((e-1)*t.itemsPerCol,e*t.itemsPerCol),(function(e,a){return n("li",{key:a},[n("h4",[t._v(t._s(e.title))]),n("p",[t._v(t._s(t._f("formatValue")(e.value)))])])})),0)])})),0)]},proxy:!0}],null,!1,2921065249)}):t._e()],1)],1)},i=[],r=(n("99af"),n("7db0"),n("4160"),n("b0c0"),n("4fad"),n("d3b7"),n("25f0"),n("159b"),n("d0ff")),s=n("f3f3"),o=n("2f62"),l=n("0f82"),c=n("6e9b"),u=n("027b"),f=n("75bb"),p=n("bc1e"),d=n("b912"),h=n("1d10"),y=n("2778"),m=n("251b"),b=n("ff9d"),v=n("0ada"),g=n("c6ec"),E={name:"Meshes",metaInfo:{title:"Meshes"},components:{FrameSkeleton:h["a"],DataOverview:y["a"],Tabs:m["a"],YamlView:b["a"],LabelList:v["a"]},filters:{formatValue:function(t){return t?t.toLocaleString("en").toString():0},readableDate:function(t){return Object(p["f"])(t)},rawDate:function(t){return Object(p["i"])(t)}},mixins:[d["a"]],data:function(){return{isLoading:!0,isEmpty:!1,hasError:!1,entityIsLoading:!0,entityIsEmpty:!1,entityHasError:!1,tableDataIsEmpty:!1,empty_state:{title:"No Data",message:"There are no Meshes present."},tableData:{headers:[{key:"actions",hideLabel:!0},{label:"Name",key:"name"},{label:"Type",key:"type"}],data:[]},tabs:[{hash:"#overview",title:"Overview"},{hash:"#resources",title:"Resources"},{hash:"#yaml",title:"YAML"}],entity:[],rawEntity:null,firstEntity:null,pageSize:g["f"],next:null,tabGroupTitle:null,entityOverviewTitle:null,itemsPerCol:3,meshInsight:Object(c["a"])()}},computed:Object(s["a"])(Object(s["a"])({},Object(o["d"])({mesh:"selectedMesh"})),{},{counts:function(){var t=this.meshInsight,e=t.policies,n=t.dataplanes.total,a=Object(s["a"])(Object(s["a"])({},Object(c["b"])()),e);return[{title:"Data plane proxies",value:n},{title:"Circuit Breakers",value:a.CircuitBreaker.total},{title:"Fault Injections",value:a.FaultInjection.total},{title:"Health Checks",value:a.HealthCheck.total},{title:"Proxy Templates",value:a.ProxyTemplate.total},{title:"Traffic Logs",value:a.TrafficLog.total},{title:"Traffic Permissions",value:a.TrafficPermission.total},{title:"Traffic Routes",value:a.TrafficRoute.total},{title:"Traffic Traces",value:a.TrafficTrace.total},{title:"Rate Limits",value:a.RateLimit.total},{title:"Retries",value:a.Retry.total},{title:"Timeouts",value:a.Timeout.total}]},countCols:function(){return Math.ceil(this.counts.length/this.itemsPerCol)},shareUrl:function(){var t=this,e="".concat(window.location.origin,"/#"),n=function(){return t.$route.query.ns?t.$route.fullPath:"".concat(e).concat(t.$route.fullPath)};return n()}}),watch:{$route:function(t,e){this.init()}},beforeMount:function(){this.init()},methods:{init:function(){this.loadData()},onCreateClick:function(){u["a"].logger.info(f["a"].CREATE_MESH_CLICKED)},tableAction:function(t){var e=t;this.getEntity(e)},loadData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0";this.isLoading=!0,this.hasError=!1,this.isEmpty=!1;var n=this.$route.params.mesh,a={size:this.pageSize,offset:e},i="all"!==n&&n?l["a"].getMesh(n):l["a"].getAllMeshes(a),s=function(){return i.then((function(e){var a=function(){if("all"===n)return e.items;var t={items:[]};return t.items.push(e),t.items};t.next=Boolean(e.next);var i=a();i.length>0?("all"===n&&t.sortEntities(i),t.firstEntity=i[0].name,t.getEntity(i[0]),t.tableData.data=Object(r["a"])(i),t.tableDataIsEmpty=!1,t.isEmpty=!1):(t.tableData.data=[],t.tableDataIsEmpty=!0,t.isEmpty=!0,t.getEntity(null))})).catch((function(e){t.hasError=!0,t.isEmpty=!0,console.error(e)})).finally((function(){setTimeout((function(){t.isLoading=!1}),"500")}))};s()},getEntity:function(t){var e=this;if(this.entityIsLoading=!0,this.entityIsEmpty=!1,this.entityHasError=!1,t&&null!==t)return l["a"].getMesh(t.name).then((function(n){if(n){l["a"].getMeshInsights(t.name).then((function(t){e.meshInsight=t}));var a=Object(p["d"])(n,["type","name"]),i=function(){var t=Object.entries(Object(p["d"])(n,["mtls","logging","metrics","tracing"])),e=[];return t.forEach((function(t){var n=t[0],a=t[1]||null;if(a&&a.enabledBackend){var i=a.enabledBackend,r=a.backends.find((function(t){return t.name===i}));r&&e.push({label:n,value:{type:r.type,name:r.name}})}else if(a&&a.defaultBackend){var s=a.defaultBackend,o=a.backends.find((function(t){return t.name===s}));o&&e.push({label:n,value:{type:o.type,name:o.name}})}else if(a&&a.backends){var l=a.backends[0];l&&e.push({label:n,value:{type:l.type,name:l.name}})}else e.push({label:n,value:null})})),e},r=function(){var t=n.routing;return t&&t.localityAwareLoadBalancing};e.tabGroupTitle="Mesh: ".concat(a.name),e.entityOverviewTitle="Entity Overview for ".concat(a.name),e.entity={basicData:a,extendedData:i(),localityEnabled:r()},e.rawEntity=Object(p["j"])(n)}else e.entity=null,e.entityIsEmpty=!0})).catch((function(t){e.entityHasError=!0,console.error(t)})).finally((function(){setTimeout((function(){e.entityIsLoading=!1}),"500")}));setTimeout((function(){e.entityIsEmpty=!0,e.entityIsLoading=!1}),"500")}}},_=E,x=(n("b71e"),n("2877")),C=Object(x["a"])(_,a,i,!1,null,"5bbb65d3",null);e["default"]=C.exports},"62e5":function(t,e){var n;n=function(){function t(t,e){var n,a,i,r,s,o,l,c,u;null==e&&(e=""),i="",s=t.length,o=null,a=0,r=0;while(r<s){if(n=t.charAt(r),"\\"===n)i+=t.slice(r,+(r+1)+1||9e9),r++;else if("("===n)if(r<s-2)if(c=t.slice(r,+(r+2)+1||9e9),"(?:"===c)r+=2,i+=c;else if("(?<"===c){a++,r+=2,l="";while(r+1<s){if(u=t.charAt(r+1),">"===u){i+="(",r++,l.length>0&&(null==o&&(o={}),o[l]=a);break}l+=u,r++}}else i+=n,a++;else i+=n;else i+=n;r++}this.rawRegex=t,this.cleanedRegex=i,this.regex=new RegExp(this.cleanedRegex,"g"+e.replace("g","")),this.mapping=o}return t.prototype.regex=null,t.prototype.rawRegex=null,t.prototype.cleanedRegex=null,t.prototype.mapping=null,t.prototype.exec=function(t){var e,n,a,i;if(this.regex.lastIndex=0,n=this.regex.exec(t),null==n)return null;if(null!=this.mapping)for(a in i=this.mapping,i)e=i[a],n[a]=n[e];return n},t.prototype.test=function(t){return this.regex.lastIndex=0,this.regex.test(t)},t.prototype.replace=function(t,e){return this.regex.lastIndex=0,t.replace(this.regex,e)},t.prototype.replaceAll=function(t,e,n){var a;null==n&&(n=0),this.regex.lastIndex=0,a=0;while(this.regex.test(t)&&(0===n||a<n))this.regex.lastIndex=0,t=t.replace(this.regex,e),a++;return[t,a]},t}(),t.exports=n},"64cff":function(t,e,n){"use strict";n("7ac1")},"6d8a":function(t,e,n){var a,i;i=n("62e5"),a=function(){var t;function e(){}return e.LIST_ESCAPEES=["\\","\\\\",'\\"','"',"\0","","","","","","","","\b","\t","\n","\v","\f","\r","","","","","","","","","","","","","","","","","","",(t=String.fromCharCode)(133),t(160),t(8232),t(8233)],e.LIST_ESCAPED=["\\\\",'\\"','\\"','\\"',"\\0","\\x01","\\x02","\\x03","\\x04","\\x05","\\x06","\\a","\\b","\\t","\\n","\\v","\\f","\\r","\\x0e","\\x0f","\\x10","\\x11","\\x12","\\x13","\\x14","\\x15","\\x16","\\x17","\\x18","\\x19","\\x1a","\\e","\\x1c","\\x1d","\\x1e","\\x1f","\\N","\\_","\\L","\\P"],e.MAPPING_ESCAPEES_TO_ESCAPED=function(){var t,n,a,i;for(a={},t=n=0,i=e.LIST_ESCAPEES.length;0<=i?n<i:n>i;t=0<=i?++n:--n)a[e.LIST_ESCAPEES[t]]=e.LIST_ESCAPED[t];return a}(),e.PATTERN_CHARACTERS_TO_ESCAPE=new i("[\\x00-\\x1f]|Ã‚Â…|Ã‚Â |Ã¢Â€Â¨|Ã¢Â€Â©"),e.PATTERN_MAPPING_ESCAPEES=new i(e.LIST_ESCAPEES.join("|").split("\\").join("\\\\")),e.PATTERN_SINGLE_QUOTING=new i("[\\s'\":{}[\\],&*#?]|^[-?|<>=!%@`]"),e.requiresDoubleQuoting=function(t){return this.PATTERN_CHARACTERS_TO_ESCAPE.test(t)},e.escapeWithDoubleQuotes=function(t){var e;return e=this.PATTERN_MAPPING_ESCAPEES.replace(t,function(t){return function(e){return t.MAPPING_ESCAPEES_TO_ESCAPED[e]}}(this)),'"'+e+'"'},e.requiresSingleQuoting=function(t){return this.PATTERN_SINGLE_QUOTING.test(t)},e.escapeWithSingleQuotes=function(t){return"'"+t.replace(/'/g,"''")+"'"},e}(),t.exports=a},"7ac1":function(t,e,n){},b71e:function(t,e,n){"use strict";n("3047")},b912:function(t,e,n){"use strict";n("b0c0");e["a"]={methods:{sortEntities:function(t){var e=t.sort((function(t,e){return t.name>e.name||t.name===e.name&&t.mesh>e.mesh?1:-1}));return e}}}},b91b:function(t,e,n){},e80b:function(t,e,n){var a=n("6d8a"),i="  ";function r(t){var e=typeof t;return t instanceof Array?"array":"string"==e?"string":"boolean"==e?"boolean":"number"==e?"number":"undefined"==e||null===t?"null":"hash"}function s(t,e){var n=r(t);switch(n){case"array":o(t,e);break;case"hash":l(t,e);break;case"string":u(t,e);break;case"null":e.push("null");break;case"number":e.push(t.toString());break;case"boolean":e.push(t?"true":"false");break}}function o(t,e){for(var n=0;n<t.length;n++){var a=t[n],r=[];s(a,r);for(var o=0;o<r.length;o++)e.push((0==o?"- ":i)+r[o])}}function l(t,e){for(var n in t){var a=[];if(t.hasOwnProperty(n)){var o=t[n];s(o,a);var l=r(o);if("string"==l||"null"==l||"number"==l||"boolean"==l)e.push(c(n)+": "+a[0]);else{e.push(c(n)+": ");for(var u=0;u<a.length;u++)e.push(i+a[u])}}}}function c(t){return t.match(/^[\w]+$/)?t:a.requiresDoubleQuoting(t)?a.escapeWithDoubleQuotes(t):a.requiresSingleQuoting(t)?a.escapeWithSingleQuotes(t):t}function u(t,e){e.push(c(t))}var f=function(t){"string"==typeof t&&(t=JSON.parse(t));var e=[];return s(t,e),e.join("\n")};t.exports=f},ff9d:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"yaml-view"},[t.isReady?n("div",{staticClass:"yaml-view-content"},[t.isLoading||t.isEmpty?t._e():n("KCard",{attrs:{title:t.title,"border-variant":"noBorder"},scopedSlots:t._u([{key:"body",fn:function(){return[n("KTabs",{key:t.environment,attrs:{tabs:t.tabs},scopedSlots:t._u([{key:"universal",fn:function(){return[n("KClipboardProvider",{scopedSlots:t._u([{key:"default",fn:function(e){var a=e.copyToClipboard;return[n("KPop",{attrs:{placement:"bottom"},scopedSlots:t._u([{key:"content",fn:function(){return[n("div",[n("p",[t._v("Entity copied to clipboard!")])])]},proxy:!0}],null,!0)},[n("KButton",{staticClass:"copy-button",attrs:{appearance:"primary",size:"small"},on:{click:function(){a(t.yamlContent.universal)}}},[t._v(" Copy Universal YAML ")])],1)]}}],null,!1,1536634960)}),n("prism",{staticClass:"code-block",attrs:{language:"yaml",code:t.yamlContent.universal}})]},proxy:!0},{key:"kubernetes",fn:function(){return[n("KClipboardProvider",{scopedSlots:t._u([{key:"default",fn:function(e){var a=e.copyToClipboard;return[n("KPop",{attrs:{placement:"bottom"},scopedSlots:t._u([{key:"content",fn:function(){return[n("div",[n("p",[t._v("Entity copied to clipboard!")])])]},proxy:!0}],null,!0)},[n("KButton",{staticClass:"copy-button",attrs:{appearance:"primary",size:"small"},on:{click:function(){a(t.yamlContent.kubernetes)}}},[t._v(" Copy Kubernetes YAML ")])],1)]}}],null,!1,2265429040)}),n("prism",{staticClass:"code-block",attrs:{language:"yaml",code:t.yamlContent.kubernetes}})]},proxy:!0}],null,!1,661975406),model:{value:t.activeTab.hash,callback:function(e){t.$set(t.activeTab,"hash",e)},expression:"activeTab.hash"}})]},proxy:!0}],null,!1,2034136171)})],1):t._e(),!0===t.loaders?n("div",[t.isLoading?n("KEmptyState",{attrs:{"cta-is-hidden":""},scopedSlots:t._u([{key:"title",fn:function(){return[n("div",{staticClass:"card-icon mb-3"},[n("KIcon",{attrs:{icon:"spinner",color:"rgba(0, 0, 0, 0.1)",size:"42"}})],1),t._v(" Data Loading... ")]},proxy:!0}],null,!1,3263214496)}):t._e(),t.isEmpty&&!t.isLoading?n("KEmptyState",{attrs:{"cta-is-hidden":""},scopedSlots:t._u([{key:"title",fn:function(){return[n("div",{staticClass:"card-icon mb-3"},[n("KIcon",{staticClass:"kong-icon--centered",attrs:{color:"var(--yellow-200)",icon:"warning","secondary-color":"var(--black-75)",size:"42"}})],1),t._v(" There is no data to display. ")]},proxy:!0}],null,!1,1612658095)}):t._e(),t.hasError?n("KEmptyState",{attrs:{"cta-is-hidden":""},scopedSlots:t._u([{key:"title",fn:function(){return[n("div",{staticClass:"card-icon mb-3"},[n("KIcon",{staticClass:"kong-icon--centered",attrs:{color:"var(--yellow-200)",icon:"warning","secondary-color":"var(--black-75)",size:"42"}})],1),t._v(" An error has occurred while trying to load this data. ")]},proxy:!0}],null,!1,822917942)}):t._e()],1):t._e()])},i=[],r=(n("caad"),n("a15b"),n("b0c0"),n("4fad"),n("ac1f"),n("2532"),n("1276"),n("f3f3")),s=n("2f62"),o=n("2ccf"),l=n.n(o),c=n("e80b"),u=n.n(c),f={name:"YamlView",components:{prism:l.a},props:{title:{type:String,default:null},content:{type:Object,default:null},loaders:{type:Boolean,default:!0},isLoading:{type:Boolean,default:!1},hasError:{type:Boolean,default:!1},isEmpty:{type:Boolean,default:!1}},data:function(){return{tabs:[{hash:"#universal",title:"Universal"},{hash:"#kubernetes",title:"Kubernetes"}]}},computed:Object(r["a"])(Object(r["a"])({},Object(s["c"])({environment:"config/getEnvironment"})),{},{isReady:function(){return!this.isEmpty&&!this.hasError&&!this.isLoading},activeTab:{get:function(){var t=this.environment;return{hash:"#".concat(t),nohash:t}},set:function(t){return{hash:"#".concat(t),nohash:t}}},yamlContent:function(){var t=this,e=this.content,n=function(){var e={},n=Object.assign({},t.content),a=n.name,i=n.mesh,r=n.type,s=function(){var e=Object.assign({},t.content);return delete e.type,delete e.mesh,delete e.name,!!(e&&Object.entries(e).length>0)&&e};if(e.apiVersion="kuma.io/v1alpha1",e.kind=r,void 0!==i&&(e.mesh=n.mesh),null!==a&&void 0!==a&&a.includes(".")){var o=a.split("."),l=o.pop(),c=o.join(".");e.metadata={name:c,namespace:l}}else e.metadata={name:a};return s()&&(e.spec=s()),e},a={universal:u()(e),kubernetes:u()(n())};return a}})},p=f,d=(n("23d6"),n("64cff"),n("2877")),h=Object(d["a"])(p,a,i,!1,null,"d189da22",null);e["a"]=h.exports}}]);