(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["dataplanes~dataplanes-gateway~dataplanes-standard"],{"0661":function(t,e,n){},"1d10":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"component-frame"},[t._t("default")],2)},r=[],s={name:"FrameSkeleton"},i=s,o=(n("a948"),n("2877")),l=Object(o["a"])(i,a,r,!1,null,"666bca0e",null);e["a"]=l.exports},"1fcd":function(t,e,n){"use strict";n("c174")},"23d6":function(t,e,n){"use strict";n("b91b")},"517c":function(t,e,n){"use strict";n("0661")},"536d":function(t,e,n){"use strict";n("66ad")},"62e5":function(t,e){var n;n=function(){function t(t,e){var n,a,r,s,i,o,l,c,u;null==e&&(e=""),r="",i=t.length,o=null,a=0,s=0;while(s<i){if(n=t.charAt(s),"\\"===n)r+=t.slice(s,+(s+1)+1||9e9),s++;else if("("===n)if(s<i-2)if(c=t.slice(s,+(s+2)+1||9e9),"(?:"===c)s+=2,r+=c;else if("(?<"===c){a++,s+=2,l="";while(s+1<i){if(u=t.charAt(s+1),">"===u){r+="(",s++,l.length>0&&(null==o&&(o={}),o[l]=a);break}l+=u,s++}}else r+=n,a++;else r+=n;else r+=n;s++}this.rawRegex=t,this.cleanedRegex=r,this.regex=new RegExp(this.cleanedRegex,"g"+e.replace("g","")),this.mapping=o}return t.prototype.regex=null,t.prototype.rawRegex=null,t.prototype.cleanedRegex=null,t.prototype.mapping=null,t.prototype.exec=function(t){var e,n,a,r;if(this.regex.lastIndex=0,n=this.regex.exec(t),null==n)return null;if(null!=this.mapping)for(a in r=this.mapping,r)e=r[a],n[a]=n[e];return n},t.prototype.test=function(t){return this.regex.lastIndex=0,this.regex.test(t)},t.prototype.replace=function(t,e){return this.regex.lastIndex=0,t.replace(this.regex,e)},t.prototype.replaceAll=function(t,e,n){var a;null==n&&(n=0),this.regex.lastIndex=0,a=0;while(this.regex.test(t)&&(0===n||a<n))this.regex.lastIndex=0,t=t.replace(this.regex,e),a++;return[t,a]},t}(),t.exports=n},"63b5":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("KCard",{attrs:{"border-variant":"noBorder"},scopedSlots:t._u([{key:"body",fn:function(){return[n("ul",t._l(t.warnings,(function(e){var a=e.kind,r=e.payload,s=e.index;return n("li",{key:a+"/"+s,staticClass:"mb-1"},[n("KAlert",{attrs:{appearance:"warning"},scopedSlots:t._u([{key:"alertMessage",fn:function(){return[n(t.getWarningComponent(a),{tag:"component",attrs:{payload:r}})]},proxy:!0}],null,!0)})],1)})),0)]},proxy:!0}])})},r=[],s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[t._v(" "+t._s(t.payload)+" ")])},i=[],o={name:"WarningDefault",props:{payload:{type:[String,Object],required:!0}}},l=o,c=n("2877"),u=Object(c["a"])(l,s,i,!1,null,null,null),p=u.exports,d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[t._v(" Envoy ("),n("strong",[t._v(t._s(t.payload.envoy))]),t._v(") is unsupported by the current version of Kuma DP ("),n("strong",[t._v(t._s(t.payload.kumaDp))]),t._v(") [Requirements: "),n("strong",[t._v(" "+t._s(t.payload.requirements))]),t._v("] ")])},y=[],f={name:"WarningEnvoyIncompatible",props:{payload:{type:Object,required:!0}}},m=f,v=Object(c["a"])(m,d,y,!1,null,null,null),h=v.exports,b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[t._v(" There is mismatch between versions of Kuma DP ("),n("strong",[t._v(t._s(t.payload.kumaDpVersion))]),t._v(") and the Zone CP ("),n("strong",[t._v(t._s(t.payload.zoneVersion))]),t._v(") ")])},g=[],_={name:"WarningZoneAndKumaDPVersionsIncompatible",props:{payload:{type:Object,required:!0}}},E=_,x=Object(c["a"])(E,b,g,!1,null,null,null),k=x.exports,C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[t._v(" Unsupported version of Kuma DP ("),n("strong",[t._v(t._s(t.payload.kumaDpVersion))]),t._v(") ")])},w=[],S={name:"WarningUnsupportedKumaDPVersion",props:{payload:{type:Object,required:!0}}},P=S,T=Object(c["a"])(P,C,w,!1,null,null,null),D=T.exports,O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[t._v(" There is mismatch between versions of Zone CP ("),n("strong",[t._v(t._s(t.payload.zoneCpVersion))]),t._v(") and the Global CP ("),n("strong",[t._v(t._s(t.payload.globalCpVersion))]),t._v(") ")])},A=[],j={name:"WarningZoneAndGlobalCPSVersionsIncompatible",props:{payload:{type:Object,required:!0}}},I=j,L=Object(c["a"])(I,O,A,!1,null,null,null),R=L.exports,K=n("dbf3"),N={name:"Warnings",props:{warnings:{type:Array,required:!0}},methods:{getWarningComponent:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";switch(t){case K["b"]:return h;case K["c"]:return D;case K["f"]:return k;case K["e"]:return R;default:return p}}}},U=N,V=Object(c["a"])(U,a,r,!1,null,null,null);e["a"]=V.exports},"66ad":function(t,e,n){},"6d8a":function(t,e,n){var a,r;r=n("62e5"),a=function(){var t;function e(){}return e.LIST_ESCAPEES=["\\","\\\\",'\\"','"',"\0","","","","","","","","\b","\t","\n","\v","\f","\r","","","","","","","","","","","","","","","","","","",(t=String.fromCharCode)(133),t(160),t(8232),t(8233)],e.LIST_ESCAPED=["\\\\",'\\"','\\"','\\"',"\\0","\\x01","\\x02","\\x03","\\x04","\\x05","\\x06","\\a","\\b","\\t","\\n","\\v","\\f","\\r","\\x0e","\\x0f","\\x10","\\x11","\\x12","\\x13","\\x14","\\x15","\\x16","\\x17","\\x18","\\x19","\\x1a","\\e","\\x1c","\\x1d","\\x1e","\\x1f","\\N","\\_","\\L","\\P"],e.MAPPING_ESCAPEES_TO_ESCAPED=function(){var t,n,a,r;for(a={},t=n=0,r=e.LIST_ESCAPEES.length;0<=r?n<r:n>r;t=0<=r?++n:--n)a[e.LIST_ESCAPEES[t]]=e.LIST_ESCAPED[t];return a}(),e.PATTERN_CHARACTERS_TO_ESCAPE=new r("[\\x00-\\x1f]|√Ç¬Ö|√Ç¬†|√¢¬Ä¬®|√¢¬Ä¬©"),e.PATTERN_MAPPING_ESCAPEES=new r(e.LIST_ESCAPEES.join("|").split("\\").join("\\\\")),e.PATTERN_SINGLE_QUOTING=new r("[\\s'\":{}[\\],&*#?]|^[-?|<>=!%@`]"),e.requiresDoubleQuoting=function(t){return this.PATTERN_CHARACTERS_TO_ESCAPE.test(t)},e.escapeWithDoubleQuotes=function(t){var e;return e=this.PATTERN_MAPPING_ESCAPEES.replace(t,function(t){return function(e){return t.MAPPING_ESCAPEES_TO_ESCAPED[e]}}(this)),'"'+e+'"'},e.requiresSingleQuoting=function(t){return this.PATTERN_SINGLE_QUOTING.test(t)},e.escapeWithSingleQuotes=function(t){return"'"+t.replace(/'/g,"''")+"'"},e}(),t.exports=a},"85e6":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("FrameSkeleton",[n("DataOverview",{attrs:{"page-size":t.pageSize,"has-error":t.hasError,"is-loading":t.isLoading,"empty-state":t.getEmptyState(),"table-data":t.buildTableData(),"table-data-is-empty":t.tableDataIsEmpty,"show-warnings":t.tableData.data.some((function(t){return t.withWarnings})),next:t.next},on:{tableAction:t.tableAction,loadData:function(e){return t.loadData(e)}},scopedSlots:t._u([{key:"additionalControls",fn:function(){return[n("KButton",{staticClass:"add-dp-button",attrs:{appearance:"primary",size:"small",to:t.dataplaneWizardRoute},nativeOn:{click:function(e){return t.onCreateClick(e)}}},[n("span",{staticClass:"custom-control-icon"},[t._v(" + ")]),t._v(" Create data plane proxy ")]),t.$route.query.ns?n("KButton",{staticClass:"back-button",attrs:{appearance:"primary",size:"small",to:t.nsBackButtonRoute}},[n("span",{staticClass:"custom-control-icon"},[t._v(" ‚Üê ")]),t._v(" View All ")]):t._e()]},proxy:!0}])}),!1===t.isEmpty?n("Tabs",{attrs:{"has-error":t.hasError,"is-loading":t.isLoading,tabs:t.filterTabs(),"initial-tab-override":"overview"},scopedSlots:t._u([{key:"tabHeader",fn:function(){return[n("div",[t.entity.basicData?n("h3",[t._v(" DPP: "+t._s(t.entity.basicData.name)+" ")]):t._e()]),n("div",[n("EntityURLControl",{attrs:{name:t.entityName,mesh:t.entityMesh}})],1)]},proxy:!0},{key:"overview",fn:function(){return[n("LabelList",{attrs:{"is-loading":t.entityIsLoading,"is-empty":t.entityIsEmpty}},[n("div",[n("ul",t._l(t.entity.basicData,(function(e,a){return n("li",{key:a},[n("div","status"===a?[n("h4",[t._v(t._s(a))]),n("div",{staticClass:"entity-status",class:{"is-offline":"offline"===e.status.toString().toLowerCase()||!1===e.status,"is-degraded":"partially degraded"===e.status.toString().toLowerCase()||!1===e.status}},[n("span",{staticClass:"entity-status__label"},[t._v(t._s(e.status))])]),n("div",{staticClass:"reason-list"},[n("ul",t._l(e.reason,(function(e){return n("li",{key:e},[n("span",{staticClass:"entity-status__dot"}),t._v(" "+t._s(e)+" ")])})),0)])]:[n("h4",[t._v(t._s(a))]),t._v(" "+t._s(e)+" ")])])})),0)]),n("div",[n("h4",[t._v("Tags")]),n("p",t._l(t.entity.tags,(function(e,a){return n("span",{key:a,staticClass:"tag-cols"},[n("span",[t._v(" "+t._s(e.label)+": ")]),n("span",[t._v(" "+t._s(e.value)+" ")])])})),0),t.entity.versions?n("div",[n("h4",[t._v("Versions")]),n("p",t._l(t.entity.versions,(function(e,a){return n("span",{key:a,staticClass:"tag-cols"},[n("span",[t._v(" "+t._s(a)+": ")]),n("span",[t._v(" "+t._s(e)+" ")])])})),0)]):t._e()])])]},proxy:!0},{key:"insights",fn:function(){return[n("StatusInfo",{attrs:{"is-empty":0===t.subscriptionsReversed.length}},[n("KCard",{attrs:{"border-variant":"noBorder"},scopedSlots:t._u([{key:"body",fn:function(){return[n("Accordion",{attrs:{"initially-open":0}},t._l(t.subscriptionsReversed,(function(e,a){return n("AccordionItem",{key:a,scopedSlots:t._u([{key:"accordion-header",fn:function(){return[n("SubscriptionHeader",{attrs:{details:e}})]},proxy:!0},{key:"accordion-content",fn:function(){return[n("SubscriptionDetails",{attrs:{details:e,"is-discovery-subscription":""}})]},proxy:!0}],null,!0)})})),1)]},proxy:!0}],null,!1,2672485894)})],1)]},proxy:!0},{key:"dpp-policies",fn:function(){return[n("DataplanePolicies",{attrs:{mesh:t.rawEntity.mesh,"dpp-name":t.rawEntity.name}})]},proxy:!0},{key:"xds-configuration",fn:function(){return[n("XdsConfiguration",{attrs:{mesh:t.rawEntity.mesh,"dpp-name":t.rawEntity.name}})]},proxy:!0},{key:"envoy-stats",fn:function(){return[n("EnvoyStats",{attrs:{mesh:t.rawEntity.mesh,"dpp-name":t.rawEntity.name}})]},proxy:!0},{key:"envoy-clusters",fn:function(){return[n("EnvoyClusters",{attrs:{mesh:t.rawEntity.mesh,"dpp-name":t.rawEntity.name}})]},proxy:!0},{key:"mtls",fn:function(){return[n("LabelList",{attrs:{"is-loading":t.entityIsLoading,"is-empty":t.entityIsEmpty}},[t.entity.mtls?n("ul",t._l(t.entity.mtls,(function(e,a){return n("li",{key:a},[n("h4",[t._v(t._s(e.label))]),n("p",[t._v(" "+t._s(e.value)+" ")])])})),0):n("KAlert",{attrs:{appearance:"danger"},scopedSlots:t._u([{key:"alertMessage",fn:function(){return[t._v(" This data plane proxy does not yet have mTLS configured ‚Äî "),n("a",{staticClass:"external-link",attrs:{href:"https://kuma.io/docs/"+t.version+"/documentation/security/#certificates",target:"_blank"}},[t._v(" Learn About Certificates in "+t._s(t.productName)+" ")])]},proxy:!0}],null,!1,672628330)})],1)]},proxy:!0},{key:"yaml",fn:function(){return[n("YamlView",{attrs:{"is-loading":t.entityIsLoading,"is-empty":t.entityIsEmpty,content:t.rawEntity}})]},proxy:!0},{key:"warnings",fn:function(){return[n("Warnings",{attrs:{warnings:t.warnings}})]},proxy:!0}],null,!1,552309703)}):t._e()],1)},r=[],s=(n("4de4"),n("7db0"),n("a630"),n("d81d"),n("13d5"),n("b0c0"),n("d3b7"),n("3ca3"),n("ddb0"),n("96cf"),n("c964")),i=n("f3f3"),o=n("2f62"),l=n("0f82"),c=n("027b"),u=n("bc1e"),p=n("75bb"),d=n("dbf3"),y=n("6663"),f=n("1d10"),m=n("2778"),v=n("251b"),h=n("ff9d"),b=n("0ada"),g=n("63b5"),_=n("c6ec"),E=n("520d"),x=n("3ddf"),k=n("1d3a"),C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("StatusInfo",{attrs:{"has-error":t.hasError,"is-loading":t.isLoading,"is-empty":!t.hasItems}},[n("KCard",{attrs:{"border-variant":"noBorder"},scopedSlots:t._u([{key:"body",fn:function(){return[n("Accordion",{attrs:{"initially-open":[],"multiple-open":""}},t._l(t.items,(function(e,a){return n("AccordionItem",{key:a,scopedSlots:t._u([{key:"accordion-header",fn:function(){return[n("div",{staticClass:"flex items-center justify-between"},[n("div",["dataplane"===e.type?n("p",{staticClass:"text-lg"},[t._v(" Dataplane ")]):t._e(),"dataplane"!==e.type?n("p",{staticClass:"text-lg"},[t._v(" "+t._s(e.service)+" ")]):t._e(),n("p",{staticClass:"subtitle"},["inbound"===e.type||"outbound"===e.type?n("span",[t._v(" "+t._s(e.type)+" "+t._s(e.name)+" ")]):"service"===e.type||"dataplane"===e.type?n("span",[t._v(" "+t._s(e.type)+" ")]):t._e(),n("KPop",{attrs:{width:"300",placement:"right",trigger:"hover"},scopedSlots:t._u([{key:"content",fn:function(){return[n("div",[t._v(" "+t._s(t.POLICY_TYPE_SUBTITLE[e.type])+" ")])]},proxy:!0}],null,!0)},[n("KIcon",{staticClass:"ml-1",attrs:{icon:"help",size:"12","view-box":"0 0 16 16"}})],1)],1)]),n("div",{staticClass:"flex flex-wrap justify-end"},t._l(e.matchedPolicies,(function(e,a){return n("KBadge",{key:a,staticClass:"mr-2 mb-2"},[t._v(" "+t._s(a)+" ")])})),1)])]},proxy:!0},{key:"accordion-content",fn:function(){return[n("div",{staticClass:"policy-wrapper"},t._l(e.matchedPolicies,(function(e,a){return n("div",{key:a,staticClass:"policy-item"},[n("h4",{staticClass:"policy-type"},[t._v(" "+t._s(t.getPolicyTitle(a))+" ")]),n("ul",t._l(e,(function(e){return n("li",{key:e.name,staticClass:"my-1",attrs:{"data-testid":"policy-name"}},[n("router-link",{attrs:{to:t.getPolicyLink(e)}},[t._v(" "+t._s(e.name)+" ")])],1)})),0)])})),0)]},proxy:!0}],null,!0)})})),1)]},proxy:!0}])})],1)},w=[],S=n("ef9d"),P={inbound:"Policies applied on incoming connection on address",outbound:"Policies applied on outgoing connection to the address",service:"Policies applied on outgoing connections to service",dataplane:"Policies applied on all incoming and outgoing connections to the selected data plane proxy"},T={name:"DataplanePolicies",components:{StatusInfo:S["a"],Accordion:E["a"],AccordionItem:x["a"]},props:{mesh:{type:String,required:!0},dppName:{type:String,required:!0}},data:function(){return{hasItems:!1,isLoading:!0,hasError:!1,policies:[],searchInput:"",POLICY_MAP:_["i"],POLICY_TYPE_SUBTITLE:P}},watch:{dppName:function(){this.fetchPolicies()}},mounted:function(){this.fetchPolicies()},methods:{getPolicyTitle:function(t){var e;return(null===(e=_["i"][t])||void 0===e?void 0:e.title)||t},getPolicyLink:function(t){var e;return{name:null===(e=_["i"][t.type])||void 0===e?void 0:e.route,query:{ns:t.name},params:{mesh:t.mesh}}},fetchPolicies:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.hasError=!1,t.isLoading=!0,e.prev=2,e.next=5,l["a"].getDataplanePolicies({mesh:t.mesh,dppName:t.dppName});case 5:n=e.sent,a=n.items,r=n.total,t.hasItems=r>0,t.items=a,e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](2),console.error(e.t0),t.hasError=!0;case 16:return e.prev=16,t.isLoading=!1,e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[2,12,16,19]])})))()}}},D=T,O=(n("517c"),n("2877")),A=Object(O["a"])(D,C,w,!1,null,"f9415e5a",null),j=A.exports,I=n("2357"),L=n("f09b"),R=n("d4aa"),K=n("0b6d"),N=n("c8b4"),U={name:"Dataplanes",components:{EnvoyStats:L["a"],EnvoyClusters:R["a"],Warnings:g["a"],EntityURLControl:y["a"],FrameSkeleton:f["a"],DataOverview:m["a"],Tabs:v["a"],YamlView:h["a"],LabelList:b["a"],Accordion:E["a"],AccordionItem:x["a"],SubscriptionDetails:K["a"],SubscriptionHeader:N["a"],DataplanePolicies:j,XdsConfiguration:I["a"],StatusInfo:S["a"]},props:{nsBackButtonRoute:{type:Object,default:function(){return{name:"dataplanes"}}},emptyStateMsg:{type:String,default:"There are no data plane proxies present."},dataplaneApiParams:{type:Object,default:function(){return{}}},tableHeaders:{type:Array,default:function(){return[{key:"actions",hideLabel:!0},{label:"Status",key:"status"},{label:"Name",key:"name"},{label:"Mesh",key:"mesh"},{label:"Type",key:"type"},{label:"Tags",key:"tags"},{label:"Last Connected",key:"lastConnected"},{label:"Last Updated",key:"lastUpdated"},{label:"Total Updates",key:"totalUpdates"},{label:"Kuma DP version",key:"dpVersion"},{label:"Envoy version",key:"envoyVersion"},{key:"warnings",hideLabel:!0}]}},tabs:{type:Array,default:function(){return[{hash:"#overview",title:"Overview"},{hash:"#insights",title:"DPP Insights"},{hash:"#dpp-policies",title:"Policies"},{hash:"#xds-configuration",title:"XDS Configuration"},{hash:"#envoy-stats",title:"Stats"},{hash:"#envoy-clusters",title:"Clusters"},{hash:"#mtls",title:"Certificate Insights"},{hash:"#yaml",title:"YAML"},{hash:"#warnings",title:"Warnings"}]}}},data:function(){return{productName:_["j"],isLoading:!0,isEmpty:!1,hasError:!1,entityIsLoading:!0,entityIsEmpty:!1,warnings:[],tableDataIsEmpty:!1,tableData:{headers:[],data:[]},subscriptionsReversed:[],entity:{},rawEntity:{},pageSize:_["g"],next:null,shownTLSTab:!1,rawData:null}},computed:Object(i["a"])(Object(i["a"])({},Object(o["c"])({environment:"config/getEnvironment",queryNamespace:"getItemQueryNamespace",multicluster:"config/getMulticlusterStatus"})),{},{dataplaneWizardRoute:function(){return"universal"===this.environment?{name:"universal-dataplane"}:{name:"kubernetes-dataplane"}},version:function(){var t=this.$store.getters.getVersion;return null!==t?t:"latest"},entityName:function(){var t,e;return(null===(t=this.entity)||void 0===t||null===(e=t.basicData)||void 0===e?void 0:e.name)||""},entityMesh:function(){var t,e;return(null===(t=this.entity)||void 0===t||null===(e=t.basicData)||void 0===e?void 0:e.mesh)||""}}),watch:{$route:function(){this.loadData()}},beforeMount:function(){this.loadData()},methods:{onCreateClick:function(){c["a"].logger.info(p["a"].CREATE_DATA_PLANE_PROXY_CLICKED)},buildEntity:function(t,e,n,a){var r=n.mTLS?Object(d["p"])(n.mTLS):null;return{basicData:t,tags:e,mtls:r,versions:a}},init:function(){this.loadData()},getEmptyState:function(){return{title:"No Data",message:this.emptyStateMsg}},filterTabs:function(){return this.warnings.length?this.tabs:this.tabs.filter((function(t){return"#warnings"!==t.hash}))},buildTableData:function(){return Object(i["a"])(Object(i["a"])({},this.tableData),{},{headers:this.tableHeaders})},compatibilityKind:function(t){return Object(d["h"])(t)},tableAction:function(t){var e=t;this.getEntity(e)},parseData:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var a,r,s,i,o,l,c,p,y,f,m,v,h,b,g,_,E,x,k,C,w,S,P,T,D,O;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:a=t.dataplane,r=void 0===a?{}:a,s=t.dataplaneInsight,i=void 0===s?{}:s,o=t.name,l=void 0===o?"":o,c=t.mesh,p=void 0===c?"":c,y=i.subscriptions,f=void 0===y?[]:y,m=Object(d["i"])(r),v=Object(d["n"])(r,i),h=v.status,b=f.reduce((function(t,e){var n=e.status,a=void 0===n?{}:n,r=e.connectTime,s=e.version,i=void 0===s?{}:s,o=a.total,l=void 0===o?{}:o,c=a.lastUpdateTime,u=l.responsesSent,p=void 0===u?"0":u,d=l.responsesRejected,y=void 0===d?"0":d,f=i.kumaDp,m=void 0===f?{}:f,v=i.envoy,h=void 0===v?{}:v,b=m.version,g=h.version,_=t.selectedTime,E=t.selectedUpdateTime,x=Date.parse(r),k=Date.parse(c);return x&&(!_||x>_)&&(_=x),k&&(!E||k>E)&&(E=k),{totalUpdates:t.totalUpdates+parseInt(p,10),totalRejectedUpdates:t.totalRejectedUpdates+parseInt(y,10),dpVersion:b||t.dpVersion,envoyVersion:g||t.envoyVersion,selectedTime:_,selectedUpdateTime:E,version:i||t.version}}),{totalUpdates:0,totalRejectedUpdates:0,dpVersion:"-",envoyVersion:"-",selectedTime:NaN,selectedUpdateTime:NaN,version:{}}),g=b.totalUpdates,_=b.totalRejectedUpdates,E=b.dpVersion,x=b.envoyVersion,k=b.selectedTime,C=b.selectedUpdateTime,w=b.version,S={name:l,mesh:p,tags:m,status:h,totalUpdates:g,totalRejectedUpdates:_,dpVersion:E,envoyVersion:x,withWarnings:!1,unsupportedEnvoyVersion:!1,unsupportedKumaDPVersion:!1,kumaDpAndKumaCpMismatch:!1,lastUpdated:C?Object(u["f"])(new Date(C).toUTCString()):"never",lastConnected:k?Object(u["f"])(new Date(k).toUTCString()):"never",type:Object(d["l"])(r)},P=e.compatibilityKind(w),T=P.kind,n.t0=T,n.next=n.t0===d["b"]?11:n.t0===d["c"]?14:17;break;case 11:return S.unsupportedEnvoyVersion=!0,S.withWarnings=!0,n.abrupt("break",17);case 14:return S.unsupportedKumaDPVersion=!0,S.withWarnings=!0,n.abrupt("break",17);case 17:if(!e.multicluster){n.next=23;break}return n.next=20,Object(d["g"])(m,E);case 20:D=n.sent,O=D.compatible,O||(S.withWarnings=!0,S.kumaDpAndKumaCpMismatch=!0);case 23:return n.abrupt("return",S);case 24:case"end":return n.stop()}}),n)})))()},loadData:function(){var t=arguments,e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var a,r,s,o,c,u,p;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=t.length>0&&void 0!==t[0]?t[0]:"0",e.isLoading=!0,r=e.$route.params.mesh||null,s=e.$route.query.ns||null,n.prev=4,n.next=7,Object(k["a"])({getSingleEntity:l["a"].getDataplaneOverviewFromMesh.bind(l["a"]),getAllEntities:l["a"].getAllDataplaneOverviews.bind(l["a"]),getAllEntitiesFromMesh:l["a"].getAllDataplaneOverviewsFromMesh.bind(l["a"]),size:e.pageSize,offset:a,mesh:r,query:s,params:Object(i["a"])({},e.dataplaneApiParams)});case 7:if(o=n.sent,c=o.data,u=o.next,!c.length){n.next=22;break}return e.next=u,e.rawData=c,e.getEntity({name:c[0].name}),n.next=16,Promise.all(c.map((function(t){return e.parseData(t)})));case 16:p=n.sent,e.tableData.data=p,e.tableDataIsEmpty=!1,e.isEmpty=!1,n.next=25;break;case 22:e.tableData.data=[],e.tableDataIsEmpty=!0,e.isEmpty=!0;case 25:n.next=32;break;case 27:n.prev=27,n.t0=n["catch"](4),e.hasError=!0,e.isEmpty=!0,console.error(n.t0);case 32:return n.prev=32,e.isLoading=!1,n.finish(32);case 35:case"end":return n.stop()}}),n,null,[[4,27,32,35]])})))()},getEntity:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var a,r,s,o,l,c,p,y,f,m;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.entityIsLoading=!0,e.entityIsEmpty=!1,a=e.rawData.find((function(e){return e.name===t.name})),r=Object(d["j"])(a),r?(s=["type","name","mesh"],o=Object(d["k"])(a)||{},l=Object(d["n"])(r,o),c=Object(d["i"])(r),p=Object(d["o"])(o),y=Object(i["a"])(Object(i["a"])({},Object(u["d"])(r,s)),{},{status:l}),e.entity=e.buildEntity(y,c,o,p),e.warnings=[],f=o.subscriptions,m=void 0===f?[]:f,e.subscriptionsReversed=Array.from(m).reverse(),m.length&&e.setEntityWarnings(m,c),e.rawEntity=Object(u["j"])(r)):(e.entity={},e.entityIsEmpty=!0),e.entityIsLoading=!1;case 6:case"end":return n.stop()}}),n)})))()},setEntityWarnings:function(t,e){var n=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r,s,i,o,l,c,u,p,y,f,m;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(r=t[t.length-1].version,s=void 0===r?{}:r,i=s.kumaDp,o=void 0===i?{}:i,l=s.envoy,c=void 0===l?{}:l,o&&c&&(u=n.compatibilityKind(s),p=u.kind,p!==d["a"]&&p!==d["d"]&&n.warnings.push(u)),!n.multicluster){a.next=10;break}return a.next=6,Object(d["g"])(e,o.version);case 6:y=a.sent,f=y.compatible,m=y.payload,f||n.warnings.push({kind:d["f"],payload:m});case 10:case"end":return a.stop()}}),a)})))()}}},V=U,W=(n("1fcd"),Object(O["a"])(V,a,r,!1,null,"000c8e52",null));e["a"]=W.exports},a948:function(t,e,n){"use strict";n("f9f3")},b91b:function(t,e,n){},c174:function(t,e,n){},e80b:function(t,e,n){var a=n("6d8a"),r="  ";function s(t){var e=typeof t;return t instanceof Array?"array":"string"==e?"string":"boolean"==e?"boolean":"number"==e?"number":"undefined"==e||null===t?"null":"hash"}function i(t,e){var n=s(t);switch(n){case"array":o(t,e);break;case"hash":l(t,e);break;case"string":u(t,e);break;case"null":e.push("null");break;case"number":e.push(t.toString());break;case"boolean":e.push(t?"true":"false");break}}function o(t,e){for(var n=0;n<t.length;n++){var a=t[n],s=[];i(a,s);for(var o=0;o<s.length;o++)e.push((0==o?"- ":r)+s[o])}}function l(t,e){for(var n in t){var a=[];if(t.hasOwnProperty(n)){var o=t[n];i(o,a);var l=s(o);if("string"==l||"null"==l||"number"==l||"boolean"==l)e.push(c(n)+": "+a[0]);else{e.push(c(n)+": ");for(var u=0;u<a.length;u++)e.push(r+a[u])}}}}function c(t){return t.match(/^[\w]+$/)?t:a.requiresDoubleQuoting(t)?a.escapeWithDoubleQuotes(t):a.requiresSingleQuoting(t)?a.escapeWithSingleQuotes(t):t}function u(t,e){e.push(c(t))}var p=function(t){"string"==typeof t&&(t=JSON.parse(t));var e=[];return i(t,e),e.join("\n")};t.exports=p},f9f3:function(t,e,n){},ff9d:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"yaml-view"},[t.isReady?n("div",{staticClass:"yaml-view-content"},[t.isLoading||t.isEmpty?t._e():n("KCard",{attrs:{title:t.yamlTitle,"border-variant":"noBorder"},scopedSlots:t._u([{key:"body",fn:function(){return[n("KTabs",{key:t.environment,attrs:{tabs:t.tabs},scopedSlots:t._u([{key:"universal",fn:function(){return[n("KClipboardProvider",{scopedSlots:t._u([{key:"default",fn:function(e){var a=e.copyToClipboard;return[n("KPop",{attrs:{placement:"bottom"},scopedSlots:t._u([{key:"content",fn:function(){return[n("div",[n("p",[t._v("Entity copied to clipboard!")])])]},proxy:!0}],null,!0)},[n("KButton",{staticClass:"copy-button",attrs:{appearance:"primary",size:"small"},on:{click:function(){a(t.yamlContent.universal)}}},[t._v(" Copy Universal YAML ")])],1)]}}],null,!1,1536634960)}),n("Prism",{staticClass:"code-block",attrs:{language:"yaml",code:t.yamlContent.universal}})]},proxy:!0},{key:"kubernetes",fn:function(){return[n("KClipboardProvider",{scopedSlots:t._u([{key:"default",fn:function(e){var a=e.copyToClipboard;return[n("KPop",{attrs:{placement:"bottom"},scopedSlots:t._u([{key:"content",fn:function(){return[n("div",[n("p",[t._v("Entity copied to clipboard!")])])]},proxy:!0}],null,!0)},[n("KButton",{staticClass:"copy-button",attrs:{appearance:"primary",size:"small"},on:{click:function(){a(t.yamlContent.kubernetes)}}},[t._v(" Copy Kubernetes YAML ")])],1)]}}],null,!1,2265429040)}),n("Prism",{staticClass:"code-block",attrs:{language:"yaml",code:t.yamlContent.kubernetes}})]},proxy:!0}],null,!1,1506056494),model:{value:t.activeTab.hash,callback:function(e){t.$set(t.activeTab,"hash",e)},expression:"activeTab.hash"}})]},proxy:!0}],null,!1,137880475)})],1):t._e(),!0===t.loaders?n("div",[t.isLoading?n("KEmptyState",{attrs:{"cta-is-hidden":""},scopedSlots:t._u([{key:"title",fn:function(){return[n("div",{staticClass:"card-icon mb-3"},[n("KIcon",{attrs:{icon:"spinner",color:"rgba(0, 0, 0, 0.1)",size:"42"}})],1),t._v(" Data Loading... ")]},proxy:!0}],null,!1,3263214496)}):t._e(),t.isEmpty&&!t.isLoading?n("KEmptyState",{attrs:{"cta-is-hidden":""},scopedSlots:t._u([{key:"title",fn:function(){return[n("div",{staticClass:"card-icon mb-3"},[n("KIcon",{staticClass:"kong-icon--centered",attrs:{color:"var(--yellow-200)",icon:"warning","secondary-color":"var(--black-75)",size:"42"}})],1),t._v(" There is no data to display. ")]},proxy:!0}],null,!1,1612658095)}):t._e(),t.hasError?n("KEmptyState",{attrs:{"cta-is-hidden":""},scopedSlots:t._u([{key:"title",fn:function(){return[n("div",{staticClass:"card-icon mb-3"},[n("KIcon",{staticClass:"kong-icon--centered",attrs:{color:"var(--yellow-200)",icon:"warning","secondary-color":"var(--black-75)",size:"42"}})],1),t._v(" An error has occurred while trying to load this data. ")]},proxy:!0}],null,!1,822917942)}):t._e()],1):t._e()])},r=[],s=(n("caad"),n("a15b"),n("b0c0"),n("4fad"),n("ac1f"),n("2532"),n("1276"),n("f3f3")),i=n("2f62"),o=n("2ccf"),l=n.n(o),c=n("e80b"),u=n.n(c),p={name:"YamlView",components:{Prism:l.a},props:{title:{type:String,default:null},content:{type:Object,default:null},loaders:{type:Boolean,default:!0},isLoading:{type:Boolean,default:!1},hasError:{type:Boolean,default:!1},isEmpty:{type:Boolean,default:!1}},data:function(){return{tabs:[{hash:"#universal",title:"Universal"},{hash:"#kubernetes",title:"Kubernetes"}]}},computed:Object(s["a"])(Object(s["a"])({},Object(i["c"])({environment:"config/getEnvironment"})),{},{isReady:function(){return!this.isEmpty&&!this.hasError&&!this.isLoading},activeTab:{get:function(){var t=this.environment;return{hash:"#".concat(t),nohash:t}},set:function(t){return{hash:"#".concat(t),nohash:t}}},yamlTitle:function(){var t;return this.title?this.title:null!==(t=this.content)&&void 0!==t&&t.name?"Entity Overview for ".concat(this.content.name):"Entity Overview"},yamlContent:function(){var t=this,e=this.content,n=function(){var e={},n=Object.assign({},t.content),a=n.name,r=n.mesh,s=n.type,i=function(){var e=Object.assign({},t.content);return delete e.type,delete e.mesh,delete e.name,!!(e&&Object.entries(e).length>0)&&e};if(e.apiVersion="kuma.io/v1alpha1",e.kind=s,void 0!==r&&(e.mesh=n.mesh),null!==a&&void 0!==a&&a.includes(".")){var o=a.split("."),l=o.pop(),c=o.join(".");e.metadata={name:c,namespace:l}}else e.metadata={name:a};return i()&&(e.spec=i()),e},a={universal:u()(e),kubernetes:u()(n())};return a}})},d=p,y=(n("23d6"),n("536d"),n("2877")),f=Object(y["a"])(d,a,r,!1,null,"78c7b522",null);e["a"]=f.exports}}]);