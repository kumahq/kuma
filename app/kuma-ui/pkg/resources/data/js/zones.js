(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["zones"],{"1d3a":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));n("b0c0"),n("d3b7"),n("96cf");var a=n("c964"),r=n("d0ff"),s=n("c6ec");function i(t){return Object(r["a"])(t).sort((function(t,e){return t.name>e.name||t.name===e.name&&t.mesh>e.mesh?1:-1}))}var o=function(t){return 0!==t.total&&t.items&&t.items.length>0?i(t.items):[]};function l(t){var e=t.getSingleEntity,n=t.getAllEntities,a=t.getAllEntitiesFromMesh,r=t.mesh,s=t.query,i=t.size,o=t.offset,l={size:i,offset:o};return r&&"all"!==r?e&&s&&s.length&&"all"!==r?e(r,s,l):a?a(r,l):Promise.resolve():n(l)}function c(t){return u.apply(this,arguments)}function u(){return u=Object(a["a"])(regeneratorRuntime.mark((function t(e){var n,a,r,i,c,u,p,d,f;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.getSingleEntity,a=e.getAllEntities,r=e.getAllEntitiesFromMesh,i=e.mesh,c=e.query,u=e.size,p=void 0===u?s["e"]:u,d=e.offset,t.next=3,l({getSingleEntity:n,getAllEntities:a,getAllEntitiesFromMesh:r,mesh:i,query:c,size:p,offset:d});case 3:if(f=t.sent,f){t.next=6;break}return t.abrupt("return",{data:[],next:!1});case 6:return t.abrupt("return",{data:f.items?o(f):[f],next:Boolean(f.next)});case 7:case"end":return t.stop()}}),t)}))),u.apply(this,arguments)}},"28aa":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"loader-card"},[t.isReady?n("div",{staticClass:"loader-card-content"},[t.isLoading||t.isEmpty?t._e():n("KCard",{attrs:{"border-variant":"noBorder"},scopedSlots:t._u([{key:"body",fn:function(){return[t._t("default")]},proxy:!0}],null,!0)})],1):t._e(),t.isLoading?n("KEmptyState",{attrs:{"cta-is-hidden":""},scopedSlots:t._u([{key:"title",fn:function(){return[n("div",{staticClass:"card-icon mb-3"},[n("KIcon",{attrs:{icon:"spinner",color:"rgba(0, 0, 0, 0.1)",size:"42"}})],1),t._v(" Data Loading... ")]},proxy:!0}],null,!1,3263214496)}):t._e(),t.isEmpty&&!t.isLoading?n("KEmptyState",{attrs:{"cta-is-hidden":""},scopedSlots:t._u([{key:"title",fn:function(){return[n("div",{staticClass:"card-icon mb-3"},[n("KIcon",{staticClass:"kong-icon--centered",attrs:{color:"var(--yellow-200)",icon:"warning",size:"42"}})],1),t._v(" There is no data to display. ")]},proxy:!0}],null,!1,2335905663)}):t._e(),t.hasError?n("KEmptyState",{attrs:{"cta-is-hidden":""},scopedSlots:t._u([{key:"title",fn:function(){return[n("div",{staticClass:"card-icon mb-3"},[n("KIcon",{staticClass:"kong-icon--centered",attrs:{color:"var(--yellow-200)",icon:"warning",size:"42"}})],1),t._v(" An error has occurred while trying to load this data. ")]},proxy:!0}],null,!1,1239662822)}):t._e()],1)},r=[],s={name:"LoaderCard",props:{title:{type:String,default:null},isLoading:{type:Boolean,default:!1},hasError:{type:Boolean,default:!1},isEmpty:{type:Boolean,default:!1}},computed:{isReady:function(){return!this.isEmpty&&!this.hasError&&!this.isLoading}}},i=s,o=(n("b068"),n("2877")),l=Object(o["a"])(i,a,r,!1,null,null,null);e["a"]=l.exports},4566:function(t,e,n){},"63b5":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("KCard",{attrs:{"border-variant":"noBorder"},scopedSlots:t._u([{key:"body",fn:function(){return[n("ul",t._l(t.warnings,(function(e){var a=e.kind,r=e.payload,s=e.index;return n("li",{key:a+"/"+s,staticClass:"mb-1"},[n("KAlert",{attrs:{appearance:"warning"},scopedSlots:t._u([{key:"alertMessage",fn:function(){return[n(t.getWarningComponent(a),{tag:"component",attrs:{payload:r}})]},proxy:!0}],null,!0)})],1)})),0)]},proxy:!0}])})},r=[],s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[t._v(" "+t._s(t.payload)+" ")])},i=[],o={name:"WarningDefault",props:{payload:{type:[String,Object],required:!0}}},l=o,c=n("2877"),u=Object(c["a"])(l,s,i,!1,null,null,null),p=u.exports,d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[t._v(" Envoy ("),n("strong",[t._v(t._s(t.payload.envoy))]),t._v(") is unsupported by the current version of Kuma DP ("),n("strong",[t._v(t._s(t.payload.kumaDp))]),t._v(") [Requirements: "),n("strong",[t._v(" "+t._s(t.payload.requirements))]),t._v("] ")])},f=[],y={name:"WarningEnvoyIncompatible",props:{payload:{type:Object,required:!0}}},m=y,g=Object(c["a"])(m,d,f,!1,null,null,null),v=g.exports,b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[t._v(" There is mismatch between versions of Kuma DP ("),n("strong",[t._v(t._s(t.payload.kumaDpVersion))]),t._v(") and the Zone CP ("),n("strong",[t._v(t._s(t.payload.zoneVersion))]),t._v(") ")])},_=[],h={name:"WarningZoneAndKumaDPVersionsIncompatible",props:{payload:{type:Object,required:!0}}},E=h,k=Object(c["a"])(E,b,_,!1,null,null,null),w=k.exports,C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[t._v(" Unsupported version of Kuma DP ("),n("strong",[t._v(t._s(t.payload.kumaDpVersion))]),t._v(") ")])},x=[],O={name:"WarningUnsupportedKumaDPVersion",props:{payload:{type:Object,required:!0}}},I=O,S=Object(c["a"])(I,C,x,!1,null,null,null),j=S.exports,D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[t._v(" There is mismatch between versions of Zone CP ("),n("strong",[t._v(t._s(t.payload.zoneCpVersion))]),t._v(") and the Global CP ("),n("strong",[t._v(t._s(t.payload.globalCpVersion))]),t._v(") ")])},L=[],K={name:"WarningZoneAndGlobalCPSVersionsIncompatible",props:{payload:{type:Object,required:!0}}},z=K,T=Object(c["a"])(z,D,L,!1,null,null,null),V=T.exports,A=n("dbf3"),P={name:"Warnings",props:{warnings:{type:Array,required:!0}},methods:{getWarningComponent:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";switch(t){case A["b"]:return v;case A["c"]:return j;case A["f"]:return w;case A["e"]:return V;default:return p}}}},W=P,Z=Object(c["a"])(W,a,r,!1,null,null,null);e["a"]=Z.exports},b068:function(t,e,n){"use strict";n("4566")},b912:function(t,e,n){"use strict";n("b0c0");e["a"]={methods:{sortEntities:function(t){var e=t.sort((function(t,e){return t.name>e.name||t.name===e.name&&t.mesh>e.mesh?1:-1}));return e}}}},c153:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"zones"},[!1===t.multicluster?n("KEmptyState",{staticClass:"global-api-status",scopedSlots:t._u([{key:"title",fn:function(){return[n("KIcon",{staticClass:"kong-icon--centered",attrs:{icon:"dangerCircle",size:"64"}}),t._v(" "+t._s(t.productName)+" is running in Standalone mode. ")]},proxy:!0},{key:"message",fn:function(){return[n("p",[t._v(" To access this page, you must be running in "),n("strong",[t._v("Multi-Zone")]),t._v(" mode. ")])]},proxy:!0},{key:"cta",fn:function(){return[n("KButton",{attrs:{to:"https://kuma.io/docs/0.6.0/documentation/deployments/",target:"_blank",appearance:"primary"}},[t._v(" Learn More ")])]},proxy:!0}],null,!1,1554304526)}):n("FrameSkeleton",[n("DataOverview",{attrs:{"page-size":t.pageSize,"has-error":t.hasError,"is-loading":t.isLoading,"empty-state":t.empty_state,"display-data-table":!0,"table-data":t.tableData,"table-data-is-empty":t.tableDataIsEmpty,"show-warnings":t.tableData.data.some((function(t){return t.withWarnings})),"table-data-function-text":"View","table-data-row":"name",next:t.next},on:{tableAction:t.tableAction,loadData:function(e){return t.loadData(e)}}}),!1===t.isEmpty?n("Tabs",{attrs:{"has-error":t.hasError,"is-loading":t.isLoading,tabs:t.filterTabs(),"initial-tab-override":"overview"},scopedSlots:t._u([{key:"tabHeader",fn:function(){return[n("div",[n("h3",[t._v(t._s(t.tabGroupTitle))])])]},proxy:!0},{key:"overview",fn:function(){return[n("LabelList",{attrs:{"has-error":t.entityHasError,"is-loading":t.entityIsLoading,"is-empty":t.entityIsEmpty}},[n("div",[n("ul",t._l(t.entity,(function(e,a){return n("li",{key:a},[e?n("h4",[t._v(" "+t._s(a)+" ")]):t._e(),"status"===a?n("p",[n("KBadge",{attrs:{appearance:"Offline"===e?"danger":"success"}},[t._v(" "+t._s(e)+" ")])],1):n("p",[t._v(" "+t._s(e)+" ")])])})),0)])])]},proxy:!0},{key:"insights",fn:function(){return[n("LoaderCard",{attrs:{"has-error":t.entityHasError,"is-loading":t.entityIsLoading,"is-empty":t.entityIsEmpty}},[t.rawEntity?n("div",t._l(t.rawEntity.zoneInsight.subscriptions,(function(e,a){return n("div",{key:a,staticClass:"overview-stack"},[n("h4",{staticClass:"overview-title"},[t._v(" ID: "),n("span",{staticClass:"mono"},[t._v(t._s(e.id))])]),e.globalInstanceId||e.connectTime||e.disconnectTime?n("div",[n("h5",{staticClass:"overview-tertiary-title"},[t._v(" General Information: ")]),n("ul",[e.globalInstanceId?n("li",[n("strong",[t._v("Global Instance ID:")]),t._v(" "),n("span",{staticClass:"mono"},[t._v(t._s(e.globalInstanceId))])]):t._e(),e.connectTime?n("li",[n("strong",[t._v("Last Connected:")]),t._v(" "+t._s(t._f("readableDate")(e.connectTime))+" ")]):t._e(),e.disconnectTime?n("li",[n("strong",[t._v("Last Disconnected:")]),t._v(" "+t._s(t._f("readableDate")(e.disconnectTime))+" ")]):t._e()])]):t._e(),e.status?n("div",[e.status.stat?n("ul",{staticClass:"overview-stat-grid"},t._l(e.status.stat,(function(e,a){return n("li",{key:a},[n("h6",{staticClass:"overview-tertiary-title"},[t._v(" "+t._s(t._f("humanReadable")(a))+": ")]),n("ul",t._l(e,(function(e,a){return n("li",{key:a},[n("strong",[t._v(t._s(t._f("humanReadable")(a))+":")]),t._v(" "),n("span",{staticClass:"mono"},[t._v(t._s(t._f("formatError")(t._f("formatValue")(e))))])])})),0)])})),0):t._e()]):n("KAlert",{staticClass:"mt-4",attrs:{appearance:"info"},scopedSlots:t._u([{key:"alertIcon",fn:function(){return[n("KIcon",{attrs:{icon:"portal"}})]},proxy:!0},{key:"alertMessage",fn:function(){return[t._v(" There are no Policy statistics for "),n("strong",[t._v(t._s(e.id))])]},proxy:!0}],null,!0)})],1)})),0):t._e()])]},proxy:!0},{key:"config",fn:function(){return[t.codeOutput?n("KCard",{attrs:{"border-variant":"noBorder"},scopedSlots:t._u([{key:"body",fn:function(){return[n("Prism",{attrs:{language:"json",code:t.codeOutput}})]},proxy:!0},{key:"actions",fn:function(){return[t.codeOutput?n("KClipboardProvider",{scopedSlots:t._u([{key:"default",fn:function(e){var a=e.copyToClipboard;return[n("KPop",{attrs:{placement:"bottom"},scopedSlots:t._u([{key:"content",fn:function(){return[n("div",[n("p",[t._v("Entity copied to clipboard!")])])]},proxy:!0}],null,!0)},[n("KButton",{attrs:{appearance:"primary"},on:{click:function(){a(t.codeOutput)}}},[t._v(" Copy config to clipboard ")])],1)]}}],null,!1,2834674346)}):t._e()]},proxy:!0}],null,!1,245008237)}):t._e()]},proxy:!0},{key:"warnings",fn:function(){return[n("Warnings",{attrs:{warnings:t.warnings}})]},proxy:!0}],null,!1,2936860114)}):t._e()],1)],1)},r=[],s=(n("4de4"),n("4160"),n("d81d"),n("b0c0"),n("d3b7"),n("25f0"),n("159b"),n("96cf"),n("c964")),i=n("f3f3"),o=n("2f62"),l=n("2ccf"),c=n.n(l),u=n("0f82"),p=n("bc1e"),d=n("1d3a"),f=n("dbf3"),y=n("b912"),m=n("1d10"),g=n("2778"),v=n("251b"),b=n("0ada"),_=n("28aa"),h=n("63b5"),E=n("c6ec"),k={name:"Zones",components:{FrameSkeleton:m["a"],DataOverview:g["a"],Tabs:v["a"],LabelList:b["a"],LoaderCard:_["a"],Warnings:h["a"],Prism:c.a},filters:{formatValue:function(t){return t?parseInt(t,10).toLocaleString("en").toString():0},readableDate:function(t){return Object(p["f"])(t)},humanReadable:function(t){return Object(p["b"])(t)},formatError:function(t){return"--"===t?"error calculating":t}},mixins:[y["a"]],metaInfo:{title:"Zones"},data:function(){return{productName:E["g"],isLoading:!0,isEmpty:!1,hasError:!1,entityIsLoading:!0,entityIsEmpty:!1,entityHasError:!1,tableDataIsEmpty:!1,empty_state:{title:"No Data",message:"There are no Zones present."},tableData:{headers:[{key:"actions",hideLabel:!0},{label:"Status",key:"status"},{label:"Name",key:"name"},{label:"Zone CP Version",key:"zoneCpVersion"},{label:"Backend",key:"backend"},{key:"warnings",hideLabel:!0}],data:[]},tabs:[{hash:"#overview",title:"Overview"},{hash:"#insights",title:"Zone Insights"},{hash:"#config",title:"Config"},{hash:"#warnings",title:"Warnings"}],entity:[],rawEntity:null,pageSize:E["e"],next:null,tabGroupTitle:null,itemsPerCol:3,warnings:[],codeOutput:null}},computed:Object(i["a"])(Object(i["a"])({},Object(o["d"])({mesh:"selectedMesh"})),Object(o["c"])({multicluster:"config/getMulticlusterStatus",globalCpVersion:"config/getVersion"})),watch:{$route:function(){this.init()}},beforeMount:function(){this.init()},methods:{init:function(){this.multicluster&&this.loadData()},filterTabs:function(){return this.warnings.length?this.tabs:this.tabs.filter((function(t){return"#warnings"!==t.hash}))},tableAction:function(t){var e=t;this.getEntity(e)},parseData:function(t){var e=t.zoneInsight,n=void 0===e?{}:e,a="-",r="";return n.subscriptions&&n.subscriptions.length&&n.subscriptions.forEach((function(t,e){t.version&&t.version.kumaCp&&(a=t.version.kumaCp.version,t.config&&(r=JSON.parse(t.config).store.type))})),Object(i["a"])(Object(i["a"])({},t),{},{status:Object(f["m"])(n).status,zoneCpVersion:a,backend:r,withWarnings:a!==this.globalCpVersion})},loadData:function(){var t=arguments,e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var a,r,s,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=t.length>0&&void 0!==t[0]?t[0]:"0",e.isLoading=!0,e.isEmpty=!1,n.prev=3,n.next=6,Object(d["a"])({getAllEntities:u["a"].getAllZoneOverviews.bind(u["a"]),size:e.pageSize,offset:a});case 6:r=n.sent,s=r.data,i=r.next,e.next=i,s.length?(e.tableData.data=s.map(e.parseData),e.tableDataIsEmpty=!1,e.isEmpty=!1,e.getEntity({name:s[0].name})):(e.tableData.data=[],e.tableDataIsEmpty=!0,e.isEmpty=!0,e.entityIsEmpty=!0),n.next=18;break;case 13:n.prev=13,n.t0=n["catch"](3),e.hasError=!0,e.isEmpty=!0,console.error(n.t0);case 18:return n.prev=18,e.isLoading=!1,n.finish(18);case 21:case"end":return n.stop()}}),n,null,[[3,13,18,21]])})))()},getEntity:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var a,r,s,o,l,c,d,y,m,g,v,b;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.entityIsLoading=!0,e.entityIsEmpty=!0,a=["type","name","mesh"],r=setTimeout((function(){e.entityIsEmpty=!0,e.entityIsLoading=!1}),"500"),!t){n.next=27;break}return e.entityIsEmpty=!1,e.warnings=[],n.prev=7,n.next=10,u["a"].getZoneOverview(t.name);case 10:s=n.sent,o=s.name,l=s.zoneInsight,c=l.subscriptions,d=void 0===c?[]:c,e.tabGroupTitle="Zone: ".concat(o),e.entity=Object(i["a"])(Object(i["a"])({},Object(p["d"])(s,a)),{},{"Authentication Type":Object(p["e"])(s)}),e.rawEntity=Object(p["j"])(s),d.length&&(y=d[d.length-1].version,m=void 0===y?{}:y,g=m.kumaCp,v=void 0===g?{}:g,b=v.version||"-",b!==e.globalCpVersion&&e.warnings.push({kind:f["e"],payload:{zoneCpVersion:b,globalCpVersion:e.globalCpVersion}}),d[d.length-1].config&&(e.codeOutput=JSON.stringify(JSON.parse(d[d.length-1].config),null,2))),n.next=24;break;case 19:n.prev=19,n.t0=n["catch"](7),e.entity=null,e.entityHasError=!0,e.entityIsEmpty=!0;case 24:return n.prev=24,clearTimeout(r),n.finish(24);case 27:e.entityIsLoading=!1;case 28:case"end":return n.stop()}}),n,null,[[7,19,24,27]])})))()}}},w=k,C=n("2877"),x=Object(C["a"])(w,a,r,!1,null,null,null);e["default"]=x.exports}}]);