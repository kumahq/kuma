(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["zones"],{"0ada8":function(e,t,n){"use strict";n("6b57")},"0f12":function(e,t,n){},"1d3a":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));n("b0c0"),n("d3b7"),n("96cf");var a=n("c964"),r=n("d0ff"),i=n("c6ec");function s(e){return Object(r["a"])(e).sort((function(e,t){return e.name>t.name||e.name===t.name&&e.mesh>t.mesh?1:-1}))}var o=function(e){return 0!==e.total&&e.items&&e.items.length>0?s(e.items):[]};function c(e){var t=e.getSingleEntity,n=e.getAllEntities,a=e.getAllEntitiesFromMesh,r=e.mesh,i=e.query,s=e.size,o=e.offset,c={size:s,offset:o};return r&&"all"!==r?t&&i&&i.length&&"all"!==r?t(r,i,c):a?a(r,c):Promise.resolve():n(c)}function l(e){return u.apply(this,arguments)}function u(){return u=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,a,r,s,l,u,p,d,f;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.getSingleEntity,a=t.getAllEntities,r=t.getAllEntitiesFromMesh,s=t.mesh,l=t.query,u=t.size,p=void 0===u?i["f"]:u,d=t.offset,e.next=3,c({getSingleEntity:n,getAllEntities:a,getAllEntitiesFromMesh:r,mesh:s,query:l,size:p,offset:d});case 3:if(f=e.sent,f){e.next=6;break}return e.abrupt("return",{data:[],next:!1});case 6:return e.abrupt("return",{data:f.items?o(f):[f],next:Boolean(f.next)});case 7:case"end":return e.stop()}}),e)}))),u.apply(this,arguments)}},"1f94":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.details.globalInstanceId||e.details.connectTime||e.details.disconnectTime?n("div",[n("h5",{staticClass:"overview-tertiary-title"},[e._v(" General Information: ")]),n("ul",[e.details.globalInstanceId?n("li",[n("strong",[e._v("Global Instance ID:")]),e._v(" "),n("span",{staticClass:"mono"},[e._v(e._s(e.details.globalInstanceId))])]):e._e(),e.details.connectTime?n("li",[n("strong",[e._v("Last Connected:")]),e._v(" "+e._s(e._f("readableDate")(e.details.connectTime))+" ")]):e._e(),e.details.disconnectTime?n("li",[n("strong",[e._v("Last Disconnected:")]),e._v(" "+e._s(e._f("readableDate")(e.details.disconnectTime))+" ")]):e._e()])]):e._e(),e.details.status?n("div",[e.details.status.stat?n("ul",{staticClass:"overview-stat-grid"},e._l(e.details.status.stat,(function(t,a){return n("li",{key:a},[n("h6",{staticClass:"overview-tertiary-title"},[e._v(" "+e._s(e._f("humanReadable")(a))+": ")]),n("ul",e._l(t,(function(t,a){return n("li",{key:a},[n("strong",[e._v(e._s(e._f("humanReadable")(a))+":")]),e._v(" "),n("span",{staticClass:"mono"},[e._v(e._s(e._f("formatError")(e._f("formatValue")(t))))])])})),0)])})),0):e._e()]):n("KAlert",{staticClass:"mt-4",attrs:{appearance:"info"},scopedSlots:e._u([{key:"alertIcon",fn:function(){return[n("KIcon",{attrs:{icon:"portal"}})]},proxy:!0},{key:"alertMessage",fn:function(){return[e._v(" There are no Policy statistics for "),n("strong",[e._v(e._s(e.details.id))])]},proxy:!0}])})],1)},r=[],i=(n("d3b7"),n("25f0"),n("bc1e")),s={name:"ZoneInsightSubscriptionDetails",filters:{formatValue:function(e){return e?parseInt(e,10).toLocaleString("en").toString():0},readableDate:function(e){return Object(i["f"])(e)},humanReadable:function(e){return Object(i["b"])(e)},formatError:function(e){return"--"===e?"error calculating":e}},props:{details:{type:Object,required:!0}}},o=s,c=(n("e6cb"),n("2877")),l=Object(c["a"])(o,a,r,!1,null,"29e48e09",null);t["a"]=l.exports},"2ee4":function(e,t,n){"use strict";n("0f12")},"3ddf":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{class:e.accordionItemClasses},[n("div",{staticClass:"accordion-item-header",on:{click:e.open}},[e._t("accordion-header")],2),n("transition",{attrs:{name:"accordion"},on:{enter:e.start,"before-leave":e.start}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}]},[e._t("accordion-content")],2)])],1)},r=[],i=(n("caad"),n("c975"),n("a434"),n("2532"),{name:"AccordionItem",inject:["parentAccordion"],data:function(){return{index:null}},computed:{visible:function(){return this.parentAccordion.multipleOpen?this.parentAccordion.active.includes(this.index):this.index===this.parentAccordion.active},accordionItemClasses:function(){return["relative border-b py-2 px-4",{active:this.visible}]}},created:function(){this.index=this.parentAccordion.count++},methods:{hideItem:function(){this.parentAccordion.multipleOpen?this.parentAccordion.active.splice(this.parentAccordion.active.indexOf(this.index),1):this.parentAccordion.active=null},showItem:function(){this.parentAccordion.multipleOpen?this.parentAccordion.active.push(this.index):this.parentAccordion.active=this.index},open:function(){this.visible?this.hideItem():this.showItem()},start:function(e){e.style.height="".concat(e.scrollHeight,"px")}}}),s=i,o=(n("0ada8"),n("2877")),c=Object(o["a"])(s,a,r,!1,null,"1f623999",null);t["a"]=c.exports},"3f31":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("KEmptyState",{scopedSlots:e._u([{key:"title",fn:function(){return[n("KIcon",{staticClass:"kong-icon--centered",attrs:{icon:"dangerCircle",size:"42"}}),e._v(" "+e._s(e.productName)+" is running in Standalone mode. ")]},proxy:!0},{key:"message",fn:function(){return[n("p",[e._v(" To access this page, you must be running in "),n("strong",[e._v("Multi-Zone")]),e._v(" mode. ")])]},proxy:!0},{key:"cta",fn:function(){return[n("KButton",{attrs:{to:"https://kuma.io/docs/"+e.version+"/documentation/deployments/",target:"_blank",appearance:"primary"}},[e._v(" Learn More ")])]},proxy:!0}])})},r=[],i=n("f3f3"),s=n("2f62"),o=n("c6ec"),c={name:"MultizoneInfo",data:function(){return{productName:o["h"]}},computed:Object(i["a"])({},Object(s["c"])({version:"config/getVersion"}))},l=c,u=n("2877"),p=Object(u["a"])(l,a,r,!1,null,null,null);t["a"]=p.exports},"520d":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",{staticClass:"accordion"},[e._t("default")],2)},r=[],i=(n("a9e3"),{name:"Accordion",props:{initiallyOpen:{type:[Number,Array],default:null},multipleOpen:{type:Boolean,default:!1}},data:function(){var e;return e=null!==this.initiallyOpen?this.initiallyOpen:this.multipleOpen?[]:null,{parentAccordion:{count:0,active:e,multipleOpen:this.multipleOpen}}},provide:function(){return{parentAccordion:this.parentAccordion}}}),s=i,o=(n("2ee4"),n("2877")),c=Object(o["a"])(s,a,r,!1,null,"790cd898",null);t["a"]=c.exports},"63b5":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("KCard",{attrs:{"border-variant":"noBorder"},scopedSlots:e._u([{key:"body",fn:function(){return[n("ul",e._l(e.warnings,(function(t){var a=t.kind,r=t.payload,i=t.index;return n("li",{key:a+"/"+i,staticClass:"mb-1"},[n("KAlert",{attrs:{appearance:"warning"},scopedSlots:e._u([{key:"alertMessage",fn:function(){return[n(e.getWarningComponent(a),{tag:"component",attrs:{payload:r}})]},proxy:!0}],null,!0)})],1)})),0)]},proxy:!0}])})},r=[],i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[e._v(" "+e._s(e.payload)+" ")])},s=[],o={name:"WarningDefault",props:{payload:{type:[String,Object],required:!0}}},c=o,l=n("2877"),u=Object(l["a"])(c,i,s,!1,null,null,null),p=u.exports,d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[e._v(" Envoy ("),n("strong",[e._v(e._s(e.payload.envoy))]),e._v(") is unsupported by the current version of Kuma DP ("),n("strong",[e._v(e._s(e.payload.kumaDp))]),e._v(") [Requirements: "),n("strong",[e._v(" "+e._s(e.payload.requirements))]),e._v("] ")])},f=[],m={name:"WarningEnvoyIncompatible",props:{payload:{type:Object,required:!0}}},v=m,b=Object(l["a"])(v,d,f,!1,null,null,null),h=b.exports,g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[e._v(" There is mismatch between versions of Kuma DP ("),n("strong",[e._v(e._s(e.payload.kumaDpVersion))]),e._v(") and the Zone CP ("),n("strong",[e._v(e._s(e.payload.zoneVersion))]),e._v(") ")])},y=[],_={name:"WarningZoneAndKumaDPVersionsIncompatible",props:{payload:{type:Object,required:!0}}},O=_,x=Object(l["a"])(O,g,y,!1,null,null,null),w=x.exports,E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[e._v(" Unsupported version of Kuma DP ("),n("strong",[e._v(e._s(e.payload.kumaDpVersion))]),e._v(") ")])},k=[],I={name:"WarningUnsupportedKumaDPVersion",props:{payload:{type:Object,required:!0}}},C=I,j=Object(l["a"])(C,E,k,!1,null,null,null),A=j.exports,S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[e._v(" There is mismatch between versions of Zone CP ("),n("strong",[e._v(e._s(e.payload.zoneCpVersion))]),e._v(") and the Global CP ("),n("strong",[e._v(e._s(e.payload.globalCpVersion))]),e._v(") ")])},D=[],z={name:"WarningZoneAndGlobalCPSVersionsIncompatible",props:{payload:{type:Object,required:!0}}},T=z,V=Object(l["a"])(T,S,D,!1,null,null,null),L=V.exports,Z=n("dbf3"),K={name:"Warnings",props:{warnings:{type:Array,required:!0}},methods:{getWarningComponent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";switch(e){case Z["b"]:return h;case Z["c"]:return A;case Z["f"]:return w;case Z["e"]:return L;default:return p}}}},R=K,M=Object(l["a"])(R,a,r,!1,null,null,null);t["a"]=M.exports},"6b57":function(e,t,n){},"6f8c":function(e,t,n){},"9c68":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("h4",{staticClass:"text-lg font-medium"},[n("span",{staticClass:"color-green-400"},[e._v(" Connect time: "+e._s(e._f("rawReadableDateFilter")(e.details.connectTime))+" ")]),e.details.disconnectTime?n("span",{staticClass:"ml-4 color-red-400"},[e._v(" Disconnect time: "+e._s(e._f("rawReadableDateFilter")(e.details.disconnectTime))+" ")]):e._e()])},r=[],i=n("bc1e"),s={name:"ZoneInsightSubscriptionHeader",filters:{rawReadableDateFilter:function(e){return Object(i["i"])(e)}},props:{details:{type:Object,required:!0}}},o=s,c=n("2877"),l=Object(c["a"])(o,a,r,!1,null,null,null);t["a"]=l.exports},a434:function(e,t,n){"use strict";var a=n("23e7"),r=n("23cb"),i=n("a691"),s=n("50c4"),o=n("7b0b"),c=n("65f0"),l=n("8418"),u=n("1dde"),p=n("ae40"),d=u("splice"),f=p("splice",{ACCESSORS:!0,0:0,1:2}),m=Math.max,v=Math.min,b=9007199254740991,h="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!d||!f},{splice:function(e,t){var n,a,u,p,d,f,g=o(this),y=s(g.length),_=r(e,y),O=arguments.length;if(0===O?n=a=0:1===O?(n=0,a=y-_):(n=O-2,a=v(m(i(t),0),y-_)),y+n-a>b)throw TypeError(h);for(u=c(g,a),p=0;p<a;p++)d=_+p,d in g&&l(u,p,g[d]);if(u.length=a,n<a){for(p=_;p<y-a;p++)d=p+a,f=p+n,d in g?g[f]=g[d]:delete g[f];for(p=y;p>y-a+n;p--)delete g[p-1]}else if(n>a)for(p=y-a;p>_;p--)d=p+a-1,f=p+n-1,d in g?g[f]=g[d]:delete g[f];for(p=0;p<n;p++)g[p+_]=arguments[p+2];return g.length=y-a+n,u}})},c153:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"zones"},[!1===e.multicluster?n("MultizoneInfo"):n("FrameSkeleton",[n("DataOverview",{attrs:{"page-size":e.pageSize,"has-error":e.hasError,"is-loading":e.isLoading,"empty-state":e.empty_state,"table-data":e.tableData,"table-data-is-empty":e.tableDataIsEmpty,"show-warnings":e.tableData.data.some((function(e){return e.withWarnings})),"table-data-function-text":"View","table-data-row":"name",next:e.next},on:{tableAction:e.tableAction,loadData:function(t){return e.loadData(t)}}}),!1===e.isEmpty?n("Tabs",{attrs:{"has-error":e.hasError,"is-loading":e.isLoading,tabs:e.filterTabs(),"initial-tab-override":"overview"},scopedSlots:e._u([{key:"tabHeader",fn:function(){return[e.entity?n("h3",[e._v(" Zone: "+e._s(e.entity.name)+" ")]):e._e()]},proxy:!0},{key:"overview",fn:function(){return[n("LabelList",{attrs:{"has-error":e.entityHasError,"is-loading":e.entityIsLoading,"is-empty":e.entityIsEmpty}},[n("div",[n("ul",e._l(e.entity,(function(t,a){return n("li",{key:a},[t?n("h4",[e._v(" "+e._s(a)+" ")]):e._e(),"status"===a?n("p",[n("KBadge",{attrs:{appearance:"Offline"===t?"danger":"success"}},[e._v(" "+e._s(t)+" ")])],1):n("p",[e._v(" "+e._s(t)+" ")])])})),0)])])]},proxy:!0},{key:"insights",fn:function(){return[n("KCard",{attrs:{"border-variant":"noBorder"},scopedSlots:e._u([{key:"body",fn:function(){return[n("Accordion",{attrs:{"initially-open":0}},e._l(e.zoneInsightSubscriptionsReversed,(function(t,a){return n("AccordionItem",{key:a,scopedSlots:e._u([{key:"accordion-header",fn:function(){return[n("ZoneInsightSubscriptionHeader",{attrs:{details:t}})]},proxy:!0},{key:"accordion-content",fn:function(){return[n("ZoneInsightSubscriptionDetails",{attrs:{details:t}})]},proxy:!0}],null,!0)})})),1)]},proxy:!0}],null,!1,2762090715)})]},proxy:!0},{key:"config",fn:function(){return[e.codeOutput?n("KCard",{attrs:{"border-variant":"noBorder"},scopedSlots:e._u([{key:"body",fn:function(){return[n("Prism",{attrs:{language:"json",code:e.codeOutput}})]},proxy:!0},{key:"actions",fn:function(){return[e.codeOutput?n("KClipboardProvider",{scopedSlots:e._u([{key:"default",fn:function(t){var a=t.copyToClipboard;return[n("KPop",{attrs:{placement:"bottom"},scopedSlots:e._u([{key:"content",fn:function(){return[n("div",[n("p",[e._v("Entity copied to clipboard!")])])]},proxy:!0}],null,!0)},[n("KButton",{attrs:{appearance:"primary"},on:{click:function(){a(e.codeOutput)}}},[e._v(" Copy config to clipboard ")])],1)]}}],null,!1,2834674346)}):e._e()]},proxy:!0}],null,!1,245008237)}):e._e()]},proxy:!0},{key:"warnings",fn:function(){return[n("Warnings",{attrs:{warnings:e.warnings}})]},proxy:!0}],null,!1,28422089)}):e._e()],1)],1)},r=[],i=(n("4de4"),n("4160"),n("a630"),n("d81d"),n("b0c0"),n("3ca3"),n("159b"),n("96cf"),n("c964")),s=n("f3f3"),o=n("2f62"),c=n("9b02"),l=n.n(c),u=n("2ccf"),p=n.n(u),d=n("0f82"),f=n("bc1e"),m=n("1d3a"),v=n("dbf3"),b=n("1d10"),h=n("2778"),g=n("251b"),y=n("520d"),_=n("3ddf"),O=n("0ada"),x=n("63b5"),w=n("c6ec"),E=n("1f94"),k=n("9c68"),I=n("3f31"),C={name:"Zones",components:{Accordion:y["a"],AccordionItem:_["a"],FrameSkeleton:b["a"],DataOverview:h["a"],Tabs:g["a"],LabelList:O["a"],Warnings:x["a"],Prism:p.a,ZoneInsightSubscriptionDetails:E["a"],ZoneInsightSubscriptionHeader:k["a"],MultizoneInfo:I["a"]},metaInfo:{title:"Zones"},data:function(){return{isLoading:!0,isEmpty:!1,hasError:!1,entityIsLoading:!0,entityIsEmpty:!1,entityHasError:!1,tableDataIsEmpty:!1,empty_state:{title:"No Data",message:"There are no Zones present."},tableData:{headers:[{key:"actions",hideLabel:!0},{label:"Status",key:"status"},{label:"Name",key:"name"},{label:"Zone CP Version",key:"zoneCpVersion"},{label:"Backend",key:"backend"},{key:"warnings",hideLabel:!0}],data:[]},tabs:[{hash:"#overview",title:"Overview"},{hash:"#insights",title:"Zone Insights"},{hash:"#config",title:"Config"},{hash:"#warnings",title:"Warnings"}],entity:{},pageSize:w["f"],next:null,warnings:[],zoneInsightSubscriptionsReversed:[],codeOutput:null}},computed:Object(s["a"])(Object(s["a"])({},Object(o["d"])({mesh:"selectedMesh"})),Object(o["c"])({multicluster:"config/getMulticlusterStatus",globalCpVersion:"config/getVersion"})),watch:{$route:function(){this.init()}},beforeMount:function(){this.init()},methods:{init:function(){this.multicluster&&this.loadData()},filterTabs:function(){return this.warnings.length?this.tabs:this.tabs.filter((function(e){return"#warnings"!==e.hash}))},tableAction:function(e){var t=e;this.getEntity(t)},parseData:function(e){var t=e.zoneInsight,n=void 0===t?{}:t,a="-",r="";return n.subscriptions&&n.subscriptions.length&&n.subscriptions.forEach((function(e,t){e.version&&e.version.kumaCp&&(a=e.version.kumaCp.version,e.config&&(r=JSON.parse(e.config).store.type))})),Object(s["a"])(Object(s["a"])({},e),{},{status:Object(v["m"])(n).status,zoneCpVersion:a,backend:r,withWarnings:a!==this.globalCpVersion})},loadData:function(){var e=arguments,t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a,r,i,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.length>0&&void 0!==e[0]?e[0]:"0",t.isLoading=!0,t.isEmpty=!1,n.prev=3,n.next=6,Object(m["a"])({getAllEntities:d["a"].getAllZoneOverviews.bind(d["a"]),size:t.pageSize,offset:a});case 6:r=n.sent,i=r.data,s=r.next,t.next=s,i.length?(t.tableData.data=i.map(t.parseData),t.tableDataIsEmpty=!1,t.isEmpty=!1,t.getEntity({name:i[0].name})):(t.tableData.data=[],t.tableDataIsEmpty=!0,t.isEmpty=!0,t.entityIsEmpty=!0),n.next=18;break;case 13:n.prev=13,n.t0=n["catch"](3),t.hasError=!0,t.isEmpty=!0,console.error(n.t0);case 18:return n.prev=18,t.isLoading=!1,n.finish(18);case 21:case"end":return n.stop()}}),n,null,[[3,13,18,21]])})))()},getEntity:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a,r,i,o,c,u,p,m,b;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.entityIsLoading=!0,t.entityIsEmpty=!0,a=["type","name"],r=setTimeout((function(){t.entityIsEmpty=!0,t.entityIsLoading=!1}),"500"),!e){n.next=26;break}return t.entityIsEmpty=!1,t.warnings=[],n.prev=7,n.next=10,d["a"].getZoneOverview(e.name);case 10:i=n.sent,o=l()(i,"zoneInsight.subscriptions",[]),t.entity=Object(s["a"])(Object(s["a"])({},Object(f["d"])(i,a)),{},{"Authentication Type":Object(f["e"])(i)}),t.zoneInsightSubscriptionsReversed=Array.from(o).reverse(),o.length&&(c=o[o.length-1].version,u=void 0===c?{}:c,p=u.kumaCp,m=void 0===p?{}:p,b=m.version||"-",b!==t.globalCpVersion&&t.warnings.push({kind:v["e"],payload:{zoneCpVersion:b,globalCpVersion:t.globalCpVersion}}),o[o.length-1].config&&(t.codeOutput=JSON.stringify(JSON.parse(o[o.length-1].config),null,2))),n.next=23;break;case 17:n.prev=17,n.t0=n["catch"](7),console.error(n.t0),t.entity=null,t.entityHasError=!0,t.entityIsEmpty=!0;case 23:return n.prev=23,clearTimeout(r),n.finish(23);case 26:t.entityIsLoading=!1;case 27:case"end":return n.stop()}}),n,null,[[7,17,23,26]])})))()}}},j=C,A=n("2877"),S=Object(A["a"])(j,a,r,!1,null,null,null);t["default"]=S.exports},e6cb:function(e,t,n){"use strict";n("6f8c")}}]);