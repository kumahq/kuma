"use strict";(self["webpackChunkkuma_gui"]=self["webpackChunkkuma_gui"]||[]).push([[897],{88523:function(e,t,a){var s=a(73570),n=a.n(s);t["Z"]={methods:{formatForCLI(e,t='" | kumactl apply -f -'){const a='echo "',s=n()(e);return`${a}${s}${t}`}}}},17186:function(e,t,a){a.r(t),a.d(t,{default:function(){return h}});var s=a(70821);function n(e,t,a,n,i,r){const l=(0,s.up)("ServicesView");return(0,s.wg)(),(0,s.j4)(l,{"route-name":"external-services",name:"External Services","tab-headers":i.tabHeaders},null,8,["tab-headers"])}var i=a(10890),r={name:"ExternalServices",components:{ServicesView:i.Z},data(){return{tabHeaders:[{key:"actions",hideLabel:!0},{label:"Name",key:"name"},{label:"Mesh",key:"mesh"},{label:"Address",key:"address"},{label:"TLS",key:"tlsEnabled"}]}}},l=a(83744);const o=(0,l.Z)(r,[["render",n]]);var h=o},42531:function(e,t,a){a.r(t),a.d(t,{default:function(){return u}});var s=a(70821);const n={class:"gateway-dataplanes"};function i(e,t,a,i,r,l){const o=(0,s.up)("DataplanesView");return(0,s.wg)(),(0,s.iD)("div",n,[(0,s.Wm)(o,(0,s.vs)((0,s.F4)(e.$data)),null,16)])}var r=a(96469),l={name:"GatewayDataplanes",components:{DataplanesView:r.Z},data(){return{dataplaneApiParams:{gateway:!0},emptyStateMsg:"There are no Gateway data plane proxies present."}}},o=a(83744);const h=(0,o.Z)(l,[["render",i]]);var u=h},64491:function(e,t,a){a.r(t),a.d(t,{default:function(){return h}});var s=a(70821);function n(e,t,a,n,i,r){const l=(0,s.up)("ServicesView");return(0,s.wg)(),(0,s.j4)(l,{"route-name":"internal-services",name:"Internal Services","tab-headers":i.tabHeaders},null,8,["tab-headers"])}var i=a(10890),r={name:"InternalServices",components:{ServicesView:i.Z},data(){return{tabHeaders:[{key:"actions",hideLabel:!0},{label:"Status",key:"status"},{label:"Name",key:"name"},{label:"Mesh",key:"mesh"},{label:"Data plane proxies: Online / Total",key:"totalOnline"}]}}},l=a(83744);const o=(0,l.Z)(r,[["render",n]]);var h=o},10890:function(e,t,a){a.d(t,{Z:function(){return S}});var s=a(70821);const n=(0,s.Uk)(" > "),i=(0,s._)("span",{class:"custom-control-icon"}," â† ",-1),r=(0,s.Uk)(" View All ");function l(e,t,a,l,o,h){const u=(0,s.up)("KButton"),m=(0,s.up)("DataOverview"),d=(0,s.up)("EntityURLControl"),c=(0,s.up)("LabelList"),y=(0,s.up)("YamlView"),p=(0,s.up)("TabsWidget"),g=(0,s.up)("FrameSkeleton");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(g,null,{default:(0,s.w5)((()=>[(0,s.Wm)(m,{"page-size":o.pageSize,"has-error":o.hasError,"is-loading":o.isLoading,"empty-state":o.empty_state,"table-data":o.tableData,"table-data-is-empty":o.tableDataIsEmpty,next:o.next,onTableAction:h.tableAction,onLoadData:t[0]||(t[0]=e=>h.loadData(e))},{additionalControls:(0,s.w5)((()=>[e.$route.query.ns?((0,s.wg)(),(0,s.j4)(u,{key:0,class:"back-button",appearance:"primary",size:"small",to:{name:a.routeName}},{default:(0,s.w5)((()=>[i,r])),_:1},8,["to"])):(0,s.kq)("",!0)])),default:(0,s.w5)((()=>[n])),_:1},8,["page-size","has-error","is-loading","empty-state","table-data","table-data-is-empty","next","onTableAction"]),!1===o.isEmpty?((0,s.wg)(),(0,s.j4)(p,{key:0,"has-error":o.hasError,"is-loading":o.isLoading,tabs:o.tabs,"initial-tab-override":"overview"},{tabHeader:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s._)("h3",null,(0,s.zw)(a.name)+": "+(0,s.zw)(o.entity.name),1)]),(0,s._)("div",null,[(0,s.Wm)(d,{name:o.entity.name,mesh:o.entity.mesh},null,8,["name","mesh"])])])),overview:(0,s.w5)((()=>[(0,s.Wm)(c,{"has-error":o.entityHasError,"is-loading":o.entityIsLoading,"is-empty":o.entityIsEmpty},{default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s._)("ul",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.entity,((e,t)=>((0,s.wg)(),(0,s.iD)("li",{key:t},[(0,s._)("h4",null,(0,s.zw)(t),1),(0,s._)("p",null,(0,s.zw)(e),1)])))),128))])])])),_:1},8,["has-error","is-loading","is-empty"])])),yaml:(0,s.w5)((()=>[(0,s.Wm)(y,{lang:"yaml","has-error":o.entityHasError,"is-loading":o.entityIsLoading,"is-empty":o.entityIsEmpty,content:o.rawEntity},null,8,["has-error","is-loading","is-empty","content"])])),_:1},8,["has-error","is-loading","tabs"])):(0,s.kq)("",!0)])),_:1})])}var o=a(53419),h=a(21180),u=a(93480),m={methods:{sortEntities(e){const t=e.sort(((e,t)=>e.name>t.name||e.name===t.name&&e.mesh>t.mesh?1:-1));return t}}},d=a(88523),c=a(82318),y=a(78141),p=a(34707),g=a(99997),v=a(52681),b=a(45689),f={name:"ServicesView",components:{EntityURLControl:u.Z,FrameSkeleton:c.Z,DataOverview:y.Z,TabsWidget:p.Z,YamlView:g.Z,LabelList:v.Z},mixins:[d.Z,m],props:{routeName:{type:String,required:!0},name:{type:String,default:""},tabHeaders:{type:Array,required:!0}},data(){return{isLoading:!0,isEmpty:!1,hasError:!1,entityIsLoading:!0,entityIsEmpty:!1,entityHasError:!1,tableDataIsEmpty:!1,empty_state:{title:"No Data",message:`There are not ${this.name} present.`},tableData:{headers:this.tabHeaders,data:[]},tabs:[{hash:"#overview",title:"Overview"},{hash:"#yaml",title:"YAML"}],entity:{},rawEntity:{},pageSize:b.NR,next:null}},computed:{formattedRawEntity(){const e=this.formatForCLI(this.rawEntity);return e}},watch:{$route(e,t){this.init()}},beforeMount(){this.init()},methods:{getAllServices(e){return"Internal Services"===this.name?h["default"].getAllServiceInsights(e):h["default"].getAllExternalServices(e)},getService(e,t,a){return"Internal Services"===this.name?h["default"].getServiceInsight({mesh:e,name:t},a):h["default"].getExternalService({mesh:e,name:t},a)},getServiceFromMesh(e){return"Internal Services"===this.name?h["default"].getAllServiceInsightsFromMesh({mesh:e}):h["default"].getAllExternalServicesFromMesh({mesh:e})},parseData(e){if("Internal Services"===this.name){const{dataplanes:t={}}=e,{online:a=0,total:s=0}=t;switch(e.totalOnline=`${a} / ${s}`,e.status){case"online":e.status=b.ku;break;case"partially_degraded":e.status=b.hP;break;case"offline":default:e.status=b.cz}return e}const{networking:t={}}=e,{tls:a={}}=t;return e.address=t.address,e.tlsEnabled=a.enabled?"Enabled":"Disabled",e},init(){this.loadData()},goToPreviousPage(){this.pageOffset=this.previous.pop(),this.next=null,this.loadData()},goToNextPage(){this.previous.push(this.pageOffset),this.pageOffset=this.next,this.next=null,this.loadData()},tableAction(e){const t=e;this.getEntity(t)},loadData(e="0"){this.isLoading=!0;const t=this.$route.params.mesh||null,a=this.$route.query.ns||null,s={size:this.pageSize,offset:e},n=()=>"all"===t?this.getAllServices(s):a&&a.length&&"all"!==t?this.getService(t,a,s):this.getServiceFromMesh(t),i=()=>n().then((e=>{const t=()=>{const t=e;return"total"in t?0!==t.total&&t.items&&t.items.length>0?this.sortEntities(t.items):null:t},s=t();if(t()){const t=a?s:s[0];this.getEntity((0,o.RV)(t)),this.tableData.data=a?[s]:s,this.next=Boolean(e.next),this.tableData.data=this.tableData.data.map(this.parseData),this.tableDataIsEmpty=!1,this.isEmpty=!1}else this.tableData.data=[],this.tableDataIsEmpty=!0,this.isEmpty=!0,this.getEntity(null)})).catch((e=>{this.hasError=!0,this.isEmpty=!0,console.error(e)})).finally((()=>{setTimeout((()=>{this.isLoading=!1}),"500")}));i()},getEntity(e){this.entityIsLoading=!0,this.entityIsEmpty=!1,this.entityHasError=!1;const t=this.$route.params.mesh;if(e&&null!==e){const a="all"===t?e.mesh:t;return this.getService(a,e.name).then((e=>{if(e){const t=["type","name","mesh"];this.entity=(0,o.wy)(e,t),this.rawEntity=(0,o.RV)(e)}else this.entity={},this.entityIsEmpty=!0})).catch((e=>{this.entityHasError=!0,console.error(e)})).finally((()=>{setTimeout((()=>{this.entityIsLoading=!1}),"500")}))}setTimeout((()=>{this.entityIsEmpty=!0,this.entityIsLoading=!1}),"500")}}},w=a(83744);const E=(0,w.Z)(f,[["render",l]]);var S=E}}]);