"use strict";(self["webpackChunkkuma_gui"]=self["webpackChunkkuma_gui"]||[]).push([[897],{88523:function(t,e,a){var s=a(73570),n=a.n(s);e["Z"]={methods:{formatForCLI(t,e='" | kumactl apply -f -'){const a='echo "',s=n()(t);return`${a}${s}${e}`}}}},17186:function(t,e,a){a.r(e),a.d(e,{default:function(){return h}});var s=a(70821);function n(t,e,a,n,i,r){const l=(0,s.up)("ServicesView");return(0,s.wg)(),(0,s.j4)(l,{"route-name":"external-services",name:"External Services","tab-headers":i.tabHeaders},null,8,["tab-headers"])}var i=a(91176),r={name:"ExternalServices",components:{ServicesView:i.Z},data(){return{tabHeaders:[{key:"actions",hideLabel:!0},{label:"Name",key:"name"},{label:"Mesh",key:"mesh"},{label:"Address",key:"address"},{label:"TLS",key:"tlsEnabled"}]}}},l=a(83744);const o=(0,l.Z)(r,[["render",n]]);var h=o},42531:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});var s=a(70821);const n={class:"gateway-dataplanes"};function i(t,e,a,i,r,l){const o=(0,s.up)("DataplanesView");return(0,s.wg)(),(0,s.iD)("div",n,[(0,s.Wm)(o,(0,s.vs)((0,s.F4)(t.$data)),null,16)])}var r=a(36736),l={name:"GatewayDataplanes",components:{DataplanesView:r.Z},data(){return{dataplaneApiParams:{gateway:!0},emptyStateMsg:"There are no Gateway data plane proxies present."}}},o=a(83744);const h=(0,o.Z)(l,[["render",i]]);var u=h},64491:function(t,e,a){a.r(e),a.d(e,{default:function(){return h}});var s=a(70821);function n(t,e,a,n,i,r){const l=(0,s.up)("ServicesView");return(0,s.wg)(),(0,s.j4)(l,{"route-name":"internal-services",name:"Internal Services","tab-headers":i.tabHeaders},null,8,["tab-headers"])}var i=a(91176),r={name:"InternalServices",components:{ServicesView:i.Z},data(){return{tabHeaders:[{key:"actions",hideLabel:!0},{label:"Status",key:"status"},{label:"Name",key:"name"},{label:"Mesh",key:"mesh"},{label:"Data plane proxies: Online / Total",key:"totalOnline"}]}}},l=a(83744);const o=(0,l.Z)(r,[["render",n]]);var h=o},91176:function(t,e,a){a.d(e,{Z:function(){return S}});var s=a(70821);const n=(0,s.Uk)(" > "),i=(0,s._)("span",{class:"custom-control-icon"}," ← ",-1),r=(0,s.Uk)(" View All ");function l(t,e,a,l,o,h){const u=(0,s.up)("KButton"),m=(0,s.up)("DataOverview"),d=(0,s.up)("EntityURLControl"),c=(0,s.up)("LabelList"),y=(0,s.up)("YamlView"),p=(0,s.up)("TabsWidget"),g=(0,s.up)("FrameSkeleton");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(g,null,{default:(0,s.w5)((()=>[(0,s.Wm)(m,{"page-size":o.pageSize,"has-error":o.hasError,"is-loading":o.isLoading,"empty-state":o.empty_state,"table-data":o.tableData,"table-data-is-empty":o.tableDataIsEmpty,next:o.next,onTableAction:h.tableAction,onLoadData:e[0]||(e[0]=t=>h.loadData(t))},{additionalControls:(0,s.w5)((()=>[t.$route.query.ns?((0,s.wg)(),(0,s.j4)(u,{key:0,class:"back-button",appearance:"primary",size:"small",to:{name:a.routeName}},{default:(0,s.w5)((()=>[i,r])),_:1},8,["to"])):(0,s.kq)("",!0)])),default:(0,s.w5)((()=>[n])),_:1},8,["page-size","has-error","is-loading","empty-state","table-data","table-data-is-empty","next","onTableAction"]),!1===o.isEmpty?((0,s.wg)(),(0,s.j4)(p,{key:0,"has-error":o.hasError,"is-loading":o.isLoading,tabs:o.tabs,"initial-tab-override":"overview"},{tabHeader:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s._)("h3",null,(0,s.zw)(a.name)+": "+(0,s.zw)(o.entity.name),1)]),(0,s._)("div",null,[(0,s.Wm)(d,{name:o.entity.name,mesh:o.entity.mesh},null,8,["name","mesh"])])])),overview:(0,s.w5)((()=>[(0,s.Wm)(c,{"has-error":o.entityHasError,"is-loading":o.entityIsLoading,"is-empty":o.entityIsEmpty},{default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s._)("ul",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.entity,((t,e)=>((0,s.wg)(),(0,s.iD)("li",{key:e},[(0,s._)("h4",null,(0,s.zw)(e),1),(0,s._)("p",null,(0,s.zw)(t),1)])))),128))])])])),_:1},8,["has-error","is-loading","is-empty"])])),yaml:(0,s.w5)((()=>[(0,s.Wm)(y,{lang:"yaml","has-error":o.entityHasError,"is-loading":o.entityIsLoading,"is-empty":o.entityIsEmpty,content:o.rawEntity},null,8,["has-error","is-loading","is-empty","content"])])),_:1},8,["has-error","is-loading","tabs"])):(0,s.kq)("",!0)])),_:1})])}var o=a(53419),h=a(21180),u=a(93480),m={methods:{sortEntities(t){const e=t.sort(((t,e)=>t.name>e.name||t.name===e.name&&t.mesh>e.mesh?1:-1));return e}}},d=a(88523),c=a(82318),y=a(59713),p=a(18574),g=a(99997),v=a(52681),b=a(45689),f={name:"ServicesView",components:{EntityURLControl:u.Z,FrameSkeleton:c.Z,DataOverview:y.Z,TabsWidget:p.Z,YamlView:g.Z,LabelList:v.Z},mixins:[d.Z,m],props:{routeName:{type:String,required:!0},name:{type:String,default:""},tabHeaders:{type:Array,required:!0}},data(){return{isLoading:!0,isEmpty:!1,hasError:!1,entityIsLoading:!0,entityIsEmpty:!1,entityHasError:!1,tableDataIsEmpty:!1,empty_state:{title:"No Data",message:`There are not ${this.name} present.`},tableData:{headers:this.tabHeaders,data:[]},tabs:[{hash:"#overview",title:"Overview"},{hash:"#yaml",title:"YAML"}],entity:{},rawEntity:{},pageSize:b.NR,next:null}},computed:{formattedRawEntity(){const t=this.formatForCLI(this.rawEntity);return t}},watch:{$route(){this.isLoading=!0,this.isEmpty=!1,this.hasError=!1,this.entityIsLoading=!0,this.entityIsEmpty=!1,this.entityHasError=!1,this.tableDataIsEmpty=!1,this.init()}},beforeMount(){this.init()},methods:{getAllServices(t){return"Internal Services"===this.name?h["default"].getAllServiceInsights(t):h["default"].getAllExternalServices(t)},getService(t,e,a){return"Internal Services"===this.name?h["default"].getServiceInsight({mesh:t,name:e},a):h["default"].getExternalService({mesh:t,name:e},a)},getServiceFromMesh(t){return"Internal Services"===this.name?h["default"].getAllServiceInsightsFromMesh({mesh:t}):h["default"].getAllExternalServicesFromMesh({mesh:t})},parseData(t){if("Internal Services"===this.name){const{dataplanes:e={}}=t,{online:a=0,total:s=0}=e;switch(t.totalOnline=`${a} / ${s}`,t.status){case"online":t.status=b.ku;break;case"partially_degraded":t.status=b.hP;break;case"offline":default:t.status=b.cz}return t}const{networking:e={}}=t,{tls:a={}}=e;return t.address=e.address,t.tlsEnabled=a.enabled?"Enabled":"Disabled",t},init(){this.loadData()},goToPreviousPage(){this.pageOffset=this.previous.pop(),this.next=null,this.loadData()},goToNextPage(){this.previous.push(this.pageOffset),this.pageOffset=this.next,this.next=null,this.loadData()},tableAction(t){const e=t;this.getEntity(e)},loadData(t="0"){this.isLoading=!0;const e=this.$route.params.mesh||null,a=this.$route.query.ns||null,s={size:this.pageSize,offset:t},n=()=>"all"===e?this.getAllServices(s):a&&a.length&&"all"!==e?this.getService(e,a,s):this.getServiceFromMesh(e),i=()=>n().then((t=>{const e=()=>{const e=t;return"total"in e?0!==e.total&&e.items&&e.items.length>0?this.sortEntities(e.items):null:e},s=e();if(e()){const e=a?s:s[0];this.getEntity((0,o.RV)(e)),this.tableData.data=a?[s]:s,this.next=Boolean(t.next),this.tableData.data=this.tableData.data.map(this.parseData),this.tableDataIsEmpty=!1,this.isEmpty=!1}else this.tableData.data=[],this.tableDataIsEmpty=!0,this.isEmpty=!0,this.getEntity(null)})).catch((t=>{this.hasError=!0,this.isEmpty=!0,console.error(t)})).finally((()=>{setTimeout((()=>{this.isLoading=!1}),"500")}));i()},getEntity(t){this.entityIsLoading=!0,this.entityIsEmpty=!1,this.entityHasError=!1;const e=this.$route.params.mesh;if(t&&null!==t){const a="all"===e?t.mesh:e;return this.getService(a,t.name).then((t=>{if(t){const e=["type","name","mesh"];this.entity=(0,o.wy)(t,e),this.rawEntity=(0,o.RV)(t)}else this.entity={},this.entityIsEmpty=!0})).catch((t=>{this.entityHasError=!0,console.error(t)})).finally((()=>{setTimeout((()=>{this.entityIsLoading=!1}),"500")}))}setTimeout((()=>{this.entityIsEmpty=!0,this.entityIsLoading=!1}),"500")}}},w=a(83744);const E=(0,w.Z)(f,[["render",l]]);var S=E}}]);