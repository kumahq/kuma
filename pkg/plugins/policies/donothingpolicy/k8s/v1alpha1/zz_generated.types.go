// Generated by tools/resource-gen
// Run "make generate" to update this file.

// nolint:whitespace
package v1alpha1

import (
	"fmt"

	"github.com/golang/protobuf/proto"
	metav1 "k8s.io/apimachinery/pkg/apis/meta/v1"

	"github.com/kumahq/kuma/pkg/plugins/policies/donothingpolicy/api/v1alpha1"
	"github.com/kumahq/kuma/pkg/plugins/resources/k8s/native/pkg/model"
	"github.com/kumahq/kuma/pkg/plugins/resources/k8s/native/pkg/registry"
)

// +kubebuilder:object:root=true
// +kubebuilder:resource:scope=Cluster
type DoNothingPolicy struct {
	metav1.TypeMeta   `json:",inline"`
	metav1.ObjectMeta `json:"metadata,omitempty"`

	// Mesh is the name of the Kuma mesh this resource belongs to.
	// It may be omitted for cluster-scoped resources.
	//
	// +kubebuilder:validation:Optional
	Mesh string `json:"mesh,omitempty"`
	// Spec is the specification of the Kuma DoNothingPolicy resource.
	// +kubebuilder:validation:Optional
	Spec *v1alpha1.DoNothingPolicy `json:"spec,omitempty"`
}

// +kubebuilder:object:root=true
// +kubebuilder:resource:scope=Namespaced
type DoNothingPolicyList struct {
	metav1.TypeMeta `json:",inline"`
	metav1.ListMeta `json:"metadata,omitempty"`
	Items           []DoNothingPolicy `json:"items"`
}

func init() {
	SchemeBuilder.Register(&DoNothingPolicy{}, &DoNothingPolicyList{})
}

func (cb *DoNothingPolicy) GetObjectMeta() *metav1.ObjectMeta {
	return &cb.ObjectMeta
}

func (cb *DoNothingPolicy) SetObjectMeta(m *metav1.ObjectMeta) {
	cb.ObjectMeta = *m
}

func (cb *DoNothingPolicy) GetMesh() string {
	return cb.Mesh
}

func (cb *DoNothingPolicy) SetMesh(mesh string) {
	cb.Mesh = mesh
}

func (cb *DoNothingPolicy) GetSpec() proto.Message {
	return cb.Spec
}

func (cb *DoNothingPolicy) SetSpec(spec proto.Message) {
	if spec == nil {
		cb.Spec = nil
		return
	}

	if _, ok := spec.(*v1alpha1.DoNothingPolicy); !ok {
		panic(fmt.Sprintf("unexpected protobuf message type %T", spec))
	}

	cb.Spec = spec.(*v1alpha1.DoNothingPolicy)
}

func (cb *DoNothingPolicy) Scope() model.Scope {
	return model.ScopeCluster
}

func (l *DoNothingPolicyList) GetItems() []model.KubernetesObject {
	result := make([]model.KubernetesObject, len(l.Items))
	for i := range l.Items {
		result[i] = &l.Items[i]
	}
	return result
}

func init() {
	registry.RegisterObjectType(&v1alpha1.DoNothingPolicy{}, &DoNothingPolicy{
		TypeMeta: metav1.TypeMeta{
			APIVersion: GroupVersion.String(),
			Kind:       "DoNothingPolicy",
		},
	})
	registry.RegisterListType(&v1alpha1.DoNothingPolicy{}, &DoNothingPolicyList{
		TypeMeta: metav1.TypeMeta{
			APIVersion: GroupVersion.String(),
			Kind:       "DoNothingPolicyList",
		},
	})
}
