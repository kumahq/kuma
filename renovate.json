{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": [
    ":configMigration",
    "customManagers:makefileVersions",
    "Kong/public-shared-renovate:backend",
    "kumahq/kuma//.renovate/go-control-plane",
    "kumahq/kuma//.renovate/mise",
    "kumahq/kuma//.renovate/security"
  ],
  "enabledManagers": [
    "custom.regex",
    "dockerfile",
    "github-actions",
    "gomod",
    "helm-values",
    "kubernetes",
    "mise"
  ],
  "ignorePaths": [],
  "kubernetes": {
    "description": [
      " Update container image tags in Kubernetes manifests installed via",
      " 'kumactl install demo|observability'. Limits matching to the generated YAML under",
      " app/kumactl/data/install/k8s/"
    ],
    "managerFilePatterns": ["/app/kumactl/data/install/k8s/.+\\.ya?ml$/"]
  },
  "packageRules": [
    {
      "description": [
        " Apply the local GitHub Actions preset for updates managed by the built-in github-actions",
        " manager. This standardizes PR content and labels these PRs so our CI can skip the full",
        " test matrix and changelog generation"
      ],
      "matchManagers": ["github-actions"],
      "extends": ["kumahq/kuma//.renovate/github-actions"]
    },
    {
      "description": [
        " Apply the same GitHub Actions preset to updates for 'Kong/public-shared-actions/**'",
        " that are discovered by our custom regex manager. Ensures consistent PR formatting",
        " and CI behavior even when actions are parsed via regex"
      ],
      "matchManagers": ["regex"],
      "matchPackageNames": ["Kong/public-shared-actions/**"],
      "extends": ["kumahq/kuma//.renovate/github-actions"]
    },
    {
      "description": [
        " Group related container image updates in the 'kumactl install demo|observability'",
        " Kubernetes manifests so they land in a single PR"
      ],
      "groupName": "kumactl install demo|observability container images",
      "groupSlug": "kumactl-install-k8s",
      "matchFileNames": ["app/kumactl/data/install/k8s/**"]
    },
    {
      "description": [
        " Change the commit message topic to 'envoy' for 'kumahq/envoy-builds'. These are",
        " Kuma-maintained builds of released Envoy versions and are handled by the Makefile",
        " regex manager. Using 'envoy' as the topic makes PR titles clearer"
      ],
      "matchDepNames": ["kumahq/envoy-builds"],
      "commitMessageTopic": "envoy"
    },
    {
      "description": [
        " Disable pinning for 'kumahq/openapi-tool'. Pinning this tool to a specific commit or",
        " version is not supported in our current setup and consistently fails, so we skip 'pin'",
        " and 'pinDigest' updates for it. Managed by the Makefile regex manager"
      ],
      "matchManagers": ["regex"],
      "matchDepNames": ["kumahq/openapi-tool"],
      "matchUpdateTypes": ["pin", "pinDigest"],
      "enabled": false
    }
  ]
}
