{
  "title": "Envoy - Overview (copy)",
  "description": "## Envoy\n\nThis dashboard provides a high-level overview of your Envoy cluster so you can monitor its performance and resource usage.\n\nFor further reading on monitoring Envoy, see:\n\n- [Datadog Envoy integration docs](https://docs.datadoghq.com/integrations/envoy/)\n- [Monitoring AWS App Mesh and Envoy with Datadog](https://www.datadoghq.com/blog/envoy-app-mesh-monitoring/)\n\nClone this template to make changes and add your own graphs and widgets. (cloned)",
  "widgets": [
    {
      "id": 2469678217434246,
      "definition": {
        "title": "About Envoy",
        "title_align": "left",
        "banner_img": "/static/images/integration_dashboard/envoy_hero_1.png",
        "show_title": false,
        "type": "group",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 8803181340356126,
            "definition": {
              "type": "note",
              "content": "This dashboard provides a high-level overview of your Envoy deployment so you can quickly identify downstream and upstream errors and rejections.\n",
              "background_color": "transparent",
              "font_size": "14",
              "text_align": "left",
              "show_tick": false,
              "tick_pos": "50%",
              "tick_edge": "left"
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 4,
              "height": 2
            }
          },
          {
            "id": 6583474077558724,
            "definition": {
              "type": "note",
              "content": "**Refer to the following resources for more information**\n\n- [Datadog Envoy documentation](https://www.envoyproxy.io/docs/envoy/latest/)\n\n- [Available Envoy metrics](https://docs.datadoghq.com/integrations/envoy/?tab=host#data-collected) \n\n- [How to monitor Envoy using AWS App Mesh](https://www.datadoghq.com/blog/envoy-app-mesh-monitoring/)",
              "background_color": "transparent",
              "font_size": "12",
              "text_align": "left",
              "show_tick": false,
              "tick_pos": "50%",
              "tick_edge": "left"
            },
            "layout": {
              "x": 4,
              "y": 0,
              "width": 4,
              "height": 2
            }
          }
        ]
      },
      "layout": {
        "x": 0,
        "y": 0,
        "width": 8,
        "height": 5
      }
    },
    {
      "id": 1783340964874598,
      "definition": {
        "title": "Overview",
        "background_color": "pink",
        "show_title": true,
        "type": "group",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 6079077549151020,
            "definition": {
              "title": "Incoming Success Rate (non-5xx responses)",
              "title_size": "16",
              "title_align": "left",
              "type": "query_value",
              "requests": [
                {
                  "formulas": [
                    {
                      "alias": "2xx",
                      "formula": "(1 - query1 / query2) * 100"
                    }
                  ],
                  "conditional_formats": [
                    {
                      "comparator": ">=",
                      "palette": "white_on_green",
                      "value": 0.95
                    },
                    {
                      "comparator": "<",
                      "palette": "white_on_yellow",
                      "value": 0.95
                    }
                  ],
                  "response_format": "scalar",
                  "queries": [
                    {
                      "query": "sum:envoy.cluster.upstream_rq_5xx{$envoy_cluster,$listener,$release}.as_count()",
                      "data_source": "metrics",
                      "name": "query1",
                      "aggregator": "avg"
                    },
                    {
                      "query": "sum:envoy.cluster.upstream_rq_completed{$envoy_cluster,$listener,$release}.as_count()",
                      "data_source": "metrics",
                      "name": "query2",
                      "aggregator": "avg"
                    }
                  ]
                }
              ],
              "autoscale": true,
              "custom_unit": "%",
              "precision": 2
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 2,
              "height": 1
            }
          },
          {
            "id": 8008492131546334,
            "definition": {
              "title": "Incoming Requests Volume",
              "title_size": "16",
              "title_align": "left",
              "type": "query_value",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query1 + query3 + query2 + query4"
                    }
                  ],
                  "response_format": "scalar",
                  "queries": [
                    {
                      "query": "sum:envoy.cluster.upstream_rq_2xx{$envoy_cluster,$listener,$release}.as_count()",
                      "data_source": "metrics",
                      "name": "query1",
                      "aggregator": "avg"
                    },
                    {
                      "query": "sum:envoy.cluster.upstream_rq_3xx{$envoy_cluster,$listener,$release}.as_count()",
                      "data_source": "metrics",
                      "name": "query3",
                      "aggregator": "avg"
                    },
                    {
                      "query": "sum:envoy.cluster.upstream_rq_4xx{$envoy_cluster,$listener,$release}.as_count()",
                      "data_source": "metrics",
                      "name": "query2",
                      "aggregator": "avg"
                    },
                    {
                      "query": "sum:envoy.cluster.upstream_rq_5xx{$envoy_cluster,$listener,$release}.as_count()",
                      "data_source": "metrics",
                      "name": "query4",
                      "aggregator": "avg"
                    }
                  ]
                }
              ],
              "autoscale": true,
              "precision": 2
            },
            "layout": {
              "x": 2,
              "y": 0,
              "width": 2,
              "height": 1
            }
          },
          {
            "id": 7959120365359748,
            "definition": {
              "title": "Incoming Requests by Release",
              "title_size": "16",
              "title_align": "left",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query4"
                    }
                  ],
                  "response_format": "scalar",
                  "queries": [
                    {
                      "query": "sum:envoy.cluster.upstream_rq_total{$envoy_cluster,$listener,$release}.as_count()",
                      "data_source": "metrics",
                      "name": "query4",
                      "aggregator": "avg"
                    }
                  ]
                }
              ],
              "type": "sunburst"
            },
            "layout": {
              "x": 0,
              "y": 1,
              "width": 4,
              "height": 3
            }
          }
        ]
      },
      "layout": {
        "x": 8,
        "y": 0,
        "width": 4,
        "height": 5
      }
    },
    {
      "id": 3684307880536090,
      "definition": {
        "title": "Upstream Clusters",
        "background_color": "vivid_purple",
        "show_title": true,
        "type": "group",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 3911328006359958,
            "definition": {
              "title": "Upstream Response Codes (% breakdown)",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "horizontal",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "alias": "2xx",
                      "formula": "query1 / query2 * 100"
                    },
                    {
                      "alias": "3xx",
                      "formula": "query3 / query2 * 100"
                    },
                    {
                      "alias": "4xx",
                      "formula": "query4 / query2 * 100"
                    },
                    {
                      "alias": "5xx",
                      "formula": "query5 / query2 * 100"
                    }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "sum:envoy.cluster.upstream_rq_2xx{$envoy_cluster,$listener,$release}.as_count()",
                      "data_source": "metrics",
                      "name": "query1"
                    },
                    {
                      "query": "sum:envoy.cluster.upstream_rq_completed{$envoy_cluster,$listener,$release}.as_count()",
                      "data_source": "metrics",
                      "name": "query2"
                    },
                    {
                      "query": "sum:envoy.cluster.upstream_rq_3xx{$envoy_cluster,$listener,$release}.as_count()",
                      "data_source": "metrics",
                      "name": "query3"
                    },
                    {
                      "query": "sum:envoy.cluster.upstream_rq_4xx{$envoy_cluster,$listener,$release}.as_count()",
                      "data_source": "metrics",
                      "name": "query4"
                    },
                    {
                      "query": "sum:envoy.cluster.upstream_rq_5xx{$envoy_cluster,$listener,$release}.as_count()",
                      "data_source": "metrics",
                      "name": "query5"
                    }
                  ],
                  "style": {
                    "palette": "warm",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "bars"
                }
              ],
              "yaxis": {
                "include_zero": true,
                "scale": "linear",
                "label": "",
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 8,
              "height": 3
            }
          },
          {
            "id": 3748025168013652,
            "definition": {
              "title": "Upstream Response Codes (Total Count Breakdown)",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "horizontal",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "alias": "2xx",
                      "formula": "query1"
                    },
                    {
                      "alias": "3xx",
                      "formula": "query3"
                    },
                    {
                      "alias": "5xx",
                      "formula": "query2"
                    },
                    {
                      "alias": "4xx",
                      "formula": "query4"
                    }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "sum:envoy.cluster.upstream_rq_2xx{$envoy_cluster,$listener,$release}.as_count()",
                      "data_source": "metrics",
                      "name": "query1"
                    },
                    {
                      "query": "sum:envoy.cluster.upstream_rq_3xx{$envoy_cluster,$listener,$release}.as_count()",
                      "data_source": "metrics",
                      "name": "query3"
                    },
                    {
                      "query": "sum:envoy.cluster.upstream_rq_5xx{$envoy_cluster,$listener,$release}.as_count()",
                      "data_source": "metrics",
                      "name": "query2"
                    },
                    {
                      "query": "sum:envoy.cluster.upstream_rq_4xx{$envoy_cluster,$listener,$release}.as_count()",
                      "data_source": "metrics",
                      "name": "query4"
                    }
                  ],
                  "style": {
                    "palette": "warm",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "bars"
                }
              ],
              "yaxis": {
                "include_zero": true,
                "scale": "linear",
                "label": "",
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": {
              "x": 0,
              "y": 3,
              "width": 8,
              "height": 3
            }
          },
          {
            "id": 4743777231988956,
            "definition": {
              "type": "note",
              "content": "Monitor the response times to identify latency issues before your customers are substantially impacted. \n\nConsider [creating alerts](https://www.datadoghq.com/blog/introducing-recovery-thresholds/) when your p95 response times pass acceptable thresholds.",
              "background_color": "orange",
              "font_size": "14",
              "text_align": "left",
              "vertical_align": "center",
              "show_tick": true,
              "tick_pos": "50%",
              "tick_edge": "right",
              "has_padding": true
            },
            "layout": {
              "x": 0,
              "y": 6,
              "width": 2,
              "height": 3
            }
          },
          {
            "id": 8526626981392194,
            "definition": {
              "title": "Upstream p99 Response Time",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "vertical",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query1"
                    }
                  ],
                  "response_format": "timeseries",
                  "queries": [
                    {
                      "query": "avg:envoy.cluster.upstream_rq_time.99percentile{$envoy_cluster,$listener,$release}",
                      "data_source": "metrics",
                      "name": "query1"
                    }
                  ],
                  "style": {
                    "palette": "dog_classic",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ],
              "yaxis": {
                "include_zero": true,
                "scale": "linear",
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": {
              "x": 2,
              "y": 6,
              "width": 6,
              "height": 3
            }
          },
          {
            "id": 8166695746340130,
            "definition": {
              "title": "Average Upstream Traffic Rate",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "vertical",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query1"
                    }
                  ],
                  "response_format": "timeseries",
                  "queries": [
                    {
                      "query": "avg:envoy.cluster.upstream_rq_total{$envoy_cluster,$listener,$release}.as_rate()",
                      "data_source": "metrics",
                      "name": "query1"
                    }
                  ],
                  "style": {
                    "palette": "dog_classic",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ],
              "yaxis": {
                "include_zero": true,
                "scale": "linear",
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": {
              "x": 0,
              "y": 9,
              "width": 8,
              "height": 3
            }
          },
          {
            "id": 8582025331671068,
            "definition": {
              "title": "Cluster Load Balancer Panics",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "auto",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "alias": "total_requests",
                      "formula": "query1"
                    }
                  ],
                  "response_format": "timeseries",
                  "queries": [
                    {
                      "query": "avg:envoy.cluster.lb_healthy_panic{$envoy_cluster,$listener,$release}.as_count()",
                      "data_source": "metrics",
                      "name": "query1"
                    }
                  ],
                  "style": {
                    "palette": "warm",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ],
              "yaxis": {
                "include_zero": true,
                "scale": "linear",
                "label": "",
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": {
              "x": 0,
              "y": 12,
              "width": 5,
              "height": 3
            }
          },
          {
            "id": 6140256689199842,
            "definition": {
              "type": "note",
              "content": "**Cluster load balancer (lb) panics** refer to how many times the proxy is ignoring the health check restrictions because there are not enough healthy upstreams. \n\nIt's helpful to see when Envoy is redirecting to unhealthy upstreams, which should not happen normally. It's also useful to see when health checks are not properly set up. Cluster panics should always be 0.",
              "background_color": "orange",
              "font_size": "14",
              "text_align": "left",
              "vertical_align": "center",
              "show_tick": true,
              "tick_pos": "50%",
              "tick_edge": "left",
              "has_padding": true
            },
            "layout": {
              "x": 5,
              "y": 12,
              "width": 3,
              "height": 3
            }
          }
        ]
      },
      "layout": {
        "x": 0,
        "y": 0,
        "width": 8,
        "height": 16
      }
    },
    {
      "id": 2779213978520494,
      "definition": {
        "title": "Pod statistics",
        "background_color": "purple",
        "show_title": true,
        "type": "group",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 728848402879588,
            "definition": {
              "title": "CPU Usage Average % by Release",
              "show_legend": true,
              "legend_layout": "auto",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query1 / query2 / 10000000"
                    }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "max:kubernetes.cpu.usage.total{$envoy_cluster,$listener,$release}",
                      "data_source": "metrics",
                      "name": "query1"
                    },
                    {
                      "query": "max:kubernetes.cpu.limits{$envoy_cluster,$listener,$release}",
                      "data_source": "metrics",
                      "name": "query2"
                    }
                  ],
                  "style": {
                    "palette": "dog_classic",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ],
              "yaxis": {
                "include_zero": true,
                "scale": "linear",
                "label": "",
                "min": "auto",
                "max": "auto"
              },
              "markers": [
                {
                  "label": "CPU is the bottleneck",
                  "value": "y > 75",
                  "display_type": "error dashed"
                },
                {
                  "label": "Time to upscale",
                  "value": "50 < y < 75",
                  "display_type": "warning dashed"
                },
                {
                  "label": "Time to downscale",
                  "value": "y < 20",
                  "display_type": "info dashed"
                }
              ]
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 4,
              "height": 3
            }
          },
          {
            "id": 5777007512003854,
            "definition": {
              "title": "Memory Usage %",
              "show_legend": true,
              "legend_layout": "auto",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query1 / query2 * 100"
                    }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "max:kubernetes.memory.usage{$envoy_cluster,$listener,$release}",
                      "data_source": "metrics",
                      "name": "query1"
                    },
                    {
                      "query": "avg:kubernetes.memory.limits{$envoy_cluster,$listener,$release}",
                      "data_source": "metrics",
                      "name": "query2"
                    }
                  ],
                  "style": {
                    "palette": "dog_classic",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ],
              "yaxis": {
                "include_zero": true,
                "scale": "linear",
                "label": "",
                "min": "auto",
                "max": "auto"
              },
              "markers": [
                {
                  "value": "y > 100",
                  "display_type": "error dashed"
                },
                {
                  "value": "80 < y < 100",
                  "display_type": "warning dashed"
                }
              ]
            },
            "layout": {
              "x": 0,
              "y": 3,
              "width": 4,
              "height": 3
            }
          },
          {
            "id": 6604562097761210,
            "definition": {
              "title": "Running Containers by Version and Cluster",
              "show_legend": true,
              "legend_layout": "auto",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query1"
                    }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "sum:kubernetes.containers.running{$envoy_cluster,$listener,$release}.as_count().fill(null)",
                      "data_source": "metrics",
                      "name": "query1"
                    }
                  ],
                  "style": {
                    "palette": "dog_classic",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "bars"
                }
              ],
              "yaxis": {
                "include_zero": true,
                "scale": "linear",
                "label": "",
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": {
              "x": 0,
              "y": 6,
              "width": 4,
              "height": 3
            }
          }
        ]
      },
      "layout": {
        "x": 8,
        "y": 0,
        "width": 4,
        "height": 10
      }
    },
    {
      "id": 7497762923700564,
      "definition": {
        "title": "Listeners",
        "background_color": "vivid_purple",
        "show_title": true,
        "type": "group",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 6834680793364994,
            "definition": {
              "title": "Listeners Success Rate (excluding Admin Interface)",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "auto",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "alias": "Success",
                      "formula": "(query3 + query1 + query6) / query2 * 100"
                    }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "sum:envoy.listener.http.downstream_rq_3xx{$envoy_cluster,$listener,$release}.as_count()",
                      "data_source": "metrics",
                      "name": "query3"
                    },
                    {
                      "query": "sum:envoy.listener.http.downstream_rq_2xx{$envoy_cluster,$listener,$release}.as_count()",
                      "data_source": "metrics",
                      "name": "query1"
                    },
                    {
                      "query": "sum:envoy.listener.http.downstream_rq_1xx{$envoy_cluster,$listener,$release}.as_count()",
                      "data_source": "metrics",
                      "name": "query6"
                    },
                    {
                      "query": "sum:envoy.listener.http.downstream_rq_completed{$envoy_cluster,$listener,$release}.as_count()",
                      "data_source": "metrics",
                      "name": "query2"
                    },
                    {
                      "query": "sum:envoy.listener.http.downstream_rq_4xx{$envoy_cluster,$listener,$release}.as_count()",
                      "data_source": "metrics",
                      "name": "query4"
                    },
                    {
                      "query": "sum:envoy.listener.http.downstream_rq_5xx{$envoy_cluster,$listener,$release}.as_count()",
                      "data_source": "metrics",
                      "name": "query5"
                    }
                  ],
                  "style": {
                    "palette": "warm",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ],
              "yaxis": {
                "min": "0",
                "max": "100"
              },
              "markers": []
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 4,
              "height": 2
            }
          },
          {
            "id": 2949219819723468,
            "definition": {
              "title": "Listeners Response Time Percentiles",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "auto",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "alias": "p50",
                      "formula": "query"
                    },
                    {
                      "alias": "p25",
                      "formula": "query1"
                    },
                    {
                      "alias": "p90",
                      "formula": "query2"
                    }
                  ],
                  "response_format": "timeseries",
                  "queries": [
                    {
                      "query": "avg:envoy.http.downstream_rq_time.50percentile{$envoy_cluster,$listener,$release}",
                      "data_source": "metrics",
                      "name": "query"
                    },
                    {
                      "query": "avg:envoy.http.downstream_rq_time.25percentile{$envoy_cluster,$listener,$release}",
                      "data_source": "metrics",
                      "name": "query1"
                    },
                    {
                      "query": "avg:envoy.http.downstream_rq_time.90percentile{$envoy_cluster,$listener,$release}",
                      "data_source": "metrics",
                      "name": "query2"
                    }
                  ],
                  "style": {
                    "palette": "dog_classic",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ],
              "yaxis": {
                "include_zero": true,
                "scale": "linear",
                "label": "",
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": {
              "x": 0,
              "y": 2,
              "width": 4,
              "height": 3
            }
          }
        ]
      },
      "layout": {
        "x": 8,
        "y": 10,
        "width": 4,
        "height": 6
      }
    },
    {
      "id": 6735586572768258,
      "definition": {
        "title": "Overview",
        "background_color": "purple",
        "show_title": true,
        "type": "group",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 5856985560949164,
            "definition": {
              "title": "Listener Traffic",
              "title_size": "16",
              "title_align": "left",
              "show_legend": false,
              "legend_layout": "vertical",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "alias": "total_requests",
                      "formula": "query1"
                    }
                  ],
                  "response_format": "timeseries",
                  "queries": [
                    {
                      "query": "sum:envoy.listener.http.downstream_rq_completed{$envoy_cluster,$listener,$release}.as_rate()",
                      "data_source": "metrics",
                      "name": "query1"
                    },
                    {
                      "query": "sum:envoy.http.downstream_cx_tx_bytes_total{$envoy_cluster,$listener,$release}.as_rate()",
                      "data_source": "metrics",
                      "name": "query2"
                    }
                  ],
                  "style": {
                    "palette": "dog_classic",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ],
              "yaxis": {
                "include_zero": true,
                "scale": "linear",
                "label": "",
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 6,
              "height": 3
            }
          },
          {
            "id": 3099014382844336,
            "definition": {
              "title": "Requests Rejected by Reason",
              "show_legend": true,
              "legend_layout": "auto",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "alias": "No matching route",
                      "formula": "query1"
                    },
                    {
                      "alias": "No matching cluster",
                      "formula": "query2"
                    },
                    {
                      "alias": "Protocol error",
                      "formula": "query3"
                    }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "avg:envoy.http.no_route{$envoy_cluster,$listener,$release}.as_count()",
                      "data_source": "metrics",
                      "name": "query1"
                    },
                    {
                      "query": "avg:envoy.http.no_cluster{$envoy_cluster,$listener,$release}",
                      "data_source": "metrics",
                      "name": "query2"
                    },
                    {
                      "query": "avg:envoy.http.downstream_cx_protocol_error{$envoy_cluster,$listener,$release}",
                      "data_source": "metrics",
                      "name": "query3"
                    }
                  ],
                  "style": {
                    "palette": "warm"
                  },
                  "display_type": "line"
                }
              ],
              "yaxis": {
                "include_zero": true,
                "scale": "linear",
                "label": "",
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": {
              "x": 0,
              "y": 3,
              "width": 4,
              "height": 2
            }
          },
          {
            "id": 6137726645487440,
            "definition": {
              "type": "note",
              "content": "**Request rejected by reason**\n\nThis graph highlights the top reasons your Envoy requests were rejected based on the `no_route`, `no_cluster` and `cx_protocol_error` metrics. ",
              "background_color": "blue",
              "font_size": "14",
              "text_align": "left",
              "vertical_align": "center",
              "show_tick": true,
              "tick_pos": "50%",
              "tick_edge": "left",
              "has_padding": true
            },
            "layout": {
              "x": 4,
              "y": 3,
              "width": 2,
              "height": 2
            }
          },
          {
            "id": 524226509076760,
            "definition": {
              "title": "Active Connections per Type and Listener",
              "show_legend": true,
              "legend_layout": "auto",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "alias": "All",
                      "formula": "query"
                    },
                    {
                      "alias": "Http2",
                      "formula": "query3"
                    },
                    {
                      "alias": "Http1.1",
                      "formula": "query4"
                    }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "avg:envoy.http.downstream_cx_active{$envoy_cluster,$listener,$release}",
                      "data_source": "metrics",
                      "name": "query"
                    },
                    {
                      "query": "avg:envoy.http.downstream_cx_http2_active{$envoy_cluster,$listener,$release}",
                      "data_source": "metrics",
                      "name": "query3"
                    },
                    {
                      "query": "avg:envoy.http.downstream_cx_http1_active{$envoy_cluster,$listener,$release}",
                      "data_source": "metrics",
                      "name": "query4"
                    }
                  ],
                  "style": {
                    "palette": "dog_classic",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ],
              "yaxis": {
                "include_zero": true,
                "scale": "linear",
                "label": "",
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": {
              "x": 0,
              "y": 5,
              "width": 6,
              "height": 3
            }
          }
        ]
      },
      "layout": {
        "x": 0,
        "y": 0,
        "width": 6,
        "height": 9,
        "is_column_break": true
      }
    },
    {
      "id": 8491481107946150,
      "definition": {
        "title": "Logs",
        "background_color": "vivid_green",
        "show_title": true,
        "type": "group",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 2980541100727590,
            "definition": {
              "title": "Envoy Logs",
              "title_size": "16",
              "title_align": "left",
              "requests": [
                {
                  "response_format": "event_list",
                  "query": {
                    "data_source": "logs_stream",
                    "query_string": "source:envoy",
                    "indexes": [],
                    "storage": "hot",
                    "sort": {
                      "order": "desc",
                      "column": "timestamp"
                    }
                  },
                  "columns": [
                    {
                      "field": "status_line",
                      "width": "auto"
                    },
                    {
                      "field": "timestamp",
                      "width": "auto"
                    },
                    {
                      "field": "host",
                      "width": "auto"
                    },
                    {
                      "field": "@service",
                      "width": "auto"
                    },
                    {
                      "field": "content",
                      "width": "compact"
                    }
                  ]
                }
              ],
              "type": "list_stream"
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 6,
              "height": 8
            }
          }
        ]
      },
      "layout": {
        "x": 6,
        "y": 0,
        "width": 6,
        "height": 9
      }
    }
  ],
  "template_variables": [
    {
      "name": "envoy_cluster",
      "prefix": "envoy_cluster",
      "available_values": [],
      "default": "*"
    },
    {
      "name": "release",
      "prefix": "release",
      "available_values": [],
      "default": "*"
    },
    {
      "name": "listener",
      "prefix": "listener",
      "available_values": [],
      "default": "*"
    }
  ],
  "layout_type": "ordered",
  "notify_list": [],
  "reflow_type": "fixed"
}
