schemaVersion: 2.0.0

fileExistenceTests:
- name: "/usr/bin/kumactl"
  path: /usr/bin/kumactl
  shouldExist: true
  isExecutableBy: any

commandTests:
- name: "Is kumactl binary in PATH"
  command: which
  args: ["kumactl"]
  expectedOutput: ["/.*/kumactl"]
- name: "Contains iptables (legacy)"
  command: iptables
  args: ["--version"]
  expectedOutput: ["iptables v.*(legacy)"]

licenseTests:
- debian: false
  files: ["/kuma/LICENSE"]

metadataTest:
  entrypoint: ["/usr/bin/kumactl"]
  cmd: ["install", "transparent-proxy"]
