name: Generate Provenance
on:
  workflow_call:
    inputs:
      binary_artifacts_hashes_as_file:
        required: true
        type: string
        description: file containing hash for all compressed binary artifacts
permissions:
  contents: read
jobs:
  artifact-provenance:
    uses: slsa-framework/slsa-github-generator/.github/workflows/generator_generic_slsa3.yml@v1.9.0
    with:
      base64-subjects: ${{ inputs.binary_artifacts_hashes_as_file }}
      upload-assets: ${{ github.ref_type == 'tag' }}
      upload-tag-name: ${{ github.ref_name }}
      continue-on-error: true
